var t$=Object.create;var r2=Object.defineProperty,n$=Object.defineProperties,r$=Object.getOwnPropertyDescriptor,i$=Object.getOwnPropertyDescriptors,o$=Object.getOwnPropertyNames,vy=Object.getOwnPropertySymbols,UO=Object.getPrototypeOf,i2=Object.prototype.hasOwnProperty,jO=Object.prototype.propertyIsEnumerable,s$=Reflect.get;var BO=(n,t,e)=>t in n?r2(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ie=(n,t)=>{for(var e in t||={})i2.call(t,e)&&BO(n,e,t[e]);if(vy)for(var e of vy(t))jO.call(t,e)&&BO(n,e,t[e]);return n},bt=(n,t)=>n$(n,i$(t));var o2=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(t,e)=>(typeof require<"u"?require:t)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var s2=(n,t)=>{var e={};for(var r in n)i2.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&vy)for(var r of vy(n))t.indexOf(r)<0&&jO.call(n,r)&&(e[r]=n[r]);return e};var rp=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var a$=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of o$(t))!i2.call(n,i)&&i!==e&&r2(n,i,{get:()=>t[i],enumerable:!(r=r$(t,i))||r.enumerable});return n};var ha=(n,t,e)=>(e=n!=null?t$(UO(n)):{},a$(t||!n||!n.__esModule?r2(e,"default",{value:n,enumerable:!0}):e,n));var ml=(n,t,e)=>s$(UO(n),e,t);var se=(n,t,e)=>new Promise((r,i)=>{var o=u=>{try{a(e.next(u))}catch(c){i(c)}},s=u=>{try{a(e.throw(u))}catch(c){i(c)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((e=e.apply(n,t)).next())});var _T=rp((Q0,vT)=>{"use strict";(function(n,t){typeof Q0=="object"&&typeof vT=="object"?vT.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Q0=="object"?Q0.AOS=t():n.AOS=t()})(Q0,function(){return function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=n,t.c=e,t.p="dist/",t(0)}([function(n,t,e){"use strict";function r(U){return U&&U.__esModule?U:{default:U}}var i=Object.assign||function(U){for(var $=1;$<arguments.length;$++){var ae=arguments[$];for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(U[de]=ae[de])}return U},o=e(1),s=(r(o),e(6)),a=r(s),u=e(7),c=r(u),d=e(8),h=r(d),p=e(9),m=r(p),_=e(10),C=r(_),x=e(11),S=r(x),N=e(14),F=r(N),R=[],j=!1,H={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,startEvent:"DOMContentLoaded",throttleDelay:99,debounceDelay:50,disableMutationObserver:!1},B=function(){var U=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(U&&(j=!0),j)return R=(0,S.default)(R,H),(0,C.default)(R,H.once),R},k=function(){R=(0,F.default)(),B()},D=function(){R.forEach(function(U,$){U.node.removeAttribute("data-aos"),U.node.removeAttribute("data-aos-easing"),U.node.removeAttribute("data-aos-duration"),U.node.removeAttribute("data-aos-delay")})},P=function(U){return U===!0||U==="mobile"&&m.default.mobile()||U==="phone"&&m.default.phone()||U==="tablet"&&m.default.tablet()||typeof U=="function"&&U()===!0},z=function(U){H=i(H,U),R=(0,F.default)();var $=document.all&&!window.atob;return P(H.disable)||$?D():(H.disableMutationObserver||h.default.isSupported()||(console.info(`
      aos: MutationObserver is not supported on this browser,
      code mutations observing has been disabled.
      You may have to call "refreshHard()" by yourself.
    `),H.disableMutationObserver=!0),document.querySelector("body").setAttribute("data-aos-easing",H.easing),document.querySelector("body").setAttribute("data-aos-duration",H.duration),document.querySelector("body").setAttribute("data-aos-delay",H.delay),H.startEvent==="DOMContentLoaded"&&["complete","interactive"].indexOf(document.readyState)>-1?B(!0):H.startEvent==="load"?window.addEventListener(H.startEvent,function(){B(!0)}):document.addEventListener(H.startEvent,function(){B(!0)}),window.addEventListener("resize",(0,c.default)(B,H.debounceDelay,!0)),window.addEventListener("orientationchange",(0,c.default)(B,H.debounceDelay,!0)),window.addEventListener("scroll",(0,a.default)(function(){(0,C.default)(R,H.once)},H.throttleDelay)),H.disableMutationObserver||h.default.ready("[data-aos]",k),R)};n.exports={init:z,refresh:B,refreshHard:k}},function(n,t){},,,,,function(n,t){(function(e){"use strict";function r(P,z,U){function $(Qe){var at=ye,ft=we;return ye=we=void 0,it=Qe,ze=P.apply(ft,at)}function ae(Qe){return it=Qe,Ye=setTimeout(re,z),Je?$(Qe):ze}function de(Qe){var at=Qe-He,ft=Qe-it,At=z-at;return vt?k(At,Ce-ft):At}function X(Qe){var at=Qe-He,ft=Qe-it;return He===void 0||at>=z||at<0||vt&&ft>=Ce}function re(){var Qe=D();return X(Qe)?J(Qe):void(Ye=setTimeout(re,de(Qe)))}function J(Qe){return Ye=void 0,Ge&&ye?$(Qe):(ye=we=void 0,ze)}function ie(){Ye!==void 0&&clearTimeout(Ye),it=0,ye=He=we=Ye=void 0}function le(){return Ye===void 0?ze:J(D())}function Ee(){var Qe=D(),at=X(Qe);if(ye=arguments,we=this,He=Qe,at){if(Ye===void 0)return ae(He);if(vt)return Ye=setTimeout(re,z),$(He)}return Ye===void 0&&(Ye=setTimeout(re,z)),ze}var ye,we,Ce,ze,Ye,He,it=0,Je=!1,vt=!1,Ge=!0;if(typeof P!="function")throw new TypeError(d);return z=u(z)||0,o(U)&&(Je=!!U.leading,vt="maxWait"in U,Ce=vt?B(u(U.maxWait)||0,z):Ce,Ge="trailing"in U?!!U.trailing:Ge),Ee.cancel=ie,Ee.flush=le,Ee}function i(P,z,U){var $=!0,ae=!0;if(typeof P!="function")throw new TypeError(d);return o(U)&&($="leading"in U?!!U.leading:$,ae="trailing"in U?!!U.trailing:ae),r(P,z,{leading:$,maxWait:z,trailing:ae})}function o(P){var z=typeof P>"u"?"undefined":c(P);return!!P&&(z=="object"||z=="function")}function s(P){return!!P&&(typeof P>"u"?"undefined":c(P))=="object"}function a(P){return(typeof P>"u"?"undefined":c(P))=="symbol"||s(P)&&H.call(P)==p}function u(P){if(typeof P=="number")return P;if(a(P))return h;if(o(P)){var z=typeof P.valueOf=="function"?P.valueOf():P;P=o(z)?z+"":z}if(typeof P!="string")return P===0?P:+P;P=P.replace(m,"");var U=C.test(P);return U||x.test(P)?S(P.slice(2),U?2:8):_.test(P)?h:+P}var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},d="Expected a function",h=NaN,p="[object Symbol]",m=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,x=/^0o[0-7]+$/i,S=parseInt,N=(typeof e>"u"?"undefined":c(e))=="object"&&e&&e.Object===Object&&e,F=(typeof self>"u"?"undefined":c(self))=="object"&&self&&self.Object===Object&&self,R=N||F||Function("return this")(),j=Object.prototype,H=j.toString,B=Math.max,k=Math.min,D=function(){return R.Date.now()};n.exports=i}).call(t,function(){return this}())},function(n,t){(function(e){"use strict";function r(D,P,z){function U(Ge){var Qe=Ee,at=ye;return Ee=ye=void 0,He=Ge,Ce=D.apply(at,Qe)}function $(Ge){return He=Ge,ze=setTimeout(X,P),it?U(Ge):Ce}function ae(Ge){var Qe=Ge-Ye,at=Ge-He,ft=P-Qe;return Je?B(ft,we-at):ft}function de(Ge){var Qe=Ge-Ye,at=Ge-He;return Ye===void 0||Qe>=P||Qe<0||Je&&at>=we}function X(){var Ge=k();return de(Ge)?re(Ge):void(ze=setTimeout(X,ae(Ge)))}function re(Ge){return ze=void 0,vt&&Ee?U(Ge):(Ee=ye=void 0,Ce)}function J(){ze!==void 0&&clearTimeout(ze),He=0,Ee=Ye=ye=ze=void 0}function ie(){return ze===void 0?Ce:re(k())}function le(){var Ge=k(),Qe=de(Ge);if(Ee=arguments,ye=this,Ye=Ge,Qe){if(ze===void 0)return $(Ye);if(Je)return ze=setTimeout(X,P),U(Ye)}return ze===void 0&&(ze=setTimeout(X,P)),Ce}var Ee,ye,we,Ce,ze,Ye,He=0,it=!1,Je=!1,vt=!0;if(typeof D!="function")throw new TypeError(c);return P=a(P)||0,i(z)&&(it=!!z.leading,Je="maxWait"in z,we=Je?H(a(z.maxWait)||0,P):we,vt="trailing"in z?!!z.trailing:vt),le.cancel=J,le.flush=ie,le}function i(D){var P=typeof D>"u"?"undefined":u(D);return!!D&&(P=="object"||P=="function")}function o(D){return!!D&&(typeof D>"u"?"undefined":u(D))=="object"}function s(D){return(typeof D>"u"?"undefined":u(D))=="symbol"||o(D)&&j.call(D)==h}function a(D){if(typeof D=="number")return D;if(s(D))return d;if(i(D)){var P=typeof D.valueOf=="function"?D.valueOf():D;D=i(P)?P+"":P}if(typeof D!="string")return D===0?D:+D;D=D.replace(p,"");var z=_.test(D);return z||C.test(D)?x(D.slice(2),z?2:8):m.test(D)?d:+D}var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},c="Expected a function",d=NaN,h="[object Symbol]",p=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,C=/^0o[0-7]+$/i,x=parseInt,S=(typeof e>"u"?"undefined":u(e))=="object"&&e&&e.Object===Object&&e,N=(typeof self>"u"?"undefined":u(self))=="object"&&self&&self.Object===Object&&self,F=S||N||Function("return this")(),R=Object.prototype,j=R.toString,H=Math.max,B=Math.min,k=function(){return F.Date.now()};n.exports=r}).call(t,function(){return this}())},function(n,t){"use strict";function e(u){var c=void 0,d=void 0,h=void 0;for(c=0;c<u.length;c+=1)if(d=u[c],d.dataset&&d.dataset.aos||(h=d.children&&e(d.children)))return!0;return!1}function r(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function i(){return!!r()}function o(u,c){var d=window.document,h=r(),p=new h(s);a=c,p.observe(d.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}function s(u){u&&u.forEach(function(c){var d=Array.prototype.slice.call(c.addedNodes),h=Array.prototype.slice.call(c.removedNodes),p=d.concat(h);if(e(p))return a()})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){};t.default={isSupported:i,ready:o}},function(n,t){"use strict";function e(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function r(){return navigator.userAgent||navigator.vendor||window.opera||""}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function d(h,p){for(var m=0;m<p.length;m++){var _=p[m];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,_.key,_)}}return function(h,p,m){return p&&d(h.prototype,p),m&&d(h,m),h}}(),o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,s=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,u=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,c=function(){function d(){e(this,d)}return i(d,[{key:"phone",value:function(){var h=r();return!(!o.test(h)&&!s.test(h.substr(0,4)))}},{key:"mobile",value:function(){var h=r();return!(!a.test(h)&&!u.test(h.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}}]),d}();t.default=new c},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(i,o,s){var a=i.node.getAttribute("data-aos-once");o>i.position?i.node.classList.add("aos-animate"):typeof a<"u"&&(a==="false"||!s&&a!=="true")&&i.node.classList.remove("aos-animate")},r=function(i,o){var s=window.pageYOffset,a=window.innerHeight;i.forEach(function(u,c){e(u,a+s,o)})};t.default=r},function(n,t,e){"use strict";function r(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(t,"__esModule",{value:!0});var i=e(12),o=r(i),s=function(a,u){return a.forEach(function(c,d){c.node.classList.add("aos-init"),c.position=(0,o.default)(c.node,u.offset)}),a};t.default=s},function(n,t,e){"use strict";function r(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(t,"__esModule",{value:!0});var i=e(13),o=r(i),s=function(a,u){var c=0,d=0,h=window.innerHeight,p={offset:a.getAttribute("data-aos-offset"),anchor:a.getAttribute("data-aos-anchor"),anchorPlacement:a.getAttribute("data-aos-anchor-placement")};switch(p.offset&&!isNaN(p.offset)&&(d=parseInt(p.offset)),p.anchor&&document.querySelectorAll(p.anchor)&&(a=document.querySelectorAll(p.anchor)[0]),c=(0,o.default)(a).top,p.anchorPlacement){case"top-bottom":break;case"center-bottom":c+=a.offsetHeight/2;break;case"bottom-bottom":c+=a.offsetHeight;break;case"top-center":c+=h/2;break;case"bottom-center":c+=h/2+a.offsetHeight;break;case"center-center":c+=h/2+a.offsetHeight/2;break;case"top-top":c+=h;break;case"bottom-top":c+=a.offsetHeight+h;break;case"center-top":c+=a.offsetHeight/2+h}return p.anchorPlacement||p.offset||isNaN(u)||(d=u),c+d};t.default=s},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(r){for(var i=0,o=0;r&&!isNaN(r.offsetLeft)&&!isNaN(r.offsetTop);)i+=r.offsetLeft-(r.tagName!="BODY"?r.scrollLeft:0),o+=r.offsetTop-(r.tagName!="BODY"?r.scrollTop:0),r=r.offsetParent;return{top:o,left:i}};t.default=e},function(n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(r){return r=r||document.querySelectorAll("[data-aos]"),Array.prototype.map.call(r,function(i){return{node:i}})};t.default=e}])})});var td=rp((Pu,NP)=>{"use strict";(function(n,t){typeof Pu=="object"&&typeof NP<"u"?NP.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=t())})(Pu,function(){"use strict";function n(y,E,O){if(typeof y=="function"?y===E:y.has(E))return arguments.length<3?E:O;throw new TypeError("Private element is not present on this object")}function t(y,E){if(E.has(y))throw new TypeError("Cannot initialize the same private elements twice on an object")}function e(y,E){return y.get(n(y,E))}function r(y,E,O){t(y,E),E.set(y,O)}function i(y,E,O){return y.set(n(y,E),O),O}let o=100,s={},a=()=>{s.previousActiveElement instanceof HTMLElement?(s.previousActiveElement.focus(),s.previousActiveElement=null):document.body&&document.body.focus()},u=y=>new Promise(E=>{if(!y)return E();let O=window.scrollX,Z=window.scrollY;s.restoreFocusTimeout=setTimeout(()=>{a(),E()},o),window.scrollTo(O,Z)}),c="swal2-",h=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((y,E)=>(y[E]=c+E,y),{}),m=["success","warning","info","question","error"].reduce((y,E)=>(y[E]=c+E,y),{}),_="SweetAlert2:",C=y=>y.charAt(0).toUpperCase()+y.slice(1),x=y=>{console.warn(`${_} ${typeof y=="object"?y.join(" "):y}`)},S=y=>{console.error(`${_} ${y}`)},N=[],F=y=>{N.includes(y)||(N.push(y),x(y))},R=function(y){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;F(`"${y}" is deprecated and will be removed in the next major release.${E?` Use "${E}" instead.`:""}`)},j=y=>typeof y=="function"?y():y,H=y=>y&&typeof y.toPromise=="function",B=y=>H(y)?y.toPromise():Promise.resolve(y),k=y=>y&&Promise.resolve(y)===y,D=()=>document.body.querySelector(`.${h.container}`),P=y=>{let E=D();return E?E.querySelector(y):null},z=y=>P(`.${y}`),U=()=>z(h.popup),$=()=>z(h.icon),ae=()=>z(h["icon-content"]),de=()=>z(h.title),X=()=>z(h["html-container"]),re=()=>z(h.image),J=()=>z(h["progress-steps"]),ie=()=>z(h["validation-message"]),le=()=>P(`.${h.actions} .${h.confirm}`),Ee=()=>P(`.${h.actions} .${h.cancel}`),ye=()=>P(`.${h.actions} .${h.deny}`),we=()=>z(h["input-label"]),Ce=()=>P(`.${h.loader}`),ze=()=>z(h.actions),Ye=()=>z(h.footer),He=()=>z(h["timer-progress-bar"]),it=()=>z(h.close),Je=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,vt=()=>{let y=U();if(!y)return[];let E=y.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),O=Array.from(E).sort((Re,ut)=>{let Ut=parseInt(Re.getAttribute("tabindex")||"0"),Qn=parseInt(ut.getAttribute("tabindex")||"0");return Ut>Qn?1:Ut<Qn?-1:0}),Z=y.querySelectorAll(Je),ue=Array.from(Z).filter(Re=>Re.getAttribute("tabindex")!=="-1");return[...new Set(O.concat(ue))].filter(Re=>Cr(Re))},Ge=()=>At(document.body,h.shown)&&!At(document.body,h["toast-shown"])&&!At(document.body,h["no-backdrop"]),Qe=()=>{let y=U();return y?At(y,h.toast):!1},at=()=>{let y=U();return y?y.hasAttribute("data-loading"):!1},ft=(y,E)=>{if(y.textContent="",E){let Z=new DOMParser().parseFromString(E,"text/html"),ue=Z.querySelector("head");ue&&Array.from(ue.childNodes).forEach(ut=>{y.appendChild(ut)});let Re=Z.querySelector("body");Re&&Array.from(Re.childNodes).forEach(ut=>{ut instanceof HTMLVideoElement||ut instanceof HTMLAudioElement?y.appendChild(ut.cloneNode(!0)):y.appendChild(ut)})}},At=(y,E)=>{if(!E)return!1;let O=E.split(/\s+/);for(let Z=0;Z<O.length;Z++)if(!y.classList.contains(O[Z]))return!1;return!0},cn=(y,E)=>{Array.from(y.classList).forEach(O=>{!Object.values(h).includes(O)&&!Object.values(m).includes(O)&&!Object.values(E.showClass||{}).includes(O)&&y.classList.remove(O)})},Tn=(y,E,O)=>{if(cn(y,E),!E.customClass)return;let Z=E.customClass[O];if(Z){if(typeof Z!="string"&&!Z.forEach){x(`Invalid type of customClass.${O}! Expected string or iterable object, got "${typeof Z}"`);return}yt(y,Z)}},Mr=(y,E)=>{if(!E)return null;switch(E){case"select":case"textarea":case"file":return y.querySelector(`.${h.popup} > .${h[E]}`);case"checkbox":return y.querySelector(`.${h.popup} > .${h.checkbox} input`);case"radio":return y.querySelector(`.${h.popup} > .${h.radio} input:checked`)||y.querySelector(`.${h.popup} > .${h.radio} input:first-child`);case"range":return y.querySelector(`.${h.popup} > .${h.range} input`);default:return y.querySelector(`.${h.popup} > .${h.input}`)}},tr=y=>{if(y.focus(),y.type!=="file"){let E=y.value;y.value="",y.value=E}},Xi=(y,E,O)=>{!y||!E||(typeof E=="string"&&(E=E.split(/\s+/).filter(Boolean)),E.forEach(Z=>{Array.isArray(y)?y.forEach(ue=>{O?ue.classList.add(Z):ue.classList.remove(Z)}):O?y.classList.add(Z):y.classList.remove(Z)}))},yt=(y,E)=>{Xi(y,E,!0)},zn=(y,E)=>{Xi(y,E,!1)},dr=(y,E)=>{let O=Array.from(y.children);for(let Z=0;Z<O.length;Z++){let ue=O[Z];if(ue instanceof HTMLElement&&At(ue,E))return ue}},hr=(y,E,O)=>{O===`${parseInt(O)}`&&(O=parseInt(O)),O||parseInt(O)===0?y.style.setProperty(E,typeof O=="number"?`${O}px`:O):y.style.removeProperty(E)},rn=function(y){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";y&&(y.style.display=E)},Ln=y=>{y&&(y.style.display="none")},An=function(y){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";y&&new MutationObserver(()=>{pi(y,y.innerHTML,E)}).observe(y,{childList:!0,subtree:!0})},hn=(y,E,O,Z)=>{let ue=y.querySelector(E);ue&&ue.style.setProperty(O,Z)},pi=function(y,E){let O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";E?rn(y,O):Ln(y)},Cr=y=>!!(y&&(y.offsetWidth||y.offsetHeight||y.getClientRects().length)),zu=()=>!Cr(le())&&!Cr(ye())&&!Cr(Ee()),Ha=y=>y.scrollHeight>y.clientHeight,Ji=y=>{let E=window.getComputedStyle(y),O=parseFloat(E.getPropertyValue("animation-duration")||"0"),Z=parseFloat(E.getPropertyValue("transition-duration")||"0");return O>0||Z>0},bs=function(y){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=He();O&&Cr(O)&&(E&&(O.style.transition="none",O.style.width="100%"),setTimeout(()=>{O.style.transition=`width ${y/1e3}s linear`,O.style.width="0%"},10))},_o=()=>{let y=He();if(!y)return;let E=parseInt(window.getComputedStyle(y).width);y.style.removeProperty("transition"),y.style.width="100%";let O=parseInt(window.getComputedStyle(y).width),Z=E/O*100;y.style.width=`${Z}%`},wd=()=>typeof window>"u"||typeof document>"u",Ig=`
 <div aria-labelledby="${h.title}" aria-describedby="${h["html-container"]}" class="${h.popup}" tabindex="-1">
   <button type="button" class="${h.close}"></button>
   <ul class="${h["progress-steps"]}"></ul>
   <div class="${h.icon}"></div>
   <img class="${h.image}" />
   <h2 class="${h.title}" id="${h.title}"></h2>
   <div class="${h["html-container"]}" id="${h["html-container"]}"></div>
   <input class="${h.input}" id="${h.input}" />
   <input type="file" class="${h.file}" />
   <div class="${h.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${h.select}" id="${h.select}"></select>
   <div class="${h.radio}"></div>
   <label class="${h.checkbox}">
     <input type="checkbox" id="${h.checkbox}" />
     <span class="${h.label}"></span>
   </label>
   <textarea class="${h.textarea}" id="${h.textarea}"></textarea>
   <div class="${h["validation-message"]}" id="${h["validation-message"]}"></div>
   <div class="${h.actions}">
     <div class="${h.loader}"></div>
     <button type="button" class="${h.confirm}"></button>
     <button type="button" class="${h.deny}"></button>
     <button type="button" class="${h.cancel}"></button>
   </div>
   <div class="${h.footer}"></div>
   <div class="${h["timer-progress-bar-container"]}">
     <div class="${h["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Mf=()=>{let y=D();return y?(y.remove(),zn([document.documentElement,document.body],[h["no-backdrop"],h["toast-shown"],h["has-column"]]),!0):!1},yo=()=>{s.currentInstance.resetValidationMessage()},Cd=()=>{let y=U(),E=dr(y,h.input),O=dr(y,h.file),Z=y.querySelector(`.${h.range} input`),ue=y.querySelector(`.${h.range} output`),Re=dr(y,h.select),ut=y.querySelector(`.${h.checkbox} input`),Ut=dr(y,h.textarea);E.oninput=yo,O.onchange=yo,Re.onchange=yo,ut.onchange=yo,Ut.oninput=yo,Z.oninput=()=>{yo(),ue.value=Z.value},Z.onchange=()=>{yo(),ue.value=Z.value}},kf=y=>typeof y=="string"?document.querySelector(y):y,Wu=y=>{let E=U();E.setAttribute("role",y.toast?"alert":"dialog"),E.setAttribute("aria-live",y.toast?"polite":"assertive"),y.toast||E.setAttribute("aria-modal","true")},xd=y=>{window.getComputedStyle(y).direction==="rtl"&&yt(D(),h.rtl)},Ed=y=>{let E=Mf();if(wd()){S("SweetAlert2 requires document to initialize");return}let O=document.createElement("div");O.className=h.container,E&&yt(O,h["no-transition"]),ft(O,Ig),O.dataset.swal2Theme=y.theme;let Z=kf(y.target);Z.appendChild(O),y.topLayer&&(O.setAttribute("popover",""),O.showPopover()),Wu(y),xd(Z),Cd()},Wo=(y,E)=>{y instanceof HTMLElement?E.appendChild(y):typeof y=="object"?Of(y,E):y&&ft(E,y)},Of=(y,E)=>{y.jquery?$a(E,y):ft(E,y.toString())},$a=(y,E)=>{if(y.textContent="",0 in E)for(let O=0;O in E;O++)y.appendChild(E[O].cloneNode(!0));else y.appendChild(E.cloneNode(!0))},Rf=(y,E)=>{let O=ze(),Z=Ce();!O||!Z||(!E.showConfirmButton&&!E.showDenyButton&&!E.showCancelButton?Ln(O):rn(O),Tn(O,E,"actions"),Hu(O,Z,E),ft(Z,E.loaderHtml||""),Tn(Z,E,"loader"))};function Hu(y,E,O){let Z=le(),ue=ye(),Re=Ee();!Z||!ue||!Re||(mi(Z,"confirm",O),mi(ue,"deny",O),mi(Re,"cancel",O),Nf(Z,ue,Re,O),O.reverseButtons&&(O.toast?(y.insertBefore(Re,Z),y.insertBefore(ue,Z)):(y.insertBefore(Re,E),y.insertBefore(ue,E),y.insertBefore(Z,E))))}function Nf(y,E,O,Z){if(!Z.buttonsStyling){zn([y,E,O],h.styled);return}yt([y,E,O],h.styled),Z.confirmButtonColor&&y.style.setProperty("--swal2-confirm-button-background-color",Z.confirmButtonColor),Z.denyButtonColor&&E.style.setProperty("--swal2-deny-button-background-color",Z.denyButtonColor),Z.cancelButtonColor&&O.style.setProperty("--swal2-cancel-button-background-color",Z.cancelButtonColor),xr(y),xr(E),xr(O)}function xr(y){let E=window.getComputedStyle(y),O=E.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");y.style.setProperty("--swal2-action-button-outline",E.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${O}`))}function mi(y,E,O){let Z=C(E);pi(y,O[`show${Z}Button`],"inline-block"),ft(y,O[`${E}ButtonText`]||""),y.setAttribute("aria-label",O[`${E}ButtonAriaLabel`]||""),y.className=h[E],Tn(y,O,`${E}Button`)}let et=(y,E)=>{let O=it();O&&(ft(O,E.closeButtonHtml||""),Tn(O,E,"closeButton"),pi(O,E.showCloseButton),O.setAttribute("aria-label",E.closeButtonAriaLabel||""))},qa=(y,E)=>{let O=D();O&&(Ff(O,E.backdrop),Lf(O,E.position),na(O,E.grow),Tn(O,E,"container"))};function Ff(y,E){typeof E=="string"?y.style.background=E:E||yt([document.documentElement,document.body],h["no-backdrop"])}function Lf(y,E){E&&(E in h?yt(y,h[E]):(x('The "position" parameter is not valid, defaulting to "center"'),yt(y,h.center)))}function na(y,E){E&&yt(y,h[`grow-${E}`])}var fn={innerParams:new WeakMap,domCache:new WeakMap};let Vf=["input","file","range","select","radio","checkbox","textarea"],Ho=(y,E)=>{let O=U();if(!O)return;let Z=fn.innerParams.get(y),ue=!Z||E.input!==Z.input;Vf.forEach(Re=>{let ut=dr(O,h[Re]);ut&&(Jc(Re,E.inputAttributes),ut.className=h[Re],ue&&Ln(ut))}),E.input&&(ue&&Id(E),ws(E))},Id=y=>{if(!y.input)return;if(!Wn[y.input]){S(`Unexpected type of input! Expected ${Object.keys(Wn).join(" | ")}, got "${y.input}"`);return}let E=tl(y.input);if(!E)return;let O=Wn[y.input](E,y);rn(E),y.inputAutoFocus&&setTimeout(()=>{tr(O)})},Sd=y=>{for(let E=0;E<y.attributes.length;E++){let O=y.attributes[E].name;["id","type","value","style"].includes(O)||y.removeAttribute(O)}},Jc=(y,E)=>{let O=U();if(!O)return;let Z=Mr(O,y);if(Z){Sd(Z);for(let ue in E)Z.setAttribute(ue,E[ue])}},ws=y=>{if(!y.input)return;let E=tl(y.input);E&&Tn(E,y,"input")},el=(y,E)=>{!y.placeholder&&E.inputPlaceholder&&(y.placeholder=E.inputPlaceholder)},ra=(y,E,O)=>{if(O.inputLabel){let Z=document.createElement("label"),ue=h["input-label"];Z.setAttribute("for",y.id),Z.className=ue,typeof O.customClass=="object"&&yt(Z,O.customClass.inputLabel),Z.innerText=O.inputLabel,E.insertAdjacentElement("beforebegin",Z)}},tl=y=>{let E=U();if(E)return dr(E,h[y]||h.input)},$o=(y,E)=>{["string","number"].includes(typeof E)?y.value=`${E}`:k(E)||x(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof E}"`)},Wn={};Wn.text=Wn.email=Wn.password=Wn.number=Wn.tel=Wn.url=Wn.search=Wn.date=Wn["datetime-local"]=Wn.time=Wn.week=Wn.month=(y,E)=>($o(y,E.inputValue),ra(y,y,E),el(y,E),y.type=E.input,y),Wn.file=(y,E)=>(ra(y,y,E),el(y,E),y),Wn.range=(y,E)=>{let O=y.querySelector("input"),Z=y.querySelector("output");return $o(O,E.inputValue),O.type=E.input,$o(Z,E.inputValue),ra(O,y,E),y},Wn.select=(y,E)=>{if(y.textContent="",E.inputPlaceholder){let O=document.createElement("option");ft(O,E.inputPlaceholder),O.value="",O.disabled=!0,O.selected=!0,y.appendChild(O)}return ra(y,y,E),y},Wn.radio=y=>(y.textContent="",y),Wn.checkbox=(y,E)=>{let O=Mr(U(),"checkbox");O.value="1",O.checked=!!E.inputValue;let Z=y.querySelector("span");return ft(Z,E.inputPlaceholder||E.inputLabel),O},Wn.textarea=(y,E)=>{$o(y,E.inputValue),el(y,E),ra(y,y,E);let O=Z=>parseInt(window.getComputedStyle(Z).marginLeft)+parseInt(window.getComputedStyle(Z).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let Z=parseInt(window.getComputedStyle(U()).width),ue=()=>{if(!document.body.contains(y))return;let Re=y.offsetWidth+O(y);Re>Z?U().style.width=`${Re}px`:hr(U(),"width",E.width)};new MutationObserver(ue).observe(y,{attributes:!0,attributeFilter:["style"]})}}),y};let Bf=(y,E)=>{let O=X();O&&(An(O),Tn(O,E,"htmlContainer"),E.html?(Wo(E.html,O),rn(O,"block")):E.text?(O.textContent=E.text,rn(O,"block")):Ln(O),Ho(y,E))},Sg=(y,E)=>{let O=Ye();O&&(An(O),pi(O,E.footer,"block"),E.footer&&Wo(E.footer,O),Tn(O,E,"footer"))},nl=(y,E)=>{let O=fn.innerParams.get(y),Z=$();if(!Z)return;if(O&&E.icon===O.icon){$u(Z,E),Td(Z,E);return}if(!E.icon&&!E.iconHtml){Ln(Z);return}if(E.icon&&Object.keys(m).indexOf(E.icon)===-1){S(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${E.icon}"`),Ln(Z);return}rn(Z),$u(Z,E),Td(Z,E),yt(Z,E.showClass&&E.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Ga)},Td=(y,E)=>{for(let[O,Z]of Object.entries(m))E.icon!==O&&zn(y,Z);yt(y,E.icon&&m[E.icon]),qu(y,E),Ga(),Tn(y,E,"icon")},Ga=()=>{let y=U();if(!y)return;let E=window.getComputedStyle(y).getPropertyValue("background-color"),O=y.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let Z=0;Z<O.length;Z++)O[Z].style.backgroundColor=E},qo=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Cs=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,$u=(y,E)=>{if(!E.icon&&!E.iconHtml)return;let O=y.innerHTML,Z="";E.iconHtml?Z=Gt(E.iconHtml):E.icon==="success"?(Z=qo,O=O.replace(/ style=".*?"/g,"")):E.icon==="error"?Z=Cs:E.icon&&(Z=Gt({question:"?",warning:"!",info:"i"}[E.icon])),O.trim()!==Z.trim()&&ft(y,Z)},qu=(y,E)=>{if(E.iconColor){y.style.color=E.iconColor,y.style.borderColor=E.iconColor;for(let O of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])hn(y,O,"background-color",E.iconColor);hn(y,".swal2-success-ring","border-color",E.iconColor)}},Gt=y=>`<div class="${h["icon-content"]}">${y}</div>`,Mn=(y,E)=>{let O=re();if(O){if(!E.imageUrl){Ln(O);return}rn(O,""),O.setAttribute("src",E.imageUrl),O.setAttribute("alt",E.imageAlt||""),hr(O,"width",E.imageWidth),hr(O,"height",E.imageHeight),O.className=h.image,Tn(O,E,"image")}},ia=!1,Go=0,Ko=0,Gu=0,Et=0,Yn=y=>{y.addEventListener("mousedown",xs),document.body.addEventListener("mousemove",kr),y.addEventListener("mouseup",rl),y.addEventListener("touchstart",xs),document.body.addEventListener("touchmove",kr),y.addEventListener("touchend",rl)},Ad=y=>{y.removeEventListener("mousedown",xs),document.body.removeEventListener("mousemove",kr),y.removeEventListener("mouseup",rl),y.removeEventListener("touchstart",xs),document.body.removeEventListener("touchmove",kr),y.removeEventListener("touchend",rl)},xs=y=>{let E=U();if(y.target===E||$().contains(y.target)){ia=!0;let O=eo(y);Go=O.clientX,Ko=O.clientY,Gu=parseInt(E.style.insetInlineStart)||0,Et=parseInt(E.style.insetBlockStart)||0,yt(E,"swal2-dragging")}},kr=y=>{let E=U();if(ia){let{clientX:O,clientY:Z}=eo(y);E.style.insetInlineStart=`${Gu+(O-Go)}px`,E.style.insetBlockStart=`${Et+(Z-Ko)}px`}},rl=()=>{let y=U();ia=!1,zn(y,"swal2-dragging")},eo=y=>{let E=0,O=0;return y.type.startsWith("mouse")?(E=y.clientX,O=y.clientY):y.type.startsWith("touch")&&(E=y.touches[0].clientX,O=y.touches[0].clientY),{clientX:E,clientY:O}},$r=(y,E)=>{let O=D(),Z=U();if(!(!O||!Z)){if(E.toast){hr(O,"width",E.width),Z.style.width="100%";let ue=Ce();ue&&Z.insertBefore(ue,$())}else hr(Z,"width",E.width);hr(Z,"padding",E.padding),E.color&&(Z.style.color=E.color),E.background&&(Z.style.background=E.background),Ln(ie()),Vn(Z,E),E.draggable&&!E.toast?(yt(Z,h.draggable),Yn(Z)):(zn(Z,h.draggable),Ad(Z))}},Vn=(y,E)=>{let O=E.showClass||{};y.className=`${h.popup} ${Cr(y)?O.popup:""}`,E.toast?(yt([document.documentElement,document.body],h["toast-shown"]),yt(y,h.toast)):yt(y,h.modal),Tn(y,E,"popup"),typeof E.customClass=="string"&&yt(y,E.customClass),E.icon&&yt(y,h[`icon-${E.icon}`])},bo=(y,E)=>{let O=J();if(!O)return;let{progressSteps:Z,currentProgressStep:ue}=E;if(!Z||Z.length===0||ue===void 0){Ln(O);return}rn(O),O.textContent="",ue>=Z.length&&x("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),Z.forEach((Re,ut)=>{let Ut=Ka(Re);if(O.appendChild(Ut),ut===ue&&yt(Ut,h["active-progress-step"]),ut!==Z.length-1){let Qn=ln(E);O.appendChild(Qn)}})},Ka=y=>{let E=document.createElement("li");return yt(E,h["progress-step"]),ft(E,y),E},ln=y=>{let E=document.createElement("li");return yt(E,h["progress-step-line"]),y.progressStepsDistance&&hr(E,"width",y.progressStepsDistance),E},Ya=(y,E)=>{let O=de();O&&(An(O),pi(O,E.title||E.titleText,"block"),E.title&&Wo(E.title,O),E.titleText&&(O.innerText=E.titleText),Tn(O,E,"title"))},wo=(y,E)=>{$r(y,E),qa(y,E),bo(y,E),nl(y,E),Mn(y,E),Ya(y,E),et(y,E),Bf(y,E),Rf(y,E),Sg(y,E);let O=U();typeof E.didRender=="function"&&O&&E.didRender(O),s.eventEmitter.emit("didRender",O)},oa=()=>Cr(U()),il=()=>{var y;return(y=le())===null||y===void 0?void 0:y.click()},Ku=()=>{var y;return(y=ye())===null||y===void 0?void 0:y.click()},Dd=()=>{var y;return(y=Ee())===null||y===void 0?void 0:y.click()},Es=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Yu=y=>{y.keydownTarget&&y.keydownHandlerAdded&&(y.keydownTarget.removeEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!1)},Uf=(y,E,O)=>{Yu(y),E.toast||(y.keydownHandler=Z=>to(E,Z,O),y.keydownTarget=E.keydownListenerCapture?window:U(),y.keydownListenerCapture=E.keydownListenerCapture,y.keydownTarget.addEventListener("keydown",y.keydownHandler,{capture:y.keydownListenerCapture}),y.keydownHandlerAdded=!0)},Yo=(y,E)=>{var O;let Z=vt();if(Z.length){y=y+E,y===-2&&(y=Z.length-1),y===Z.length?y=0:y===-1&&(y=Z.length-1),Z[y].focus();return}(O=U())===null||O===void 0||O.focus()},Zo=["ArrowRight","ArrowDown"],Ct=["ArrowLeft","ArrowUp"],to=(y,E,O)=>{y&&(E.isComposing||E.keyCode===229||(y.stopKeydownPropagation&&E.stopPropagation(),E.key==="Enter"?mn(E,y):E.key==="Tab"?sa(E):[...Zo,...Ct].includes(E.key)?Pd(E.key):E.key==="Escape"&&Md(E,y,O)))},mn=(y,E)=>{if(!j(E.allowEnterKey))return;let O=Mr(U(),E.input);if(y.target&&O&&y.target instanceof HTMLElement&&y.target.outerHTML===O.outerHTML){if(["textarea","file"].includes(E.input))return;il(),y.preventDefault()}},sa=y=>{let E=y.target,O=vt(),Z=-1;for(let ue=0;ue<O.length;ue++)if(E===O[ue]){Z=ue;break}y.shiftKey?Yo(Z,-1):Yo(Z,1),y.stopPropagation(),y.preventDefault()},Pd=y=>{let E=ze(),O=le(),Z=ye(),ue=Ee();if(!E||!O||!Z||!ue)return;let Re=[O,Z,ue];if(document.activeElement instanceof HTMLElement&&!Re.includes(document.activeElement))return;let ut=Zo.includes(y)?"nextElementSibling":"previousElementSibling",Ut=document.activeElement;if(Ut){for(let Qn=0;Qn<E.children.length;Qn++){if(Ut=Ut[ut],!Ut)return;if(Ut instanceof HTMLButtonElement&&Cr(Ut))break}Ut instanceof HTMLButtonElement&&Ut.focus()}},Md=(y,E,O)=>{j(E.allowEscapeKey)&&(y.preventDefault(),O(Es.esc))};var Is={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let ei=()=>{let y=D();Array.from(document.body.children).forEach(O=>{O.contains(y)||(O.hasAttribute("aria-hidden")&&O.setAttribute("data-previous-aria-hidden",O.getAttribute("aria-hidden")||""),O.setAttribute("aria-hidden","true"))})},ol=()=>{Array.from(document.body.children).forEach(E=>{E.hasAttribute("data-previous-aria-hidden")?(E.setAttribute("aria-hidden",E.getAttribute("data-previous-aria-hidden")||""),E.removeAttribute("data-previous-aria-hidden")):E.removeAttribute("aria-hidden")})},Za=typeof window<"u"&&!!window.GestureEvent,Zn=()=>{if(Za&&!At(document.body,h.iosfix)){let y=document.body.scrollTop;document.body.style.top=`${y*-1}px`,yt(document.body,h.iosfix),Co()}},Co=()=>{let y=D();if(!y)return;let E;y.ontouchstart=O=>{E=kd(O)},y.ontouchmove=O=>{E&&(O.preventDefault(),O.stopPropagation())}},kd=y=>{let E=y.target,O=D(),Z=X();return!O||!Z||Qa(y)||Zu(y)?!1:E===O||!Ha(O)&&E instanceof HTMLElement&&E.tagName!=="INPUT"&&E.tagName!=="TEXTAREA"&&!(Ha(Z)&&Z.contains(E))},Qa=y=>y.touches&&y.touches.length&&y.touches[0].touchType==="stylus",Zu=y=>y.touches&&y.touches.length>1,Od=()=>{if(At(document.body,h.iosfix)){let y=parseInt(document.body.style.top,10);zn(document.body,h.iosfix),document.body.style.top="",document.body.scrollTop=y*-1}},Qu=()=>{let y=document.createElement("div");y.className=h["scrollbar-measure"],document.body.appendChild(y);let E=y.getBoundingClientRect().width-y.clientWidth;return document.body.removeChild(y),E},gn=null,jf=y=>{gn===null&&(document.body.scrollHeight>window.innerHeight||y==="scroll")&&(gn=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${gn+Qu()}px`)},Kt=()=>{gn!==null&&(document.body.style.paddingRight=`${gn}px`,gn=null)};function Rd(y,E,O,Z){Qe()?Fd(y,Z):(u(O).then(()=>Fd(y,Z)),Yu(s)),Za?(E.setAttribute("style","display:none !important"),E.removeAttribute("class"),E.innerHTML=""):E.remove(),Ge()&&(Kt(),Od(),ol()),ki()}function ki(){zn([document.documentElement,document.body],[h.shown,h["height-auto"],h["no-backdrop"],h["toast-shown"]])}function gi(y){y=zf(y);let E=Is.swalPromiseResolve.get(this),O=Xu(this);this.isAwaitingPromise?y.isDismissed||(qr(this),E(y)):O&&E(y)}let Xu=y=>{let E=U();if(!E)return!1;let O=fn.innerParams.get(y);if(!O||At(E,O.hideClass.popup))return!1;zn(E,O.showClass.popup),yt(E,O.hideClass.popup);let Z=D();return zn(Z,O.showClass.backdrop),yt(Z,O.hideClass.backdrop),Wf(y,E,O),!0};function Nd(y){let E=Is.swalPromiseReject.get(this);qr(this),E&&E(y)}let qr=y=>{y.isAwaitingPromise&&(delete y.isAwaitingPromise,fn.innerParams.get(y)||y._destroy())},zf=y=>typeof y>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},y),Wf=(y,E,O)=>{var Z;let ue=D(),Re=Ji(E);typeof O.willClose=="function"&&O.willClose(E),(Z=s.eventEmitter)===null||Z===void 0||Z.emit("willClose",E),Re?Ju(y,E,ue,O.returnFocus,O.didClose):Rd(y,ue,O.returnFocus,O.didClose)},Ju=(y,E,O,Z,ue)=>{s.swalCloseEventFinishedCallback=Rd.bind(null,y,O,Z,ue);let Re=function(ut){if(ut.target===E){var Ut;(Ut=s.swalCloseEventFinishedCallback)===null||Ut===void 0||Ut.call(s),delete s.swalCloseEventFinishedCallback,E.removeEventListener("animationend",Re),E.removeEventListener("transitionend",Re)}};E.addEventListener("animationend",Re),E.addEventListener("transitionend",Re)},Fd=(y,E)=>{setTimeout(()=>{var O;typeof E=="function"&&E.bind(y.params)(),(O=s.eventEmitter)===null||O===void 0||O.emit("didClose"),y._destroy&&y._destroy()})},xo=y=>{let E=U();if(E||new Ae,E=U(),!E)return;let O=Ce();Qe()?Ln($()):sl(E,y),rn(O),E.setAttribute("data-loading","true"),E.setAttribute("aria-busy","true"),E.focus()},sl=(y,E)=>{let O=ze(),Z=Ce();!O||!Z||(!E&&Cr(le())&&(E=le()),rn(O),E&&(Ln(E),Z.setAttribute("data-button-to-replace",E.className),O.insertBefore(Z,E)),yt([y,O],h.loading))},no=(y,E)=>{E.input==="select"||E.input==="radio"?Ld(y,E):["text","email","number","tel","textarea"].some(O=>O===E.input)&&(H(E.inputValue)||k(E.inputValue))&&(xo(le()),ul(y,E))},al=(y,E)=>{let O=y.getInput();if(!O)return null;switch(E.input){case"checkbox":return Hf(O);case"radio":return Qo(O);case"file":return Xa(O);default:return E.inputAutoTrim?O.value.trim():O.value}},Hf=y=>y.checked?1:0,Qo=y=>y.checked?y.value:null,Xa=y=>y.files&&y.files.length?y.getAttribute("multiple")!==null?y.files:y.files[0]:null,Ld=(y,E)=>{let O=U();if(!O)return;let Z=ue=>{E.input==="select"?Vd(O,Ja(ue),E):E.input==="radio"&&cl(O,Ja(ue),E)};H(E.inputOptions)||k(E.inputOptions)?(xo(le()),B(E.inputOptions).then(ue=>{y.hideLoading(),Z(ue)})):typeof E.inputOptions=="object"?Z(E.inputOptions):S(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof E.inputOptions}`)},ul=(y,E)=>{let O=y.getInput();O&&(Ln(O),B(E.inputValue).then(Z=>{O.value=E.input==="number"?`${parseFloat(Z)||0}`:`${Z}`,rn(O),O.focus(),y.hideLoading()}).catch(Z=>{S(`Error in inputValue promise: ${Z}`),O.value="",rn(O),O.focus(),y.hideLoading()}))};function Vd(y,E,O){let Z=dr(y,h.select);if(!Z)return;let ue=(Re,ut,Ut)=>{let Qn=document.createElement("option");Qn.value=Ut,ft(Qn,ut),Qn.selected=ec(Ut,O.inputValue),Re.appendChild(Qn)};E.forEach(Re=>{let ut=Re[0],Ut=Re[1];if(Array.isArray(Ut)){let Qn=document.createElement("optgroup");Qn.label=ut,Qn.disabled=!1,Z.appendChild(Qn),Ut.forEach(pl=>ue(Qn,pl[1],pl[0]))}else ue(Z,Ut,ut)}),Z.focus()}function cl(y,E,O){let Z=dr(y,h.radio);if(!Z)return;E.forEach(Re=>{let ut=Re[0],Ut=Re[1],Qn=document.createElement("input"),pl=document.createElement("label");Qn.type="radio",Qn.name=h.radio,Qn.value=ut,ec(ut,O.inputValue)&&(Qn.checked=!0);let Og=document.createElement("span");ft(Og,Ut),Og.className=h.label,pl.appendChild(Qn),pl.appendChild(Og),Z.appendChild(pl)});let ue=Z.querySelectorAll("input");ue.length&&ue[0].focus()}let Ja=y=>{let E=[];return y instanceof Map?y.forEach((O,Z)=>{let ue=O;typeof ue=="object"&&(ue=Ja(ue)),E.push([Z,ue])}):Object.keys(y).forEach(O=>{let Z=y[O];typeof Z=="object"&&(Z=Ja(Z)),E.push([O,Z])}),E},ec=(y,E)=>!!E&&E.toString()===y.toString(),$f=y=>{let E=fn.innerParams.get(y);y.disableButtons(),E.input?dl(y,"confirm"):nr(y,!0)},ll=y=>{let E=fn.innerParams.get(y);y.disableButtons(),E.returnInputValueOnDeny?dl(y,"deny"):ua(y,!1)},aa=(y,E)=>{y.disableButtons(),E(Es.cancel)},dl=(y,E)=>{let O=fn.innerParams.get(y);if(!O.input){S(`The "input" parameter is needed to be set when using returnInputValueOn${C(E)}`);return}let Z=y.getInput(),ue=al(y,O);O.inputValidator?Bd(y,ue,E):Z&&!Z.checkValidity()?(y.enableButtons(),y.showValidationMessage(O.validationMessage||Z.validationMessage)):E==="deny"?ua(y,ue):nr(y,ue)},Bd=(y,E,O)=>{let Z=fn.innerParams.get(y);y.disableInput(),Promise.resolve().then(()=>B(Z.inputValidator(E,Z.validationMessage))).then(Re=>{y.enableButtons(),y.enableInput(),Re?y.showValidationMessage(Re):O==="deny"?ua(y,E):nr(y,E)})},ua=(y,E)=>{let O=fn.innerParams.get(y||void 0);O.showLoaderOnDeny&&xo(ye()),O.preDeny?(y.isAwaitingPromise=!0,Promise.resolve().then(()=>B(O.preDeny(E,O.validationMessage))).then(ue=>{ue===!1?(y.hideLoading(),qr(y)):y.close({isDenied:!0,value:typeof ue>"u"?E:ue})}).catch(ue=>tc(y||void 0,ue))):y.close({isDenied:!0,value:E})},Xo=(y,E)=>{y.close({isConfirmed:!0,value:E})},tc=(y,E)=>{y.rejectPromise(E)},nr=(y,E)=>{let O=fn.innerParams.get(y||void 0);O.showLoaderOnConfirm&&xo(),O.preConfirm?(y.resetValidationMessage(),y.isAwaitingPromise=!0,Promise.resolve().then(()=>B(O.preConfirm(E,O.validationMessage))).then(ue=>{Cr(ie())||ue===!1?(y.hideLoading(),qr(y)):Xo(y,typeof ue>"u"?E:ue)}).catch(ue=>tc(y||void 0,ue))):Xo(y,E)};function Or(){let y=fn.innerParams.get(this);if(!y)return;let E=fn.domCache.get(this);Ln(E.loader),Qe()?y.icon&&rn($()):Ud(E),zn([E.popup,E.actions],h.loading),E.popup.removeAttribute("aria-busy"),E.popup.removeAttribute("data-loading"),E.confirmButton.disabled=!1,E.denyButton.disabled=!1,E.cancelButton.disabled=!1}let Ud=y=>{let E=y.popup.getElementsByClassName(y.loader.getAttribute("data-button-to-replace"));E.length?rn(E[0],"inline-block"):zu()&&Ln(y.actions)};function Ss(){let y=fn.innerParams.get(this),E=fn.domCache.get(this);return E?Mr(E.popup,y.input):null}function g(y,E,O){let Z=fn.domCache.get(y);E.forEach(ue=>{Z[ue].disabled=O})}function T(y,E){let O=U();if(!(!O||!y))if(y.type==="radio"){let Z=O.querySelectorAll(`[name="${h.radio}"]`);for(let ue=0;ue<Z.length;ue++)Z[ue].disabled=E}else y.disabled=E}function V(){g(this,["confirmButton","denyButton","cancelButton"],!1)}function K(){g(this,["confirmButton","denyButton","cancelButton"],!0)}function oe(){T(this.getInput(),!1)}function fe(){T(this.getInput(),!0)}function Be(y){let E=fn.domCache.get(this),O=fn.innerParams.get(this);ft(E.validationMessage,y),E.validationMessage.className=h["validation-message"],O.customClass&&O.customClass.validationMessage&&yt(E.validationMessage,O.customClass.validationMessage),rn(E.validationMessage);let Z=this.getInput();Z&&(Z.setAttribute("aria-invalid","true"),Z.setAttribute("aria-describedby",h["validation-message"]),tr(Z),yt(Z,h.inputerror))}function Ft(){let y=fn.domCache.get(this);y.validationMessage&&Ln(y.validationMessage);let E=this.getInput();E&&(E.removeAttribute("aria-invalid"),E.removeAttribute("aria-describedby"),zn(E,h.inputerror))}let vn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Jt=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],kn={allowEnterKey:void 0},Rr=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Oi=y=>Object.prototype.hasOwnProperty.call(vn,y),Ri=y=>Jt.indexOf(y)!==-1,Jo=y=>kn[y],hl=y=>{Oi(y)||x(`Unknown parameter "${y}"`)},qf=y=>{Rr.includes(y)&&x(`The parameter "${y}" is incompatible with toasts`)},HE=y=>{let E=Jo(y);E&&R(y,E)},ca=y=>{y.backdrop===!1&&y.allowOutsideClick&&x('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),y.theme&&!["light","dark","auto","minimal","borderless","embed-iframe"].includes(y.theme)&&x(`Invalid theme "${y.theme}". Expected "light", "dark", "auto", "minimal", "borderless", or "embed-iframe"`);for(let E in y)hl(E),y.toast&&qf(E),HE(E)};function jd(y){let E=D(),O=U(),Z=fn.innerParams.get(this);if(!O||At(O,Z.hideClass.popup)){x("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let ue=$E(y),Re=Object.assign({},Z,ue);ca(Re),E.dataset.swal2Theme=Re.theme,wo(this,Re),fn.innerParams.set(this,Re),Object.defineProperties(this,{params:{value:Object.assign({},this.params,y),writable:!1,enumerable:!0}})}let $E=y=>{let E={};return Object.keys(y).forEach(O=>{Ri(O)?E[O]=y[O]:x(`Invalid parameter to update: ${O}`)}),E};function Gf(){let y=fn.domCache.get(this),E=fn.innerParams.get(this);if(!E){Ts(this);return}y.popup&&s.swalCloseEventFinishedCallback&&(s.swalCloseEventFinishedCallback(),delete s.swalCloseEventFinishedCallback),typeof E.didDestroy=="function"&&E.didDestroy(),s.eventEmitter.emit("didDestroy"),qE(this)}let qE=y=>{Ts(y),delete y.params,delete s.keydownHandler,delete s.keydownTarget,delete s.currentInstance},Ts=y=>{y.isAwaitingPromise?(Tg(fn,y),y.isAwaitingPromise=!0):(Tg(Is,y),Tg(fn,y),delete y.isAwaitingPromise,delete y.disableButtons,delete y.enableButtons,delete y.getInput,delete y.disableInput,delete y.enableInput,delete y.hideLoading,delete y.disableLoading,delete y.showValidationMessage,delete y.resetValidationMessage,delete y.close,delete y.closePopup,delete y.closeModal,delete y.closeToast,delete y.rejectPromise,delete y.update,delete y._destroy)},Tg=(y,E)=>{for(let O in y)y[O].delete(E)};var fl=Object.freeze({__proto__:null,_destroy:Gf,close:gi,closeModal:gi,closePopup:gi,closeToast:gi,disableButtons:K,disableInput:fe,disableLoading:Or,enableButtons:V,enableInput:oe,getInput:Ss,handleAwaitingPromise:qr,hideLoading:Or,rejectPromise:Nd,resetValidationMessage:Ft,showValidationMessage:Be,update:jd});let GE=(y,E,O)=>{y.toast?la(y,E,O):(Ag(E),Yf(E),Dg(y,E,O))},la=(y,E,O)=>{E.popup.onclick=()=>{y&&(Kf(y)||y.timer||y.input)||O(Es.close)}},Kf=y=>!!(y.showConfirmButton||y.showDenyButton||y.showCancelButton||y.showCloseButton),zd=!1,Ag=y=>{y.popup.onmousedown=()=>{y.container.onmouseup=function(E){y.container.onmouseup=()=>{},E.target===y.container&&(zd=!0)}}},Yf=y=>{y.container.onmousedown=E=>{E.target===y.container&&E.preventDefault(),y.popup.onmouseup=function(O){y.popup.onmouseup=()=>{},(O.target===y.popup||O.target instanceof HTMLElement&&y.popup.contains(O.target))&&(zd=!0)}}},Dg=(y,E,O)=>{E.container.onclick=Z=>{if(zd){zd=!1;return}Z.target===E.container&&j(y.allowOutsideClick)&&O(Es.backdrop)}},Zf=y=>typeof y=="object"&&y.jquery,nc=y=>y instanceof Element||Zf(y),Qf=y=>{let E={};return typeof y[0]=="object"&&!nc(y[0])?Object.assign(E,y[0]):["title","html","icon"].forEach((O,Z)=>{let ue=y[Z];typeof ue=="string"||nc(ue)?E[O]=ue:ue!==void 0&&S(`Unexpected type of ${O}! Expected "string" or "Element", got ${typeof ue}`)}),E};function Pg(){for(var y=arguments.length,E=new Array(y),O=0;O<y;O++)E[O]=arguments[O];return new this(...E)}function ty(y){class E extends this{_main(Z,ue){return super._main(Z,Object.assign({},y,ue))}}return E}let KE=()=>s.timeout&&s.timeout.getTimerLeft(),Wd=()=>{if(s.timeout)return _o(),s.timeout.stop()},ny=()=>{if(s.timeout){let y=s.timeout.start();return bs(y),y}},ry=()=>{let y=s.timeout;return y&&(y.running?Wd():ny())},YE=y=>{if(s.timeout){let E=s.timeout.increase(y);return bs(E,!0),E}},iy=()=>!!(s.timeout&&s.timeout.isRunning()),oy=!1,Eo={};function Xf(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Eo[y]=this,oy||(document.body.addEventListener("click",ZE),oy=!0)}let ZE=y=>{for(let E=y.target;E&&E!==document;E=E.parentNode)for(let O in Eo){let Z=E.getAttribute(O);if(Z){Eo[O].fire({template:Z});return}}};class Jf{constructor(){this.events={}}_getHandlersByEventName(E){return typeof this.events[E]>"u"&&(this.events[E]=[]),this.events[E]}on(E,O){let Z=this._getHandlersByEventName(E);Z.includes(O)||Z.push(O)}once(E,O){var Z=this;let ue=function(){Z.removeListener(E,ue);for(var Re=arguments.length,ut=new Array(Re),Ut=0;Ut<Re;Ut++)ut[Ut]=arguments[Ut];O.apply(Z,ut)};this.on(E,ue)}emit(E){for(var O=arguments.length,Z=new Array(O>1?O-1:0),ue=1;ue<O;ue++)Z[ue-1]=arguments[ue];this._getHandlersByEventName(E).forEach(Re=>{try{Re.apply(this,Z)}catch(ut){console.error(ut)}})}removeListener(E,O){let Z=this._getHandlersByEventName(E),ue=Z.indexOf(O);ue>-1&&Z.splice(ue,1)}removeAllListeners(E){this.events[E]!==void 0&&(this.events[E].length=0)}reset(){this.events={}}}s.eventEmitter=new Jf;var Hd=Object.freeze({__proto__:null,argsToParams:Qf,bindClickHandler:Xf,clickCancel:Dd,clickConfirm:il,clickDeny:Ku,enableLoading:xo,fire:Pg,getActions:ze,getCancelButton:Ee,getCloseButton:it,getConfirmButton:le,getContainer:D,getDenyButton:ye,getFocusableElements:vt,getFooter:Ye,getHtmlContainer:X,getIcon:$,getIconContent:ae,getImage:re,getInputLabel:we,getLoader:Ce,getPopup:U,getProgressSteps:J,getTimerLeft:KE,getTimerProgressBar:He,getTitle:de,getValidationMessage:ie,increaseTimer:YE,isDeprecatedParameter:Jo,isLoading:at,isTimerRunning:iy,isUpdatableParameter:Ri,isValidParameter:Oi,isVisible:oa,mixin:ty,off:(y,E)=>{if(!y){s.eventEmitter.reset();return}E?s.eventEmitter.removeListener(y,E):s.eventEmitter.removeAllListeners(y)},on:(y,E)=>{s.eventEmitter.on(y,E)},once:(y,E)=>{s.eventEmitter.once(y,E)},resumeTimer:ny,showLoading:xo,stopTimer:Wd,toggleTimer:ry});class XE{constructor(E,O){this.callback=E,this.remaining=O,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(E){let O=this.running;return O&&this.stop(),this.remaining+=E,O&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let rc=["swal-title","swal-html","swal-footer"],sy=y=>{let E=typeof y.template=="string"?document.querySelector(y.template):y.template;if(!E)return{};let O=E.content;return ep(O),Object.assign(ay(O),JE(O),da(O),uy(O),cy(O),$d(O),e2(O,rc))},ay=y=>{let E={};return Array.from(y.querySelectorAll("swal-param")).forEach(Z=>{es(Z,["name","value"]);let ue=Z.getAttribute("name"),Re=Z.getAttribute("value");!ue||!Re||(typeof vn[ue]=="boolean"?E[ue]=Re!=="false":typeof vn[ue]=="object"?E[ue]=JSON.parse(Re):E[ue]=Re)}),E},JE=y=>{let E={};return Array.from(y.querySelectorAll("swal-function-param")).forEach(Z=>{let ue=Z.getAttribute("name"),Re=Z.getAttribute("value");!ue||!Re||(E[ue]=new Function(`return ${Re}`)())}),E},da=y=>{let E={};return Array.from(y.querySelectorAll("swal-button")).forEach(Z=>{es(Z,["type","color","aria-label"]);let ue=Z.getAttribute("type");!ue||!["confirm","cancel","deny"].includes(ue)||(E[`${ue}ButtonText`]=Z.innerHTML,E[`show${C(ue)}Button`]=!0,Z.hasAttribute("color")&&(E[`${ue}ButtonColor`]=Z.getAttribute("color")),Z.hasAttribute("aria-label")&&(E[`${ue}ButtonAriaLabel`]=Z.getAttribute("aria-label")))}),E},uy=y=>{let E={},O=y.querySelector("swal-image");return O&&(es(O,["src","width","height","alt"]),O.hasAttribute("src")&&(E.imageUrl=O.getAttribute("src")||void 0),O.hasAttribute("width")&&(E.imageWidth=O.getAttribute("width")||void 0),O.hasAttribute("height")&&(E.imageHeight=O.getAttribute("height")||void 0),O.hasAttribute("alt")&&(E.imageAlt=O.getAttribute("alt")||void 0)),E},cy=y=>{let E={},O=y.querySelector("swal-icon");return O&&(es(O,["type","color"]),O.hasAttribute("type")&&(E.icon=O.getAttribute("type")),O.hasAttribute("color")&&(E.iconColor=O.getAttribute("color")),E.iconHtml=O.innerHTML),E},$d=y=>{let E={},O=y.querySelector("swal-input");O&&(es(O,["type","label","placeholder","value"]),E.input=O.getAttribute("type")||"text",O.hasAttribute("label")&&(E.inputLabel=O.getAttribute("label")),O.hasAttribute("placeholder")&&(E.inputPlaceholder=O.getAttribute("placeholder")),O.hasAttribute("value")&&(E.inputValue=O.getAttribute("value")));let Z=Array.from(y.querySelectorAll("swal-input-option"));return Z.length&&(E.inputOptions={},Z.forEach(ue=>{es(ue,["value"]);let Re=ue.getAttribute("value");if(!Re)return;let ut=ue.innerHTML;E.inputOptions[Re]=ut})),E},e2=(y,E)=>{let O={};for(let Z in E){let ue=E[Z],Re=y.querySelector(ue);Re&&(es(Re,[]),O[ue.replace(/^swal-/,"")]=Re.innerHTML.trim())}return O},ep=y=>{let E=rc.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(y.children).forEach(O=>{let Z=O.tagName.toLowerCase();E.includes(Z)||x(`Unrecognized element <${Z}>`)})},es=(y,E)=>{Array.from(y.attributes).forEach(O=>{E.indexOf(O.name)===-1&&x([`Unrecognized attribute "${O.name}" on <${y.tagName.toLowerCase()}>.`,`${E.length?`Allowed attributes are: ${E.join(", ")}`:"To set the value, use HTML within the element."}`])})},Mg=10,ly=y=>{let E=D(),O=U();typeof y.willOpen=="function"&&y.willOpen(O),s.eventEmitter.emit("willOpen",O);let ue=window.getComputedStyle(document.body).overflowY;fy(E,O,y),setTimeout(()=>{dy(E,O)},Mg),Ge()&&(hy(E,y.scrollbarPadding,ue),ei()),!Qe()&&!s.previousActiveElement&&(s.previousActiveElement=document.activeElement),typeof y.didOpen=="function"&&setTimeout(()=>y.didOpen(O)),s.eventEmitter.emit("didOpen",O),zn(E,h["no-transition"])},tp=y=>{let E=U();if(y.target!==E)return;let O=D();E.removeEventListener("animationend",tp),E.removeEventListener("transitionend",tp),O.style.overflowY="auto"},dy=(y,E)=>{Ji(E)?(y.style.overflowY="hidden",E.addEventListener("animationend",tp),E.addEventListener("transitionend",tp)):y.style.overflowY="auto"},hy=(y,E,O)=>{Zn(),E&&O!=="hidden"&&jf(O),setTimeout(()=>{y.scrollTop=0})},fy=(y,E,O)=>{yt(y,O.showClass.backdrop),O.animation?(E.style.setProperty("opacity","0","important"),rn(E,"grid"),setTimeout(()=>{yt(E,O.showClass.popup),E.style.removeProperty("opacity")},Mg)):rn(E,"grid"),yt([document.documentElement,document.body],h.shown),O.heightAuto&&O.backdrop&&!O.toast&&yt([document.documentElement,document.body],h["height-auto"])};var kg={email:(y,E)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(y)?Promise.resolve():Promise.resolve(E||"Invalid email address"),url:(y,E)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(y)?Promise.resolve():Promise.resolve(E||"Invalid URL")};function py(y){y.inputValidator||(y.input==="email"&&(y.inputValidator=kg.email),y.input==="url"&&(y.inputValidator=kg.url))}function t2(y){(!y.target||typeof y.target=="string"&&!document.querySelector(y.target)||typeof y.target!="string"&&!y.target.appendChild)&&(x('Target parameter is not valid, defaulting to "body"'),y.target="body")}function my(y){py(y),y.showLoaderOnConfirm&&!y.preConfirm&&x(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),t2(y),typeof y.title=="string"&&(y.title=y.title.split(`
`).join("<br />")),Ed(y)}let ts;var np=new WeakMap;class l{constructor(){if(r(this,np,void 0),typeof window>"u")return;ts=this;for(var E=arguments.length,O=new Array(E),Z=0;Z<E;Z++)O[Z]=arguments[Z];let ue=Object.freeze(this.constructor.argsToParams(O));this.params=ue,this.isAwaitingPromise=!1,i(np,this,this._main(ts.params))}_main(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ca(Object.assign({},O,E)),s.currentInstance){let Re=Is.swalPromiseResolve.get(s.currentInstance),{isAwaitingPromise:ut}=s.currentInstance;s.currentInstance._destroy(),ut||Re({isDismissed:!0}),Ge()&&ol()}s.currentInstance=ts;let Z=v(E,O);my(Z),Object.freeze(Z),s.timeout&&(s.timeout.stop(),delete s.timeout),clearTimeout(s.restoreFocusTimeout);let ue=I(ts);return wo(ts,Z),fn.innerParams.set(ts,Z),f(ts,ue,Z)}then(E){return e(np,this).then(E)}finally(E){return e(np,this).finally(E)}}let f=(y,E,O)=>new Promise((Z,ue)=>{let Re=ut=>{y.close({isDismissed:!0,dismiss:ut})};Is.swalPromiseResolve.set(y,Z),Is.swalPromiseReject.set(y,ue),E.confirmButton.onclick=()=>{$f(y)},E.denyButton.onclick=()=>{ll(y)},E.cancelButton.onclick=()=>{aa(y,Re)},E.closeButton.onclick=()=>{Re(Es.close)},GE(O,E,Re),Uf(s,O,Re),no(y,O),ly(O),M(s,O,Re),q(E,O),setTimeout(()=>{E.container.scrollTop=0})}),v=(y,E)=>{let O=sy(y),Z=Object.assign({},vn,E,O,y);return Z.showClass=Object.assign({},vn.showClass,Z.showClass),Z.hideClass=Object.assign({},vn.hideClass,Z.hideClass),Z.animation===!1&&(Z.showClass={backdrop:"swal2-noanimation"},Z.hideClass={}),Z},I=y=>{let E={popup:U(),container:D(),actions:ze(),confirmButton:le(),denyButton:ye(),cancelButton:Ee(),loader:Ce(),closeButton:it(),validationMessage:ie(),progressSteps:J()};return fn.domCache.set(y,E),E},M=(y,E,O)=>{let Z=He();Ln(Z),E.timer&&(y.timeout=new XE(()=>{O("timer"),delete y.timeout},E.timer),E.timerProgressBar&&(rn(Z),Tn(Z,E,"timerProgressBar"),setTimeout(()=>{y.timeout&&y.timeout.running&&bs(E.timer)})))},q=(y,E)=>{if(!E.toast){if(!j(E.allowEnterKey)){R("allowEnterKey"),pe();return}ee(y)||ce(y,E)||Yo(-1,1)}},ee=y=>{let E=Array.from(y.popup.querySelectorAll("[autofocus]"));for(let O of E)if(O instanceof HTMLElement&&Cr(O))return O.focus(),!0;return!1},ce=(y,E)=>E.focusDeny&&Cr(y.denyButton)?(y.denyButton.focus(),!0):E.focusCancel&&Cr(y.cancelButton)?(y.cancelButton.focus(),!0):E.focusConfirm&&Cr(y.confirmButton)?(y.confirmButton.focus(),!0):!1,pe=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let y=new Date,E=localStorage.getItem("swal-initiation");E?(y.getTime()-Date.parse(E))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let O=document.createElement("audio");O.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",O.loop=!0,document.body.appendChild(O),setTimeout(()=>{O.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${y}`)}l.prototype.disableButtons=K,l.prototype.enableButtons=V,l.prototype.getInput=Ss,l.prototype.disableInput=fe,l.prototype.enableInput=oe,l.prototype.hideLoading=Or,l.prototype.disableLoading=Or,l.prototype.showValidationMessage=Be,l.prototype.resetValidationMessage=Ft,l.prototype.close=gi,l.prototype.closePopup=gi,l.prototype.closeModal=gi,l.prototype.closeToast=gi,l.prototype.rejectPromise=Nd,l.prototype.update=jd,l.prototype._destroy=Gf,Object.assign(l,Hd),Object.keys(fl).forEach(y=>{l[y]=function(){return ts&&ts[y]?ts[y](...arguments):null}}),l.DismissReason=Es,l.version="11.21.0";let Ae=l;return Ae.default=Ae,Ae});typeof Pu<"u"&&Pu.Sweetalert2&&(Pu.swal=Pu.sweetAlert=Pu.Swal=Pu.SweetAlert=Pu.Sweetalert2);typeof document<"u"&&function(n,t){var e=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(e),e.styleSheet)e.styleSheet.disabled||(e.styleSheet.cssText=t);else try{e.innerHTML=t}catch{e.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-footer-border-color: #eee;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.1s, box-shadow 0.1s;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.1s, box-shadow 0.1s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-button-darken-hover: rgba(0, 0, 0, 0.1);--swal2-button-darken-active: rgba(0, 0, 0, 0.2);--swal2-button-transition: box-shadow 0.1s;--swal2-confirm-button-border: 0;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-deny-button-border: 0;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-cancel-button-border: 0;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(var(--swal2-button-darken-hover), var(--swal2-button-darken-hover))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(var(--swal2-button-darken-active), var(--swal2-button-darken-active))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-button-transition);box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:var(--swal2-confirm-button-border);border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:var(--swal2-deny-button-border);border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:var(--swal2-cancel-button-border);border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-outline)}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:1px solid #d9d9d9;border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});var LP=rp((I1,yU)=>{"use strict";(function(n,t){typeof I1=="object"&&typeof yU<"u"?t(I1):typeof define=="function"&&define.amd?define(["exports"],t):(n=typeof globalThis<"u"?globalThis:n||self,t(n.leaflet={}))})(I1,function(n){"use strict";var t="1.9.4";function e(l){var f,v,I,M;for(v=1,I=arguments.length;v<I;v++){M=arguments[v];for(f in M)l[f]=M[f]}return l}var r=Object.create||function(){function l(){}return function(f){return l.prototype=f,new l}}();function i(l,f){var v=Array.prototype.slice;if(l.bind)return l.bind.apply(l,v.call(arguments,1));var I=v.call(arguments,2);return function(){return l.apply(f,I.length?I.concat(v.call(arguments)):arguments)}}var o=0;function s(l){return"_leaflet_id"in l||(l._leaflet_id=++o),l._leaflet_id}function a(l,f,v){var I,M,q,ee;return ee=function(){I=!1,M&&(q.apply(v,M),M=!1)},q=function(){I?M=arguments:(l.apply(v,arguments),setTimeout(ee,f),I=!0)},q}function u(l,f,v){var I=f[1],M=f[0],q=I-M;return l===I&&v?l:((l-M)%q+q)%q+M}function c(){return!1}function d(l,f){if(f===!1)return l;var v=Math.pow(10,f===void 0?6:f);return Math.round(l*v)/v}function h(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function p(l){return h(l).split(/\s+/)}function m(l,f){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?r(l.options):{});for(var v in f)l.options[v]=f[v];return l.options}function _(l,f,v){var I=[];for(var M in l)I.push(encodeURIComponent(v?M.toUpperCase():M)+"="+encodeURIComponent(l[M]));return(!f||f.indexOf("?")===-1?"?":"&")+I.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function x(l,f){return l.replace(C,function(v,I){var M=f[I];if(M===void 0)throw new Error("No value provided for variable "+v);return typeof M=="function"&&(M=M(f)),M})}var S=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function N(l,f){for(var v=0;v<l.length;v++)if(l[v]===f)return v;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var j=0;function H(l){var f=+new Date,v=Math.max(0,16-(f-j));return j=f+v,window.setTimeout(l,v)}var B=window.requestAnimationFrame||R("RequestAnimationFrame")||H,k=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function D(l,f,v){if(v&&B===H)l.call(f);else return B.call(window,i(l,f))}function P(l){l&&k.call(window,l)}var z={__proto__:null,extend:e,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:u,falseFn:c,formatNum:d,trim:h,splitWords:p,setOptions:m,getParamString:_,template:x,isArray:S,indexOf:N,emptyImageUrl:F,requestFn:B,cancelFn:k,requestAnimFrame:D,cancelAnimFrame:P};function U(){}U.extend=function(l){var f=function(){m(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=f.__super__=this.prototype,I=r(v);I.constructor=f,f.prototype=I;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(f[M]=this[M]);return l.statics&&e(f,l.statics),l.includes&&($(l.includes),e.apply(null,[I].concat(l.includes))),e(I,l),delete I.statics,delete I.includes,I.options&&(I.options=v.options?r(v.options):{},e(I.options,l.options)),I._initHooks=[],I.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var q=0,ee=I._initHooks.length;q<ee;q++)I._initHooks[q].call(this)}},f},U.include=function(l){var f=this.prototype.options;return e(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},U.mergeOptions=function(l){return e(this.prototype.options,l),this},U.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),v=typeof l=="function"?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function $(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=S(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(l,f,v){if(typeof l=="object")for(var I in l)this._on(I,l[I],f);else{l=p(l);for(var M=0,q=l.length;M<q;M++)this._on(l[M],f,v)}return this},off:function(l,f,v){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var I in l)this._off(I,l[I],f);else{l=p(l);for(var M=arguments.length===1,q=0,ee=l.length;q<ee;q++)M?this._off(l[q]):this._off(l[q],f,v)}return this},_on:function(l,f,v,I){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(l,f,v)===!1){v===this&&(v=void 0);var M={fn:f,ctx:v};I&&(M.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(M)}},_off:function(l,f,v){var I,M,q;if(this._events&&(I=this._events[l],!!I)){if(arguments.length===1){if(this._firingCount)for(M=0,q=I.length;M<q;M++)I[M].fn=c;delete this._events[l];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var ee=this._listens(l,f,v);if(ee!==!1){var ce=I[ee];this._firingCount&&(ce.fn=c,this._events[l]=I=I.slice()),I.splice(ee,1)}}},fire:function(l,f,v){if(!this.listens(l,v))return this;var I=e({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var M=this._events[l];if(M){this._firingCount=this._firingCount+1||1;for(var q=0,ee=M.length;q<ee;q++){var ce=M[q],pe=ce.fn;ce.once&&this.off(l,pe,ce.ctx),pe.call(ce.ctx||this,I)}this._firingCount--}}return v&&this._propagateEvent(I),this},listens:function(l,f,v,I){typeof l!="string"&&console.warn('"string" type argument expected');var M=f;typeof f!="function"&&(I=!!f,M=void 0,v=void 0);var q=this._events&&this._events[l];if(q&&q.length&&this._listens(l,M,v)!==!1)return!0;if(I){for(var ee in this._eventParents)if(this._eventParents[ee].listens(l,f,v,I))return!0}return!1},_listens:function(l,f,v){if(!this._events)return!1;var I=this._events[l]||[];if(!f)return!!I.length;v===this&&(v=void 0);for(var M=0,q=I.length;M<q;M++)if(I[M].fn===f&&I[M].ctx===v)return M;return!1},once:function(l,f,v){if(typeof l=="object")for(var I in l)this._on(I,l[I],f,!0);else{l=p(l);for(var M=0,q=l.length;M<q;M++)this._on(l[M],f,v,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[s(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[s(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,e({layer:l.target,propagatedFrom:l.target},l),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var de=U.extend(ae);function X(l,f,v){this.x=v?Math.round(l):l,this.y=v?Math.round(f):f}var re=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(l){return this.clone()._add(J(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(J(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new X(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new X(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=re(this.x),this.y=re(this.y),this},distanceTo:function(l){l=J(l);var f=l.x-this.x,v=l.y-this.y;return Math.sqrt(f*f+v*v)},equals:function(l){return l=J(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=J(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+d(this.x)+", "+d(this.y)+")"}};function J(l,f,v){return l instanceof X?l:S(l)?new X(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new X(l.x,l.y):new X(l,f,v)}function ie(l,f){if(l)for(var v=f?[l,f]:l,I=0,M=v.length;I<M;I++)this.extend(v[I])}ie.prototype={extend:function(l){var f,v;if(!l)return this;if(l instanceof X||typeof l[0]=="number"||"x"in l)f=v=J(l);else if(l=le(l),f=l.min,v=l.max,!f||!v)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=v.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(l){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,v;return typeof l[0]=="number"||l instanceof X?l=J(l):l=le(l),l instanceof ie?(f=l.min,v=l.max):f=v=l,f.x>=this.min.x&&v.x<=this.max.x&&f.y>=this.min.y&&v.y<=this.max.y},intersects:function(l){l=le(l);var f=this.min,v=this.max,I=l.min,M=l.max,q=M.x>=f.x&&I.x<=v.x,ee=M.y>=f.y&&I.y<=v.y;return q&&ee},overlaps:function(l){l=le(l);var f=this.min,v=this.max,I=l.min,M=l.max,q=M.x>f.x&&I.x<v.x,ee=M.y>f.y&&I.y<v.y;return q&&ee},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var f=this.min,v=this.max,I=Math.abs(f.x-v.x)*l,M=Math.abs(f.y-v.y)*l;return le(J(f.x-I,f.y-M),J(v.x+I,v.y+M))},equals:function(l){return l?(l=le(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function le(l,f){return!l||l instanceof ie?l:new ie(l,f)}function Ee(l,f){if(l)for(var v=f?[l,f]:l,I=0,M=v.length;I<M;I++)this.extend(v[I])}Ee.prototype={extend:function(l){var f=this._southWest,v=this._northEast,I,M;if(l instanceof we)I=l,M=l;else if(l instanceof Ee){if(I=l._southWest,M=l._northEast,!I||!M)return this}else return l?this.extend(Ce(l)||ye(l)):this;return!f&&!v?(this._southWest=new we(I.lat,I.lng),this._northEast=new we(M.lat,M.lng)):(f.lat=Math.min(I.lat,f.lat),f.lng=Math.min(I.lng,f.lng),v.lat=Math.max(M.lat,v.lat),v.lng=Math.max(M.lng,v.lng)),this},pad:function(l){var f=this._southWest,v=this._northEast,I=Math.abs(f.lat-v.lat)*l,M=Math.abs(f.lng-v.lng)*l;return new Ee(new we(f.lat-I,f.lng-M),new we(v.lat+I,v.lng+M))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof we||"lat"in l?l=Ce(l):l=ye(l);var f=this._southWest,v=this._northEast,I,M;return l instanceof Ee?(I=l.getSouthWest(),M=l.getNorthEast()):I=M=l,I.lat>=f.lat&&M.lat<=v.lat&&I.lng>=f.lng&&M.lng<=v.lng},intersects:function(l){l=ye(l);var f=this._southWest,v=this._northEast,I=l.getSouthWest(),M=l.getNorthEast(),q=M.lat>=f.lat&&I.lat<=v.lat,ee=M.lng>=f.lng&&I.lng<=v.lng;return q&&ee},overlaps:function(l){l=ye(l);var f=this._southWest,v=this._northEast,I=l.getSouthWest(),M=l.getNorthEast(),q=M.lat>f.lat&&I.lat<v.lat,ee=M.lng>f.lng&&I.lng<v.lng;return q&&ee},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return l?(l=ye(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(l,f){return l instanceof Ee?l:new Ee(l,f)}function we(l,f,v){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,v!==void 0&&(this.alt=+v)}we.prototype={equals:function(l,f){if(!l)return!1;l=Ce(l);var v=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return v<=(f===void 0?1e-9:f)},toString:function(l){return"LatLng("+d(this.lat,l)+", "+d(this.lng,l)+")"},distanceTo:function(l){return Ye.distance(this,Ce(l))},wrap:function(){return Ye.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,v=f/Math.cos(Math.PI/180*this.lat);return ye([this.lat-f,this.lng-v],[this.lat+f,this.lng+v])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function Ce(l,f,v){return l instanceof we?l:S(l)&&typeof l[0]!="object"?l.length===3?new we(l[0],l[1],l[2]):l.length===2?new we(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new we(l.lat,"lng"in l?l.lng:l.lon,l.alt):f===void 0?null:new we(l,f,v)}var ze={latLngToPoint:function(l,f){var v=this.projection.project(l),I=this.scale(f);return this.transformation._transform(v,I)},pointToLatLng:function(l,f){var v=this.scale(f),I=this.transformation.untransform(l,v);return this.projection.unproject(I)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,v=this.scale(l),I=this.transformation.transform(f.min,v),M=this.transformation.transform(f.max,v);return new ie(I,M)},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?u(l.lng,this.wrapLng,!0):l.lng,v=this.wrapLat?u(l.lat,this.wrapLat,!0):l.lat,I=l.alt;return new we(v,f,I)},wrapLatLngBounds:function(l){var f=l.getCenter(),v=this.wrapLatLng(f),I=f.lat-v.lat,M=f.lng-v.lng;if(I===0&&M===0)return l;var q=l.getSouthWest(),ee=l.getNorthEast(),ce=new we(q.lat-I,q.lng-M),pe=new we(ee.lat-I,ee.lng-M);return new Ee(ce,pe)}},Ye=e({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var v=Math.PI/180,I=l.lat*v,M=f.lat*v,q=Math.sin((f.lat-l.lat)*v/2),ee=Math.sin((f.lng-l.lng)*v/2),ce=q*q+Math.cos(I)*Math.cos(M)*ee*ee,pe=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*pe}}),He=6378137,it={R:He,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,v=this.MAX_LATITUDE,I=Math.max(Math.min(v,l.lat),-v),M=Math.sin(I*f);return new X(this.R*l.lng*f,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(l){var f=180/Math.PI;return new we((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:function(){var l=He*Math.PI;return new ie([-l,-l],[l,l])}()};function Je(l,f,v,I){if(S(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=f,this._c=v,this._d=I}Je.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return f=f||1,l.x=f*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return f=f||1,new X((l.x/f-this._b)/this._a,(l.y/f-this._d)/this._c)}};function vt(l,f,v,I){return new Je(l,f,v,I)}var Ge=e({},Ye,{code:"EPSG:3857",projection:it,transformation:function(){var l=.5/(Math.PI*it.R);return vt(l,.5,-l,.5)}()}),Qe=e({},Ge,{code:"EPSG:900913"});function at(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ft(l,f){var v="",I,M,q,ee,ce,pe;for(I=0,q=l.length;I<q;I++){for(ce=l[I],M=0,ee=ce.length;M<ee;M++)pe=ce[M],v+=(M?"L":"M")+pe.x+" "+pe.y;v+=f?et.svg?"z":"x":""}return v||"M0 0"}var At=document.documentElement.style,cn="ActiveXObject"in window,Tn=cn&&!document.addEventListener,Mr="msLaunchUri"in navigator&&!("documentMode"in document),tr=mi("webkit"),Xi=mi("android"),yt=mi("android 2")||mi("android 3"),zn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),dr=Xi&&mi("Google")&&zn<537&&!("AudioNode"in window),hr=!!window.opera,rn=!Mr&&mi("chrome"),Ln=mi("gecko")&&!tr&&!hr&&!cn,An=!rn&&mi("safari"),hn=mi("phantom"),pi="OTransition"in At,Cr=navigator.platform.indexOf("Win")===0,zu=cn&&"transition"in At,Ha="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!yt,Ji="MozPerspective"in At,bs=!window.L_DISABLE_3D&&(zu||Ha||Ji)&&!pi&&!hn,_o=typeof orientation<"u"||mi("mobile"),wd=_o&&tr,Ig=_o&&Ha,Mf=!window.PointerEvent&&window.MSPointerEvent,yo=!!(window.PointerEvent||Mf),Cd="ontouchstart"in window||!!window.TouchEvent,kf=!window.L_NO_TOUCH&&(Cd||yo),Wu=_o&&hr,xd=_o&&Ln,Ed=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Wo=function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",c,f),window.removeEventListener("testPassiveEventSupport",c,f)}catch{}return l}(),Of=function(){return!!document.createElement("canvas").getContext}(),$a=!!(document.createElementNS&&at("svg").createSVGRect),Rf=!!$a&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Hu=!$a&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),Nf=navigator.platform.indexOf("Mac")===0,xr=navigator.platform.indexOf("Linux")===0;function mi(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var et={ie:cn,ielt9:Tn,edge:Mr,webkit:tr,android:Xi,android23:yt,androidStock:dr,opera:hr,chrome:rn,gecko:Ln,safari:An,phantom:hn,opera12:pi,win:Cr,ie3d:zu,webkit3d:Ha,gecko3d:Ji,any3d:bs,mobile:_o,mobileWebkit:wd,mobileWebkit3d:Ig,msPointer:Mf,pointer:yo,touch:kf,touchNative:Cd,mobileOpera:Wu,mobileGecko:xd,retina:Ed,passiveEvents:Wo,canvas:Of,svg:$a,vml:Hu,inlineSvg:Rf,mac:Nf,linux:xr},qa=et.msPointer?"MSPointerDown":"pointerdown",Ff=et.msPointer?"MSPointerMove":"pointermove",Lf=et.msPointer?"MSPointerUp":"pointerup",na=et.msPointer?"MSPointerCancel":"pointercancel",fn={touchstart:qa,touchmove:Ff,touchend:Lf,touchcancel:na},Vf={touchstart:Wn,touchmove:$o,touchend:$o,touchcancel:$o},Ho={},Id=!1;function Sd(l,f,v){return f==="touchstart"&&tl(),Vf[f]?(v=Vf[f].bind(this,v),l.addEventListener(fn[f],v,!1),v):(console.warn("wrong event specified:",f),c)}function Jc(l,f,v){if(!fn[f]){console.warn("wrong event specified:",f);return}l.removeEventListener(fn[f],v,!1)}function ws(l){Ho[l.pointerId]=l}function el(l){Ho[l.pointerId]&&(Ho[l.pointerId]=l)}function ra(l){delete Ho[l.pointerId]}function tl(){Id||(document.addEventListener(qa,ws,!0),document.addEventListener(Ff,el,!0),document.addEventListener(Lf,ra,!0),document.addEventListener(na,ra,!0),Id=!0)}function $o(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var v in Ho)f.touches.push(Ho[v]);f.changedTouches=[f],l(f)}}function Wn(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&Zn(f),$o(l,f)}function Bf(l){var f={},v,I;for(I in l)v=l[I],f[I]=v&&v.bind?v.bind(l):v;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var Sg=200;function nl(l,f){l.addEventListener("dblclick",f);var v=0,I;function M(q){if(q.detail!==1){I=q.detail;return}if(!(q.pointerType==="mouse"||q.sourceCapabilities&&!q.sourceCapabilities.firesTouchEvents)){var ee=kd(q);if(!(ee.some(function(pe){return pe instanceof HTMLLabelElement&&pe.attributes.for})&&!ee.some(function(pe){return pe instanceof HTMLInputElement||pe instanceof HTMLSelectElement}))){var ce=Date.now();ce-v<=Sg?(I++,I===2&&f(Bf(q))):I=1,v=ce}}}return l.addEventListener("click",M),{dblclick:f,simDblclick:M}}function Td(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}var Ga=eo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qo=eo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cs=qo==="webkitTransition"||qo==="OTransition"?qo+"End":"transitionend";function $u(l){return typeof l=="string"?document.getElementById(l):l}function qu(l,f){var v=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!v||v==="auto")&&document.defaultView){var I=document.defaultView.getComputedStyle(l,null);v=I?I[f]:null}return v==="auto"?null:v}function Gt(l,f,v){var I=document.createElement(l);return I.className=f||"",v&&v.appendChild(I),I}function Mn(l){var f=l.parentNode;f&&f.removeChild(l)}function ia(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Go(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function Ko(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function Gu(l,f){if(l.classList!==void 0)return l.classList.contains(f);var v=xs(l);return v.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(v)}function Et(l,f){if(l.classList!==void 0)for(var v=p(f),I=0,M=v.length;I<M;I++)l.classList.add(v[I]);else if(!Gu(l,f)){var q=xs(l);Ad(l,(q?q+" ":"")+f)}}function Yn(l,f){l.classList!==void 0?l.classList.remove(f):Ad(l,h((" "+xs(l)+" ").replace(" "+f+" "," ")))}function Ad(l,f){l.className.baseVal===void 0?l.className=f:l.className.baseVal=f}function xs(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function kr(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&rl(l,f)}function rl(l,f){var v=!1,I="DXImageTransform.Microsoft.Alpha";try{v=l.filters.item(I)}catch{if(f===1)return}f=Math.round(f*100),v?(v.Enabled=f!==100,v.Opacity=f):l.style.filter+=" progid:"+I+"(opacity="+f+")"}function eo(l){for(var f=document.documentElement.style,v=0;v<l.length;v++)if(l[v]in f)return l[v];return!1}function $r(l,f,v){var I=f||new X(0,0);l.style[Ga]=(et.ie3d?"translate("+I.x+"px,"+I.y+"px)":"translate3d("+I.x+"px,"+I.y+"px,0)")+(v?" scale("+v+")":"")}function Vn(l,f){l._leaflet_pos=f,et.any3d?$r(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function bo(l){return l._leaflet_pos||new X(0,0)}var Ka,ln,Ya;if("onselectstart"in document)Ka=function(){Ct(window,"selectstart",Zn)},ln=function(){mn(window,"selectstart",Zn)};else{var wo=eo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ka=function(){if(wo){var l=document.documentElement.style;Ya=l[wo],l[wo]="none"}},ln=function(){wo&&(document.documentElement.style[wo]=Ya,Ya=void 0)}}function oa(){Ct(window,"dragstart",Zn)}function il(){mn(window,"dragstart",Zn)}var Ku,Dd;function Es(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Yu(),Ku=l,Dd=l.style.outlineStyle,l.style.outlineStyle="none",Ct(window,"keydown",Yu))}function Yu(){Ku&&(Ku.style.outlineStyle=Dd,Ku=void 0,Dd=void 0,mn(window,"keydown",Yu))}function Uf(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Yo(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var Zo={__proto__:null,TRANSFORM:Ga,TRANSITION:qo,TRANSITION_END:Cs,get:$u,getStyle:qu,create:Gt,remove:Mn,empty:ia,toFront:Go,toBack:Ko,hasClass:Gu,addClass:Et,removeClass:Yn,setClass:Ad,getClass:xs,setOpacity:kr,testProp:eo,setTransform:$r,setPosition:Vn,getPosition:bo,get disableTextSelection(){return Ka},get enableTextSelection(){return ln},disableImageDrag:oa,enableImageDrag:il,preventOutline:Es,restoreOutline:Yu,getSizedParentNode:Uf,getScale:Yo};function Ct(l,f,v,I){if(f&&typeof f=="object")for(var M in f)Md(l,M,f[M],v);else{f=p(f);for(var q=0,ee=f.length;q<ee;q++)Md(l,f[q],v,I)}return this}var to="_leaflet_events";function mn(l,f,v,I){if(arguments.length===1)sa(l),delete l[to];else if(f&&typeof f=="object")for(var M in f)Is(l,M,f[M],v);else if(f=p(f),arguments.length===2)sa(l,function(ce){return N(f,ce)!==-1});else for(var q=0,ee=f.length;q<ee;q++)Is(l,f[q],v,I);return this}function sa(l,f){for(var v in l[to]){var I=v.split(/\d/)[0];(!f||f(I))&&Is(l,I,null,null,v)}}var Pd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Md(l,f,v,I){var M=f+s(v)+(I?"_"+s(I):"");if(l[to]&&l[to][M])return this;var q=function(ce){return v.call(I||l,ce||window.event)},ee=q;!et.touchNative&&et.pointer&&f.indexOf("touch")===0?q=Sd(l,f,q):et.touch&&f==="dblclick"?q=nl(l,q):"addEventListener"in l?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?l.addEventListener(Pd[f]||f,q,et.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(q=function(ce){ce=ce||window.event,Qu(l,ce)&&ee(ce)},l.addEventListener(Pd[f],q,!1)):l.addEventListener(f,ee,!1):l.attachEvent("on"+f,q),l[to]=l[to]||{},l[to][M]=q}function Is(l,f,v,I,M){M=M||f+s(v)+(I?"_"+s(I):"");var q=l[to]&&l[to][M];if(!q)return this;!et.touchNative&&et.pointer&&f.indexOf("touch")===0?Jc(l,f,q):et.touch&&f==="dblclick"?Td(l,q):"removeEventListener"in l?l.removeEventListener(Pd[f]||f,q,!1):l.detachEvent("on"+f,q),l[to][M]=null}function ei(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ol(l){return Md(l,"wheel",ei),this}function Za(l){return Ct(l,"mousedown touchstart dblclick contextmenu",ei),l._leaflet_disable_click=!0,this}function Zn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Co(l){return Zn(l),ei(l),this}function kd(l){if(l.composedPath)return l.composedPath();for(var f=[],v=l.target;v;)f.push(v),v=v.parentNode;return f}function Qa(l,f){if(!f)return new X(l.clientX,l.clientY);var v=Yo(f),I=v.boundingClientRect;return new X((l.clientX-I.left)/v.x-f.clientLeft,(l.clientY-I.top)/v.y-f.clientTop)}var Zu=et.linux&&et.chrome?window.devicePixelRatio:et.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Od(l){return et.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Zu:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Qu(l,f){var v=f.relatedTarget;if(!v)return!0;try{for(;v&&v!==l;)v=v.parentNode}catch{return!1}return v!==l}var gn={__proto__:null,on:Ct,off:mn,stopPropagation:ei,disableScrollPropagation:ol,disableClickPropagation:Za,preventDefault:Zn,stop:Co,getPropagationPath:kd,getMousePosition:Qa,getWheelDelta:Od,isExternalTarget:Qu,addListener:Ct,removeListener:mn},jf=de.extend({run:function(l,f,v,I){this.stop(),this._el=l,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(I||.5,.2),this._startPos=bo(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,v=this._duration*1e3;f<v?this._runFrame(this._easeOut(f/v),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var v=this._startPos.add(this._offset.multiplyBy(l));f&&v._round(),Vn(this._el,v),this.fire("step")},_complete:function(){P(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),Kt=de.extend({options:{crs:Ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=m(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(Ce(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qo&&et.any3d&&!et.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ct(this._proxy,Cs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,v){if(f=f===void 0?this._zoom:this._limitZoom(f),l=this._limitCenter(Ce(l),f,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=e({animate:v.animate},v.zoom),v.pan=e({animate:v.animate,duration:v.duration},v.pan));var I=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,v.zoom):this._tryAnimatedPan(l,v.pan);if(I)return clearTimeout(this._sizeTimer),this}return this._resetView(l,f,v.pan&&v.pan.noMoveStart),this},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return l=l||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,f)},zoomOut:function(l,f){return l=l||(et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,f)},setZoomAround:function(l,f,v){var I=this.getZoomScale(f),M=this.getSize().divideBy(2),q=l instanceof X?l:this.latLngToContainerPoint(l),ee=q.subtract(M).multiplyBy(1-1/I),ce=this.containerPointToLatLng(M.add(ee));return this.setView(ce,f,{zoom:v})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():ye(l);var v=J(f.paddingTopLeft||f.padding||[0,0]),I=J(f.paddingBottomRight||f.padding||[0,0]),M=this.getBoundsZoom(l,!1,v.add(I));if(M=typeof f.maxZoom=="number"?Math.min(f.maxZoom,M):M,M===1/0)return{center:l.getCenter(),zoom:M};var q=I.subtract(v).divideBy(2),ee=this.project(l.getSouthWest(),M),ce=this.project(l.getNorthEast(),M),pe=this.unproject(ee.add(ce).divideBy(2).add(q),M);return{center:pe,zoom:M}},fitBounds:function(l,f){if(l=ye(l),!l.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(l,f);return this.setView(v.center,v.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(l=J(l).round(),f=f||{},!l.x&&!l.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new jf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){Et(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,v,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,v){if(v=v||{},v.animate===!1||!et.any3d)return this.setView(l,f,v);this._stop();var I=this.project(this.getCenter()),M=this.project(l),q=this.getSize(),ee=this._zoom;l=Ce(l),f=f===void 0?ee:f;var ce=Math.max(q.x,q.y),pe=ce*this.getZoomScale(ee,f),Ae=M.distanceTo(I)||1,y=1.42,E=y*y;function O(Nr){var gy=Nr?-1:1,QH=Nr?pe:ce,XH=pe*pe-ce*ce+gy*E*E*Ae*Ae,JH=2*QH*E*Ae,n2=XH/JH,VO=Math.sqrt(n2*n2+1)-n2,e$=VO<1e-9?-18:Math.log(VO);return e$}function Z(Nr){return(Math.exp(Nr)-Math.exp(-Nr))/2}function ue(Nr){return(Math.exp(Nr)+Math.exp(-Nr))/2}function Re(Nr){return Z(Nr)/ue(Nr)}var ut=O(0);function Ut(Nr){return ce*(ue(ut)/ue(ut+y*Nr))}function Qn(Nr){return ce*(ue(ut)*Re(ut+y*Nr)-Z(ut))/E}function pl(Nr){return 1-Math.pow(1-Nr,1.5)}var Og=Date.now(),FO=(O(1)-ut)/y,ZH=v.duration?1e3*v.duration:1e3*FO*.8;function LO(){var Nr=(Date.now()-Og)/ZH,gy=pl(Nr)*FO;Nr<=1?(this._flyToFrame=D(LO,this),this._move(this.unproject(I.add(M.subtract(I).multiplyBy(Qn(gy)/Ae)),ee),this.getScaleZoom(ce/Ut(gy),ee),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),LO.call(this),this},flyToBounds:function(l,f){var v=this._getBoundsCenterZoom(l,f);return this.flyTo(v.center,v.zoom,f)},setMaxBounds:function(l){return l=ye(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var v=this.getCenter(),I=this._limitCenter(v,this._zoom,ye(l));return v.equals(I)||this.panTo(I,f),this._enforcingBounds=!1,this},panInside:function(l,f){f=f||{};var v=J(f.paddingTopLeft||f.padding||[0,0]),I=J(f.paddingBottomRight||f.padding||[0,0]),M=this.project(this.getCenter()),q=this.project(l),ee=this.getPixelBounds(),ce=le([ee.min.add(v),ee.max.subtract(I)]),pe=ce.getSize();if(!ce.contains(q)){this._enforcingBounds=!0;var Ae=q.subtract(ce.getCenter()),y=ce.extend(q).getSize().subtract(pe);M.x+=Ae.x<0?-y.x:y.x,M.y+=Ae.y<0?-y.y:y.y,this.panTo(this.unproject(M),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=e({animate:!1,pan:!0},l===!0?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),I=f.divideBy(2).round(),M=v.divideBy(2).round(),q=I.subtract(M);return!q.x&&!q.y?this:(l.animate&&l.pan?this.panBy(q):(l.pan&&this._rawPanBy(q),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=e({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=i(this._handleGeolocationResponse,this),v=i(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,v,l):navigator.geolocation.getCurrentPosition(f,v,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,v=l.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var f=l.coords.latitude,v=l.coords.longitude,I=new we(f,v),M=I.toBounds(l.coords.accuracy*2),q=this._locateOptions;if(q.setView){var ee=this.getBoundsZoom(M);this.setView(I,q.maxZoom?Math.min(ee,q.maxZoom):ee)}var ce={latlng:I,bounds:M,timestamp:l.timestamp};for(var pe in l.coords)typeof l.coords[pe]=="number"&&(ce[pe]=l.coords[pe]);this.fire("locationfound",ce)}},addHandler:function(l,f){if(!f)return this;var v=this[l]=new f(this);return this._handlers.push(v),this.options[l]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(P(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Mn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var v="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),I=Gt("div",v,f||this._mapPane);return l&&(this._panes[l]=I),I},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),f=this.unproject(l.getBottomLeft()),v=this.unproject(l.getTopRight());return new Ee(f,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,v){l=ye(l),v=J(v||[0,0]);var I=this.getZoom()||0,M=this.getMinZoom(),q=this.getMaxZoom(),ee=l.getNorthWest(),ce=l.getSouthEast(),pe=this.getSize().subtract(v),Ae=le(this.project(ce,I),this.project(ee,I)).getSize(),y=et.any3d?this.options.zoomSnap:1,E=pe.x/Ae.x,O=pe.y/Ae.y,Z=f?Math.max(E,O):Math.min(E,O);return I=this.getScaleZoom(Z,I),y&&(I=Math.round(I/(y/100))*(y/100),I=f?Math.ceil(I/y)*y:Math.floor(I/y)*y),Math.max(M,Math.min(q,I))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var v=this._getTopLeftPoint(l,f);return new ie(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var v=this.options.crs;return f=f===void 0?this._zoom:f,v.scale(l)/v.scale(f)},getScaleZoom:function(l,f){var v=this.options.crs;f=f===void 0?this._zoom:f;var I=v.zoom(l*v.scale(f));return isNaN(I)?1/0:I},project:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(Ce(l),f)},unproject:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(J(l),f)},layerPointToLatLng:function(l){var f=J(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){var f=this.project(Ce(l))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(Ce(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(ye(l))},distance:function(l,f){return this.options.crs.distance(Ce(l),Ce(f))},containerPointToLayerPoint:function(l){return J(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return J(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(J(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ce(l)))},mouseEventToContainerPoint:function(l){return Qa(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=$u(l);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ct(f,"scroll",this._onScroll,this),this._containerId=s(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&et.any3d,Et(l,"leaflet-container"+(et.touch?" leaflet-touch":"")+(et.retina?" leaflet-retina":"")+(et.ielt9?" leaflet-oldie":"")+(et.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=qu(l,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vn(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Et(l.markerPane,"leaflet-zoom-hide"),Et(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f,v){Vn(this._mapPane,new X(0,0));var I=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var M=this._zoom!==f;this._moveStart(M,v)._move(l,f)._moveEnd(M),this.fire("viewreset"),I&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,v,I){f===void 0&&(f=this._zoom);var M=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),I?v&&v.pinch&&this.fire("zoom",v):((M||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return P(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Vn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[s(this._container)]=this;var f=l?mn:Ct;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),et.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){P(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var v=[],I,M=f==="mouseout"||f==="mouseover",q=l.target||l.srcElement,ee=!1;q;){if(I=this._targets[s(q)],I&&(f==="click"||f==="preclick")&&this._draggableMoved(I)){ee=!0;break}if(I&&I.listens(f,!0)&&(M&&!Qu(q,l)||(v.push(I),M))||q===this._container)break;q=q.parentNode}return!v.length&&!ee&&!M&&this.listens(f,!0)&&(v=[this]),v},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(f))){var v=l.type;v==="mousedown"&&Es(f),this._fireDOMEvent(l,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,v){if(l.type==="click"){var I=e({},l);I.type="preclick",this._fireDOMEvent(I,I.type,v)}var M=this._findEventTargets(l,f);if(v){for(var q=[],ee=0;ee<v.length;ee++)v[ee].listens(f,!0)&&q.push(v[ee]);M=q.concat(M)}if(M.length){f==="contextmenu"&&Zn(l);var ce=M[0],pe={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ae=ce.getLatLng&&(!ce._radius||ce._radius<=10);pe.containerPoint=Ae?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(l),pe.layerPoint=this.containerPointToLayerPoint(pe.containerPoint),pe.latlng=Ae?ce.getLatLng():this.layerPointToLatLng(pe.layerPoint)}for(ee=0;ee<M.length;ee++)if(M[ee].fire(f,pe,!0),pe.originalEvent._stopped||M[ee].options.bubblingMouseEvents===!1&&N(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return bo(this._mapPane)||new X(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){var v=l&&f!==void 0?this._getNewPixelOrigin(l,f):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var v=this.getSize()._divideBy(2);return this.project(l,f)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,v){var I=this._getNewPixelOrigin(v,f);return this.project(l,f)._subtract(I)},_latLngBoundsToNewLayerBounds:function(l,f,v){var I=this._getNewPixelOrigin(v,f);return le([this.project(l.getSouthWest(),f)._subtract(I),this.project(l.getNorthWest(),f)._subtract(I),this.project(l.getSouthEast(),f)._subtract(I),this.project(l.getNorthEast(),f)._subtract(I)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,v){if(!v)return l;var I=this.project(l,f),M=this.getSize().divideBy(2),q=new ie(I.subtract(M),I.add(M)),ee=this._getBoundsOffset(q,v,f);return Math.abs(ee.x)<=1&&Math.abs(ee.y)<=1?l:this.unproject(I.add(ee),f)},_limitOffset:function(l,f){if(!f)return l;var v=this.getPixelBounds(),I=new ie(v.min.add(l),v.max.add(l));return l.add(this._getBoundsOffset(I,f))},_getBoundsOffset:function(l,f,v){var I=le(this.project(f.getNorthEast(),v),this.project(f.getSouthWest(),v)),M=I.min.subtract(l.min),q=I.max.subtract(l.max),ee=this._rebound(M.x,-q.x),ce=this._rebound(M.y,-q.y);return new X(ee,ce)},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),v=this.getMaxZoom(),I=et.any3d?this.options.zoomSnap:1;return I&&(l=Math.round(l/I)*I),Math.max(f,Math.min(v,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var v=this._getCenterOffset(l)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,f),!0)},_createAnimProxy:function(){var l=this._proxy=Gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var v=Ga,I=this._proxy.style[v];$r(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),I===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();$r(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var I=this.getZoomScale(f),M=this._getCenterOffset(l)._divideBy(1-1/I);return v.animate!==!0&&!this.getSize().contains(M)?!1:(D(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(l,f,!0)},this),!0)},_animateZoom:function(l,f,v,I){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,Et(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:I}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Yn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Rd(l,f){return new Kt(l,f)}var ki=U.extend({options:{position:"topright"},initialize:function(l){m(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),v=this.getPosition(),I=l._controlCorners[v];return Et(f,"leaflet-control"),v.indexOf("bottom")!==-1?I.insertBefore(f,I.firstChild):I.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),gi=function(l){return new ki(l)};Kt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",v=this._controlContainer=Gt("div",f+"control-container",this._container);function I(M,q){var ee=f+M+" "+f+q;l[M+q]=Gt("div",ee,v)}I("top","left"),I("top","right"),I("bottom","left"),I("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Mn(this._controlCorners[l]);Mn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xu=ki.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,v,I){return v<I?-1:I<v?1:0}},initialize:function(l,f,v){m(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var I in l)this._addLayer(l[I],I);for(I in f)this._addLayer(f[I],I,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return ki.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(s(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){Et(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Et(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Yn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=Gt("div",l),v=this.options.collapsed;f.setAttribute("aria-haspopup",!0),Za(f),ol(f);var I=this._section=Gt("section",l+"-list");v&&(this._map.on("click",this.collapse,this),Ct(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=Gt("a",l+"-toggle",f);M.href="#",M.title="Layers",M.setAttribute("role","button"),Ct(M,{keydown:function(q){q.keyCode===13&&this._expandSafely()},click:function(q){Zn(q),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=Gt("div",l+"-base",I),this._separator=Gt("div",l+"-separator",I),this._overlaysList=Gt("div",l+"-overlays",I),f.appendChild(I)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&s(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,v){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:v}),this.options.sortLayers&&this._layers.sort(i(function(I,M){return this.options.sortFunction(I.layer,M.layer,I.name,M.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ia(this._baseLayersList),ia(this._overlaysList),this._layerControlInputs=[];var l,f,v,I,M=0;for(v=0;v<this._layers.length;v++)I=this._layers[v],this._addItem(I),f=f||I.overlay,l=l||!I.overlay,M+=I.overlay?0:1;return this.options.hideSingleBase&&(l=l&&M>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(s(l.target)),v=f.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;v&&this._map.fire(v,f)},_createRadioElement:function(l,f){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",I=document.createElement("div");return I.innerHTML=v,I.firstChild},_addItem:function(l){var f=document.createElement("label"),v=this._map.hasLayer(l.layer),I;l.overlay?(I=document.createElement("input"),I.type="checkbox",I.className="leaflet-control-layers-selector",I.defaultChecked=v):I=this._createRadioElement("leaflet-base-layers_"+s(this),v),this._layerControlInputs.push(I),I.layerId=s(l.layer),Ct(I,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+l.name;var q=document.createElement("span");f.appendChild(q),q.appendChild(I),q.appendChild(M);var ee=l.overlay?this._overlaysList:this._baseLayersList;return ee.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,f,v,I=[],M=[];this._handlingClick=!0;for(var q=l.length-1;q>=0;q--)f=l[q],v=this._getLayer(f.layerId).layer,f.checked?I.push(v):f.checked||M.push(v);for(q=0;q<M.length;q++)this._map.hasLayer(M[q])&&this._map.removeLayer(M[q]);for(q=0;q<I.length;q++)this._map.hasLayer(I[q])||this._map.addLayer(I[q]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,f,v,I=this._map.getZoom(),M=l.length-1;M>=0;M--)f=l[M],v=this._getLayer(f.layerId).layer,f.disabled=v.options.minZoom!==void 0&&I<v.options.minZoom||v.options.maxZoom!==void 0&&I>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Ct(l,"click",Zn),this.expand();var f=this;setTimeout(function(){mn(l,"click",Zn),f._preventClick=!1})}}),Nd=function(l,f,v){return new Xu(l,f,v)},qr=ki.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",v=Gt("div",f+" leaflet-bar"),I=this.options;return this._zoomInButton=this._createButton(I.zoomInText,I.zoomInTitle,f+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(I.zoomOutText,I.zoomOutTitle,f+"-out",v,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,v,I,M){var q=Gt("a",v,I);return q.innerHTML=l,q.href="#",q.title=f,q.setAttribute("role","button"),q.setAttribute("aria-label",f),Za(q),Ct(q,"click",Co),Ct(q,"click",M,this),Ct(q,"click",this._refocusOnMap,this),q},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";Yn(this._zoomInButton,f),Yn(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Et(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Et(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kt.mergeOptions({zoomControl:!0}),Kt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qr,this.addControl(this.zoomControl))});var zf=function(l){return new qr(l)},Wf=ki.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",v=Gt("div",f),I=this.options;return this._addScales(I,f+"-line",v),l.on(I.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),v},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,v){l.metric&&(this._mScale=Gt("div",f,v)),l.imperial&&(this._iScale=Gt("div",f,v))},_update:function(){var l=this._map,f=l.getSize().y/2,v=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(v)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l),v=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,v,f/l)},_updateImperial:function(l){var f=l*3.2808399,v,I,M;f>5280?(v=f/5280,I=this._getRoundNum(v),this._updateScale(this._iScale,I+" mi",I/v)):(M=this._getRoundNum(f),this._updateScale(this._iScale,M+" ft",M/f))},_updateScale:function(l,f,v){l.style.width=Math.round(this.options.maxWidth*v)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),v=l/f;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,f*v}}),Ju=function(l){return new Wf(l)},Fd='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',xo=ki.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(et.inlineSvg?Fd+" ":"")+"Leaflet</a>"},initialize:function(l){m(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Gt("div","leaflet-control-attribution"),Za(this._container);for(var f in l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var v=[];this.options.prefix&&v.push(this.options.prefix),l.length&&v.push(l.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});Kt.mergeOptions({attributionControl:!0}),Kt.addInitHook(function(){this.options.attributionControl&&new xo().addTo(this)});var sl=function(l){return new xo(l)};ki.Layers=Xu,ki.Zoom=qr,ki.Scale=Wf,ki.Attribution=xo,gi.layers=Nd,gi.zoom=zf,gi.scale=Ju,gi.attribution=sl;var no=U.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});no.addTo=function(l,f){return l.addHandler(f,this),this};var al={Events:ae},Hf=et.touch?"touchstart mousedown":"mousedown",Qo=de.extend({options:{clickTolerance:3},initialize:function(l,f,v,I){m(this,I),this._element=l,this._dragStartTarget=f||l,this._preventOutline=v},enable:function(){this._enabled||(Ct(this._dragStartTarget,Hf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qo._dragging===this&&this.finishDrag(!0),mn(this._dragStartTarget,Hf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Gu(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Qo._dragging===this&&this.finishDrag();return}if(!(Qo._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Qo._dragging=this,this._preventOutline&&Es(this._element),oa(),Ka(),!this._moving)){this.fire("down");var f=l.touches?l.touches[0]:l,v=Uf(this._element);this._startPoint=new X(f.clientX,f.clientY),this._startPos=bo(this._element),this._parentScale=Yo(v);var I=l.type==="mousedown";Ct(document,I?"mousemove":"touchmove",this._onMove,this),Ct(document,I?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var f=l.touches&&l.touches.length===1?l.touches[0]:l,v=new X(f.clientX,f.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,Zn(l),this._moved||(this.fire("dragstart"),this._moved=!0,Et(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Et(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Vn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Yn(document.body,"leaflet-dragging"),this._lastTarget&&(Yn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),mn(document,"mousemove touchmove",this._onMove,this),mn(document,"mouseup touchend touchcancel",this._onUp,this),il(),ln();var f=this._moved&&this._moving;this._moving=!1,Qo._dragging=!1,f&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Xa(l,f,v){var I,M=[1,4,2,8],q,ee,ce,pe,Ae,y,E,O;for(q=0,y=l.length;q<y;q++)l[q]._code=Xo(l[q],f);for(ce=0;ce<4;ce++){for(E=M[ce],I=[],q=0,y=l.length,ee=y-1;q<y;ee=q++)pe=l[q],Ae=l[ee],pe._code&E?Ae._code&E||(O=ua(Ae,pe,E,f,v),O._code=Xo(O,f),I.push(O)):(Ae._code&E&&(O=ua(Ae,pe,E,f,v),O._code=Xo(O,f),I.push(O)),I.push(pe));l=I}return l}function Ld(l,f){var v,I,M,q,ee,ce,pe,Ae,y;if(!l||l.length===0)throw new Error("latlngs not passed");Or(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var E=Ce([0,0]),O=ye(l),Z=O.getNorthWest().distanceTo(O.getSouthWest())*O.getNorthEast().distanceTo(O.getNorthWest());Z<1700&&(E=ul(l));var ue=l.length,Re=[];for(v=0;v<ue;v++){var ut=Ce(l[v]);Re.push(f.project(Ce([ut.lat-E.lat,ut.lng-E.lng])))}for(ce=pe=Ae=0,v=0,I=ue-1;v<ue;I=v++)M=Re[v],q=Re[I],ee=M.y*q.x-q.y*M.x,pe+=(M.x+q.x)*ee,Ae+=(M.y+q.y)*ee,ce+=ee*3;ce===0?y=Re[0]:y=[pe/ce,Ae/ce];var Ut=f.unproject(J(y));return Ce([Ut.lat+E.lat,Ut.lng+E.lng])}function ul(l){for(var f=0,v=0,I=0,M=0;M<l.length;M++){var q=Ce(l[M]);f+=q.lat,v+=q.lng,I++}return Ce([f/I,v/I])}var Vd={__proto__:null,clipPolygon:Xa,polygonCenter:Ld,centroid:ul};function cl(l,f){if(!f||!l.length)return l.slice();var v=f*f;return l=aa(l,v),l=$f(l,v),l}function Ja(l,f,v){return Math.sqrt(nr(l,f,v,!0))}function ec(l,f,v){return nr(l,f,v)}function $f(l,f){var v=l.length,I=typeof Uint8Array<"u"?Uint8Array:Array,M=new I(v);M[0]=M[v-1]=1,ll(l,M,f,0,v-1);var q,ee=[];for(q=0;q<v;q++)M[q]&&ee.push(l[q]);return ee}function ll(l,f,v,I,M){var q=0,ee,ce,pe;for(ce=I+1;ce<=M-1;ce++)pe=nr(l[ce],l[I],l[M],!0),pe>q&&(ee=ce,q=pe);q>v&&(f[ee]=1,ll(l,f,v,I,ee),ll(l,f,v,ee,M))}function aa(l,f){for(var v=[l[0]],I=1,M=0,q=l.length;I<q;I++)tc(l[I],l[M])>f&&(v.push(l[I]),M=I);return M<q-1&&v.push(l[q-1]),v}var dl;function Bd(l,f,v,I,M){var q=I?dl:Xo(l,v),ee=Xo(f,v),ce,pe,Ae;for(dl=ee;;){if(!(q|ee))return[l,f];if(q&ee)return!1;ce=q||ee,pe=ua(l,f,ce,v,M),Ae=Xo(pe,v),ce===q?(l=pe,q=Ae):(f=pe,ee=Ae)}}function ua(l,f,v,I,M){var q=f.x-l.x,ee=f.y-l.y,ce=I.min,pe=I.max,Ae,y;return v&8?(Ae=l.x+q*(pe.y-l.y)/ee,y=pe.y):v&4?(Ae=l.x+q*(ce.y-l.y)/ee,y=ce.y):v&2?(Ae=pe.x,y=l.y+ee*(pe.x-l.x)/q):v&1&&(Ae=ce.x,y=l.y+ee*(ce.x-l.x)/q),new X(Ae,y,M)}function Xo(l,f){var v=0;return l.x<f.min.x?v|=1:l.x>f.max.x&&(v|=2),l.y<f.min.y?v|=4:l.y>f.max.y&&(v|=8),v}function tc(l,f){var v=f.x-l.x,I=f.y-l.y;return v*v+I*I}function nr(l,f,v,I){var M=f.x,q=f.y,ee=v.x-M,ce=v.y-q,pe=ee*ee+ce*ce,Ae;return pe>0&&(Ae=((l.x-M)*ee+(l.y-q)*ce)/pe,Ae>1?(M=v.x,q=v.y):Ae>0&&(M+=ee*Ae,q+=ce*Ae)),ee=l.x-M,ce=l.y-q,I?ee*ee+ce*ce:new X(M,q)}function Or(l){return!S(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ud(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Or(l)}function Ss(l,f){var v,I,M,q,ee,ce,pe,Ae;if(!l||l.length===0)throw new Error("latlngs not passed");Or(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var y=Ce([0,0]),E=ye(l),O=E.getNorthWest().distanceTo(E.getSouthWest())*E.getNorthEast().distanceTo(E.getNorthWest());O<1700&&(y=ul(l));var Z=l.length,ue=[];for(v=0;v<Z;v++){var Re=Ce(l[v]);ue.push(f.project(Ce([Re.lat-y.lat,Re.lng-y.lng])))}for(v=0,I=0;v<Z-1;v++)I+=ue[v].distanceTo(ue[v+1])/2;if(I===0)Ae=ue[0];else for(v=0,q=0;v<Z-1;v++)if(ee=ue[v],ce=ue[v+1],M=ee.distanceTo(ce),q+=M,q>I){pe=(q-I)/M,Ae=[ce.x-pe*(ce.x-ee.x),ce.y-pe*(ce.y-ee.y)];break}var ut=f.unproject(J(Ae));return Ce([ut.lat+y.lat,ut.lng+y.lng])}var g={__proto__:null,simplify:cl,pointToSegmentDistance:Ja,closestPointOnSegment:ec,clipSegment:Bd,_getEdgeIntersection:ua,_getBitCode:Xo,_sqClosestPointOnSegment:nr,isFlat:Or,_flat:Ud,polylineCenter:Ss},T={project:function(l){return new X(l.lng,l.lat)},unproject:function(l){return new we(l.y,l.x)},bounds:new ie([-180,-90],[180,90])},V={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ie([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var f=Math.PI/180,v=this.R,I=l.lat*f,M=this.R_MINOR/v,q=Math.sqrt(1-M*M),ee=q*Math.sin(I),ce=Math.tan(Math.PI/4-I/2)/Math.pow((1-ee)/(1+ee),q/2);return I=-v*Math.log(Math.max(ce,1e-10)),new X(l.lng*f*v,I)},unproject:function(l){for(var f=180/Math.PI,v=this.R,I=this.R_MINOR/v,M=Math.sqrt(1-I*I),q=Math.exp(-l.y/v),ee=Math.PI/2-2*Math.atan(q),ce=0,pe=.1,Ae;ce<15&&Math.abs(pe)>1e-7;ce++)Ae=M*Math.sin(ee),Ae=Math.pow((1-Ae)/(1+Ae),M/2),pe=Math.PI/2-2*Math.atan(q*Ae)-ee,ee+=pe;return new we(ee*f,l.x*f/v)}},K={__proto__:null,LonLat:T,Mercator:V,SphericalMercator:it},oe=e({},Ye,{code:"EPSG:3395",projection:V,transformation:function(){var l=.5/(Math.PI*V.R);return vt(l,.5,-l,.5)}()}),fe=e({},Ye,{code:"EPSG:4326",projection:T,transformation:vt(1/180,1,-1/180,.5)}),Be=e({},ze,{projection:T,transformation:vt(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var v=f.lng-l.lng,I=f.lat-l.lat;return Math.sqrt(v*v+I*I)},infinite:!0});ze.Earth=Ye,ze.EPSG3395=oe,ze.EPSG3857=Ge,ze.EPSG900913=Qe,ze.EPSG4326=fe,ze.Simple=Be;var Ft=de.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[s(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[s(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var v=this.getEvents();f.on(v,this),this.once("remove",function(){f.off(v,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});Kt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=s(l);return this._layers[f]?this:(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var f=s(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return s(l)in this._layers},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},_addLayers:function(l){l=l?S(l)?l:[l]:[];for(var f=0,v=l.length;f<v;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[s(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=s(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,v=this._getZoomSpan();for(var I in this._zoomBoundLayers){var M=this._zoomBoundLayers[I].options;l=M.minZoom===void 0?l:Math.min(l,M.minZoom),f=M.maxZoom===void 0?f:Math.max(f,M.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var vn=Ft.extend({initialize:function(l,f){m(this,f),this._layers={};var v,I;if(l)for(v=0,I=l.length;v<I;v++)this.addLayer(l[v])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){var f=typeof l=="number"?l:this.getLayerId(l);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var f=Array.prototype.slice.call(arguments,1),v,I;for(v in this._layers)I=this._layers[v],I[l]&&I[l].apply(I,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var v in this._layers)l.call(f,this._layers[v]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return s(l)}}),Jt=function(l,f){return new vn(l,f)},kn=vn.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),vn.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),vn.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new Ee;for(var f in this._layers){var v=this._layers[f];l.extend(v.getBounds?v.getBounds():v.getLatLng())}return l}}),Rr=function(l,f){return new kn(l,f)},Oi=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){m(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var v=this._getIconUrl(l);if(!v){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var I=this._createImg(v,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(I,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(I.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),I},_setIconStyles:function(l,f){var v=this.options,I=v[f+"Size"];typeof I=="number"&&(I=[I,I]);var M=J(I),q=J(f==="shadow"&&v.shadowAnchor||v.iconAnchor||M&&M.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(v.className||""),q&&(l.style.marginLeft=-q.x+"px",l.style.marginTop=-q.y+"px"),M&&(l.style.width=M.x+"px",l.style.height=M.y+"px")},_createImg:function(l,f){return f=f||document.createElement("img"),f.src=l,f},_getIconUrl:function(l){return et.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Ri(l){return new Oi(l)}var Jo=Oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Jo.imagePath!="string"&&(Jo.imagePath=this._detectIconPath()),(this.options.imagePath||Jo.imagePath)+Oi.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(v,I,M){var q=I.exec(v);return q&&q[M]};return l=f(l,/^url\((['"])?(.+)\1\)$/,2),l&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Gt("div","leaflet-default-icon-path",document.body),f=qu(l,"background-image")||qu(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f),f)return f;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),hl=no.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Qo(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Et(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,v=f._map,I=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,q=bo(f._icon),ee=v.getPixelBounds(),ce=v.getPixelOrigin(),pe=le(ee.min._subtract(ce).add(M),ee.max._subtract(ce).subtract(M));if(!pe.contains(q)){var Ae=J((Math.max(pe.max.x,q.x)-pe.max.x)/(ee.max.x-pe.max.x)-(Math.min(pe.min.x,q.x)-pe.min.x)/(ee.min.x-pe.min.x),(Math.max(pe.max.y,q.y)-pe.max.y)/(ee.max.y-pe.max.y)-(Math.min(pe.min.y,q.y)-pe.min.y)/(ee.min.y-pe.min.y)).multiplyBy(I);v.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),Vn(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=D(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(P(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,v=f._shadow,I=bo(f._icon),M=f._map.layerPointToLatLng(I);v&&Vn(v,I),f._latlng=M,l.latlng=M,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){P(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),qf=Ft.extend({options:{icon:new Jo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){m(this,f),this._latlng=Ce(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=Ce(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=l.icon.createIcon(this._icon),I=!1;v!==this._icon&&(this._icon&&this._removeIcon(),I=!0,l.title&&(v.title=l.title),v.tagName==="IMG"&&(v.alt=l.alt||"")),Et(v,f),l.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ct(v,"focus",this._panOnFocus,this);var M=l.icon.createShadow(this._shadow),q=!1;M!==this._shadow&&(this._removeShadow(),q=!0),M&&(Et(M,f),M.alt=""),this._shadow=M,l.opacity<1&&this._updateOpacity(),I&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&q&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mn(this._icon,"focus",this._panOnFocus,this),Mn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Vn(this._icon,l),this._shadow&&Vn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(Et(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),hl)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new hl(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&kr(this._icon,l),this._shadow&&kr(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,v=f.iconSize?J(f.iconSize):J(0,0),I=f.iconAnchor?J(f.iconAnchor):J(0,0);l.panInside(this._latlng,{paddingTopLeft:I,paddingBottomRight:v.subtract(I)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function HE(l,f){return new qf(l,f)}var ca=Ft.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return m(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jd=ca.extend({options:{fill:!0,radius:10},initialize:function(l,f){m(this,f),this._latlng=Ce(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=Ce(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return ca.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,v=this._clickTolerance(),I=[l+v,f+v];this._pxBounds=new ie(this._point.subtract(I),this._point.add(I))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $E(l,f){return new jd(l,f)}var Gf=jd.extend({initialize:function(l,f,v){if(typeof f=="number"&&(f=e({},v,{radius:f})),m(this,f),this._latlng=Ce(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new Ee(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:ca.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,v=this._map,I=v.options.crs;if(I.distance===Ye.distance){var M=Math.PI/180,q=this._mRadius/Ye.R/M,ee=v.project([f+q,l]),ce=v.project([f-q,l]),pe=ee.add(ce).divideBy(2),Ae=v.unproject(pe).lat,y=Math.acos((Math.cos(q*M)-Math.sin(f*M)*Math.sin(Ae*M))/(Math.cos(f*M)*Math.cos(Ae*M)))/M;(isNaN(y)||y===0)&&(y=q/Math.cos(Math.PI/180*f)),this._point=pe.subtract(v.getPixelOrigin()),this._radius=isNaN(y)?0:pe.x-v.project([Ae,l-y]).x,this._radiusY=pe.y-ee.y}else{var E=I.unproject(I.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(E).x}this._updateBounds()}});function qE(l,f,v){return new Gf(l,f,v)}var Ts=ca.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){m(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var f=1/0,v=null,I=nr,M,q,ee=0,ce=this._parts.length;ee<ce;ee++)for(var pe=this._parts[ee],Ae=1,y=pe.length;Ae<y;Ae++){M=pe[Ae-1],q=pe[Ae];var E=I(l,M,q,!0);E<f&&(f=E,v=I(l,M,q))}return v&&(v.distance=Math.sqrt(f)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ss(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=Ce(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new Ee,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Or(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],v=Or(l),I=0,M=l.length;I<M;I++)v?(f[I]=Ce(l[I]),this._bounds.extend(f[I])):f[I]=this._convertLatLngs(l[I]);return f},_project:function(){var l=new ie;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new X(l,l);this._rawPxBounds&&(this._pxBounds=new ie([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,v){var I=l[0]instanceof we,M=l.length,q,ee;if(I){for(ee=[],q=0;q<M;q++)ee[q]=this._map.latLngToLayerPoint(l[q]),v.extend(ee[q]);f.push(ee)}else for(q=0;q<M;q++)this._projectLatlngs(l[q],f,v)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,v,I,M,q,ee,ce,pe;for(v=0,M=0,q=this._rings.length;v<q;v++)for(pe=this._rings[v],I=0,ee=pe.length;I<ee-1;I++)ce=Bd(pe[I],pe[I+1],l,I,!0),ce&&(f[M]=f[M]||[],f[M].push(ce[0]),(ce[1]!==pe[I+1]||I===ee-2)&&(f[M].push(ce[1]),M++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,v=0,I=l.length;v<I;v++)l[v]=cl(l[v],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var v,I,M,q,ee,ce,pe=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(v=0,q=this._parts.length;v<q;v++)for(ce=this._parts[v],I=0,ee=ce.length,M=ee-1;I<ee;M=I++)if(!(!f&&I===0)&&Ja(l,ce[M],ce[I])<=pe)return!0;return!1}});function Tg(l,f){return new Ts(l,f)}Ts._flat=Ud;var fl=Ts.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ld(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var f=Ts.prototype._convertLatLngs.call(this,l),v=f.length;return v>=2&&f[0]instanceof we&&f[0].equals(f[v-1])&&f.pop(),f},_setLatLngs:function(l){Ts.prototype._setLatLngs.call(this,l),Or(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Or(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,v=new X(f,f);if(l=new ie(l.min.subtract(v),l.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var I=0,M=this._rings.length,q;I<M;I++)q=Xa(this._rings[I],l,!0),q.length&&this._parts.push(q)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var f=!1,v,I,M,q,ee,ce,pe,Ae;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(q=0,pe=this._parts.length;q<pe;q++)for(v=this._parts[q],ee=0,Ae=v.length,ce=Ae-1;ee<Ae;ce=ee++)I=v[ee],M=v[ce],I.y>l.y!=M.y>l.y&&l.x<(M.x-I.x)*(l.y-I.y)/(M.y-I.y)+I.x&&(f=!f);return f||Ts.prototype._containsPoint.call(this,l,!0)}});function GE(l,f){return new fl(l,f)}var la=kn.extend({initialize:function(l,f){m(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var f=S(l)?l:l.features,v,I,M;if(f){for(v=0,I=f.length;v<I;v++)M=f[v],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var q=this.options;if(q.filter&&!q.filter(l))return this;var ee=Kf(l,q);return ee?(ee.feature=Qf(l),ee.defaultOptions=ee.options,this.resetStyle(ee),q.onEachFeature&&q.onEachFeature(l,ee),this.addLayer(ee)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=e({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&(typeof f=="function"&&(f=f(l.feature)),l.setStyle(f))}});function Kf(l,f){var v=l.type==="Feature"?l.geometry:l,I=v?v.coordinates:null,M=[],q=f&&f.pointToLayer,ee=f&&f.coordsToLatLng||Ag,ce,pe,Ae,y;if(!I&&!v)return null;switch(v.type){case"Point":return ce=ee(I),zd(q,l,ce,f);case"MultiPoint":for(Ae=0,y=I.length;Ae<y;Ae++)ce=ee(I[Ae]),M.push(zd(q,l,ce,f));return new kn(M);case"LineString":case"MultiLineString":return pe=Yf(I,v.type==="LineString"?0:1,ee),new Ts(pe,f);case"Polygon":case"MultiPolygon":return pe=Yf(I,v.type==="Polygon"?1:2,ee),new fl(pe,f);case"GeometryCollection":for(Ae=0,y=v.geometries.length;Ae<y;Ae++){var E=Kf({geometry:v.geometries[Ae],type:"Feature",properties:l.properties},f);E&&M.push(E)}return new kn(M);case"FeatureCollection":for(Ae=0,y=v.features.length;Ae<y;Ae++){var O=Kf(v.features[Ae],f);O&&M.push(O)}return new kn(M);default:throw new Error("Invalid GeoJSON object.")}}function zd(l,f,v,I){return l?l(f,v):new qf(v,I&&I.markersInheritOptions&&I)}function Ag(l){return new we(l[1],l[0],l[2])}function Yf(l,f,v){for(var I=[],M=0,q=l.length,ee;M<q;M++)ee=f?Yf(l[M],f-1,v):(v||Ag)(l[M]),I.push(ee);return I}function Dg(l,f){return l=Ce(l),l.alt!==void 0?[d(l.lng,f),d(l.lat,f),d(l.alt,f)]:[d(l.lng,f),d(l.lat,f)]}function Zf(l,f,v,I){for(var M=[],q=0,ee=l.length;q<ee;q++)M.push(f?Zf(l[q],Or(l[q])?0:f-1,v,I):Dg(l[q],I));return!f&&v&&M.length>0&&M.push(M[0].slice()),M}function nc(l,f){return l.feature?e({},l.feature,{geometry:f}):Qf(f)}function Qf(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Pg={toGeoJSON:function(l){return nc(this,{type:"Point",coordinates:Dg(this.getLatLng(),l)})}};qf.include(Pg),Gf.include(Pg),jd.include(Pg),Ts.include({toGeoJSON:function(l){var f=!Or(this._latlngs),v=Zf(this._latlngs,f?1:0,!1,l);return nc(this,{type:(f?"Multi":"")+"LineString",coordinates:v})}}),fl.include({toGeoJSON:function(l){var f=!Or(this._latlngs),v=f&&!Or(this._latlngs[0]),I=Zf(this._latlngs,v?2:f?1:0,!0,l);return f||(I=[I]),nc(this,{type:(v?"Multi":"")+"Polygon",coordinates:I})}}),vn.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(v){f.push(v.toGeoJSON(l).geometry.coordinates)}),nc(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(l);var v=f==="GeometryCollection",I=[];return this.eachLayer(function(M){if(M.toGeoJSON){var q=M.toGeoJSON(l);if(v)I.push(q.geometry);else{var ee=Qf(q);ee.type==="FeatureCollection"?I.push.apply(I,ee.features):I.push(ee)}}}),v?nc(this,{geometries:I,type:"GeometryCollection"}):{type:"FeatureCollection",features:I}}});function ty(l,f){return new la(l,f)}var KE=ty,Wd=Ft.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,v){this._url=l,this._bounds=ye(f),m(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Et(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Go(this._image),this},bringToBack:function(){return this._map&&Ko(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=ye(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",f=this._image=l?this._url:Gt("img");if(Et(f,"leaflet-image-layer"),this._zoomAnimated&&Et(f,"leaflet-zoom-animated"),this.options.className&&Et(f,this.options.className),f.onselectstart=c,f.onmousemove=c,f.onload=i(this.fire,this,"load"),f.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;$r(this._image,v,f)},_reset:function(){var l=this._image,f=new ie(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=f.getSize();Vn(l,f.min),l.style.width=v.x+"px",l.style.height=v.y+"px"},_updateOpacity:function(){kr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),ny=function(l,f,v){return new Wd(l,f,v)},ry=Wd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",f=this._image=l?this._url:Gt("video");if(Et(f,"leaflet-image-layer"),this._zoomAnimated&&Et(f,"leaflet-zoom-animated"),this.options.className&&Et(f,this.options.className),f.onselectstart=c,f.onmousemove=c,f.onloadeddata=i(this.fire,this,"load"),l){for(var v=f.getElementsByTagName("source"),I=[],M=0;M<v.length;M++)I.push(v[M].src);this._url=v.length>0?I:[f.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var q=0;q<this._url.length;q++){var ee=Gt("source");ee.src=this._url[q],f.appendChild(ee)}}});function YE(l,f,v){return new ry(l,f,v)}var iy=Wd.extend({_initImage:function(){var l=this._image=this._url;Et(l,"leaflet-image-layer"),this._zoomAnimated&&Et(l,"leaflet-zoom-animated"),this.options.className&&Et(l,this.options.className),l.onselectstart=c,l.onmousemove=c}});function oy(l,f,v){return new iy(l,f,v)}var Eo=Ft.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,f){l&&(l instanceof we||S(l))?(this._latlng=Ce(l),m(this,f)):(m(this,l),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&kr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&kr(this._container,1),this.bringToFront(),this.options.interactive&&(Et(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(kr(this._container,0),this._removeTimeout=setTimeout(i(Mn,void 0,this._container),200)):Mn(this._container),this.options.interactive&&(Yn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=Ce(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Go(this._container),this},bringToBack:function(){return this._map&&Ko(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof kn){f=null;var v=this._source._layers;for(var I in v)if(v[I]._map){f=v[I];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else if(f.getBounds)l=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=J(this.options.offset),v=this._getAnchor();this._zoomAnimated?Vn(this._container,l.add(v)):f=f.add(l).add(v);var I=this._containerBottom=-f.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=I+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});Kt.include({_initOverlay:function(l,f,v,I){var M=f;return M instanceof l||(M=new l(I).setContent(f)),v&&M.setLatLng(v),M}}),Ft.include({_initOverlay:function(l,f,v,I){var M=v;return M instanceof l?(m(M,I),M._source=this):(M=f&&!I?f:new l(I,this),M.setContent(v)),M}});var Xf=Eo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Eo.prototype.openOn.call(this,l)},onAdd:function(l){Eo.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ca||this._source.on("preclick",ei))},onRemove:function(l){Eo.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ca||this._source.off("preclick",ei))},getEvents:function(){var l=Eo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=Gt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=Gt("div",l+"-content-wrapper",f);if(this._contentNode=Gt("div",l+"-content",v),Za(f),ol(this._contentNode),Ct(f,"contextmenu",ei),this._tipContainer=Gt("div",l+"-tip-container",f),this._tip=Gt("div",l+"-tip",this._tipContainer),this.options.closeButton){var I=this._closeButton=Gt("a",l+"-close-button",f);I.setAttribute("role","button"),I.setAttribute("aria-label","Close popup"),I.href="#close",I.innerHTML='<span aria-hidden="true">&#215;</span>',Ct(I,"click",function(M){Zn(M),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var v=l.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),f.width=v+1+"px",f.whiteSpace="",f.height="";var I=l.offsetHeight,M=this.options.maxHeight,q="leaflet-popup-scrolled";M&&I>M?(f.height=M+"px",Et(l,q)):Yn(l,q),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),v=this._getAnchor();Vn(this._container,f.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,f=parseInt(qu(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+f,I=this._containerWidth,M=new X(this._containerLeft,-v-this._containerBottom);M._add(bo(this._container));var q=l.layerPointToContainerPoint(M),ee=J(this.options.autoPanPadding),ce=J(this.options.autoPanPaddingTopLeft||ee),pe=J(this.options.autoPanPaddingBottomRight||ee),Ae=l.getSize(),y=0,E=0;q.x+I+pe.x>Ae.x&&(y=q.x+I-Ae.x+pe.x),q.x-y-ce.x<0&&(y=q.x-ce.x),q.y+v+pe.y>Ae.y&&(E=q.y+v-Ae.y+pe.y),q.y-E-ce.y<0&&(E=q.y-ce.y),(y||E)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([y,E]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ZE=function(l,f){return new Xf(l,f)};Kt.mergeOptions({closePopupOnClick:!0}),Kt.include({openPopup:function(l,f,v){return this._initOverlay(Xf,l,f,v).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Ft.include({bindPopup:function(l,f){return this._popup=this._initOverlay(Xf,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof kn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Co(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof ca)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Jf=Eo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Eo.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Eo.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Eo.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",f=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gt("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,v,I=this._map,M=this._container,q=I.latLngToContainerPoint(I.getCenter()),ee=I.layerPointToContainerPoint(l),ce=this.options.direction,pe=M.offsetWidth,Ae=M.offsetHeight,y=J(this.options.offset),E=this._getAnchor();ce==="top"?(f=pe/2,v=Ae):ce==="bottom"?(f=pe/2,v=0):ce==="center"?(f=pe/2,v=Ae/2):ce==="right"?(f=0,v=Ae/2):ce==="left"?(f=pe,v=Ae/2):ee.x<q.x?(ce="right",f=0,v=Ae/2):(ce="left",f=pe+(y.x+E.x)*2,v=Ae/2),l=l.subtract(J(f,v,!0)).add(y).add(E),Yn(M,"leaflet-tooltip-right"),Yn(M,"leaflet-tooltip-left"),Yn(M,"leaflet-tooltip-top"),Yn(M,"leaflet-tooltip-bottom"),Et(M,"leaflet-tooltip-"+ce),Vn(M,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&kr(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),RO=function(l,f){return new Jf(l,f)};Kt.include({openTooltip:function(l,f,v){return this._initOverlay(Jf,l,f,v).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Ft.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Jf,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var f=l?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[f](v),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof kn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&(Ct(f,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Ct(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var f=l.latlng,v,I;this._tooltip.options.sticky&&l.originalEvent&&(v=this._map.mouseEventToContainerPoint(l.originalEvent),I=this._map.containerPointToLayerPoint(v),f=this._map.layerPointToLatLng(I)),this._tooltip.setLatLng(f)}});var QE=Oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&l.tagName==="DIV"?l:document.createElement("div"),v=this.options;if(v.html instanceof Element?(ia(f),f.appendChild(v.html)):f.innerHTML=v.html!==!1?v.html:"",v.bgPos){var I=J(v.bgPos);f.style.backgroundPosition=-I.x+"px "+-I.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function NO(l){return new QE(l)}Oi.Default=Jo;var Hd=Ft.extend({options:{tileSize:256,opacity:1,updateWhenIdle:et.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){m(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Mn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Go(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ko(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof X?l:new X(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var f=this.getPane().children,v=-l(-1/0,1/0),I=0,M=f.length,q;I<M;I++)q=f[I].style.zIndex,f[I]!==this._container&&q&&(v=l(v,+q));isFinite(v)&&(this.options.zIndex=v+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et.ielt9){kr(this._container,this.options.opacity);var l=+new Date,f=!1,v=!1;for(var I in this._tiles){var M=this._tiles[I];if(!(!M.current||!M.loaded)){var q=Math.min(1,(l-M.loaded)/200);kr(M.el,q),q<1?f=!0:(M.active?v=!0:this._onOpaqueTile(M),M.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),f&&(P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=Gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(l!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===l?(this._levels[v].el.style.zIndex=f-Math.abs(l-v),this._onUpdateLevel(v)):(Mn(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var I=this._levels[l],M=this._map;return I||(I=this._levels[l]={},I.el=Gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),I.el.style.zIndex=f,I.origin=M.project(M.unproject(M.getPixelOrigin()),l).round(),I.zoom=l,this._setZoomTransform(I,M.getCenter(),M.getZoom()),c(I.el.offsetWidth),this._onCreateLevel(I)),this._level=I,I}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var l,f,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)f=this._tiles[l],f.retain=f.current;for(l in this._tiles)if(f=this._tiles[l],f.current&&!f.active){var I=f.coords;this._retainParent(I.x,I.y,I.z,I.z-5)||this._retainChildren(I.x,I.y,I.z,I.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Mn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,v,I){var M=Math.floor(l/2),q=Math.floor(f/2),ee=v-1,ce=new X(+M,+q);ce.z=+ee;var pe=this._tileCoordsToKey(ce),Ae=this._tiles[pe];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),ee>I?this._retainParent(M,q,ee,I):!1)},_retainChildren:function(l,f,v,I){for(var M=2*l;M<2*l+2;M++)for(var q=2*f;q<2*f+2;q++){var ee=new X(M,q);ee.z=v+1;var ce=this._tileCoordsToKey(ee),pe=this._tiles[ce];if(pe&&pe.active){pe.retain=!0;continue}else pe&&pe.loaded&&(pe.retain=!0);v+1<I&&this._retainChildren(M,q,v+1,I)}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return f.minNativeZoom!==void 0&&l<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,v,I){var M=Math.round(f);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var q=this.options.updateWhenZooming&&M!==this._tileZoom;(!I||q)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(l),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var v in this._levels)this._setZoomTransform(this._levels[v],l,f)},_setZoomTransform:function(l,f,v){var I=this._map.getZoomScale(v,l.zoom),M=l.origin.multiplyBy(I).subtract(this._map._getNewPixelOrigin(f,v)).round();et.any3d?$r(l.el,M,I):Vn(l.el,M)},_resetGrid:function(){var l=this._map,f=l.options.crs,v=this._tileSize=this.getTileSize(),I=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],I).x/v.x),Math.ceil(l.project([0,f.wrapLng[1]],I).x/v.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],I).y/v.x),Math.ceil(l.project([f.wrapLat[1],0],I).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,v=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),I=f.getZoomScale(v,this._tileZoom),M=f.project(l,this._tileZoom).floor(),q=f.getSize().divideBy(I*2);return new ie(M.subtract(q),M.add(q))},_update:function(l){var f=this._map;if(f){var v=this._clampZoom(f.getZoom());if(l===void 0&&(l=f.getCenter()),this._tileZoom!==void 0){var I=this._getTiledPixelBounds(l),M=this._pxBoundsToTileRange(I),q=M.getCenter(),ee=[],ce=this.options.keepBuffer,pe=new ie(M.getBottomLeft().subtract([ce,-ce]),M.getTopRight().add([ce,-ce]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var y=this._tiles[Ae].coords;(y.z!==this._tileZoom||!pe.contains(new X(y.x,y.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(l,v);return}for(var E=M.min.y;E<=M.max.y;E++)for(var O=M.min.x;O<=M.max.x;O++){var Z=new X(O,E);if(Z.z=this._tileZoom,!!this._isValidTile(Z)){var ue=this._tiles[this._tileCoordsToKey(Z)];ue?ue.current=!0:ee.push(Z)}}if(ee.sort(function(ut,Ut){return ut.distanceTo(q)-Ut.distanceTo(q)}),ee.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Re=document.createDocumentFragment();for(O=0;O<ee.length;O++)this._addTile(ee[O],Re);this._level.el.appendChild(Re)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var v=this._globalTileRange;if(!f.wrapLng&&(l.x<v.min.x||l.x>v.max.x)||!f.wrapLat&&(l.y<v.min.y||l.y>v.max.y))return!1}if(!this.options.bounds)return!0;var I=this._tileCoordsToBounds(l);return ye(this.options.bounds).overlaps(I)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,v=this.getTileSize(),I=l.scaleBy(v),M=I.add(v),q=f.unproject(I,l.z),ee=f.unproject(M,l.z);return[q,ee]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),v=new Ee(f[0],f[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),v=new X(+f[0],+f[1]);return v.z=+f[2],v},_removeTile:function(l){var f=this._tiles[l];f&&(Mn(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Et(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=c,l.onmousemove=c,et.ielt9&&this.options.opacity<1&&kr(l,this.options.opacity)},_addTile:function(l,f){var v=this._getTilePos(l),I=this._tileCoordsToKey(l),M=this.createTile(this._wrapCoords(l),i(this._tileReady,this,l));this._initTile(M),this.createTile.length<2&&D(i(this._tileReady,this,l,null,M)),Vn(M,v),this._tiles[I]={el:M,coords:l,current:!0},f.appendChild(M),this.fire("tileloadstart",{tile:M,coords:l})},_tileReady:function(l,f,v){f&&this.fire("tileerror",{error:f,tile:v,coords:l});var I=this._tileCoordsToKey(l);v=this._tiles[I],v&&(v.loaded=+new Date,this._map._fadeAnimated?(kr(v.el,0),P(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),f||(Et(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new X(this._wrapX?u(l.x,this._wrapX):l.x,this._wrapY?u(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new ie(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function XE(l){return new Hd(l)}var rc=Hd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,f=m(this,f),f.detectRetina&&et.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&f===void 0&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var v=document.createElement("img");return Ct(v,"load",i(this._tileOnLoad,this,f,v)),Ct(v,"error",i(this._tileOnError,this,f,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(l),v},getTileUrl:function(l){var f={r:et.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=v),f["-y"]=v}return x(this._url,e(f,this.options))},_tileOnLoad:function(l,f){et.ielt9?setTimeout(i(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,v){var I=this.options.errorTileUrl;I&&f.getAttribute("src")!==I&&(f.src=I),l(v,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,f=this.options.maxZoom,v=this.options.zoomReverse,I=this.options.zoomOffset;return v&&(l=f-l),l+I},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(f=this._tiles[l].el,f.onload=c,f.onerror=c,!f.complete)){f.src=F;var v=this._tiles[l].coords;Mn(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:v})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",F),Hd.prototype._removeTile.call(this,l)},_tileReady:function(l,f,v){if(!(!this._map||v&&v.getAttribute("src")===F))return Hd.prototype._tileReady.call(this,l,f,v)}});function sy(l,f){return new rc(l,f)}var ay=rc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var v=e({},this.defaultWmsParams);for(var I in f)I in this.options||(v[I]=f[I]);f=m(this,f);var M=f.detectRetina&&et.retina?2:1,q=this.getTileSize();v.width=q.x*M,v.height=q.y*M,this.wmsParams=v},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,rc.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),v=this._crs,I=le(v.project(f[0]),v.project(f[1])),M=I.min,q=I.max,ee=(this._wmsVersion>=1.3&&this._crs===fe?[M.y,M.x,q.y,q.x]:[M.x,M.y,q.x,q.y]).join(","),ce=rc.prototype.getTileUrl.call(this,l);return ce+_(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ee},setParams:function(l,f){return e(this.wmsParams,l),f||this.redraw(),this}});function JE(l,f){return new ay(l,f)}rc.WMS=ay,sy.wms=JE;var da=Ft.extend({options:{padding:.1},initialize:function(l){m(this,l),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Et(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var v=this._map.getZoomScale(f,this._zoom),I=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,f),q=I.multiplyBy(-v).add(M).subtract(this._map._getNewPixelOrigin(l,f));et.any3d?$r(this._container,q,v):Vn(this._container,q)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),v=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new ie(v,v.add(f.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),uy=da.extend({options:{tolerance:0},getEvents:function(){var l=da.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){da.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Ct(l,"mousemove",this._onMouseMove,this),Ct(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ct(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){P(this._redrawRequest),delete this._ctx,Mn(this._container),mn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var f in this._layers)l=this._layers[f],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){da.prototype._update.call(this);var l=this._bounds,f=this._container,v=l.getSize(),I=et.retina?2:1;Vn(f,l.min),f.width=I*v.x,f.height=I*v.y,f.style.width=v.x+"px",f.style.height=v.y+"px",et.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){da.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[s(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,v=f.next,I=f.prev;v?v.prev=I:this._drawLast=I,I?I.next=v:this._drawFirst=v,delete l._order,delete this._layers[s(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var f=l.options.dashArray.split(/[, ]+/),v=[],I,M;for(M=0;M<f.length;M++){if(I=Number(f[M]),isNaN(I))return;v.push(I)}l.options._dashArray=v}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ie,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var v=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var I=this._drawFirst;I;I=I.next)l=I.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var v,I,M,q,ee=l._parts,ce=ee.length,pe=this._ctx;if(ce){for(pe.beginPath(),v=0;v<ce;v++){for(I=0,M=ee[v].length;I<M;I++)q=ee[v][I],pe[I?"lineTo":"moveTo"](q.x,q.y);f&&pe.closePath()}this._fillStroke(pe,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var f=l._point,v=this._ctx,I=Math.max(Math.round(l._radius),1),M=(Math.max(Math.round(l._radiusY),1)||I)/I;M!==1&&(v.save(),v.scale(1,M)),v.beginPath(),v.arc(f.x,f.y/M,I,0,Math.PI*2,!1),M!==1&&v.restore(),this._fillStroke(v,l)}},_fillStroke:function(l,f){var v=f.options;v.fill&&(l.globalAlpha=v.fillOpacity,l.fillStyle=v.fillColor||v.color,l.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=v.opacity,l.lineWidth=v.weight,l.strokeStyle=v.color,l.lineCap=v.lineCap,l.lineJoin=v.lineJoin,l.stroke())},_onClick:function(l){for(var f=this._map.mouseEventToLayerPoint(l),v,I,M=this._drawFirst;M;M=M.next)v=M.layer,v.options.interactive&&v._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(I=v);this._fireEvent(I?[I]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(Yn(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var v,I,M=this._drawFirst;M;M=M.next)v=M.layer,v.options.interactive&&v._containsPoint(f)&&(I=v);I!==this._hoveredLayer&&(this._handleMouseOut(l),I&&(Et(this._container,"leaflet-interactive"),this._fireEvent([I],l,"mouseover"),this._hoveredLayer=I)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,v){this._map._fireDOMEvent(f,v||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var v=f.next,I=f.prev;if(v)v.prev=I;else return;I?I.next=v:v&&(this._drawFirst=v),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var v=f.next,I=f.prev;if(I)I.next=v;else return;v?v.prev=I:I&&(this._drawLast=I),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function cy(l){return et.canvas?new uy(l):null}var $d=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),e2={_initContainer:function(){this._container=Gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(da.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=$d("shape");Et(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=$d("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[s(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;Mn(f),l.removeInteractiveTarget(f),delete this._layers[s(l)]},_updateStyle:function(l){var f=l._stroke,v=l._fill,I=l.options,M=l._container;M.stroked=!!I.stroke,M.filled=!!I.fill,I.stroke?(f||(f=l._stroke=$d("stroke")),M.appendChild(f),f.weight=I.weight+"px",f.color=I.color,f.opacity=I.opacity,I.dashArray?f.dashStyle=S(I.dashArray)?I.dashArray.join(" "):I.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=I.lineCap.replace("butt","flat"),f.joinstyle=I.lineJoin):f&&(M.removeChild(f),l._stroke=null),I.fill?(v||(v=l._fill=$d("fill")),M.appendChild(v),v.color=I.fillColor||I.color,v.opacity=I.fillOpacity):v&&(M.removeChild(v),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),v=Math.round(l._radius),I=Math.round(l._radiusY||v);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+v+","+I+" 0,"+65535*360)},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){Go(l._container)},_bringToBack:function(l){Ko(l._container)}},ep=et.vml?$d:at,es=da.extend({_initContainer:function(){this._container=ep("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ep("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mn(this._container),mn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){da.prototype._update.call(this);var l=this._bounds,f=l.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,v.setAttribute("width",f.x),v.setAttribute("height",f.y)),Vn(v,l.min),v.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=ep("path");l.options.className&&Et(f,l.options.className),l.options.interactive&&Et(f,"leaflet-interactive"),this._updateStyle(l),this._layers[s(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Mn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[s(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,v=l.options;f&&(v.stroke?(f.setAttribute("stroke",v.color),f.setAttribute("stroke-opacity",v.opacity),f.setAttribute("stroke-width",v.weight),f.setAttribute("stroke-linecap",v.lineCap),f.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?f.setAttribute("stroke-dasharray",v.dashArray):f.removeAttribute("stroke-dasharray"),v.dashOffset?f.setAttribute("stroke-dashoffset",v.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),v.fill?(f.setAttribute("fill",v.fillColor||v.color),f.setAttribute("fill-opacity",v.fillOpacity),f.setAttribute("fill-rule",v.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,ft(l._parts,f))},_updateCircle:function(l){var f=l._point,v=Math.max(Math.round(l._radius),1),I=Math.max(Math.round(l._radiusY),1)||v,M="a"+v+","+I+" 0 1,0 ",q=l._empty()?"M0 0":"M"+(f.x-v)+","+f.y+M+v*2+",0 "+M+-v*2+",0 ";this._setPath(l,q)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){Go(l._path)},_bringToBack:function(l){Ko(l._path)}});et.vml&&es.include(e2);function Mg(l){return et.svg||et.vml?new es(l):null}Kt.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var f=this._paneRenderers[l];return f===void 0&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&cy(l)||Mg(l)}});var ly=fl.extend({initialize:function(l,f){fl.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=ye(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function tp(l,f){return new ly(l,f)}es.create=ep,es.pointsToPath=ft,la.geometryToLayer=Kf,la.coordsToLatLng=Ag,la.coordsToLatLngs=Yf,la.latLngToCoords=Dg,la.latLngsToCoords=Zf,la.getFeature=nc,la.asFeature=Qf,Kt.mergeOptions({boxZoom:!0});var dy=no.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){mn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ka(),oa(),this._startPoint=this._map.mouseEventToContainerPoint(l),Ct(document,{contextmenu:Co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Gt("div","leaflet-zoom-box",this._container),Et(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new ie(this._point,this._startPoint),v=f.getSize();Vn(this._box,f.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Mn(this._box),Yn(this._container,"leaflet-crosshair")),ln(),il(),mn(document,{contextmenu:Co,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var f=new Ee(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kt.addInitHook("addHandler","boxZoom",dy),Kt.mergeOptions({doubleClickZoom:!0});var hy=no.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,v=f.getZoom(),I=f.options.zoomDelta,M=l.originalEvent.shiftKey?v-I:v+I;f.options.doubleClickZoom==="center"?f.setZoom(M):f.setZoomAround(l.containerPoint,M)}});Kt.addInitHook("addHandler","doubleClickZoom",hy),Kt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var fy=no.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Qo(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Et(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yn(this._map._container,"leaflet-grab"),Yn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=ye(this._map.options.maxBounds);this._offsetLimit=le(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),v=this._initialWorldOffset,I=this._draggable._newPos.x,M=(I-f+v)%l+f-v,q=(I+f+v)%l-f-v,ee=Math.abs(M+v)<Math.abs(q+v)?M:q;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ee},_onDragEnd:function(l){var f=this._map,v=f.options,I=!v.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),I)f.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),q=(this._lastTime-this._times[0])/1e3,ee=v.easeLinearity,ce=M.multiplyBy(ee/q),pe=ce.distanceTo([0,0]),Ae=Math.min(v.inertiaMaxSpeed,pe),y=ce.multiplyBy(Ae/pe),E=Ae/(v.inertiaDeceleration*ee),O=y.multiplyBy(-E/2).round();!O.x&&!O.y?f.fire("moveend"):(O=f._limitOffset(O,f.options.maxBounds),D(function(){f.panBy(O,{duration:E,easeLinearity:ee,noMoveStart:!0,animate:!0})}))}}});Kt.addInitHook("addHandler","dragging",fy),Kt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var kg=no.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Ct(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),mn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,v=l.scrollTop||f.scrollTop,I=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(I,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var f=this._panKeys={},v=this.keyCodes,I,M;for(I=0,M=v.left.length;I<M;I++)f[v.left[I]]=[-1*l,0];for(I=0,M=v.right.length;I<M;I++)f[v.right[I]]=[l,0];for(I=0,M=v.down.length;I<M;I++)f[v.down[I]]=[0,l];for(I=0,M=v.up.length;I<M;I++)f[v.up[I]]=[0,-1*l]},_setZoomDelta:function(l){var f=this._zoomKeys={},v=this.keyCodes,I,M;for(I=0,M=v.zoomIn.length;I<M;I++)f[v.zoomIn[I]]=l;for(I=0,M=v.zoomOut.length;I<M;I++)f[v.zoomOut[I]]=-l},_addHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){mn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var f=l.keyCode,v=this._map,I;if(f in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(I=this._panKeys[f],l.shiftKey&&(I=J(I).multiplyBy(3)),v.options.maxBounds&&(I=v._limitOffset(J(I),v.options.maxBounds)),v.options.worldCopyJump){var M=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(I)));v.panTo(M)}else v.panBy(I)}else if(f in this._zoomKeys)v.setZoom(v.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;Co(l)}}});Kt.addInitHook("addHandler","keyboard",kg),Kt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var py=no.extend({addHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){mn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=Od(l),v=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var I=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),I),Co(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),v=this._map.options.zoomSnap||0;l._stop();var I=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(I))))/Math.LN2,q=v?Math.ceil(M/v)*v:M,ee=l._limitZoom(f+(this._delta>0?q:-q))-f;this._delta=0,this._startTime=null,ee&&(l.options.scrollWheelZoom==="center"?l.setZoom(f+ee):l.setZoomAround(this._lastMousePos,f+ee))}});Kt.addInitHook("addHandler","scrollWheelZoom",py);var t2=600;Kt.mergeOptions({tapHold:et.touchNative&&et.safari&&et.mobile,tapTolerance:15});var my=no.extend({addHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){mn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var f=l.touches[0];this._startPos=this._newPos=new X(f.clientX,f.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Ct(document,"touchend",Zn),Ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),t2),Ct(document,"touchend touchcancel contextmenu",this._cancel,this),Ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){mn(document,"touchend",Zn),mn(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),mn(document,"touchend touchcancel contextmenu",this._cancel,this),mn(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new X(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var v=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});v._simulated=!0,f.target.dispatchEvent(v)}});Kt.addInitHook("addHandler","tapHold",my),Kt.mergeOptions({touchZoom:et.touch,bounceAtZoomLimits:!0});var ts=no.extend({addHooks:function(){Et(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yn(this._map._container,"leaflet-touch-zoom"),mn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(!(!l.touches||l.touches.length!==2||f._animatingZoom||this._zooming)){var v=f.mouseEventToContainerPoint(l.touches[0]),I=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(v.add(I)._divideBy(2))),this._startDist=v.distanceTo(I),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend touchcancel",this._onTouchEnd,this),Zn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var f=this._map,v=f.mouseEventToContainerPoint(l.touches[0]),I=f.mouseEventToContainerPoint(l.touches[1]),M=v.distanceTo(I)/this._startDist;if(this._zoom=f.getScaleZoom(M,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&M<1||this._zoom>f.getMaxZoom()&&M>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var q=v._add(I)._divideBy(2)._subtract(this._centerPoint);if(M===1&&q.x===0&&q.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(q),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),P(this._animRequest);var ee=i(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(ee,this,!0),Zn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,P(this._animRequest),mn(document,"touchmove",this._onTouchMove,this),mn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kt.addInitHook("addHandler","touchZoom",ts),Kt.BoxZoom=dy,Kt.DoubleClickZoom=hy,Kt.Drag=fy,Kt.Keyboard=kg,Kt.ScrollWheelZoom=py,Kt.TapHold=my,Kt.TouchZoom=ts,n.Bounds=ie,n.Browser=et,n.CRS=ze,n.Canvas=uy,n.Circle=Gf,n.CircleMarker=jd,n.Class=U,n.Control=ki,n.DivIcon=QE,n.DivOverlay=Eo,n.DomEvent=gn,n.DomUtil=Zo,n.Draggable=Qo,n.Evented=de,n.FeatureGroup=kn,n.GeoJSON=la,n.GridLayer=Hd,n.Handler=no,n.Icon=Oi,n.ImageOverlay=Wd,n.LatLng=we,n.LatLngBounds=Ee,n.Layer=Ft,n.LayerGroup=vn,n.LineUtil=g,n.Map=Kt,n.Marker=qf,n.Mixin=al,n.Path=ca,n.Point=X,n.PolyUtil=Vd,n.Polygon=fl,n.Polyline=Ts,n.Popup=Xf,n.PosAnimation=jf,n.Projection=K,n.Rectangle=ly,n.Renderer=da,n.SVG=es,n.SVGOverlay=iy,n.TileLayer=rc,n.Tooltip=Jf,n.Transformation=Je,n.Util=z,n.VideoOverlay=ry,n.bind=i,n.bounds=le,n.canvas=cy,n.circle=qE,n.circleMarker=$E,n.control=gi,n.divIcon=NO,n.extend=e,n.featureGroup=Rr,n.geoJSON=ty,n.geoJson=KE,n.gridLayer=XE,n.icon=Ri,n.imageOverlay=ny,n.latLng=Ce,n.latLngBounds=ye,n.layerGroup=Jt,n.map=Rd,n.marker=HE,n.point=J,n.polygon=GE,n.polyline=Tg,n.popup=ZE,n.rectangle=tp,n.setOptions=m,n.stamp=s,n.svg=Mg,n.svgOverlay=oy,n.tileLayer=sy,n.tooltip=RO,n.transformation=vt,n.version=t,n.videoOverlay=YE;var np=window.L;n.noConflict=function(){return window.L=np,this},window.L=n})});var bU=rp(()=>{"use strict"});var CU=rp((Om,wU)=>{"use strict";wU.exports=Om=window.fetch;Om.default=window.fetch.bind(window);Om.Headers=window.Headers;Om.Request=window.Request;Om.Response=window.Response});var xU=rp(()=>{"use strict"});function l2(n,t){return Object.is(n,t)}var Gr=null,_y=!1,d2=1,As=Symbol("SIGNAL");function Ht(n){let t=Gr;return Gr=n,t}function h2(){return Gr}var Ng={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fg(n){if(_y)throw new Error("");if(Gr===null)return;Gr.consumerOnSignalRead(n);let t=Gr.nextProducerIndex++;if(Cy(Gr),t<Gr.producerNode.length&&Gr.producerNode[t]!==n&&Rg(Gr)){let e=Gr.producerNode[t];wy(e,Gr.producerIndexOfThis[t])}Gr.producerNode[t]!==n&&(Gr.producerNode[t]=n,Gr.producerIndexOfThis[t]=Rg(Gr)?WO(n,Gr,t):0),Gr.producerLastReadVersion[t]=n.version}function zO(){d2++}function f2(n){if(!(Rg(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===d2)){if(!n.producerMustRecompute(n)&&!v2(n)){c2(n);return}n.producerRecomputeValue(n),c2(n)}}function p2(n){if(n.liveConsumerNode===void 0)return;let t=_y;_y=!0;try{for(let e of n.liveConsumerNode)e.dirty||u$(e)}finally{_y=t}}function m2(){return Gr?.consumerAllowSignalWrites!==!1}function u$(n){n.dirty=!0,p2(n),n.consumerMarkedDirty?.(n)}function c2(n){n.dirty=!1,n.lastCleanEpoch=d2}function by(n){return n&&(n.nextProducerIndex=0),Ht(n)}function g2(n,t){if(Ht(t),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Rg(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)wy(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function v2(n){Cy(n);for(let t=0;t<n.producerNode.length;t++){let e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(f2(e),r!==e.version))return!0}return!1}function _2(n){if(Cy(n),Rg(n))for(let t=0;t<n.producerNode.length;t++)wy(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function WO(n,t,e){if(HO(n),n.liveConsumerNode.length===0&&$O(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=WO(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function wy(n,t){if(HO(n),n.liveConsumerNode.length===1&&$O(n))for(let r=0;r<n.producerNode.length;r++)wy(n.producerNode[r],n.producerIndexOfThis[r]);let e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[t],i=n.liveConsumerNode[t];Cy(i),i.producerIndexOfThis[r]=t}}function Rg(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Cy(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function HO(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $O(n){return n.producerNode!==void 0}function y2(n,t){let e=Object.create(c$);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(f2(e),Fg(e),e.value===yy)throw e.error;return e.value};return r[As]=e,r}var a2=Symbol("UNSET"),u2=Symbol("COMPUTING"),yy=Symbol("ERRORED"),c$=bt(Ie({},Ng),{value:a2,dirty:!0,error:null,equal:l2,kind:"computed",producerMustRecompute(n){return n.value===a2||n.value===u2},producerRecomputeValue(n){if(n.value===u2)throw new Error("Detected cycle in computations.");let t=n.value;n.value=u2;let e=by(n),r,i=!1;try{r=n.computation(),Ht(null),i=t!==a2&&t!==yy&&r!==yy&&n.equal(t,r)}catch(o){r=yy,n.error=o}finally{g2(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function l$(){throw new Error}var qO=l$;function GO(n){qO(n)}function b2(n){qO=n}var d$=null;function w2(n,t){let e=Object.create(xy);e.value=n,t!==void 0&&(e.equal=t);let r=()=>(Fg(e),e.value);return r[As]=e,r}function Lg(n,t){m2()||GO(n),n.equal(n.value,t)||(n.value=t,h$(n))}function C2(n,t){m2()||GO(n),Lg(n,t(n.value))}var xy=bt(Ie({},Ng),{equal:l2,value:void 0,kind:"signal"});function h$(n){n.version++,zO(),p2(n),d$?.()}function x2(n){let t=Ht(null);try{return n()}finally{Ht(t)}}var E2;function Vg(){return E2}function ic(n){let t=E2;return E2=n,t}var Ey=Symbol("NotFound");function kt(n){return typeof n=="function"}function ip(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Iy=ip(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function qd(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var fr=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(kt(r))try{r()}catch(o){t=o instanceof Iy?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{KO(o)}catch(s){t=t??[],s instanceof Iy?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Iy(t)}}add(t){var e;if(t&&t!==this)if(this.closed)KO(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&qd(e,t)}remove(t){let{_finalizers:e}=this;e&&qd(e,t),t instanceof n&&t._removeParent(this)}};fr.EMPTY=(()=>{let n=new fr;return n.closed=!0,n})();var I2=fr.EMPTY;function Sy(n){return n instanceof fr||n&&"closed"in n&&kt(n.remove)&&kt(n.add)&&kt(n.unsubscribe)}function KO(n){kt(n)?n():n.unsubscribe()}var fa={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var op={setTimeout(n,t,...e){let{delegate:r}=op;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=op;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ty(n){op.setTimeout(()=>{let{onUnhandledError:t}=fa;if(t)t(n);else throw n})}function Bg(){}var YO=S2("C",void 0,void 0);function ZO(n){return S2("E",void 0,n)}function QO(n){return S2("N",n,void 0)}function S2(n,t,e){return{kind:n,value:t,error:e}}var Gd=null;function sp(n){if(fa.useDeprecatedSynchronousErrorHandling){let t=!Gd;if(t&&(Gd={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=Gd;if(Gd=null,e)throw r}}else n()}function XO(n){fa.useDeprecatedSynchronousErrorHandling&&Gd&&(Gd.errorThrown=!0,Gd.error=n)}var Kd=class extends fr{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Sy(t)&&t.add(this)):this.destination=_$}static create(t,e,r){return new ap(t,e,r)}next(t){this.isStopped?A2(QO(t),this):this._next(t)}error(t){this.isStopped?A2(ZO(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?A2(YO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},g$=Function.prototype.bind;function T2(n,t){return g$.call(n,t)}var D2=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Ay(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Ay(r)}else Ay(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ay(e)}}},ap=class extends Kd{constructor(t,e,r){super();let i;if(kt(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let o;this&&fa.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&T2(t.next,o),error:t.error&&T2(t.error,o),complete:t.complete&&T2(t.complete,o)}):i=t}this.destination=new D2(i)}};function Ay(n){fa.useDeprecatedSynchronousErrorHandling?XO(n):Ty(n)}function v$(n){throw n}function A2(n,t){let{onStoppedNotification:e}=fa;e&&op.setTimeout(()=>e(n,t))}var _$={closed:!0,next:Bg,error:v$,complete:Bg};var up=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ns(n){return n}function P2(...n){return M2(n)}function M2(n){return n.length===0?ns:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var Tt=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let o=b$(e)?e:new ap(e,r,i);return sp(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=JO(r),new r((i,o)=>{let s=new ap({next:a=>{try{e(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[up](){return this}pipe(...e){return M2(e)(this)}toPromise(e){return e=JO(e),new e((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=t=>new n(t),n})();function JO(n){var t;return(t=n??fa.Promise)!==null&&t!==void 0?t:Promise}function y$(n){return n&&kt(n.next)&&kt(n.error)&&kt(n.complete)}function b$(n){return n&&n instanceof Kd||y$(n)&&Sy(n)}function k2(n){return kt(n?.lift)}function on(n){return t=>{if(k2(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function en(n,t,e,r,i){return new O2(n,t,e,r,i)}var O2=class extends Kd{constructor(t,e,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function cp(){return on((n,t)=>{let e=null;n._refCount++;let r=en(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,o=e;e=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var lp=class extends Tt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,k2(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new fr;let e=this.getSubject();t.add(this.source.subscribe(en(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=fr.EMPTY)}return t}refCount(){return cp()(this)}};var e4=ip(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Er=(()=>{class n extends Tt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new Dy(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new e4}next(e){sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){sp(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:o}=this;return r||i?I2:(this.currentObservers=null,o.push(e),new fr(()=>{this.currentObservers=null,qd(o,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:o}=this;r?e.error(i):o&&e.complete()}asObservable(){let e=new Tt;return e.source=this,e}}return n.create=(t,e)=>new Dy(t,e),n})(),Dy=class extends Er{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:I2}};var vi=class extends Er{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var R2={now(){return(R2.delegate||Date).now()},delegate:void 0};var Py=class extends fr{constructor(t,e){super()}schedule(t,e=0){return this}};var Ug={setInterval(n,t,...e){let{delegate:r}=Ug;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){let{delegate:t}=Ug;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};var dp=class extends Py{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,r=0){return Ug.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&Ug.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,qd(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var hp=class n{constructor(t,e=n.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}};hp.now=R2.now;var fp=class extends hp{constructor(t,e=hp.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}};var N2=new fp(dp);var My=class extends dp{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(t,e,r):(t.flush(this),0)}};var ky=class extends fp{};var F2=new ky(My);var Io=new Tt(n=>n.complete());function t4(n){return n&&kt(n.schedule)}function n4(n){return n[n.length-1]}function Oy(n){return kt(n4(n))?n.pop():void 0}function gl(n){return t4(n4(n))?n.pop():void 0}function L2(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e}function i4(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,u)}c((r=r.apply(n,t||[])).next())})}function r4(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yd(n){return this instanceof Yd?(this.v=n,this):new Yd(n)}function o4(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(C){return new Promise(function(x,S){o.push([m,C,x,S])>1||u(m,C)})},_&&(i[m]=_(i[m])))}function u(m,_){try{c(r[m](_))}catch(C){p(o[0][3],C)}}function c(m){m.value instanceof Yd?Promise.resolve(m.value.v).then(d,h):p(o[0][2],m)}function d(m){u("next",m)}function h(m){u("throw",m)}function p(m,_){m(_),o.shift(),o.length&&u(o[0][0],o[0][1])}}function s4(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof r4=="function"?r4(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}var Ry=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ny(n){return kt(n?.then)}function Fy(n){return kt(n[up])}function Ly(n){return Symbol.asyncIterator&&kt(n?.[Symbol.asyncIterator])}function Vy(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function w$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var By=w$();function Uy(n){return kt(n?.[By])}function jy(n){return o4(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Yd(e.read());if(i)return yield Yd(void 0);yield yield Yd(r)}}finally{e.releaseLock()}})}function zy(n){return kt(n?.getReader)}function Fr(n){if(n instanceof Tt)return n;if(n!=null){if(Fy(n))return C$(n);if(Ry(n))return x$(n);if(Ny(n))return E$(n);if(Ly(n))return a4(n);if(Uy(n))return I$(n);if(zy(n))return S$(n)}throw Vy(n)}function C$(n){return new Tt(t=>{let e=n[up]();if(kt(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function x$(n){return new Tt(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function E$(n){return new Tt(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Ty)})}function I$(n){return new Tt(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function a4(n){return new Tt(t=>{T$(n,t).catch(e=>t.error(e))})}function S$(n){return a4(jy(n))}function T$(n,t){var e,r,i,o;return i4(this,void 0,void 0,function*(){try{for(e=s4(n);r=yield e.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=e.return)&&(yield o.call(e))}finally{if(i)throw i.error}}t.complete()})}function So(n,t,e,r=0,i=!1){let o=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function vl(n,t=0){return on((e,r)=>{e.subscribe(en(r,i=>So(r,n,()=>r.next(i),t),()=>So(r,n,()=>r.complete(),t),i=>So(r,n,()=>r.error(i),t)))})}function _l(n,t=0){return on((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function u4(n,t){return Fr(n).pipe(_l(t),vl(t))}function c4(n,t){return Fr(n).pipe(_l(t),vl(t))}function l4(n,t){return new Tt(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function d4(n,t){return new Tt(e=>{let r;return So(e,t,()=>{r=n[By](),So(e,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){e.error(s);return}o?e.complete():e.next(i)},0,!0)}),()=>kt(r?.return)&&r.return()})}function Wy(n,t){if(!n)throw new Error("Iterable cannot be null");return new Tt(e=>{So(e,t,()=>{let r=n[Symbol.asyncIterator]();So(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function h4(n,t){return Wy(jy(n),t)}function f4(n,t){if(n!=null){if(Fy(n))return u4(n,t);if(Ry(n))return l4(n,t);if(Ny(n))return c4(n,t);if(Ly(n))return Wy(n,t);if(Uy(n))return d4(n,t);if(zy(n))return h4(n,t)}throw Vy(n)}function rt(n,t){return t?f4(n,t):Fr(n)}function pt(...n){let t=gl(n);return rt(n,t)}function pp(n,t){let e=kt(n)?n:()=>n,r=i=>i.error(e());return new Tt(t?i=>t.schedule(r,0,i):r)}function V2(n){return!!n&&(n instanceof Tt||kt(n.lift)&&kt(n.subscribe))}var oc=ip(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ct(n,t){return on((e,r)=>{let i=0;e.subscribe(en(r,o=>{r.next(n.call(t,o,i++))}))})}var{isArray:A$}=Array;function D$(n,t){return A$(t)?n(...t):n(t)}function Hy(n){return ct(t=>D$(n,t))}var{isArray:P$}=Array,{getPrototypeOf:M$,prototype:k$,keys:O$}=Object;function $y(n){if(n.length===1){let t=n[0];if(P$(t))return{args:t,keys:null};if(R$(t)){let e=O$(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function R$(n){return n&&typeof n=="object"&&M$(n)===k$}function qy(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function jg(...n){let t=gl(n),e=Oy(n),{args:r,keys:i}=$y(n);if(r.length===0)return rt([],t);let o=new Tt(N$(r,t,i?s=>qy(i,s):ns));return e?o.pipe(Hy(e)):o}function N$(n,t,e=ns){return r=>{p4(t,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)p4(t,()=>{let c=rt(n[u],t),d=!1;c.subscribe(en(r,h=>{o[u]=h,d||(d=!0,a--),a||r.next(e(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function p4(n,t,e){n?So(e,n,t):t()}function m4(n,t,e,r,i,o,s,a){let u=[],c=0,d=0,h=!1,p=()=>{h&&!u.length&&!c&&t.complete()},m=C=>c<r?_(C):u.push(C),_=C=>{o&&t.next(C),c++;let x=!1;Fr(e(C,d++)).subscribe(en(t,S=>{i?.(S),o?m(S):t.next(S)},()=>{x=!0},void 0,()=>{if(x)try{for(c--;u.length&&c<r;){let S=u.shift();s?So(t,s,()=>_(S)):_(S)}p()}catch(S){t.error(S)}}))};return n.subscribe(en(t,m,()=>{h=!0,p()})),()=>{a?.()}}function Ir(n,t,e=1/0){return kt(t)?Ir((r,i)=>ct((o,s)=>t(r,o,i,s))(Fr(n(r,i))),e):(typeof t=="number"&&(e=t),on((r,i)=>m4(r,i,n,e)))}function yl(n=1/0){return Ir(ns,n)}function g4(){return yl(1)}function mp(...n){return g4()(rt(n,gl(n)))}function Gy(n){return new Tt(t=>{Fr(n()).subscribe(t)})}function B2(...n){let t=Oy(n),{args:e,keys:r}=$y(n),i=new Tt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),u=s,c=s;for(let d=0;d<s;d++){let h=!1;Fr(e[d]).subscribe(en(o,p=>{h||(h=!0,c--),a[d]=p},()=>u--,void 0,()=>{(!u||!h)&&(c||o.next(r?qy(r,a):a),o.complete())}))}});return t?i.pipe(Hy(t)):i}function ro(n,t){return on((e,r)=>{let i=0;e.subscribe(en(r,o=>n.call(t,o,i++)&&r.next(o)))})}function sc(n){return on((t,e)=>{let r=null,i=!1,o;r=t.subscribe(en(e,void 0,void 0,s=>{o=Fr(n(s,sc(n)(t))),r?(r.unsubscribe(),r=null,o.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(e))})}function v4(n,t,e,r,i){return(o,s)=>{let a=e,u=t,c=0;o.subscribe(en(s,d=>{let h=c++;u=a?n(u,d,h):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function eu(n,t){return kt(t)?Ir(n,t,1):Ir(n,1)}function bl(n){return on((t,e)=>{let r=!1;t.subscribe(en(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function ac(n){return n<=0?()=>Io:on((t,e)=>{let r=0;t.subscribe(en(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function Ky(n=F$){return on((t,e)=>{let r=!1;t.subscribe(en(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function F$(){return new oc}function tu(n){return on((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function uc(n,t){let e=arguments.length>=2;return r=>r.pipe(n?ro((i,o)=>n(i,o,r)):ns,ac(1),e?bl(t):Ky(()=>new oc))}function gp(n){return n<=0?()=>Io:on((t,e)=>{let r=[];t.subscribe(en(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function U2(n,t){let e=arguments.length>=2;return r=>r.pipe(n?ro((i,o)=>n(i,o,r)):ns,gp(1),e?bl(t):Ky(()=>new oc))}function j2(n,t){return on(v4(n,t,arguments.length>=2,!0))}function z2(...n){let t=gl(n);return on((e,r)=>{(t?mp(n,e,t):mp(n,e)).subscribe(r)})}function ti(n,t){return on((e,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();e.subscribe(en(r,u=>{i?.unsubscribe();let c=0,d=o++;Fr(n(u,d)).subscribe(i=en(r,h=>r.next(t?t(u,h,d,c++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function W2(n){return on((t,e)=>{Fr(n).subscribe(en(e,()=>e.complete(),Bg)),!e.closed&&t.subscribe(e)})}function _i(n,t,e){let r=kt(n)||t||e?{next:n,error:t,complete:e}:n;return r?on((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(en(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ns}var oR="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Oe=class extends Error{code;constructor(t,e){super(sR(t,e)),this.code=t}};function L$(n){return`NG0${Math.abs(n)}`}function sR(n,t){return`${L$(n)}${t?": "+t:""}`}var aR=Symbol("InputSignalNode#UNSET"),V$=bt(Ie({},xy),{transformFn:void 0,applyValueToInputSignal(n,t){Lg(n,t)}});function uR(n,t){let e=Object.create(V$);e.value=n,e.transformFn=t?.transform;function r(){if(Fg(e),e.value===aR){let i=null;throw new Oe(-950,i)}return e.value}return r[As]=e,r}function r0(n){return{toString:n}.toString()}var Yy="__parameters__";function B$(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function cR(n,t,e){return r0(()=>{let r=B$(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,d){let h=u.hasOwnProperty(Yy)?u[Yy]:Object.defineProperty(u,Yy,{value:[]})[Yy];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qd=globalThis;function Bn(n){for(let t in n)if(n[t]===Bn)return t;throw Error("Could not find renamed property on target object.")}function U$(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function Do(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Do).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function oI(n,t){return n?t?`${n} ${t}`:n:t||""}var j$=Bn({__forward_ref__:Bn});function ri(n){return n.__forward_ref__=ri,n.toString=function(){return Do(this())},n}function io(n){return lR(n)?n():n}function lR(n){return typeof n=="function"&&n.hasOwnProperty(j$)&&n.__forward_ref__===ri}function Ve(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rs(n){return{providers:n.providers||[],imports:n.imports||[]}}function Db(n){return _4(n,hR)||_4(n,fR)}function dR(n){return Db(n)!==null}function _4(n,t){return n.hasOwnProperty(t)?n[t]:null}function z$(n){let t=n&&(n[hR]||n[fR]);return t||null}function y4(n){return n&&(n.hasOwnProperty(b4)||n.hasOwnProperty(W$))?n[b4]:null}var hR=Bn({\u0275prov:Bn}),b4=Bn({\u0275inj:Bn}),fR=Bn({ngInjectableDef:Bn}),W$=Bn({ngInjectorDef:Bn}),$e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=Ve({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pR(n){return n&&!!n.\u0275providers}var H$=Bn({\u0275cmp:Bn}),$$=Bn({\u0275dir:Bn}),q$=Bn({\u0275pipe:Bn}),G$=Bn({\u0275mod:Bn}),ib=Bn({\u0275fac:Bn}),$g=Bn({__NG_ELEMENT_ID__:Bn}),w4=Bn({__NG_ENV_ID__:Bn});function cc(n){return typeof n=="string"?n:n==null?"":String(n)}function K$(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():cc(n)}function mR(n,t){throw new Oe(-200,n)}function a6(n,t){throw new Oe(-201,!1)}var qt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(qt||{}),sI;function gR(){return sI}function To(n){let t=sI;return sI=n,t}function vR(n,t,e){let r=Db(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&qt.Optional)return null;if(t!==void 0)return t;a6(n,"Injector")}var Y$={},Xd=Y$,aI="__NG_DI_FLAG__",ob=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=e;return this.injector.get(t,r.optional?Ey:Xd,r)}},sb="ngTempTokenPath",Z$="ngTokenPath",Q$=/\n/gm,X$="\u0275",C4="__source";function J$(n,t=qt.Default){if(Vg()===void 0)throw new Oe(-203,!1);if(Vg()===null)return vR(n,void 0,t);{let e=Vg(),r;return e instanceof ob?r=e.injector:r=e,r.get(n,t&qt.Optional?null:void 0,t)}}function qe(n,t=qt.Default){return(gR()||J$)(io(n),t)}function Se(n,t=qt.Default){return qe(n,Pb(t))}function Pb(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uI(n){let t=[];for(let e=0;e<n.length;e++){let r=io(n[e]);if(Array.isArray(r)){if(r.length===0)throw new Oe(900,!1);let i,o=qt.Default;for(let s=0;s<r.length;s++){let a=r[s],u=eq(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}t.push(qe(i,o))}else t.push(qe(r))}return t}function _R(n,t){return n[aI]=t,n.prototype[aI]=t,n}function eq(n){return n[aI]}function tq(n,t,e,r){let i=n[sb];throw t[C4]&&i.unshift(t[C4]),n.message=nq(`
`+n.message,i,e,r),n[Z$]=i,n[sb]=null,n}function nq(n,t,e,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==X$?n.slice(2):n;let i=Do(t);if(Array.isArray(t))i=t.map(Do).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Do(a)))}i=`{${o.join(", ")}}`}return`${e}${r?"("+r+")":""}[${i}]: ${n.replace(Q$,`
  `)}`}var ii=_R(cR("Optional"),8);var rq=_R(cR("SkipSelf"),4);function eh(n,t){let e=n.hasOwnProperty(ib);return e?n[ib]:null}function iq(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=t[r];if(e&&(i=e(i),o=e(o)),o!==i)return!1}return!0}function oq(n){return n.flat(Number.POSITIVE_INFINITY)}function u6(n,t){n.forEach(e=>Array.isArray(e)?u6(e,t):t(e))}function yR(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function ab(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function sq(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let o=i-2;n[i]=n[o],i--}n[t]=e,n[t+1]=r}}function c6(n,t,e){let r=i0(n,t);return r>=0?n[r|1]=e:(r=~r,sq(n,r,t,e)),r}function H2(n,t){let e=i0(n,t);if(e>=0)return n[e|1]}function i0(n,t){return aq(n,t,1)}function aq(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<e];if(t===s)return o<<e;s>t?i=o:r=o+1}return~(i<<e)}var th={},Ao=[],qg=new $e(""),bR=new $e("",-1),wR=new $e(""),ub=class{get(t,e=Xd){if(e===Xd){let r=new Error(`NullInjectorError: No provider for ${Do(t)}!`);throw r.name="NullInjectorError",r}return e}};function CR(n,t){let e=n[G$]||null;if(!e&&t===!0)throw new Error(`Type ${Do(n)} does not have '\u0275mod' property.`);return e}function nh(n){return n[H$]||null}function uq(n){return n[$$]||null}function cq(n){return n[q$]||null}function Po(n){return{\u0275providers:n}}function l6(...n){return{\u0275providers:xR(!0,n),\u0275fromNgModule:!0}}function xR(n,...t){let e=[],r=new Set,i,o=s=>{e.push(s)};return u6(t,s=>{let a=s;cI(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ER(i,o),e}function ER(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];d6(i,o=>{t(o,r)})}}function cI(n,t,e,r){if(n=io(n),!n)return!1;let i=null,o=y4(n),s=!o&&nh(n);if(!o&&!s){let u=n.ngModule;if(o=y4(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)cI(c,t,e,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{u6(o.imports,d=>{cI(d,t,e,r)&&(c||=[],c.push(d))})}finally{}c!==void 0&&ER(c,t)}if(!a){let c=eh(i)||(()=>new i);t({provide:i,useFactory:c,deps:Ao},i),t({provide:wR,useValue:i,multi:!0},i),t({provide:qg,useValue:()=>qe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=n;d6(u,d=>{t(d,c)})}}else return!1;return i!==n&&n.providers!==void 0}function d6(n,t){for(let e of n)pR(e)&&(e=e.\u0275providers),Array.isArray(e)?d6(e,t):t(e)}var lq=Bn({provide:String,useValue:Bn});function IR(n){return n!==null&&typeof n=="object"&&lq in n}function dq(n){return!!(n&&n.useExisting)}function hq(n){return!!(n&&n.useFactory)}function xp(n){return typeof n=="function"}function fq(n){return!!n.useClass}var Mb=new $e(""),Xy={},x4={},$2;function h6(){return $2===void 0&&($2=new ub),$2}var ni=class{},Gg=class extends ni{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,dI(t,s=>this.processProvider(s)),this.records.set(bR,vp(void 0,this)),i.has("environment")&&this.records.set(ni,vp(void 0,this));let o=this.records.get(Mb);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wR,Ao,qt.Self))}retrieve(t,e){let r=e;return this.get(t,r.optional?Ey:Xd,r)}destroy(){Wg(this),this._destroyed=!0;let t=Ht(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ht(t)}}onDestroy(t){return Wg(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Wg(this);let e=ic(this),r=To(void 0),i;try{return t()}finally{ic(e),To(r)}}get(t,e=Xd,r=qt.Default){if(Wg(this),t.hasOwnProperty(w4))return t[w4](this);r=Pb(r);let i,o=ic(this),s=To(void 0);try{if(!(r&qt.SkipSelf)){let u=this.records.get(t);if(u===void 0){let c=_q(t)&&Db(t);c&&this.injectableDefInScope(c)?u=vp(lI(t),Xy):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u)}let a=r&qt.Self?h6():this.parent;return e=r&qt.Optional&&e===Xd?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[sb]=a[sb]||[]).unshift(Do(t)),o)throw a;return tq(a,t,"R3InjectorError",this.source)}else throw a}finally{To(s),ic(o)}}resolveInjectorInitializers(){let t=Ht(null),e=ic(this),r=To(void 0),i;try{let o=this.get(qg,Ao,qt.Self);for(let s of o)s()}finally{ic(e),To(r),Ht(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(Do(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=io(t);let e=xp(t)?t:io(t&&t.provide),r=mq(t);if(!xp(t)&&t.multi===!0){let i=this.records.get(e);i||(i=vp(void 0,Xy,!0),i.factory=()=>uI(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=Ht(null);try{return e.value===x4?mR(Do(t)):e.value===Xy&&(e.value=x4,e.value=e.factory()),typeof e.value=="object"&&e.value&&vq(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ht(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=io(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function lI(n){let t=Db(n),e=t!==null?t.factory:eh(n);if(e!==null)return e;if(n instanceof $e)throw new Oe(204,!1);if(n instanceof Function)return pq(n);throw new Oe(204,!1)}function pq(n){if(n.length>0)throw new Oe(204,!1);let e=z$(n);return e!==null?()=>e.factory(n):()=>new n}function mq(n){if(IR(n))return vp(void 0,n.useValue);{let t=SR(n);return vp(t,Xy)}}function SR(n,t,e){let r;if(xp(n)){let i=io(n);return eh(i)||lI(i)}else if(IR(n))r=()=>io(n.useValue);else if(hq(n))r=()=>n.useFactory(...uI(n.deps||[]));else if(dq(n))r=()=>qe(io(n.useExisting));else{let i=io(n&&(n.useClass||n.provide));if(gq(n))r=()=>new i(...uI(n.deps));else return eh(i)||lI(i)}return r}function Wg(n){if(n.destroyed)throw new Oe(205,!1)}function vp(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function gq(n){return!!n.deps}function vq(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function _q(n){return typeof n=="function"||typeof n=="object"&&n instanceof $e}function dI(n,t){for(let e of n)Array.isArray(e)?dI(e,t):e&&pR(e)?dI(e.\u0275providers,t):t(e)}function oi(n,t){let e;n instanceof Gg?(Wg(n),e=n):e=new ob(n);let r,i=ic(e),o=To(void 0);try{return t()}finally{ic(i),To(o)}}function TR(){return gR()!==void 0||Vg()!=null}function f6(n){if(!TR())throw new Oe(-203,!1)}function yq(n){return typeof n=="function"}var fc=0,Ot=1,Dt=2,Fi=3,ga=4,_a=5,Kg=6,cb=7,Kr=8,Ep=9,lc=10,Sr=11,Yg=12,E4=13,Pp=14,va=15,rh=16,_p=17,dc=18,kb=19,AR=20,wl=21,q2=22,lb=23,Ds=24,wp=25,Li=26,DR=1;var ih=7,db=8,Ip=9,Ni=10;function Cl(n){return Array.isArray(n)&&typeof n[DR]=="object"}function pc(n){return Array.isArray(n)&&n[DR]===!0}function PR(n){return(n.flags&4)!==0}function Mp(n){return n.componentOffset>-1}function p6(n){return(n.flags&1)===1}function ru(n){return!!n.template}function hb(n){return(n[Dt]&512)!==0}function o0(n){return(n[Dt]&256)===256}var hI=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function MR(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var ya=(()=>{let n=()=>kR;return n.ngInherit=!0,n})();function kR(n){return n.type.prototype.ngOnChanges&&(n.setInput=wq),bq}function bq(){let n=RR(this),t=n?.current;if(t){let e=n.previous;if(e===th)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function wq(n,t,e,r,i){let o=this.declaredInputs[r],s=RR(n)||Cq(n,{previous:th,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new hI(c&&c.currentValue,e,u===th),MR(n,t,i,e)}var OR="__ngSimpleChanges__";function RR(n){return n[OR]||null}function Cq(n,t){return n[OR]=t}var I4=null;var On=function(n,t=null,e){I4?.(n,t,e)},xq="svg",Eq="math";function iu(n){for(;Array.isArray(n);)n=n[fc];return n}function NR(n,t){return iu(t[n])}function uu(n,t){return iu(t[n.index])}function m6(n,t){return n.data[t]}function g6(n,t){return n[t]}function ou(n,t){let e=t[n];return Cl(e)?e:e[fc]}function Iq(n){return(n[Dt]&4)===4}function v6(n){return(n[Dt]&128)===128}function Sq(n){return pc(n[Fi])}function Sp(n,t){return t==null?null:n[t]}function FR(n){n[_p]=0}function LR(n){n[Dt]&1024||(n[Dt]|=1024,v6(n)&&s0(n))}function Tq(n,t){for(;n>0;)t=t[Pp],n--;return t}function Ob(n){return!!(n[Dt]&9216||n[Ds]?.dirty)}function fI(n){n[lc].changeDetectionScheduler?.notify(8),n[Dt]&64&&(n[Dt]|=1024),Ob(n)&&s0(n)}function s0(n){n[lc].changeDetectionScheduler?.notify(0);let t=oh(n);for(;t!==null&&!(t[Dt]&8192||(t[Dt]|=8192,!v6(t)));)t=oh(t)}function VR(n,t){if(o0(n))throw new Oe(911,!1);n[wl]===null&&(n[wl]=[]),n[wl].push(t)}function Aq(n,t){if(n[wl]===null)return;let e=n[wl].indexOf(t);e!==-1&&n[wl].splice(e,1)}function oh(n){let t=n[Fi];return pc(t)?t[Fi]:t}function _6(n){return n[cb]??=[]}function y6(n){return n.cleanup??=[]}function Dq(n,t,e,r){let i=_6(t);i.push(e),n.firstCreatePass&&y6(n).push(r,i.length-1)}var $t={lFrame:GR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pI=!1;function Pq(){return $t.lFrame.elementDepthCount}function Mq(){$t.lFrame.elementDepthCount++}function kq(){$t.lFrame.elementDepthCount--}function BR(){return $t.bindingsEnabled}function Oq(){return $t.skipHydrationRootTNode!==null}function Rq(n){return $t.skipHydrationRootTNode===n}function Nq(){$t.skipHydrationRootTNode=null}function Rt(){return $t.lFrame.lView}function Yr(){return $t.lFrame.tView}function De(n){return $t.lFrame.contextLView=n,n[Kr]}function Pe(n){return $t.lFrame.contextLView=null,n}function oo(){let n=UR();for(;n!==null&&n.type===64;)n=n.parent;return n}function UR(){return $t.lFrame.currentTNode}function Fq(){let n=$t.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function a0(n,t){let e=$t.lFrame;e.currentTNode=n,e.isParent=t}function jR(){return $t.lFrame.isParent}function Lq(){$t.lFrame.isParent=!1}function Vq(){return $t.lFrame.contextLView}function zR(){return pI}function S4(n){let t=pI;return pI=n,t}function kp(){let n=$t.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function WR(){return $t.lFrame.bindingIndex}function Bq(n){return $t.lFrame.bindingIndex=n}function Op(){return $t.lFrame.bindingIndex++}function Rb(n){let t=$t.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function Uq(){return $t.lFrame.inI18n}function jq(n,t){let e=$t.lFrame;e.bindingIndex=e.bindingRootIndex=n,mI(t)}function zq(){return $t.lFrame.currentDirectiveIndex}function mI(n){$t.lFrame.currentDirectiveIndex=n}function Wq(n){let t=$t.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function HR(){return $t.lFrame.currentQueryIndex}function b6(n){$t.lFrame.currentQueryIndex=n}function Hq(n){let t=n[Ot];return t.type===2?t.declTNode:t.type===1?n[_a]:null}function $R(n,t,e){if(e&qt.SkipSelf){let i=t,o=n;for(;i=i.parent,i===null&&!(e&qt.Host);)if(i=Hq(o),i===null||(o=o[Pp],i.type&10))break;if(i===null)return!1;t=i,n=o}let r=$t.lFrame=qR();return r.currentTNode=t,r.lView=n,!0}function w6(n){let t=qR(),e=n[Ot];$t.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function qR(){let n=$t.lFrame,t=n===null?null:n.child;return t===null?GR(n):t}function GR(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function KR(){let n=$t.lFrame;return $t.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var YR=KR;function C6(){let n=KR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $q(n){return($t.lFrame.contextLView=Tq(n,$t.lFrame.contextLView))[Kr]}function cu(){return $t.lFrame.selectedIndex}function sh(n){$t.lFrame.selectedIndex=n}function Nb(){let n=$t.lFrame;return m6(n.tView,n.selectedIndex)}function qq(){return $t.lFrame.currentNamespace}var ZR=!0;function x6(){return ZR}function E6(n){ZR=n}function Gq(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=kR(t);(e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s)}i&&(e.preOrderHooks??=[]).push(0-n,i),o&&((e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o))}function QR(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let o=n.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-e,s),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),u&&(n.viewHooks??=[]).push(-e,u),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),d!=null&&(n.destroyHooks??=[]).push(e,d)}}function Jy(n,t,e){XR(n,t,3,e)}function eb(n,t,e,r){(n[Dt]&3)===e&&XR(n,t,e,r)}function G2(n,t){let e=n[Dt];(e&3)===t&&(e&=16383,e+=1,n[Dt]=e)}function XR(n,t,e,r){let i=r!==void 0?n[_p]&65535:0,o=r??-1,s=t.length-1,a=0;for(let u=i;u<s;u++)if(typeof t[u+1]=="number"){if(a=t[u],r!=null&&a>=r)break}else t[u]<0&&(n[_p]+=65536),(a<o||o==-1)&&(Kq(n,e,t,u),n[_p]=(n[_p]&4294901760)+u+2),u++}function T4(n,t){On(4,n,t);let e=Ht(null);try{t.call(n)}finally{Ht(e),On(5,n,t)}}function Kq(n,t,e,r){let i=e[r]<0,o=e[r+1],s=i?-e[r]:e[r],a=n[s];i?n[Dt]>>14<n[_p]>>16&&(n[Dt]&3)===t&&(n[Dt]+=16384,T4(a,o)):T4(a,o)}var Cp=-1,ah=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r){this.factory=t,this.canSeeViewProviders=e,this.injectImpl=r}};function Yq(n){return(n.flags&8)!==0}function Zq(n){return(n.flags&16)!==0}function Qq(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let o=e[r++],s=e[r++],a=e[r++];n.setAttribute(t,s,a,o)}else{let o=i,s=e[++r];Xq(o)?n.setProperty(t,o,s):n.setAttribute(t,o,s),r++}}return r}function JR(n){return n===3||n===4||n===6}function Xq(n){return n.charCodeAt(0)===64}function Zg(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?A4(n,e,i,null,t[++r]):A4(n,e,i,null,null))}}return n}function A4(n,t,e,r,i){let o=0,s=n.length;if(t===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===e){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,t),o=s+1),n.splice(o++,0,e),i!==null&&n.splice(o++,0,i)}function eN(n){return n!==Cp}function fb(n){return n&32767}function Jq(n){return n>>16}function pb(n,t){let e=Jq(n),r=t;for(;e>0;)r=r[Pp],e--;return r}var gI=!0;function mb(n){let t=gI;return gI=n,t}var eG=256,tN=eG-1,nN=5,tG=0,nu={};function nG(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty($g)&&(r=e[$g]),r==null&&(r=e[$g]=tG++);let i=r&tN,o=1<<i;t.data[n+(i>>nN)]|=o}function gb(n,t){let e=rN(n,t);if(e!==-1)return e;let r=t[Ot];r.firstCreatePass&&(n.injectorIndex=t.length,K2(r.data,n),K2(t,null),K2(r.blueprint,null));let i=I6(n,t),o=n.injectorIndex;if(eN(i)){let s=fb(i),a=pb(i,t),u=a[Ot].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function K2(n,t){n.push(0,0,0,0,0,0,0,0,t)}function rN(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function I6(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=uN(i),r===null)return Cp;if(e++,i=i[Pp],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return Cp}function vI(n,t,e){nG(n,t,e)}function rG(n,t){if(t==="class")return n.classes;if(t==="style")return n.styles;let e=n.attrs;if(e){let r=e.length,i=0;for(;i<r;){let o=e[i];if(JR(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof e[i]=="string";)i++;else{if(o===t)return e[i+1];i=i+2}}}return null}function iN(n,t,e){if(e&qt.Optional||n!==void 0)return n;a6(t,"NodeInjector")}function oN(n,t,e,r){if(e&qt.Optional&&r===void 0&&(r=null),(e&(qt.Self|qt.Host))===0){let i=n[Ep],o=To(void 0);try{return i?i.get(t,r,e&qt.Optional):vR(t,r,e&qt.Optional)}finally{To(o)}}return iN(r,t,e)}function sN(n,t,e,r=qt.Default,i){if(n!==null){if(t[Dt]&2048&&!(r&qt.Self)){let s=aG(n,t,e,r,nu);if(s!==nu)return s}let o=aN(n,t,e,r,nu);if(o!==nu)return o}return oN(t,e,r,i)}function aN(n,t,e,r,i){let o=oG(e);if(typeof o=="function"){if(!$R(t,n,r))return r&qt.Host?iN(i,e,r):oN(t,e,r,i);try{let s;if(s=o(r),s==null&&!(r&qt.Optional))a6(e);else return s}finally{YR()}}else if(typeof o=="number"){let s=null,a=rN(n,t),u=Cp,c=r&qt.Host?t[va][_a]:null;for((a===-1||r&qt.SkipSelf)&&(u=a===-1?I6(n,t):t[a+8],u===Cp||!P4(r,!1)?a=-1:(s=t[Ot],a=fb(u),t=pb(u,t)));a!==-1;){let d=t[Ot];if(D4(o,a,d.data)){let h=iG(a,t,e,s,r,c);if(h!==nu)return h}u=t[a+8],u!==Cp&&P4(r,t[Ot].data[a+8]===c)&&D4(o,a,t)?(s=d,a=fb(u),t=pb(u,t)):a=-1}}return i}function iG(n,t,e,r,i,o){let s=t[Ot],a=s.data[n+8],u=r==null?Mp(a)&&gI:r!=s&&(a.type&3)!==0,c=i&qt.Host&&o===a,d=tb(a,s,e,u,c);return d!==null?Qg(t,s,d,a):nu}function tb(n,t,e,r,i){let o=n.providerIndexes,s=t.data,a=o&1048575,u=n.directiveStart,c=n.directiveEnd,d=o>>20,h=r?a:a+d,p=i?a+d:c;for(let m=h;m<p;m++){let _=s[m];if(m<u&&e===_||m>=u&&_.type===e)return m}if(i){let m=s[u];if(m&&ru(m)&&m.type===e)return u}return null}function Qg(n,t,e,r){let i=n[e],o=t.data;if(i instanceof ah){let s=i;s.resolving&&mR(K$(o[e]));let a=mb(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?To(s.injectImpl):null,d=$R(n,r,qt.Default);try{i=n[e]=s.factory(void 0,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&Gq(e,o[e],t)}finally{c!==null&&To(c),mb(a),s.resolving=!1,YR()}}return i}function oG(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty($g)?n[$g]:void 0;return typeof t=="number"?t>=0?t&tN:sG:t}function D4(n,t,e){let r=1<<n;return!!(e[t+(n>>nN)]&r)}function P4(n,t){return!(n&qt.Self)&&!(n&qt.Host&&t)}var Jd=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return sN(this._tNode,this._lView,t,Pb(r),e)}};function sG(){return new Jd(oo(),Rt())}function is(n){return r0(()=>{let t=n.prototype.constructor,e=t[ib]||_I(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ib]||_I(i);if(o&&o!==e)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _I(n){return lR(n)?()=>{let t=_I(io(n));return t&&t()}:eh(n)}function aG(n,t,e,r,i){let o=n,s=t;for(;o!==null&&s!==null&&s[Dt]&2048&&!hb(s);){let a=aN(o,s,e,r|qt.Self,nu);if(a!==nu)return a;let u=o.parent;if(!u){let c=s[AR];if(c){let d=c.get(e,nu,r);if(d!==nu)return d}u=uN(s),s=s[Pp]}o=u}return i}function uN(n){let t=n[Ot],e=t.type;return e===2?t.declTNode:e===1?n[_a]:null}function S6(n){return rG(oo(),n)}function M4(n,t=null,e=null,r){let i=cN(n,t,e,r);return i.resolveInjectorInitializers(),i}function cN(n,t=null,e=null,r,i=new Set){let o=[e||Ao,l6(n)];return r=r||(typeof n=="object"?void 0:Do(n)),new Gg(o,t||h6(),r||null,i)}var rr=class n{static THROW_IF_NOT_FOUND=Xd;static NULL=new ub;static create(t,e){if(Array.isArray(t))return M4({name:""},e,t,"");{let r=t.name??"";return M4({name:r},t.parent,t.providers,r)}}static \u0275prov=Ve({token:n,providedIn:"any",factory:()=>qe(bR)});static __NG_ELEMENT_ID__=-1};var uG=new $e("");uG.__NG_ELEMENT_ID__=n=>{let t=oo();if(t===null)throw new Oe(204,!1);if(t.type&2)return t.value;if(n&qt.Optional)return null;throw new Oe(204,!1)};var lN=!1,Rp=(()=>{class n{static __NG_ELEMENT_ID__=cG;static __NG_ENV_ID__=e=>e}return n})(),yI=class extends Rp{_lView;constructor(t){super(),this._lView=t}onDestroy(t){return VR(this._lView,t),()=>Aq(this._lView,t)}};function cG(){return new yI(Rt())}var uh=class{},T6=new $e("",{providedIn:"root",factory:()=>!1});var dN=new $e(""),hN=new $e(""),lu=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new vi(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fb=(()=>{class n{internalPendingTasks=Se(lu);scheduler=Se(uh);add(){let e=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(e)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(e))}}run(e){return se(this,null,function*(){let r=this.add();try{return yield e()}finally{r()}})}static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),bI=class extends Er{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,TR()&&(this.destroyRef=Se(Rp,{optional:!0})??void 0,this.pendingTasks=Se(lu,{optional:!0})??void 0)}emit(t){let e=Ht(null);try{super.next(t)}finally{Ht(e)}}subscribe(t,e,r){let i=t,o=e||(()=>null),s=r;if(t&&typeof t=="object"){let u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof fr&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},pr=bI;function vb(...n){}function fN(n){let t,e;function r(){n=vb;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function k4(n){return queueMicrotask(()=>n()),()=>{n=vb}}var A6="isAngularZone",_b=A6+"_ID",lG=0,tn=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pr(!1);onMicrotaskEmpty=new pr(!1);onStable=new pr(!1);onError=new pr(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lN}=t;if(typeof Zone>"u")throw new Oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fG(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(A6)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Oe(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,dG,vb,vb);try{return o.runTask(s,e,r)}finally{o.cancelTask(s)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},dG={};function D6(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){fN(()=>{n.callbackScheduled=!1,wI(n),n.isCheckStableRunning=!0,D6(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),wI(n)}function fG(n){let t=()=>{hG(n)},e=lG++;n._inner=n._inner.fork({name:"angular",properties:{[A6]:!0,[_b]:e,[_b+e]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(pG(u))return r.invokeTask(o,s,a,u);try{return O4(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),R4(n)}},onInvoke:(r,i,o,s,a,u,c)=>{try{return O4(n),r.invoke(o,s,a,u,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!mG(u)&&t(),R4(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,wI(n),D6(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function wI(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function O4(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function R4(n){n._nesting--,D6(n)}var CI=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pr;onMicrotaskEmpty=new pr;onStable=new pr;onError=new pr;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function pG(n){return pN(n,"__ignore_ng_zone__")}function mG(n){return pN(n,"__scheduler_tick__")}function pN(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var su=class{_console=console;handleError(t){this._console.error("ERROR",t)}},gG=new $e("",{providedIn:"root",factory:()=>{let n=Se(tn),t=Se(su);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function N4(n,t){return uR(n,t)}function vG(n){return uR(aR,n)}var mN=(N4.required=vG,N4);function _G(){return Np(oo(),Rt())}function Np(n,t){return new Vi(uu(n,t))}var Vi=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=_G}return n})();function yG(n){return n instanceof Vi?n.nativeElement:n}function bG(n){return typeof n=="function"&&n[As]!==void 0}function fh(n,t){let e=w2(n,t?.equal),r=e[As];return e.set=i=>Lg(r,i),e.update=i=>C2(r,i),e.asReadonly=wG.bind(e),e}function wG(){let n=this[As];if(n.readonlyFn===void 0){let t=()=>this();t[As]=n,n.readonlyFn=t}return n.readonlyFn}function gN(n){return bG(n)&&typeof n.set=="function"}function CG(){return this._results[Symbol.iterator]()}var xI=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Er}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let r=oq(t);(this._changesDetected=!iq(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=CG};function vN(n){return(n.flags&128)===128}var _N=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(_N||{}),yN=new Map,xG=0;function EG(){return xG++}function IG(n){yN.set(n[kb],n)}function EI(n){yN.delete(n[kb])}var F4="__ngContext__";function u0(n,t){Cl(t)?(n[F4]=t[kb],IG(t)):n[F4]=t}function bN(n){return CN(n[Yg])}function wN(n){return CN(n[ga])}function CN(n){for(;n!==null&&!pc(n);)n=n[ga];return n}var II;function xN(n){II=n}function SG(){if(II!==void 0)return II;if(typeof document<"u")return document;throw new Oe(210,!1)}var P6=new $e("",{providedIn:"root",factory:()=>TG}),TG="ng",M6=new $e(""),du=new $e("",{providedIn:"platform",factory:()=>"unknown"});var k6=new $e(""),O6=new $e("",{providedIn:"root",factory:()=>SG().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var AG="h",DG="b";var EN=!1,PG=new $e("",{providedIn:"root",factory:()=>EN});var R6=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(R6||{}),Fp=new $e(""),L4=new Set;function hu(n){L4.has(n)||(L4.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var IN=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=MG}return n})();function MG(){return new IN(Rt(),oo())}var yp=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(yp||{}),SN=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),kG=[yp.EarlyRead,yp.Write,yp.MixedReadWrite,yp.Read],OG=(()=>{class n{ngZone=Se(tn);scheduler=Se(uh);errorHandler=Se(su,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Se(Fp,{optional:!0})}execute(){let e=this.sequences.size>0;e&&On(16),this.executing=!0;for(let r of kG)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&On(17)}register(e){let{view:r}=e;r!==void 0?((r[wp]??=[]).push(e),s0(r),r[Dt]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(R6.AFTER_NEXT_RENDER,e):e()}static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new n})}return n})(),SI=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,o,s=null){this.impl=t,this.hooks=e,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[wp];t&&(this.view[wp]=t.filter(e=>e!==this))}};function N6(n,t){!t?.injector&&f6(N6);let e=t?.injector??Se(rr);return hu("NgAfterNextRender"),NG(n,e,t,!0)}function RG(n,t){if(n instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[t]=n,e}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function NG(n,t,e,r){let i=t.get(SN);i.impl??=t.get(OG);let o=t.get(Fp,null,{optional:!0}),s=e?.phase??yp.MixedReadWrite,a=e?.manualCleanup!==!0?t.get(Rp):null,u=t.get(IN,null,{optional:!0}),c=new SI(i.impl,RG(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(c),c}var FG=()=>null;function TN(n,t,e=!1){return FG(n,t,e)}function AN(n,t){let e=n.contentQueries;if(e!==null){let r=Ht(null);try{for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];if(s!==-1){let a=n.data[s];b6(o),a.contentQueries(2,t[s],s)}}}finally{Ht(r)}}}function TI(n,t,e){b6(0);let r=Ht(null);try{t(n,e)}finally{Ht(r)}}function DN(n,t,e){if(PR(t)){let r=Ht(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=e[s];a.contentQueries(1,u,s)}}}finally{Ht(r)}}}var au=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(au||{});var Zy;function LG(){if(Zy===void 0&&(Zy=null,Qd.trustedTypes))try{Zy=Qd.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zy}function V4(n){return LG()?.createScriptURL(n)||n}var yb=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${oR})`}};function c0(n){return n instanceof yb?n.changingThisBreaksApplicationSecurity:n}function PN(n,t){let e=VG(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${oR})`)}return e===t}function VG(n){return n instanceof yb&&n.getTypeName()||null}var BG=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UG(n){return n=String(n),n.match(BG)?n:"unsafe:"+n}var F6=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(F6||{});function It(n){let t=kN();return t?t.sanitize(F6.URL,n)||"":PN(n,"URL")?c0(n):UG(cc(n))}function jG(n){let t=kN();if(t)return V4(t.sanitize(F6.RESOURCE_URL,n)||"");if(PN(n,"ResourceURL"))return V4(c0(n));throw new Oe(904,!1)}function zG(n,t){return t==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||t==="href"&&(n==="base"||n==="link")?jG:It}function MN(n,t,e){return zG(t,e)(n)}function kN(){let n=Rt();return n&&n[lc].sanitizer}function ON(n){return n.ownerDocument.defaultView}function RN(n){return n instanceof Function?n():n}function WG(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}e=i+1}}var NN="ng-template";function HG(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&WG(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(L6(n))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===e)return!0}return!1}function L6(n){return n.type===4&&n.value!==NN}function $G(n,t,e){let r=n.type===4&&!e?NN:n.value;return t===r}function qG(n,t,e){let r=4,i=n.attrs,o=i!==null?YG(i):0,s=!1;for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="number"){if(!s&&!pa(r)&&!pa(u))return!1;if(s&&pa(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!$G(n,u,e)||u===""&&t.length===1){if(pa(r))return!1;s=!0}}else if(r&8){if(i===null||!HG(n,i,u,e)){if(pa(r))return!1;s=!0}}else{let c=t[++a],d=GG(u,i,L6(n),e);if(d===-1){if(pa(r))return!1;s=!0;continue}if(c!==""){let h;if(d>o?h="":h=i[d+1].toLowerCase(),r&2&&c!==h){if(pa(r))return!1;s=!0}}}}return pa(r)||s}function pa(n){return(n&1)===0}function GG(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let o=!1;for(;i<t.length;){let s=t[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ZG(t,n)}function KG(n,t,e=!1){for(let r=0;r<t.length;r++)if(qG(n,t[r],e))return!0;return!1}function YG(n){for(let t=0;t<n.length;t++){let e=n[t];if(JR(e))return t}return n.length}function ZG(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function B4(n,t){return n?":not("+t.trim()+")":t}function QG(n){let t=n[0],e=1,r=2,i="",o=!1;for(;e<n.length;){let s=n[e];if(typeof s=="string")if(r&2){let a=n[++e];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!pa(s)&&(t+=B4(o,i),i=""),r=s,o=o||!pa(r);e++}return i!==""&&(t+=B4(o,i)),t}function XG(n){return n.map(QG).join(",")}function JG(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&t.push(o,n[++r]):i===8&&e.push(o);else{if(!pa(i))break;i=o}r++}return e.length&&t.push(1,...e),t}var Bi={};function eK(n,t){return n.createText(t)}function tK(n,t,e){n.setValue(t,e)}function FN(n,t,e){return n.createElement(t,e)}function bb(n,t,e,r,i){n.insertBefore(t,e,r,i)}function LN(n,t,e){n.appendChild(t,e)}function U4(n,t,e,r,i){r!==null?bb(n,t,e,r,i):LN(n,t,e)}function nK(n,t,e){n.removeChild(null,t,e)}function rK(n,t,e){n.setAttribute(t,"style",e)}function iK(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function VN(n,t,e){let{mergedAttrs:r,classes:i,styles:o}=e;r!==null&&Qq(n,t,r),i!==null&&iK(n,t,i),o!==null&&rK(n,t,o)}function V6(n,t,e,r,i,o,s,a,u,c,d){let h=Li+r,p=h+i,m=oK(h,p),_=typeof c=="function"?c():c;return m[Ot]={type:n,blueprint:m,template:e,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}function oK(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:Bi);return e}function sK(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=V6(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function B6(n,t,e,r,i,o,s,a,u,c,d){let h=t.blueprint.slice();return h[fc]=i,h[Dt]=r|4|128|8|64|1024,(c!==null||n&&n[Dt]&2048)&&(h[Dt]|=2048),FR(h),h[Fi]=h[Pp]=n,h[Kr]=e,h[lc]=s||n&&n[lc],h[Sr]=a||n&&n[Sr],h[Ep]=u||n&&n[Ep]||null,h[_a]=o,h[kb]=EG(),h[Kg]=d,h[AR]=c,h[va]=t.type==2?n[va]:h,h}function aK(n,t,e){let r=uu(t,n),i=sK(e),o=n[lc].rendererFactory,s=U6(n,B6(n,i,null,BN(e),r,t,null,o.createRenderer(r,e),null,null,null));return n[t.index]=s}function BN(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function UN(n,t,e,r){if(e===0)return-1;let i=t.length;for(let o=0;o<e;o++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function U6(n,t){return n[Yg]?n[E4][ga]=t:n[Yg]=t,n[E4]=t,t}function W(n=1){jN(Yr(),Rt(),cu()+n,!1)}function jN(n,t,e,r){if(!r)if((t[Dt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jy(t,o,e)}else{let o=n.preOrderHooks;o!==null&&eb(t,o,0,e)}sh(e)}var Lb=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Lb||{});function AI(n,t,e,r){let i=Ht(null);try{let[o,s,a]=n.inputs[e],u=null;(s&Lb.SignalBased)!==0&&(u=t[o][As]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,u,r,e,o):MR(t,u,o,r)}finally{Ht(i)}}function zN(n,t,e,r,i){let o=cu(),s=r&2;try{sh(-1),s&&t.length>Li&&jN(n,t,Li,!1),On(s?2:0,i),e(r,i)}finally{sh(o),On(s?3:1,i)}}function j6(n,t,e){fK(n,t,e),(e.flags&64)===64&&pK(n,t,e)}function WN(n,t,e=uu){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?e(t,n):n[s];n[i++]=a}}}function uK(n,t,e,r){let o=r.get(PG,EN)||e===au.ShadowDom,s=n.selectRootElement(t,o);return cK(s),s}function cK(n){lK(n)}var lK=()=>null;function dK(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function z6(n,t,e,r,i,o,s,a){if(!a&&W6(t,n,e,r,i)){Mp(t)&&hK(e,t.index);return}if(t.type&3){let u=uu(t,e);r=dK(r),i=s!=null?s(i,t.value||"",r):i,o.setProperty(u,r,i)}else t.type&12}function hK(n,t){let e=ou(t,n);e[Dt]&16||(e[Dt]|=64)}function fK(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Mp(e)&&aK(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||gb(e,t);let o=e.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Qg(t,n,s,e);if(u0(u,t),o!==null&&_K(t,s-r,u,a,e,o),ru(a)){let c=ou(e.index,t);c[Kr]=Qg(t,n,s,e)}}}function pK(n,t,e){let r=e.directiveStart,i=e.directiveEnd,o=e.index,s=zq();try{sh(o);for(let a=r;a<i;a++){let u=n.data[a],c=t[a];mI(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&mK(u,c)}}finally{sh(-1),mI(s)}}function mK(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function HN(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let o=e[i];KG(t,o.selectors,!1)&&(r??=[],ru(o)?r.unshift(o):r.push(o))}return r}function gK(n,t,e,r,i,o){let s=uu(n,t);vK(t[Sr],s,o,n.value,e,r,i)}function vK(n,t,e,r,i,o,s){if(o==null)n.removeAttribute(t,i,e);else{let a=s==null?cc(o):s(o,r||"",i);n.setAttribute(t,i,a,e)}}function _K(n,t,e,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],c=s[a+1];AI(r,e,u,c)}}function yK(n,t){let e=n[Ep],r=e?e.get(su,null):null;r&&r.handleError(t)}function W6(n,t,e,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let c=s[u],d=s[u+1],h=t.data[c];AI(h,e[c],d,i),a=!0}if(o)for(let u of o){let c=e[u],d=t.data[u];AI(d,c,r,i),a=!0}return a}function bK(n,t){let e=ou(t,n),r=e[Ot];wK(r,e);let i=e[fc];i!==null&&e[Kg]===null&&(e[Kg]=TN(i,e[Ep])),On(18),H6(r,e,e[Kr]),On(19,e[Kr])}function wK(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function H6(n,t,e){w6(t);try{let r=n.viewQuery;r!==null&&TI(1,r,e);let i=n.template;i!==null&&zN(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[dc]?.finishViewCreation(n),n.staticContentQueries&&AN(n,t),n.staticViewQueries&&TI(2,n.viewQuery,e);let o=n.components;o!==null&&CK(t,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[Dt]&=-5,C6()}}function CK(n,t){for(let e=0;e<t.length;e++)bK(n,t[e])}function Vb(n,t,e,r){let i=Ht(null);try{let o=t.tView,a=n[Dt]&4096?4096:16,u=B6(n,o,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];u[rh]=c;let d=n[dc];return d!==null&&(u[dc]=d.createEmbeddedView(o)),H6(o,u,e),u}finally{Ht(i)}}function Xg(n,t){return!t||t.firstChild===null||vN(n)}var xK;function $6(n,t){return xK(n,t)}var hc=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(hc||{});function $N(n){return(n.flags&32)===32}function bp(n,t,e,r,i){if(r!=null){let o,s=!1;pc(r)?o=r:Cl(r)&&(s=!0,r=r[fc]);let a=iu(r);n===0&&e!==null?i==null?LN(t,e,a):bb(t,e,a,i||null,!0):n===1&&e!==null?bb(t,e,a,i||null,!0):n===2?nK(t,a,s):n===3&&t.destroyNode(a),o!=null&&NK(t,n,o,e,i)}}function EK(n,t){qN(n,t),t[fc]=null,t[_a]=null}function IK(n,t,e,r,i,o){r[fc]=i,r[_a]=t,Ub(n,r,e,1,i,o)}function qN(n,t){t[lc].changeDetectionScheduler?.notify(9),Ub(n,t,t[Sr],2,null,null)}function SK(n){let t=n[Yg];if(!t)return Y2(n[Ot],n);for(;t;){let e=null;if(Cl(t))e=t[Yg];else{let r=t[Ni];r&&(e=r)}if(!e){for(;t&&!t[ga]&&t!==n;)Cl(t)&&Y2(t[Ot],t),t=t[Fi];t===null&&(t=n),Cl(t)&&Y2(t[Ot],t),e=t&&t[ga]}t=e}}function q6(n,t){let e=n[Ip],r=e.indexOf(t);e.splice(r,1)}function Bb(n,t){if(o0(t))return;let e=t[Sr];e.destroyNode&&Ub(n,t,e,3,null,null),SK(t)}function Y2(n,t){if(o0(t))return;let e=Ht(null);try{t[Dt]&=-129,t[Dt]|=256,t[Ds]&&_2(t[Ds]),AK(n,t),TK(n,t),t[Ot].type===1&&t[Sr].destroy();let r=t[rh];if(r!==null&&pc(t[Fi])){r!==t[Fi]&&q6(r,t);let i=t[dc];i!==null&&i.detachView(n)}EI(t)}finally{Ht(e)}}function TK(n,t){let e=n.cleanup,r=t[cb];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[e[s+1]];e[s].call(a)}r!==null&&(t[cb]=null);let i=t[wl];if(i!==null){t[wl]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[lb];if(o!==null){t[lb]=null;for(let s of o)s.destroy()}}function AK(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof ah)){let o=e[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];On(4,a,u);try{u.call(a)}finally{On(5,a,u)}}else{On(4,i,o);try{o.call(i)}finally{On(5,i,o)}}}}}function DK(n,t,e){return PK(n,t.parent,e)}function PK(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[fc];if(Mp(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===au.None||i===au.Emulated)return null}return uu(r,e)}function MK(n,t,e){return OK(n,t,e)}function kK(n,t,e){return n.type&40?uu(n,e):null}var OK=kK,j4;function G6(n,t,e,r){let i=DK(n,r,t),o=t[Sr],s=r.parent||t[_a],a=MK(s,r,t);if(i!=null)if(Array.isArray(e))for(let u=0;u<e.length;u++)U4(o,i,e[u],a,!1);else U4(o,i,e,a,!1);j4!==void 0&&j4(o,r,t,e,i)}function Hg(n,t){if(t!==null){let e=t.type;if(e&3)return uu(t,n);if(e&4)return DI(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Hg(n,r);{let i=n[t.index];return pc(i)?DI(-1,i):iu(i)}}else{if(e&128)return Hg(n,t.next);if(e&32)return $6(t,n)()||iu(n[t.index]);{let r=GN(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=oh(n[va]);return Hg(i,r)}else return Hg(n,t.next)}}}return null}function GN(n,t){if(t!==null){let r=n[va][_a],i=t.projection;return r.projection[i]}return null}function DI(n,t){let e=Ni+n+1;if(e<t.length){let r=t[e],i=r[Ot].firstChild;if(i!==null)return Hg(r,i)}return t[ih]}function K6(n,t,e,r,i,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],u=e.type;if(s&&t===0&&(a&&u0(iu(a),r),e.flags|=2),!$N(e))if(u&8)K6(n,t,e.child,r,i,o,!1),bp(t,n,i,a,o);else if(u&32){let c=$6(e,r),d;for(;d=c();)bp(t,n,i,d,o);bp(t,n,i,a,o)}else u&16?RK(n,t,r,e,i,o):bp(t,n,i,a,o);e=s?e.projectionNext:e.next}}function Ub(n,t,e,r,i,o){K6(e,r,n.firstChild,t,i,o,!1)}function RK(n,t,e,r,i,o){let s=e[va],u=s[_a].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let d=u[c];bp(t,n,i,d,o)}else{let c=u,d=s[Fi];vN(r)&&(c.flags|=128),K6(n,t,c,d,i,o,!0)}}function NK(n,t,e,r,i){let o=e[ih],s=iu(e);o!==s&&bp(t,n,r,o,i);for(let a=Ni;a<e.length;a++){let u=e[a];Ub(u[Ot],u,n,t,r,o)}}function FK(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let o=r.indexOf("-")===-1?void 0:hc.DashCase;i==null?n.removeStyle(e,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=hc.Important),n.setStyle(e,r,i,o))}}function wb(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let o=t[e.index];o!==null&&r.push(iu(o)),pc(o)&&LK(o,r);let s=e.type;if(s&8)wb(n,t,e.child,r);else if(s&32){let a=$6(e,t),u;for(;u=a();)r.push(u)}else if(s&16){let a=GN(t,e);if(Array.isArray(a))r.push(...a);else{let u=oh(t[va]);wb(u[Ot],u,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function LK(n,t){for(let e=Ni;e<n.length;e++){let r=n[e],i=r[Ot].firstChild;i!==null&&wb(r[Ot],r,i,t)}n[ih]!==n[fc]&&t.push(n[ih])}function KN(n){if(n[wp]!==null){for(let t of n[wp])t.impl.addSequence(t);n[wp].length=0}}var YN=[];function VK(n){return n[Ds]??BK(n)}function BK(n){let t=YN.pop()??Object.create(jK);return t.lView=n,t}function UK(n){n.lView[Ds]!==n&&(n.lView=null,YN.push(n))}var jK=bt(Ie({},Ng),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{s0(n.lView)},consumerOnSignalRead(){this.lView[Ds]=this}});function zK(n){let t=n[Ds]??Object.create(WK);return t.lView=n,t}var WK=bt(Ie({},Ng),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=oh(n.lView);for(;t&&!ZN(t[Ot]);)t=oh(t);t&&LR(t)},consumerOnSignalRead(){this.lView[Ds]=this}});function ZN(n){return n.type!==2}function QN(n){if(n[lb]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[lb])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[Dt]&8192)}}var HK=100;function XN(n,t=!0,e=0){let i=n[lc].rendererFactory,o=!1;o||i.begin?.();try{$K(n,e)}catch(s){throw t&&yK(n,s),s}finally{o||i.end?.()}}function $K(n,t){let e=zR();try{S4(!0),PI(n,t);let r=0;for(;Ob(n);){if(r===HK)throw new Oe(103,!1);r++,PI(n,1)}}finally{S4(e)}}function qK(n,t,e,r){if(o0(t))return;let i=t[Dt],o=!1,s=!1;w6(t);let a=!0,u=null,c=null;o||(ZN(n)?(c=VK(t),u=by(c)):h2()===null?(a=!1,c=zK(t),u=by(c)):t[Ds]&&(_2(t[Ds]),t[Ds]=null));try{FR(t),Bq(n.bindingStartIndex),e!==null&&zN(n,t,e,2,r);let d=(i&3)===3;if(!o)if(d){let m=n.preOrderCheckHooks;m!==null&&Jy(t,m,null)}else{let m=n.preOrderHooks;m!==null&&eb(t,m,0,null),G2(t,0)}if(s||GK(t),QN(t),JN(t,0),n.contentQueries!==null&&AN(n,t),!o)if(d){let m=n.contentCheckHooks;m!==null&&Jy(t,m)}else{let m=n.contentHooks;m!==null&&eb(t,m,1),G2(t,1)}YK(n,t);let h=n.components;h!==null&&t3(t,h,0);let p=n.viewQuery;if(p!==null&&TI(2,p,r),!o)if(d){let m=n.viewCheckHooks;m!==null&&Jy(t,m)}else{let m=n.viewHooks;m!==null&&eb(t,m,2),G2(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[q2]){for(let m of t[q2])m();t[q2]=null}o||(KN(t),t[Dt]&=-73)}catch(d){throw o||s0(t),d}finally{c!==null&&(g2(c,u),a&&UK(c)),C6()}}function JN(n,t){for(let e=bN(n);e!==null;e=wN(e))for(let r=Ni;r<e.length;r++){let i=e[r];e3(i,t)}}function GK(n){for(let t=bN(n);t!==null;t=wN(t)){if(!(t[Dt]&2))continue;let e=t[Ip];for(let r=0;r<e.length;r++){let i=e[r];LR(i)}}}function KK(n,t,e){On(18);let r=ou(t,n);e3(r,e),On(19,r[Kr])}function e3(n,t){v6(n)&&PI(n,t)}function PI(n,t){let r=n[Ot],i=n[Dt],o=n[Ds],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&v2(o)),s||=!1,o&&(o.dirty=!1),n[Dt]&=-9217,s)qK(r,n,r.template,n[Kr]);else if(i&8192){QN(n),JN(n,1);let a=r.components;a!==null&&t3(n,a,1),KN(n)}}function t3(n,t,e){for(let r=0;r<t.length;r++)KK(n,t[r],e)}function YK(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)sh(~i);else{let o=i,s=e[++r],a=e[++r];jq(s,o);let u=t[o];On(24,u),a(2,u),On(25,u)}}}finally{sh(-1)}}function Y6(n,t){let e=zR()?64:1088;for(n[lc].changeDetectionScheduler?.notify(t);n;){n[Dt]|=e;let r=oh(n);if(hb(n)&&!r)return n;n=r}return null}function n3(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function r3(n,t){let e=Ni+t;if(e<n.length)return n[e]}function jb(n,t,e,r=!0){let i=t[Ot];if(ZK(i,t,n,e),r){let s=DI(e,n),a=t[Sr],u=a.parentNode(n[ih]);u!==null&&IK(i,n[_a],a,t,u,s)}let o=t[Kg];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function i3(n,t){let e=Jg(n,t);return e!==void 0&&Bb(e[Ot],e),e}function Jg(n,t){if(n.length<=Ni)return;let e=Ni+t,r=n[e];if(r){let i=r[rh];i!==null&&i!==n&&q6(i,r),t>0&&(n[e-1][ga]=r[ga]);let o=ab(n,Ni+t);EK(r[Ot],r);let s=o[dc];s!==null&&s.detachView(o[Ot]),r[Fi]=null,r[ga]=null,r[Dt]&=-129}return r}function ZK(n,t,e,r){let i=Ni+r,o=e.length;r>0&&(e[i-1][ga]=t),r<o-Ni?(t[ga]=e[i],yR(e,Ni+r,t)):(e.push(t),t[ga]=null),t[Fi]=e;let s=t[rh];s!==null&&e!==s&&o3(s,t);let a=t[dc];a!==null&&a.insertView(n),fI(t),t[Dt]|=128}function o3(n,t){let e=n[Ip],r=t[Fi];if(Cl(r))n[Dt]|=2;else{let i=r[Fi][va];t[va]!==i&&(n[Dt]|=2)}e===null?n[Ip]=[t]:e.push(t)}var e0=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let t=this._lView,e=t[Ot];return wb(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r}get context(){return this._lView[Kr]}set context(t){this._lView[Kr]=t}get destroyed(){return o0(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Fi];if(pc(t)){let e=t[db],r=e?e.indexOf(this):-1;r>-1&&(Jg(t,r),ab(e,r))}this._attachedToViewContainer=!1}Bb(this._lView[Ot],this._lView)}onDestroy(t){VR(this._lView,t)}markForCheck(){Y6(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Dt]&=-129}reattach(){fI(this._lView),this._lView[Dt]|=128}detectChanges(){this._lView[Dt]|=1024,XN(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=hb(this._lView),e=this._lView[rh];e!==null&&!t&&q6(e,this._lView),qN(this._lView[Ot],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Oe(902,!1);this._appRef=t;let e=hb(this._lView),r=this._lView[rh];r!==null&&!e&&o3(r,this._lView),fI(this._lView)}};var ch=(()=>{class n{static __NG_ELEMENT_ID__=JK}return n})(),QK=ch,XK=class extends QK{_declarationLView;_declarationTContainer;elementRef;constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=Vb(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new e0(i)}};function JK(){return Z6(oo(),Rt())}function Z6(n,t){return n.type&4?new XK(t,n,Np(n,t)):null}function Q6(n,t,e,r,i){let o=n.data[t];if(o===null)o=eY(n,t,e,r,i),Uq()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=r,o.attrs=i;let s=Fq();o.injectorIndex=s===null?-1:s.injectorIndex}return a0(o,!0),o}function eY(n,t,e,r,i){let o=UR(),s=jR(),a=s?o:o&&o.parent,u=n.data[t]=nY(n,a,e,t,r,i);return tY(n,u,o,s),u}function tY(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function nY(n,t,e,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Oq()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var kxe=new RegExp(`^(\\d+)*(${DG}|${AG})*(.*)`);var rY=()=>null;function t0(n,t){return rY(n,t)}var iY=class{},s3=class{},MI=class{resolveComponentFactory(t){throw Error(`No component factory found for ${Do(t)}.`)}},zb=class{static NULL=new MI},xl=class{},Ms=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>oY()}return n})();function oY(){let n=Rt(),t=oo(),e=ou(t.index,n);return(Cl(e)?e:n)[Sr]}var sY=(()=>{class n{static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>null})}return n})();var Z2={},kI=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Pb(r);let i=this.injector.get(t,Z2,r);return i!==Z2||e===Z2?i:this.parentInjector.get(t,e,r)}};function z4(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=oI(i,a);else if(o==2){let u=a,c=t[++s];r=oI(r,u+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function me(n,t=qt.Default){let e=Rt();if(e===null)return qe(n,t);let r=oo();return sN(r,e,io(n),t)}function a3(){let n="invalid";throw new Error(n)}function u3(n,t,e,r,i){let o=r===null?null:{"":-1},s=i(n,e);if(s!==null){let a,u=null,c=null,d=uY(s);d===null?a=s:[a,u,c]=d,dY(n,t,e,a,o,u,c)}o!==null&&r!==null&&aY(e,r,o)}function aY(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let o=e[t[i+1]];if(o==null)throw new Oe(-301,!1);r.push(t[i],o)}}function uY(n){let t=null,e=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&ru(a)&&(t=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,cY(s,r,o,i)),s===t&&(r??=[],r.push(s));return r!==null?(r.push(...t===null?n:n.slice(1)),[r,i,o]):null}function cY(n,t,e,r){let i=t.length;n.findHostDirectiveDefs(n,t,r),e.set(n,[i,t.length-1])}function lY(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function dY(n,t,e,r,i,o,s){let a=r.length,u=!1;for(let p=0;p<a;p++){let m=r[p];!u&&ru(m)&&(u=!0,lY(n,e,p)),vI(gb(e,t),n,m.type)}vY(e,n.data.length,a);for(let p=0;p<a;p++){let m=r[p];m.providersResolver&&m.providersResolver(m)}let c=!1,d=!1,h=UN(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let m=r[p];if(e.mergedAttrs=Zg(e.mergedAttrs,m.hostAttrs),fY(n,e,t,h,m),gY(h,m,i),s!==null&&s.has(m)){let[C,x]=s.get(m);e.directiveToIndex.set(m.type,[h,C+e.directiveStart,x+e.directiveStart])}else(o===null||!o.has(m))&&e.directiveToIndex.set(m.type,h);m.contentQueries!==null&&(e.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(e.flags|=64);let _=m.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!d&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),d=!0),h++}hY(n,e,o)}function hY(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))W4(0,t,i,r),W4(1,t,i,r),$4(t,r,!1);else{let o=e.get(i);H4(0,t,o,r),H4(1,t,o,r),$4(t,r,!0)}}}function W4(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),c3(t,o)}}function H4(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),c3(t,s)}}function c3(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function $4(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!e&&i===null||e&&o===null||L6(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!e&&i.hasOwnProperty(u)){let c=i[u];for(let d of c)if(d===t){s??=[],s.push(u,r[a+1]);break}}else if(e&&o.hasOwnProperty(u)){let c=o[u];for(let d=0;d<c.length;d+=2)if(c[d]===t){s??=[],s.push(c[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function fY(n,t,e,r,i){n.data[r]=i;let o=i.factory||(i.factory=eh(i.type,!0)),s=new ah(o,ru(i),me);n.blueprint[r]=s,e[r]=s,pY(n,t,r,UN(n,e,i.hostVars,Bi),i)}function pY(n,t,e,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~t.index;mY(s)!=a&&s.push(a),s.push(e,r,o)}}function mY(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function gY(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;ru(t)&&(e[""]=n)}}function vY(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function l3(n,t,e,r,i,o,s,a){let u=t.consts,c=Sp(u,s),d=Q6(t,n,2,r,c);return o&&u3(t,e,d,Sp(u,a),i),d.mergedAttrs=Zg(d.mergedAttrs,d.attrs),d.attrs!==null&&z4(d,d.attrs,!1),d.mergedAttrs!==null&&z4(d,d.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,d),d}function d3(n,t){QR(n,t),PR(t)&&n.queries.elementEnd(t)}var Cb=class extends zb{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=nh(t);return new Tp(e,this.ngModule)}};function _Y(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],o={propName:e,templateName:t,isSignal:(r&Lb.SignalBased)!==0};return i&&(o.transform=i),o})}function yY(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function bY(n,t,e){let r=t instanceof ni?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new kI(e,r):e}function wY(n){let t=n.get(xl,null);if(t===null)throw new Oe(407,!1);let e=n.get(sY,null),r=n.get(uh,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r}}function CY(n,t){let e=(n.selectors[0][0]||"div").toLowerCase();return FN(t,e,e==="svg"?xq:e==="math"?Eq:null)}var Tp=class extends s3{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=_Y(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yY(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=XG(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i){On(22);let o=Ht(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:JG(this.componentDef.selectors[0]),u=V6(0,null,null,1,0,null,null,null,null,[a],null),c=bY(s,i||this.ngModule,t),d=wY(c),h=d.rendererFactory.createRenderer(null,s),p=r?uK(h,r,s.encapsulation,c):CY(s,h),m=B6(null,u,null,512|BN(s),null,null,d,h,c,null,TN(p,c,!0));m[Li]=p,w6(m);let _=null;try{let C=l3(Li,u,m,"#host",()=>[this.componentDef],!0,0);p&&(VN(h,p,C),u0(p,m)),j6(u,m,C),DN(u,C,m),d3(u,C),e!==void 0&&xY(C,this.ngContentSelectors,e),_=ou(C.index,m),m[Kr]=_[Kr],H6(u,m,null)}catch(C){throw _!==null&&EI(_),EI(m),C}finally{On(23),C6()}return new OI(this.componentType,m)}finally{Ht(o)}}},OI=class extends iY{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e){super(),this._rootLView=e,this._tNode=m6(e[Ot],Li),this.location=Np(this._tNode,e),this.instance=ou(this._tNode.index,e)[Kr],this.hostView=this.changeDetectorRef=new e0(e,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,o=W6(r,i[Ot],i,t,e);this.previousInputValues.set(t,e);let s=ou(r.index,i);Y6(s,1)}get injector(){return new Jd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function xY(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let o=e[i];r.push(o!=null&&o.length?Array.from(o):null)}}var El=(()=>{class n{static __NG_ELEMENT_ID__=EY}return n})();function EY(){let n=oo();return f3(n,Rt())}var IY=El,h3=class extends IY{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Np(this._hostTNode,this._hostLView)}get injector(){return new Jd(this._hostTNode,this._hostLView)}get parentInjector(){let t=I6(this._hostTNode,this._hostLView);if(eN(t)){let e=pb(t,this._hostLView),r=fb(t),i=e[Ot].data[r+8];return new Jd(i,e)}else return new Jd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=q4(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Ni}createEmbeddedView(t,e,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=t0(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,i,Xg(this._hostTNode,s)),a}createComponent(t,e,r,i,o){let s=t&&!yq(t),a;if(s)a=e;else{let _=e||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?t:new Tp(nh(t)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let C=(s?c:this.parentInjector).get(ni,null);C&&(o=C)}let d=nh(u.componentType??{}),h=t0(this._lContainer,d?.id??null),p=h?.firstChild??null,m=u.create(c,i,p,o);return this.insertImpl(m.hostView,a,Xg(this._hostTNode,h)),m}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(Sq(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let u=i[Fi],c=new h3(u,u[_a],u[Fi]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return jb(s,i,o,r),t.attachToViewContainerRef(),yR(Q2(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=q4(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Jg(this._lContainer,e);r&&(ab(Q2(this._lContainer),e),Bb(r[Ot],r))}detach(t){let e=this._adjustIndex(t,-1),r=Jg(this._lContainer,e);return r&&ab(Q2(this._lContainer),e)!=null?new e0(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function q4(n){return n[db]}function Q2(n){return n[db]||(n[db]=[])}function f3(n,t){let e,r=t[n.index];return pc(r)?e=r:(e=n3(r,t,null,n),t[n.index]=e,U6(t,e)),TY(e,t,n,r),new h3(e,n,t)}function SY(n,t){let e=n[Sr],r=e.createComment(""),i=uu(t,n),o=e.parentNode(i);return bb(e,o,r,e.nextSibling(i),!1),r}var TY=PY,AY=()=>!1;function DY(n,t,e){return AY(n,t,e)}function PY(n,t,e,r){if(n[ih])return;let i;e.type&8?i=iu(r):i=SY(t,e),n[ih]=i}var RI=class n{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},NI=class n{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let r=t.contentQueries!==null?t.contentQueries[0]:e.length,i=[];for(let o=0;o<r;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)X6(t,e).matches!==null&&this.queries[e].setDirty()}},FI=class{flags;read;predicate;constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=VY(t):this.predicate=t}},LI=class n{queries;constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){let i=e!==null?e.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,e!==null?e.push(o):e=[o])}return e!==null?new n(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},VI=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,e=-1){this.metadata=t,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new n(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,r=t.parent;for(;r!==null&&r.type&8&&r.index!==e;)r=r.parent;return e===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(t,e,MY(e,o)),this.matchTNodeWithReadOption(t,e,tb(e,t,o,!1,!1))}else r===ch?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,tb(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Vi||i===El||i===ch&&e.type&4)this.addMatch(e.index,-2);else{let o=tb(e,t,i,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,r)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function MY(n,t){let e=n.localNames;if(e!==null){for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1]}return null}function kY(n,t){return n.type&11?Np(n,t):n.type&4?Z6(n,t):null}function OY(n,t,e,r){return e===-1?kY(t,n):e===-2?RY(n,t,r):Qg(n,n[Ot],e,t)}function RY(n,t,e){if(e===Vi)return Np(t,n);if(e===ch)return Z6(t,n);if(e===El)return f3(t,n)}function p3(n,t,e,r){let i=t[dc].queries[r];if(i.matches===null){let o=n.data,s=e.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let c=s[u];if(c<0)a.push(null);else{let d=o[c];a.push(OY(t,d,s[u+1],e.metadata.read))}}i.matches=a}return i.matches}function BI(n,t,e,r){let i=n.queries.getByIndex(e),o=i.matches;if(o!==null){let s=p3(n,t,i,e);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let c=o[a+1],d=t[-u];for(let h=Ni;h<d.length;h++){let p=d[h];p[rh]===p[Fi]&&BI(p[Ot],p,c,r)}if(d[Ip]!==null){let h=d[Ip];for(let p=0;p<h.length;p++){let m=h[p];BI(m[Ot],m,c,r)}}}}}return r}function NY(n,t){return n[dc].queries[t].queryList}function FY(n,t,e){let r=new xI((e&4)===4);return Dq(n,t,r,r.destroy),(t[dc]??=new NI).queries.push(new RI(r))-1}function LY(n,t,e,r){let i=Yr();if(i.firstCreatePass){let o=oo();BY(i,new FI(t,e,r),o.index),UY(i,n),(e&2)===2&&(i.staticContentQueries=!0)}return FY(i,Rt(),e)}function VY(n){return n.split(",").map(t=>t.trim())}function BY(n,t,e){n.queries===null&&(n.queries=new LI),n.queries.track(new VI(t,e))}function UY(n,t){let e=n.contentQueries||(n.contentQueries=[]),r=e.length?e[e.length-1]:-1;t!==r&&e.push(n.queries.length-1,t)}function X6(n,t){return n.queries.getByIndex(t)}function jY(n,t){let e=n[Ot],r=X6(e,t);return r.crossesNgTemplate?BI(e,n,t,[]):p3(e,n,r,t)}var Ap=class{},J6=class{};var UI=class extends Ap{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cb(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let o=CR(t);this._bootstrapComponents=RN(o.bootstrap),this._r3Injector=cN(t,e,[{provide:Ap,useValue:this},{provide:zb,useValue:this.componentFactoryResolver},...r],Do(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},jI=class extends J6{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new UI(this.moduleType,t,[])}};var xb=class extends Ap{injector;componentFactoryResolver=new Cb(this);instance=null;constructor(t){super();let e=new Gg([...t.providers,{provide:Ap,useValue:this},{provide:zb,useValue:this.componentFactoryResolver}],t.parent||h6(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function l0(n,t,e=null){return new xb({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var zY=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=xR(!1,e.type),i=r.length>0?l0([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ve({token:n,providedIn:"environment",factory:()=>new n(qe(ni))})}return n})();function _t(n){return r0(()=>{let t=m3(n),e=bt(Ie({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===_N.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(zY).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||au.Emulated,styles:n.styles||Ao,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&hu("NgStandalone"),g3(e);let r=n.dependencies;return e.directiveDefs=G4(r,!1),e.pipeDefs=G4(r,!0),e.id=GY(e),e})}function WY(n){return nh(n)||uq(n)}function HY(n){return n!==null}function os(n){return r0(()=>({type:n.type,bootstrap:n.bootstrap||Ao,declarations:n.declarations||Ao,imports:n.imports||Ao,exports:n.exports||Ao,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $Y(n,t){if(n==null)return th;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Lb.None,u=null),e[o]=[r,a,u],t[o]=s}return e}function qY(n){if(n==null)return th;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function sn(n){return r0(()=>{let t=m3(n);return g3(t),t})}function d0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function m3(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||th,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ao,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$Y(n.inputs,t),outputs:qY(n.outputs),debugInfo:null}}function g3(n){n.features?.forEach(t=>t(n))}function G4(n,t){if(!n)return null;let e=t?cq:WY;return()=>(typeof n=="function"?n():n).map(r=>e(r)).filter(HY)}function GY(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function KY(n){return Object.getPrototypeOf(n.prototype).constructor}function Tr(n){let t=KY(n.type),e=!0,r=[n];for(;t;){let i;if(ru(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Oe(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let s=n;s.inputs=X2(n.inputs),s.declaredInputs=X2(n.declaredInputs),s.outputs=X2(n.outputs);let a=i.hostBindings;a&&JY(n,a);let u=i.viewQuery,c=i.contentQueries;if(u&&QY(n,u),c&&XY(n,c),YY(n,i),U$(n.outputs,i.outputs),ru(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Tr&&(e=!1)}}t=Object.getPrototypeOf(t)}ZY(r)}function YY(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function ZY(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Zg(i.hostAttrs,e=Zg(e,i.hostAttrs))}}function X2(n){return n===th?{}:n===Ao?[]:n}function QY(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function XY(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,o)=>{t(r,i,o),e(r,i,o)}:n.contentQueries=t}function JY(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function v3(n){return tZ(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function eZ(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function tZ(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Wb(n,t,e){return n[t]=e}function nZ(n,t){return n[t]}function Ps(n,t,e){let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function eS(n,t,e,r){let i=Ps(n,t,e);return Ps(n,t+1,r)||i}function _3(n,t,e,r,i){let o=eS(n,t,e,r);return Ps(n,t+2,i)||o}function rZ(n,t,e,r,i,o,s,a,u){let c=t.consts,d=Q6(t,n,4,s||null,a||null);BR()&&u3(t,e,d,Sp(c,u),HN),d.mergedAttrs=Zg(d.mergedAttrs,d.attrs),QR(t,d);let h=d.tView=V6(2,d,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,d),h.queries=t.queries.embeddedTView(d)),d}function zI(n,t,e,r,i,o,s,a,u,c){let d=e+Li,h=t.firstCreatePass?rZ(d,t,n,r,i,o,s,a,u):t.data[d];a0(h,!1);let p=iZ(t,n,h,e);x6()&&G6(t,n,p,h),u0(p,n);let m=n3(p,n,p,h);return n[d]=m,U6(n,m),DY(m,h,n),p6(h)&&j6(t,n,h),u!=null&&WN(n,h,c),h}function Te(n,t,e,r,i,o,s,a){let u=Rt(),c=Yr(),d=Sp(c.consts,o);return zI(u,c,n,t,e,r,i,d,s,a),Te}var iZ=oZ;function oZ(n,t,e,r){return E6(!0),t[Sr].createComment("")}var y3=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var b3=new $e("");var sZ=(()=>{class n{static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new WI})}return n})(),WI=class{queuedEffectCount=0;queues=new Map;schedule(t){this.enqueue(t)}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),this.queuedEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}};function Il(n){return!!n&&typeof n.then=="function"}function tS(n){return!!n&&typeof n.subscribe=="function"}var w3=new $e("");function nS(n){return Po([{provide:w3,multi:!0,useValue:n}])}var C3=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=Se(w3,{optional:!0})??[];injector=Se(rr);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let o=oi(this.injector,i);if(Il(o))e.push(o);else if(tS(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});e.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hb=new $e("");function aZ(){b2(()=>{throw new Oe(600,!1)})}function uZ(n){return n.isBoundToModule}var cZ=10;var lh=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Se(gG);afterRenderManager=Se(SN);zonelessEnabled=Se(T6);rootEffectScheduler=Se(sZ);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Er;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=Se(lu).hasPendingTasks.pipe(ct(e=>!e));constructor(){Se(Fp,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=Se(ni);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=rr.NULL){On(10);let o=e instanceof s3;if(!this._injector.get(C3).done){let m="";throw new Oe(405,m)}let a;o?a=e:a=this._injector.get(zb).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let u=uZ(a)?void 0:this._injector.get(Ap),c=r||a.selector,d=a.create(i,[],c,u),h=d.location.nativeElement,p=d.injector.get(b3,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),nb(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),On(11,d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){On(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(R6.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Oe(101,!1);let e=Ht(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ht(e),this.afterTick.next(),On(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xl,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<cZ;)On(14),this.synchronizeOnce(),On(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)lZ(r,i,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Ob(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;nb(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Hb,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>nb(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Oe(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nb(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function lZ(n,t,e,r){if(!e&&!Ob(n))return;XN(n,t,e&&!r?0:1)}function mc(n,t,e,r){let i=Rt(),o=Op();if(Ps(i,o,t)){let s=Yr(),a=Nb();gK(a,i,n,t,e,r)}return mc}function x3(n,t,e,r){return Ps(n,Op(),e)?t+cc(e)+r:Bi}function dZ(n,t,e,r,i,o){let s=WR(),a=eS(n,s,e,i);return Rb(2),a?t+cc(e)+r+cc(i)+o:Bi}function hZ(n,t,e,r,i,o,s,a){let u=WR(),c=_3(n,u,e,i,s);return Rb(3),c?t+cc(e)+r+cc(i)+o+cc(s)+a:Bi}function Qy(n,t){return n<<17|t<<2}function dh(n){return n>>17&32767}function fZ(n){return(n&2)==2}function pZ(n,t){return n&131071|t<<17}function HI(n){return n|2}function Dp(n){return(n&131068)>>2}function J2(n,t){return n&-131069|t<<2}function mZ(n){return(n&1)===1}function $I(n){return n|1}function gZ(n,t,e,r,i,o){let s=o?t.classBindings:t.styleBindings,a=dh(s),u=Dp(s);n[r]=e;let c=!1,d;if(Array.isArray(e)){let h=e;d=h[1],(d===null||i0(h,d)>0)&&(c=!0)}else d=e;if(i)if(u!==0){let p=dh(n[a+1]);n[r+1]=Qy(p,a),p!==0&&(n[p+1]=J2(n[p+1],r)),n[a+1]=pZ(n[a+1],r)}else n[r+1]=Qy(a,0),a!==0&&(n[a+1]=J2(n[a+1],r)),a=r;else n[r+1]=Qy(u,0),a===0?a=r:n[u+1]=J2(n[u+1],r),u=r;c&&(n[r+1]=HI(n[r+1])),K4(n,d,r,!0),K4(n,d,r,!1),vZ(t,d,n,r,o),s=Qy(a,u),o?t.classBindings=s:t.styleBindings=s}function vZ(n,t,e,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof t=="string"&&i0(o,t)>=0&&(e[r+1]=$I(e[r+1]))}function K4(n,t,e,r){let i=n[e+1],o=t===null,s=r?dh(i):Dp(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],c=n[s+1];_Z(u,t)&&(a=!0,n[s+1]=r?$I(c):HI(c)),s=r?dh(c):Dp(c)}a&&(n[e+1]=r?HI(i):$I(i))}function _Z(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?i0(n,t)>=0:!1}var ma={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yZ(n){return n.substring(ma.key,ma.keyEnd)}function bZ(n){return wZ(n),E3(n,I3(n,0,ma.textEnd))}function E3(n,t){let e=ma.textEnd;return e===t?-1:(t=ma.keyEnd=CZ(n,ma.key=t,e),I3(n,t,e))}function wZ(n){ma.key=0,ma.keyEnd=0,ma.value=0,ma.valueEnd=0,ma.textEnd=n.length}function I3(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function CZ(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}function xe(n,t,e){let r=Rt(),i=Op();if(Ps(r,i,t)){let o=Yr(),s=Nb();z6(o,s,r,n,t,r[Sr],e,!1)}return xe}function qI(n,t,e,r,i){W6(t,n,e,i?"class":"style",r)}function gc(n,t,e){return S3(n,t,e,!1),gc}function Nt(n,t){return S3(n,t,null,!0),Nt}function $b(n){EZ(PZ,xZ,n,!0)}function xZ(n,t){for(let e=bZ(t);e>=0;e=E3(t,e))c6(n,yZ(t),!0)}function S3(n,t,e,r){let i=Rt(),o=Yr(),s=Rb(2);if(o.firstUpdatePass&&A3(o,n,s,r),t!==Bi&&Ps(i,s,t)){let a=o.data[cu()];D3(o,a,i,i[Sr],n,i[s+1]=kZ(t,e),r,s)}}function EZ(n,t,e,r){let i=Yr(),o=Rb(2);i.firstUpdatePass&&A3(i,null,o,r);let s=Rt();if(e!==Bi&&Ps(s,o,e)){let a=i.data[cu()];if(P3(a,r)&&!T3(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(e=oI(u,e||"")),qI(i,a,s,e,r)}else MZ(i,a,s,s[Sr],s[o+1],s[o+1]=DZ(n,t,e),r,o)}}function T3(n,t){return t>=n.expandoStartIndex}function A3(n,t,e,r){let i=n.data;if(i[e+1]===null){let o=i[cu()],s=T3(n,e);P3(o,r)&&t===null&&!s&&(t=!1),t=IZ(i,o,t,r),gZ(i,o,t,e,s,r)}}function IZ(n,t,e,r){let i=Wq(n),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=eI(null,n,t,e,r),e=n0(e,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||n[s]!==i)if(e=eI(i,n,t,e,r),o===null){let u=SZ(n,t,r);u!==void 0&&Array.isArray(u)&&(u=eI(null,n,t,u[1],r),u=n0(u,t.attrs,r),TZ(n,t,r,u))}else o=AZ(n,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),e}function SZ(n,t,e){let r=e?t.classBindings:t.styleBindings;if(Dp(r)!==0)return n[dh(r)]}function TZ(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[dh(i)]=r}function AZ(n,t,e){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=n0(r,s,e)}return n0(r,t.attrs,e)}function eI(n,t,e,r,i){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],r=n0(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function n0(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),c6(n,s,e?!0:t[++o]))}return n===void 0?null:n}function DZ(n,t,e){if(e==null||e==="")return Ao;let r=[],i=c0(e);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function PZ(n,t,e){let r=String(t);r!==""&&!r.includes(" ")&&c6(n,r,e)}function MZ(n,t,e,r,i,o,s,a){i===Bi&&(i=Ao);let u=0,c=0,d=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;d!==null||h!==null;){let p=u<i.length?i[u+1]:void 0,m=c<o.length?o[c+1]:void 0,_=null,C;d===h?(u+=2,c+=2,p!==m&&(_=h,C=m)):h===null||d!==null&&d<h?(u+=2,_=d):(c+=2,_=h,C=m),_!==null&&D3(n,t,e,r,_,C,s,a),d=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}function D3(n,t,e,r,i,o,s,a){if(!(t.type&3))return;let u=n.data,c=u[a+1],d=mZ(c)?Y4(u,t,e,i,Dp(c),s):void 0;if(!Eb(d)){Eb(o)||fZ(c)&&(o=Y4(u,null,e,i,a,s));let h=NR(cu(),e);FK(r,s,h,i,o)}}function Y4(n,t,e,r,i,o){let s=t===null,a;for(;i>0;){let u=n[i],c=Array.isArray(u),d=c?u[1]:u,h=d===null,p=e[i+1];p===Bi&&(p=h?Ao:void 0);let m=h?H2(p,r):d===r?p:void 0;if(c&&!Eb(m)&&(m=H2(u,r)),Eb(m)&&(a=m,s))return a;let _=n[i+1];i=s?dh(_):Dp(_)}if(t!==null){let u=o?t.residualClasses:t.residualStyles;u!=null&&(a=H2(u,r))}return a}function Eb(n){return n!==void 0}function kZ(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=Do(c0(n)))),n}function P3(n,t){return(n.flags&(t?8:16))!==0}var GI=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,e){this.attach(e,this.detach(t))}};function tI(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function OZ(n,t,e){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(t)){let u=t.length-1;for(;o<=s&&o<=u;){let c=n.at(o),d=t[o],h=tI(o,c,o,d,e);if(h!==0){h<0&&n.updateValue(o,d),o++;continue}let p=n.at(s),m=t[u],_=tI(s,p,u,m,e);if(_!==0){_<0&&n.updateValue(s,m),s--,u--;continue}let C=e(o,c),x=e(s,p),S=e(o,d);if(Object.is(S,x)){let N=e(u,m);Object.is(N,C)?(n.swap(o,s),n.updateValue(s,m),u--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new Ib,i??=Q4(n,o,s,e),KI(n,r,o,S))n.updateValue(o,d),o++,s++;else if(i.has(S))r.set(C,n.detach(o)),s--;else{let N=n.create(o,t[o]);n.attach(o,N),o++,s++}}for(;o<=u;)Z4(n,r,e,o,t[o]),o++}else if(t!=null){let u=t[Symbol.iterator](),c=u.next();for(;!c.done&&o<=s;){let d=n.at(o),h=c.value,p=tI(o,d,o,h,e);if(p!==0)p<0&&n.updateValue(o,h),o++,c=u.next();else{r??=new Ib,i??=Q4(n,o,s,e);let m=e(o,h);if(KI(n,r,o,m))n.updateValue(o,h),o++,s++,c=u.next();else if(!i.has(m))n.attach(o,n.create(o,h)),o++,s++,c=u.next();else{let _=e(o,d);r.set(_,n.detach(o)),s--}}}for(;!c.done;)Z4(n,r,e,n.length,c.value),c=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function KI(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function Z4(n,t,e,r,i){if(KI(n,t,r,e(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function Q4(n,t,e,r){let i=new Set;for(let o=t;o<=e;o++)i.add(r(o,n.at(o)));return i}var Ib=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function be(n,t){hu("NgControlFlow");let e=Rt(),r=Op(),i=e[r]!==Bi?e[r]:-1,o=i!==-1?Sb(e,Li+i):void 0,s=0;if(Ps(e,r,n)){let a=Ht(null);try{if(o!==void 0&&i3(o,s),n!==-1){let u=Li+n,c=Sb(e,u),d=XI(e[Ot],u),h=t0(c,d.tView.ssrId),p=Vb(e,d,t,{dehydratedView:h});jb(c,p,s,Xg(d,h))}}finally{Ht(a)}}else if(o!==void 0){let a=r3(o,s);a!==void 0&&(a[Kr]=t)}}var YI=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Ni}};function Lr(n){return n}function h0(n,t){return t}var ZI=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function _n(n,t,e,r,i,o,s,a,u,c,d,h,p){hu("NgControlFlow");let m=Rt(),_=Yr(),C=u!==void 0,x=Rt(),S=a?s.bind(x[va][Kr]):s,N=new ZI(C,S);x[Li+n]=N,zI(m,_,n+1,t,e,r,i,Sp(_.consts,o)),C&&zI(m,_,n+2,u,c,d,h,Sp(_.consts,p))}var QI=class extends GI{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Ni}at(t){return this.getLView(t)[Kr].$implicit}attach(t,e){let r=e[Kg];this.needsIndexUpdate||=t!==this.length,jb(this.lContainer,e,t,Xg(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,RZ(this.lContainer,t)}create(t,e){let r=t0(this.lContainer,this.templateTNode.tView.ssrId),i=Vb(this.hostLView,this.templateTNode,new YI(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Bb(t[Ot],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[Kr].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Kr].$index=t}getLView(t){return NZ(this.lContainer,t)}};function yn(n){let t=Ht(null),e=cu();try{let r=Rt(),i=r[Ot],o=r[e],s=e+1,a=Sb(r,s);if(o.liveCollection===void 0){let c=XI(i,s);o.liveCollection=new QI(a,r,c)}else o.liveCollection.reset();let u=o.liveCollection;if(OZ(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let c=Op(),d=u.length===0;if(Ps(r,c,d)){let h=e+2,p=Sb(r,h);if(d){let m=XI(i,h),_=t0(p,m.tView.ssrId),C=Vb(r,m,void 0,{dehydratedView:_});jb(p,C,0,Xg(m,_))}else i3(p,0)}}}finally{Ht(t)}}function Sb(n,t){return n[t]}function RZ(n,t){return Jg(n,t)}function NZ(n,t){return r3(n,t)}function XI(n,t){return m6(n,t)}function w(n,t,e,r){let i=Rt(),o=Yr(),s=Li+n,a=i[Sr],u=o.firstCreatePass?l3(s,o,i,t,HN,BR(),e,r):o.data[s],c=FZ(o,i,u,a,t,n);i[s]=c;let d=p6(u);return a0(u,!0),VN(a,c,u),!$N(u)&&x6()&&G6(o,i,c,u),(Pq()===0||d)&&u0(c,i),Mq(),d&&(j6(o,i,u),DN(o,u,i)),r!==null&&WN(i,u),w}function b(){let n=oo();jR()?Lq():(n=n.parent,a0(n,!1));let t=n;Rq(t)&&Nq(),kq();let e=Yr();return e.firstCreatePass&&d3(e,t),t.classesWithoutHost!=null&&Yq(t)&&qI(e,t,Rt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Zq(t)&&qI(e,t,Rt(),t.stylesWithoutHost,!1),b}function G(n,t,e,r){return w(n,t,e,r),b(),G}var FZ=(n,t,e,r,i,o)=>(E6(!0),FN(r,i,qq()));function Lt(){return Rt()}var Zd=void 0;function LZ(n){let t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&e===0?1:5}var VZ=["en",[["a","p"],["AM","PM"],Zd],[["AM","PM"],Zd,Zd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zd,"{1} 'at' {0}",Zd],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",LZ],nI={};function ss(n){let t=BZ(n),e=X4(t);if(e)return e;let r=t.split("-")[0];if(e=X4(r),e)return e;if(r==="en")return VZ;throw new Oe(701,!1)}function X4(n){return n in nI||(nI[n]=Qd.ng&&Qd.ng.common&&Qd.ng.common.locales&&Qd.ng.common.locales[n]),nI[n]}var mr=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(mr||{});function BZ(n){return n.toLowerCase().replace(/_/g,"-")}var Tb="en-US";var UZ=Tb;function jZ(n){typeof n=="string"&&(UZ=n.toLowerCase().replace(/_/g,"-"))}function J4(n,t,e){return function r(i){if(i===Function)return e;let o=Mp(n)?ou(n.index,t):t;Y6(o,5);let s=t[Kr],a=eR(t,s,e,i),u=r.__ngNextListenerFn__;for(;u;)a=eR(t,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function eR(n,t,e,r){let i=Ht(null);try{return On(6,t,e),e(r)!==!1}catch(o){return zZ(n,o),!1}finally{On(7,t,e),Ht(i)}}function zZ(n,t){let e=n[Ep],r=e?e.get(su,null):null;r&&r.handleError(t)}function tR(n,t,e,r,i,o){let s=t[e],a=t[Ot],c=a.data[e].outputs[r],d=s[c],h=a.firstCreatePass?y6(a):null,p=_6(t),m=d.subscribe(o),_=p.length;p.push(o,m),h&&h.push(i,n.index,_,-(_+1))}var WZ=(n,t,e)=>{};function je(n,t,e,r){let i=Rt(),o=Yr(),s=oo();return M3(o,i,i[Sr],s,n,t,r),je}function HZ(n,t,e,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===e&&i[o+1]===r){let a=t[cb],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function M3(n,t,e,r,i,o,s){let a=p6(r),c=n.firstCreatePass?y6(n):null,d=_6(t),h=!0;if(r.type&3||s){let p=uu(r,t),m=s?s(p):p,_=d.length,C=s?S=>s(iu(S[r.index])):r.index,x=null;if(!s&&a&&(x=HZ(n,t,i,r.index)),x!==null){let S=x.__ngLastListenerFn__||x;S.__ngNextListenerFn__=o,x.__ngLastListenerFn__=o,h=!1}else{o=J4(r,t,o),WZ(m,i,o);let S=e.listen(m,i,o);d.push(o,S),c&&c.push(i,C,_,_+1)}}else o=J4(r,t,o);if(h){let p=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let _=0;_<m.length;_+=2){let C=m[_],x=m[_+1];tR(r,t,C,x,i,o)}if(p&&p.length)for(let _ of p)tR(r,t,_,i,i,o)}}function ve(n=1){return $q(n)}function rS(n,t,e){return qb(n,"",t,"",e),rS}function qb(n,t,e,r,i){let o=Rt(),s=x3(o,t,e,r);if(s!==Bi){let a=Yr(),u=Nb();z6(a,u,o,n,s,o[Sr],i,!1)}return qb}function k3(n,t,e,r){LY(n,t,e,r)}function O3(n){let t=Rt(),e=Yr(),r=HR();b6(r+1);let i=X6(e,r);if(n.dirty&&Iq(t)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=jY(t,r);n.reset(o,yG),n.notifyOnChanges()}return!0}return!1}function R3(){return NY(Rt(),HR())}function $Z(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}function iS(n){let t=Vq();return g6(t,Li+n)}function A(n,t=""){let e=Rt(),r=Yr(),i=n+Li,o=r.firstCreatePass?Q6(r,i,1,t,null):r.data[i],s=qZ(r,e,o,t,n);e[i]=s,x6()&&G6(r,e,s,o),a0(o,!1)}var qZ=(n,t,e,r,i)=>(E6(!0),eK(t[Sr],r));function st(n){return Ze("",n,""),st}function Ze(n,t,e){let r=Rt(),i=x3(r,n,t,e);return i!==Bi&&oS(r,cu(),i),Ze}function f0(n,t,e,r,i){let o=Rt(),s=dZ(o,n,t,e,r,i);return s!==Bi&&oS(o,cu(),s),f0}function Sl(n,t,e,r,i,o,s){let a=Rt(),u=hZ(a,n,t,e,r,i,o,s);return u!==Bi&&oS(a,cu(),u),Sl}function oS(n,t,e){let r=NR(t,n);tK(n[Sr],r,e)}function dt(n,t,e){gN(t)&&(t=t());let r=Rt(),i=Op();if(Ps(r,i,t)){let o=Yr(),s=Nb();z6(o,s,r,n,t,r[Sr],e,!1)}return dt}function mt(n,t){let e=gN(n);return e&&n.set(t),e}function ht(n,t){let e=Rt(),r=Yr(),i=oo();return M3(r,e,e[Sr],i,n,t),ht}function GZ(n,t,e){let r=Yr();if(r.firstCreatePass){let i=ru(n);JI(e,r.data,r.blueprint,i,!0),JI(t,r.data,r.blueprint,i,!1)}}function JI(n,t,e,r,i){if(n=io(n),Array.isArray(n))for(let o=0;o<n.length;o++)JI(n[o],t,e,r,i);else{let o=Yr(),s=Rt(),a=oo(),u=xp(n)?n:io(n.provide),c=SR(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(xp(n)||!n.multi){let m=new ah(c,i,me),_=iI(u,t,i?d:d+p,h);_===-1?(vI(gb(a,s),o,u),rI(o,n,t.length),t.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(m),s.push(m)):(e[_]=m,s[_]=m)}else{let m=iI(u,t,d+p,h),_=iI(u,t,d,d+p),C=m>=0&&e[m],x=_>=0&&e[_];if(i&&!x||!i&&!C){vI(gb(a,s),o,u);let S=ZZ(i?YZ:KZ,e.length,i,r,c);!i&&x&&(e[_].providerFactory=S),rI(o,n,t.length,0),t.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(S),s.push(S)}else{let S=N3(e[i?_:m],c,!i&&r);rI(o,n,m>-1?m:_,S)}!i&&r&&x&&e[_].componentProviders++}}}function rI(n,t,e,r){let i=xp(t),o=fq(t);if(i||o){let u=(o?io(t.useClass):t).prototype.ngOnDestroy;if(u){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let d=c.indexOf(e);d===-1?c.push(e,[r,u]):c[d+1].push(r,u)}else c.push(e,u)}}}function N3(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function iI(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function KZ(n,t,e,r){return e6(this.multi,[])}function YZ(n,t,e,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Qg(e,e[Ot],this.providerFactory.index,r);o=a.slice(0,s),e6(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],e6(i,o);return o}function e6(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function ZZ(n,t,e,r,i){let o=new ah(n,e,me);return o.multi=[],o.index=t,o.componentProviders=0,N3(o,i,r&&!e),o}function Ui(n,t=[]){return e=>{e.providersResolver=(r,i)=>GZ(r,i?i(n):n,t)}}function Gb(n,t,e){let r=kp()+n,i=Rt();return i[r]===Bi?Wb(i,r,e?t.call(e):t()):nZ(i,r)}function ph(n,t,e,r){return F3(Rt(),kp(),n,t,e,r)}function Kb(n,t,e,r,i){return L3(Rt(),kp(),n,t,e,r,i)}function Yb(n,t,e,r,i,o){return QZ(Rt(),kp(),n,t,e,r,i,o)}function sS(n,t){let e=n[t];return e===Bi?void 0:e}function F3(n,t,e,r,i,o){let s=t+e;return Ps(n,s,i)?Wb(n,s+1,o?r.call(o,i):r(i)):sS(n,s+1)}function L3(n,t,e,r,i,o,s){let a=t+e;return eS(n,a,i,o)?Wb(n,a+2,s?r.call(s,i,o):r(i,o)):sS(n,a+2)}function QZ(n,t,e,r,i,o,s,a){let u=t+e;return _3(n,u,i,o,s)?Wb(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):sS(n,u+3)}function nn(n,t){let e=Yr(),r,i=n+Li;e.firstCreatePass?(r=XZ(t,e.pipeRegistry),e.data[i]=r,r.onDestroy&&(e.destroyHooks??=[]).push(i,r.onDestroy)):r=e.data[i];let o=r.factory||(r.factory=eh(r.type,!0)),s,a=To(me);try{let u=mb(!1),c=o();return mb(u),$Z(e,Rt(),i,c),c}finally{To(a)}}function XZ(n,t){if(t)for(let e=t.length-1;e>=0;e--){let r=t[e];if(n===r.name)return r}}function p0(n,t,e){let r=n+Li,i=Rt(),o=g6(i,r);return V3(i,r)?F3(i,kp(),t,o.transform,e,o):o.transform(e)}function bn(n,t,e,r){let i=n+Li,o=Rt(),s=g6(o,i);return V3(o,i)?L3(o,kp(),t,s.transform,e,r,s):s.transform(e,r)}function V3(n,t){return n[Ot].data[t].pure}var hh=class{full;major;minor;patch;constructor(t){this.full=t;let e=t.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},B3=new hh("19.2.6"),t6=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},Zb=(()=>{class n{compileModuleSync(e){return new jI(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=CR(e),o=RN(i.declarations).reduce((s,a)=>{let u=nh(a);return u&&s.push(new Tp(u)),s},[]);return new t6(r,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var JZ=(()=>{class n{zone=Se(tn);changeDetectionScheduler=Se(uh);applicationRef=Se(lh);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eQ=new $e("",{factory:()=>!1});function U3({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new tn(bt(Ie({},z3()),{scheduleInRootZone:e})),[{provide:tn,useFactory:n},{provide:qg,multi:!0,useFactory:()=>{let r=Se(JZ,{optional:!0});return()=>r.initialize()}},{provide:qg,multi:!0,useFactory:()=>{let r=Se(tQ);return()=>{r.initialize()}}},t===!0?{provide:dN,useValue:!0}:[],{provide:hN,useValue:e??lN}]}function j3(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,r=U3({ngZoneFactory:()=>{let i=z3(n);return i.scheduleInRootZone=e,i.shouldCoalesceEventChangeDetection&&hu("NgZone_CoalesceEvent"),new tn(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return Po([{provide:eQ,useValue:!0},{provide:T6,useValue:!1},r])}function z3(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var tQ=(()=>{class n{subscription=new fr;initialized=!1;zone=Se(tn);pendingTasks=Se(lu);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{tn.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{tn.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nQ=(()=>{class n{appRef=Se(lh);taskService=Se(lu);ngZone=Se(tn);zonelessEnabled=Se(T6);tracing=Se(Fp,{optional:!0});disableScheduling=Se(dN,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new fr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_b):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Se(hN,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof CI||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?k4:fN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_b+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k4(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rQ(){return typeof $localize<"u"&&$localize.locale||Tb}var Lp=new $e("",{providedIn:"root",factory:()=>Se(Lp,qt.Optional|qt.SkipSelf)||rQ()});var n6=new $e(""),iQ=new $e("");function zg(n){return!n.moduleRef}function oQ(n){let t=zg(n)?n.r3Injector:n.moduleRef.injector,e=t.get(tn);return e.run(()=>{zg(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get(su,null),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:o=>{r.handleError(o)}})}),zg(n)){let o=()=>t.destroy(),s=n.platformInjector.get(n6);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(n6);s.add(o),n.moduleRef.onDestroy(()=>{nb(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return aQ(r,e,()=>{let o=t.get(C3);return o.runInitializers(),o.donePromise.then(()=>{let s=t.get(Lp,Tb);if(jZ(s||Tb),!t.get(iQ,!0))return zg(n)?t.get(lh):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(zg(n)){let u=t.get(lh);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return sQ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function sQ(n,t){let e=n.injector.get(lh);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(e);else throw new Oe(-403,!1);t.push(n)}function aQ(n,t,e){try{let r=e();return Il(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}var rb=null;function uQ(n=[],t){return rr.create({name:t,providers:[{provide:Mb,useValue:"platform"},{provide:n6,useValue:new Set([()=>rb=null])},...n]})}function cQ(n=[]){if(rb)return rb;let t=uQ(n);return rb=t,aZ(),lQ(t),t}function lQ(n){let t=n.get(M6,null);oi(n,()=>{t?.forEach(e=>e())})}function aS(){return!1}var vc=(()=>{class n{static __NG_ELEMENT_ID__=dQ}return n})();function dQ(n){return hQ(oo(),Rt(),(n&16)===16)}function hQ(n,t,e){if(Mp(n)&&!e){let r=ou(n.index,t);return new e0(r,r)}else if(n.type&175){let r=t[va];return new e0(r,t)}return null}var r6=class{constructor(){}supports(t){return v3(t)}create(t){return new i6(t)}},fQ=(n,t)=>t,i6=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||fQ}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,o=null;for(;e||r;){let s=!r||e&&e.currentIndex<nR(r,i,o)?e:r,a=nR(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,d=u-i;if(c!=d){for(let p=0;p<c;p++){let m=p<o.length?o[p]:o[p]=0,_=m+p;d<=_&&_<c&&(o[p]=m+1)}let h=s.previousIndex;o[h]=d-c}}a!==u&&t(s,a,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!v3(t))throw new Oe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else i=0,eZ(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,i)):t=this._addAfter(new o6(e,r),o,i)),t}_verifyReinsertion(t,e,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ab),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ab),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},o6=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},s6=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Ab=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new s6,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nR(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function rR(){return new uS([new r6])}var uS=(()=>{class n{factories;static \u0275prov=Ve({token:n,providedIn:"root",factory:rR});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||rR()),deps:[[n,new rq,new ii]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new Oe(901,!1)}}return n})();function W3(n){On(8);try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=cQ(r),o=[U3({}),{provide:uh,useExisting:nQ},...e||[]],s=new xb({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return oQ({r3Injector:s.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{On(9)}}function Tl(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function as(n){return x2(n)}function mh(n,t){return y2(n,t?.equal)}var iR=class{[As];constructor(t){this[As]=t}destroy(){this[As].destroy()}};function H3(n){let t=nh(n);if(!t)return null;let e=new Tp(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var gr=new $e("");var G3=null;function ks(){return G3}function cS(n){G3??=n}var m0=class{},g0=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(K3),providedIn:"platform"})}return n})(),lS=new $e(""),K3=(()=>{class n extends g0{_location;_history;_doc=Se(gr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ks().getBaseHref(this._doc)}onPopState(e){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=ks().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Qb(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function $3(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function ba(n){return n&&n[0]!=="?"?`?${n}`:n}var Os=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(Jb),providedIn:"root"})}return n})(),Xb=new $e(""),Jb=(()=>{class n extends Os{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Se(gr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Qb(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+ba(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+ba(o));this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+ba(o));this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(qe(g0),qe(Xb,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Al=(()=>{class n{_subject=new Er;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=gQ($3(q3(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+ba(r))}normalize(e){return n.stripTrailingSlash(mQ(this._basePath,q3(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ba(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ba(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ba;static joinWithSlash=Qb;static stripTrailingSlash=$3;static \u0275fac=function(r){return new(r||n)(qe(Os))};static \u0275prov=Ve({token:n,factory:()=>pQ(),providedIn:"root"})}return n})();function pQ(){return new Al(qe(Os))}function mQ(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function q3(n){return n.replace(/\/index.html$/,"")}function gQ(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var cw=(()=>{class n extends Os{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=Qb(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,o){let s=this.prepareExternalUrl(i+ba(o))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,s)}replaceState(e,r,i,o){let s=this.prepareExternalUrl(i+ba(o))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(qe(g0),qe(Xb,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();var lw=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(lw||{});var ji=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ji||{}),Rn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Rn||{}),Mo=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Mo||{}),si={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function eF(n){return ss(n)[mr.LocaleId]}function tF(n,t,e){let r=ss(n),i=[r[mr.DayPeriodsFormat],r[mr.DayPeriodsStandalone]],o=Ns(i,t);return Ns(o,e)}function nF(n,t,e){let r=ss(n),i=[r[mr.DaysFormat],r[mr.DaysStandalone]],o=Ns(i,t);return Ns(o,e)}function rF(n,t,e){let r=ss(n),i=[r[mr.MonthsFormat],r[mr.MonthsStandalone]],o=Ns(i,t);return Ns(o,e)}function iF(n,t){let r=ss(n)[mr.Eras];return Ns(r,t)}function v0(n,t){let e=ss(n);return Ns(e[mr.DateFormat],t)}function _0(n,t){let e=ss(n);return Ns(e[mr.TimeFormat],t)}function y0(n,t){let r=ss(n)[mr.DateTimeFormat];return Ns(r,t)}function Rs(n,t){let e=ss(n),r=e[mr.NumberSymbols][t];if(typeof r>"u"){if(t===si.CurrencyDecimal)return e[mr.NumberSymbols][si.Decimal];if(t===si.CurrencyGroup)return e[mr.NumberSymbols][si.Group]}return r}function yS(n,t){return ss(n)[mr.NumberFormats][t]}function oF(n){if(!n[mr.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[mr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function sF(n){let t=ss(n);return oF(t),(t[mr.ExtraData][2]||[]).map(r=>typeof r=="string"?dS(r):[dS(r[0]),dS(r[1])])}function aF(n,t,e){let r=ss(n);oF(r);let i=[r[mr.ExtraData][0],r[mr.ExtraData][1]],o=Ns(i,t)||[];return Ns(o,e)||[]}function Ns(n,t){for(let e=t;e>-1;e--)if(typeof n[e]<"u")return n[e];throw new Error("Locale data API: locale data undefined")}function dS(n){let[t,e]=n.split(":");return{hours:+t,minutes:+e}}var vQ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,ew={},_Q=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function uF(n,t,e,r){let i=TQ(n);t=_c(e,t)||t;let s=[],a;for(;t;)if(a=_Q.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let u=i.getTimezoneOffset();r&&(u=lF(r,u),i=SQ(i,r));let c="";return s.forEach(d=>{let h=EQ(d);c+=h?h(i,e,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function ow(n,t,e){let r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function _c(n,t){let e=eF(n);if(ew[e]??={},ew[e][t])return ew[e][t];let r="";switch(t){case"shortDate":r=v0(n,Mo.Short);break;case"mediumDate":r=v0(n,Mo.Medium);break;case"longDate":r=v0(n,Mo.Long);break;case"fullDate":r=v0(n,Mo.Full);break;case"shortTime":r=_0(n,Mo.Short);break;case"mediumTime":r=_0(n,Mo.Medium);break;case"longTime":r=_0(n,Mo.Long);break;case"fullTime":r=_0(n,Mo.Full);break;case"short":let i=_c(n,"shortTime"),o=_c(n,"shortDate");r=tw(y0(n,Mo.Short),[i,o]);break;case"medium":let s=_c(n,"mediumTime"),a=_c(n,"mediumDate");r=tw(y0(n,Mo.Medium),[s,a]);break;case"long":let u=_c(n,"longTime"),c=_c(n,"longDate");r=tw(y0(n,Mo.Long),[u,c]);break;case"full":let d=_c(n,"fullTime"),h=_c(n,"fullDate");r=tw(y0(n,Mo.Full),[d,h]);break}return r&&(ew[e][t]=r),r}function tw(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return t!=null&&r in t?t[r]:e})),n}function wa(n,t,e="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=e));let s=String(n);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),o+s}function yQ(n,t){return wa(n,3).substring(0,t)}function Vr(n,t,e=0,r=!1,i=!1){return function(o,s){let a=bQ(n,o);if((e>0||a>-e)&&(a+=e),n===3)a===0&&e===-12&&(a=12);else if(n===6)return yQ(a,t);let u=Rs(s,si.MinusSign);return wa(a,t,u,r,i)}}function bQ(n,t){switch(n){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Hn(n,t,e=ji.Format,r=!1){return function(i,o){return wQ(i,o,n,t,e,r)}}function wQ(n,t,e,r,i,o){switch(e){case 2:return rF(t,i,r)[n.getMonth()];case 1:return nF(t,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=sF(t),d=aF(t,i,r),h=c.findIndex(p=>{if(Array.isArray(p)){let[m,_]=p,C=s>=m.hours&&a>=m.minutes,x=s<_.hours||s===_.hours&&a<_.minutes;if(m.hours<_.hours){if(C&&x)return!0}else if(C||x)return!0}else if(p.hours===s&&p.minutes===a)return!0;return!1});if(h!==-1)return d[h]}return tF(t,i,r)[s<12?0:1];case 3:return iF(t,r)[n.getFullYear()<=0?0:1];default:let u=e;throw new Error(`unexpected translation type ${u}`)}}function nw(n){return function(t,e,r){let i=-1*r,o=Rs(e,si.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+wa(s,2,o)+wa(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+wa(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+wa(s,2,o)+":"+wa(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+wa(s,2,o)+":"+wa(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var CQ=0,iw=4;function xQ(n){let t=ow(n,CQ,1).getDay();return ow(n,0,1+(t<=iw?iw:iw+7)-t)}function cF(n){let t=n.getDay(),e=t===0?-3:iw-t;return ow(n.getFullYear(),n.getMonth(),n.getDate()+e)}function hS(n,t=!1){return function(e,r){let i;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();i=1+Math.floor((s+o)/7)}else{let o=cF(e),s=xQ(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return wa(i,n,Rs(r,si.MinusSign))}}function rw(n,t=!1){return function(e,r){let o=cF(e).getFullYear();return wa(o,n,Rs(r,si.MinusSign),t)}}var fS={};function EQ(n){if(fS[n])return fS[n];let t;switch(n){case"G":case"GG":case"GGG":t=Hn(3,Rn.Abbreviated);break;case"GGGG":t=Hn(3,Rn.Wide);break;case"GGGGG":t=Hn(3,Rn.Narrow);break;case"y":t=Vr(0,1,0,!1,!0);break;case"yy":t=Vr(0,2,0,!0,!0);break;case"yyy":t=Vr(0,3,0,!1,!0);break;case"yyyy":t=Vr(0,4,0,!1,!0);break;case"Y":t=rw(1);break;case"YY":t=rw(2,!0);break;case"YYY":t=rw(3);break;case"YYYY":t=rw(4);break;case"M":case"L":t=Vr(1,1,1);break;case"MM":case"LL":t=Vr(1,2,1);break;case"MMM":t=Hn(2,Rn.Abbreviated);break;case"MMMM":t=Hn(2,Rn.Wide);break;case"MMMMM":t=Hn(2,Rn.Narrow);break;case"LLL":t=Hn(2,Rn.Abbreviated,ji.Standalone);break;case"LLLL":t=Hn(2,Rn.Wide,ji.Standalone);break;case"LLLLL":t=Hn(2,Rn.Narrow,ji.Standalone);break;case"w":t=hS(1);break;case"ww":t=hS(2);break;case"W":t=hS(1,!0);break;case"d":t=Vr(2,1);break;case"dd":t=Vr(2,2);break;case"c":case"cc":t=Vr(7,1);break;case"ccc":t=Hn(1,Rn.Abbreviated,ji.Standalone);break;case"cccc":t=Hn(1,Rn.Wide,ji.Standalone);break;case"ccccc":t=Hn(1,Rn.Narrow,ji.Standalone);break;case"cccccc":t=Hn(1,Rn.Short,ji.Standalone);break;case"E":case"EE":case"EEE":t=Hn(1,Rn.Abbreviated);break;case"EEEE":t=Hn(1,Rn.Wide);break;case"EEEEE":t=Hn(1,Rn.Narrow);break;case"EEEEEE":t=Hn(1,Rn.Short);break;case"a":case"aa":case"aaa":t=Hn(0,Rn.Abbreviated);break;case"aaaa":t=Hn(0,Rn.Wide);break;case"aaaaa":t=Hn(0,Rn.Narrow);break;case"b":case"bb":case"bbb":t=Hn(0,Rn.Abbreviated,ji.Standalone,!0);break;case"bbbb":t=Hn(0,Rn.Wide,ji.Standalone,!0);break;case"bbbbb":t=Hn(0,Rn.Narrow,ji.Standalone,!0);break;case"B":case"BB":case"BBB":t=Hn(0,Rn.Abbreviated,ji.Format,!0);break;case"BBBB":t=Hn(0,Rn.Wide,ji.Format,!0);break;case"BBBBB":t=Hn(0,Rn.Narrow,ji.Format,!0);break;case"h":t=Vr(3,1,-12);break;case"hh":t=Vr(3,2,-12);break;case"H":t=Vr(3,1);break;case"HH":t=Vr(3,2);break;case"m":t=Vr(4,1);break;case"mm":t=Vr(4,2);break;case"s":t=Vr(5,1);break;case"ss":t=Vr(5,2);break;case"S":t=Vr(6,1);break;case"SS":t=Vr(6,2);break;case"SSS":t=Vr(6,3);break;case"Z":case"ZZ":case"ZZZ":t=nw(0);break;case"ZZZZZ":t=nw(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=nw(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=nw(2);break;default:return null}return fS[n]=t,t}function lF(n,t){n=n.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function IQ(n,t){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+t),n}function SQ(n,t,e){let i=n.getTimezoneOffset(),o=lF(t,i);return IQ(n,-1*(o-i))}function TQ(n){if(Y3(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return ow(i,o-1,s)}let e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(vQ))return AQ(r)}let t=new Date(n);if(!Y3(t))throw new Error(`Unable to convert "${n}" into a date`);return t}function AQ(n){let t=new Date(0),e=0,r=0,i=n[8]?t.setUTCFullYear:t.setFullYear,o=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-e,a=Number(n[5]||0)-r,u=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(t,s,a,u,c),t}function Y3(n){return n instanceof Date&&!isNaN(n.valueOf())}var DQ=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Z3=22,sw=".",b0="0",PQ=";",MQ=",",pS="#";var kQ="%";function dF(n,t,e,r,i,o,s=!1){let a="",u=!1;if(!isFinite(n))a=Rs(e,si.Infinity);else{let c=RQ(n);s&&(c=OQ(c));let d=t.minInt,h=t.minFrac,p=t.maxFrac;if(o){let N=o.match(DQ);if(N===null)throw new Error(`${o} is not a valid digit info`);let F=N[1],R=N[3],j=N[5];F!=null&&(d=mS(F)),R!=null&&(h=mS(R)),j!=null?p=mS(j):R!=null&&h>p&&(p=h)}NQ(c,h,p);let m=c.digits,_=c.integerLen,C=c.exponent,x=[];for(u=m.every(N=>!N);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?x=m.splice(_,m.length):(x=m,m=[0]);let S=[];for(m.length>=t.lgSize&&S.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)S.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&S.unshift(m.join("")),a=S.join(Rs(e,r)),x.length&&(a+=Rs(e,i)+x.join("")),C&&(a+=Rs(e,si.Exponential)+"+"+C)}return n<0&&!u?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function hF(n,t,e){let r=yS(t,lw.Percent),i=pF(r,Rs(t,si.MinusSign));return dF(n,i,t,si.Group,si.Decimal,e,!0).replace(new RegExp(kQ,"g"),Rs(t,si.PercentSign))}function fF(n,t,e){let r=yS(t,lw.Decimal),i=pF(r,Rs(t,si.MinusSign));return dF(n,i,t,si.Group,si.Decimal,e)}function pF(n,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(PQ),i=r[0],o=r[1],s=i.indexOf(sw)!==-1?i.split(sw):[i.substring(0,i.lastIndexOf(b0)+1),i.substring(i.lastIndexOf(b0)+1)],a=s[0],u=s[1]||"";e.posPre=a.substring(0,a.indexOf(pS));for(let d=0;d<u.length;d++){let h=u.charAt(d);h===b0?e.minFrac=e.maxFrac=d+1:h===pS?e.maxFrac=d+1:e.posSuf+=h}let c=a.split(MQ);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){let d=i.length-e.posPre.length-e.posSuf.length,h=o.indexOf(pS);e.negPre=o.substring(0,h).replace(/'/g,""),e.negSuf=o.slice(h+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function OQ(n){if(n.digits[0]===0)return n;let t=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(t===0?n.digits.push(0,0):t===1&&n.digits.push(0),n.integerLen+=2),n}function RQ(n){let t=Math.abs(n)+"",e=0,r,i,o,s,a;for((i=t.indexOf(sw))>-1&&(t=t.replace(sw,"")),(o=t.search(/e/i))>0?(i<0&&(i=o),i+=+t.slice(o+1),t=t.substring(0,o)):i<0&&(i=t.length),o=0;t.charAt(o)===b0;o++);if(o===(a=t.length))r=[0],i=1;else{for(a--;t.charAt(a)===b0;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(t.charAt(o))}return i>Z3&&(r=r.splice(0,Z3-1),e=i-1,i=1),{digits:r,exponent:e,integerLen:i}}function NQ(n,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(t,i),e),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let h=s;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let h=1;h<s;h++)r[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,c=t+n.integerLen,d=r.reduceRight(function(h,p,m,_){return p=p+h,_[m]=p<10?p:p-10,u&&(_[m]===0&&m>=c?_.pop():u=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function mS(n){let t=parseInt(n);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+n);return t}var gS=/\s+/,Q3=[],Ca=(()=>{class n{_ngEl;_renderer;initialClasses=Q3;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(gS):Q3}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(gS):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(gS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(me(Vi),me(Ms))};static \u0275dir=sn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var aw=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dw=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new aw(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),X3(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);X3(o,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(me(El),me(ch),me(uS))};static \u0275dir=sn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function X3(n,t){n.context.$implicit=t.item}var yc=(()=>{class n{_viewContainer;_context=new uw;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){J3(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){J3(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(me(El),me(ch))};static \u0275dir=sn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),uw=class{$implicit=null;ngIf=null};function J3(n,t){if(n&&!n.createEmbeddedView)throw new Oe(2020,!1)}function hw(n,t){return new Oe(2100,!1)}var vS=class{createSubscription(t,e){return as(()=>t.subscribe({next:e,error:r=>{throw r}}))}dispose(t){as(()=>t.unsubscribe())}},_S=class{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}},FQ=new _S,LQ=new vS,w0=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(e){this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(Il(e))return FQ;if(tS(e))return LQ;throw hw(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(me(vc,16))};static \u0275pipe=d0({name:"async",type:n,pure:!1})}return n})();var VQ="mediumDate",mF=new $e(""),gF=new $e(""),bc=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(e,r,i){this.locale=e,this.defaultTimezone=r,this.defaultOptions=i}transform(e,r,i,o){if(e==null||e===""||e!==e)return null;try{let s=r??this.defaultOptions?.dateFormat??VQ,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return uF(e,s,o||this.locale,a)}catch(s){throw hw(n,s.message)}}static \u0275fac=function(r){return new(r||n)(me(Lp,16),me(mF,24),me(gF,24))};static \u0275pipe=d0({name:"date",type:n,pure:!0})}return n})();var gh=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!vF(e))return null;i||=this._locale;try{let o=_F(e);return fF(o,i,r)}catch(o){throw hw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(me(Lp,16))};static \u0275pipe=d0({name:"number",type:n,pure:!0})}return n})(),bS=(()=>{class n{_locale;constructor(e){this._locale=e}transform(e,r,i){if(!vF(e))return null;i||=this._locale;try{let o=_F(e);return hF(o,i,r)}catch(o){throw hw(n,o.message)}}static \u0275fac=function(r){return new(r||n)(me(Lp,16))};static \u0275pipe=d0({name:"percent",type:n,pure:!0})}return n})();function vF(n){return!(n==null||n===""||n!==n)}function _F(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var In=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({})}return n})();function C0(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,o]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var wS="browser",yF="server";function fw(n){return n===yF}var vh=class{};var bF=(()=>{class n{static \u0275prov=Ve({token:n,providedIn:"root",factory:()=>new CS(Se(gr),window)})}return n})(),CS=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=BQ(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function BQ(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}var gw=new $e(""),SS=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,o){return this._findPluginFor(r).addEventListener(e,r,i,o)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(o=>o.supports(e)),!r)throw new Oe(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(qe(gw),qe(tn))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),x0=class{_doc;constructor(t){this._doc=t}manager},pw="ng-app-id";function wF(n){for(let t of n)t.remove()}function CF(n,t){let e=t.createElement("style");return e.textContent=n,e}function UQ(n,t,e,r){let i=n.head?.querySelectorAll(`style[${pw}="${t}"],link[${pw}="${t}"]`);if(i)for(let o of i)o.removeAttribute(pw),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function ES(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var TS=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,r,i,o={}){this.doc=e,this.appId=r,this.nonce=i,this.isServer=fw(o),UQ(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,CF);r?.forEach(i=>this.addUsage(i,this.external,ES))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let o=r.get(e);o?o.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(wF(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])wF(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,CF(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,ES(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(pw,this.appId),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(qe(gr),qe(P6),qe(O6,8),qe(du))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),xS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},AS=/%COMP%/g;var EF="%COMP%",jQ=`_nghost-${EF}`,zQ=`_ngcontent-${EF}`,WQ=!0,HQ=new $e("",{providedIn:"root",factory:()=>WQ});function $Q(n){return zQ.replace(AS,n)}function qQ(n){return jQ.replace(AS,n)}function IF(n,t){return t.map(e=>e.replace(AS,n))}var S0=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,r,i,o,s,a,u,c=null,d=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.tracingService=d,this.platformIsServer=fw(a),this.defaultRenderer=new E0(e,s,u,this.platformIsServer,this.tracingService)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===au.ShadowDom&&(r=bt(Ie({},r),{encapsulation:au.Emulated}));let i=this.getOrCreateRenderer(e,r);return i instanceof mw?i.applyToHost(e):i instanceof I0&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer,p=this.tracingService;switch(r.encapsulation){case au.Emulated:o=new mw(u,c,r,this.appId,d,s,a,h,p);break;case au.ShadowDom:return new IS(u,c,e,r,s,a,this.nonce,h,p);default:o=new I0(u,c,r,d,s,a,h,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(qe(SS),qe(TS),qe(P6),qe(HQ),qe(gr),qe(du),qe(tn),qe(O6),qe(Fp,8))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),E0=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,o){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(xS[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(xF(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(xF(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Oe(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let o=xS[i];o?t.setAttributeNS(o,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=xS[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(hc.DashCase|hc.Important)?t.style.setProperty(e,r,i&hc.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&hc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=ks().getGlobalEventTarget(this.doc,t),!t))throw new Oe(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,e,o)),this.eventManager.addEventListener(t,e,o,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function xF(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var IS=class extends E0{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,o,s,a,u,c){super(t,o,s,u,c),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=i.styles;d=IF(i.id,d);for(let p of d){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=p,this.shadowRoot.appendChild(m)}let h=i.getExternalStyles?.();if(h)for(let p of h){let m=ES(p,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},I0=class extends E0{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,r,i,o,s,a,u,c){super(t,o,s,a,u),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i;let d=r.styles;this.styles=c?IF(c,d):d,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},mw=class extends I0{contentAttr;hostAttr;constructor(t,e,r,i,o,s,a,u,c){let d=i+"-"+r.id;super(t,e,r,o,s,a,u,c,d),this.contentAttr=$Q(d),this.hostAttr=qQ(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var vw=class n extends m0{supportsDOMEvents=!0;static makeCurrent(){cS(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=GQ();return e==null?null:KQ(e)}resetBaseElement(){T0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return C0(document.cookie,t)}},T0=null;function GQ(){return T0=T0||document.querySelector("base"),T0?T0.getAttribute("href"):null}function KQ(n){return new URL(n,document.baseURI).pathname}var YQ=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),TF=(()=>{class n extends x0{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,o){return e.addEventListener(r,i,o),()=>this.removeEventListener(e,r,i,o)}removeEventListener(e,r,i,o){return e.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(qe(gr))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),SF=["alt","control","meta","shift"],ZQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AF=(()=>{class n extends x0{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ks().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),SF.forEach(c=>{let d=r.indexOf(c);d>-1&&(r.splice(d,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(e,r){let i=ZQ[e.key]||e.key,o="";return r.indexOf("code.")>-1&&(i=e.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),SF.forEach(s=>{if(s!==i){let a=QQ[s];a(e)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(e,r,i){return o=>{n.matchEventFullKeyCode(o,e)&&i.runGuarded(()=>r(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(qe(gr))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function DS(n,t){return W3(Ie({rootComponent:n},XQ(t)))}function XQ(n){return{appProviders:[...rX,...n?.providers??[]],platformProviders:nX}}function JQ(){vw.makeCurrent()}function eX(){return new su}function tX(){return xN(document),document}var nX=[{provide:du,useValue:wS},{provide:M6,useValue:JQ,multi:!0},{provide:gr,useFactory:tX}];var rX=[{provide:Mb,useValue:"root"},{provide:su,useFactory:eX},{provide:gw,useClass:TF,multi:!0,deps:[gr]},{provide:gw,useClass:AF,multi:!0,deps:[gr]},S0,TS,SS,{provide:xl,useExisting:S0},{provide:vh,useClass:YQ},[]];var Bp=class{},A0=class{},Pl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let r=e.indexOf(":");if(r>0){let i=e.slice(0,r),o=e.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.addHeaderEntry(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...r),this.headers.set(e,i);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(t,e){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(e):this.headers.set(r,[e])}setHeaderEntries(t,e){let r=(Array.isArray(e)?e:[e]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var yw=class{encodeKey(t){return DF(t)}encodeValue(t){return DF(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function iX(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],u=e.get(s)||[];u.push(a),e.set(s,u)}),e}var oX=/%(\d[a-f0-9])/gi,sX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DF(n){return encodeURIComponent(n).replace(oX,(t,e)=>sX[e]??t)}function _w(n){return`${n}`}var wc=class n{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new yw,t.fromString){if(t.fromObject)throw new Oe(2805,!1);this.map=iX(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let r=t.fromObject[e],i=Array.isArray(r)?r.map(_w):[_w(r)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{e.push({param:r,value:o,op:"a"})}):e.push({param:r,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(_w(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(_w(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var bw=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function aX(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function PF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MF(n){return typeof Blob<"u"&&n instanceof Blob}function kF(n){return typeof FormData<"u"&&n instanceof FormData}function uX(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var OF="Content-Type",RF="Accept",FF="X-Request-URL",LF="text/plain",VF="application/json",cX=`${VF}, ${LF}, */*`,Vp=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,r,i){this.url=e,this.method=t.toUpperCase();let o;if(aX(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Pl,this.context??=new bw,!this.params)this.params=new wc,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),u=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||PF(this.body)||MF(this.body)||kF(this.body)||uX(this.body)?this.body:this.body instanceof wc?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||kF(this.body)?null:MF(this.body)?this.body.type||null:PF(this.body)?null:typeof this.body=="string"?LF:this.body instanceof wc?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?VF:null}clone(t={}){let e=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,u=t.reportProgress??this.reportProgress,c=t.headers||this.headers,d=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((p,m)=>p.set(m,t.setHeaders[m]),c)),t.setParams&&(d=Object.keys(t.setParams).reduce((p,m)=>p.set(m,t.setParams[m]),d)),new n(e,r,s,{params:d,headers:c,context:h,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},_h=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(_h||{}),Up=class{headers;status;statusText;url;ok;type;constructor(t,e=200,r="OK"){this.headers=t.headers||new Pl,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ww=class n extends Up{constructor(t={}){super(t)}type=_h.ResponseHeader;clone(t={}){return new n({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},D0=class n extends Up{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=_h.Response;clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},P0=class extends Up{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},lX=200,dX=204;function PS(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var jp=(()=>{class n{handler;constructor(e){this.handler=e}request(e,r,i={}){let o;if(e instanceof Vp)o=e;else{let u;i.headers instanceof Pl?u=i.headers:u=new Pl(i.headers);let c;i.params&&(i.params instanceof wc?c=i.params:c=new wc({fromObject:i.params})),o=new Vp(e,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=pt(o).pipe(eu(u=>this.handler.handle(u)));if(e instanceof Vp||i.observe==="events")return s;let a=s.pipe(ro(u=>u instanceof D0));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ct(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Oe(2806,!1);return u.body}));case"blob":return a.pipe(ct(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Oe(2807,!1);return u.body}));case"text":return a.pipe(ct(u=>{if(u.body!==null&&typeof u.body!="string")throw new Oe(2808,!1);return u.body}));case"json":default:return a.pipe(ct(u=>u.body))}case"response":return a;default:throw new Oe(2809,!1)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:new wc().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,i={}){return this.request("PATCH",e,PS(i,r))}post(e,r,i={}){return this.request("POST",e,PS(i,r))}put(e,r,i={}){return this.request("PUT",e,PS(i,r))}static \u0275fac=function(r){return new(r||n)(qe(Bp))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();var hX=new $e("");function BF(n,t){return t(n)}function fX(n,t){return(e,r)=>t.intercept(e,{handle:i=>n(i,r)})}function pX(n,t,e){return(r,i)=>oi(e,()=>t(r,o=>n(o,i)))}var UF=new $e(""),kS=new $e(""),jF=new $e(""),OS=new $e("",{providedIn:"root",factory:()=>!0});function mX(){let n=null;return(t,e)=>{n===null&&(n=(Se(UF,{optional:!0})??[]).reduceRight(fX,BF));let r=Se(lu);if(Se(OS)){let o=r.add();return n(t,e).pipe(tu(()=>r.remove(o)))}else return n(t,e)}}var Cw=(()=>{class n extends Bp{backend;injector;chain=null;pendingTasks=Se(lu);contributeToStability=Se(OS);constructor(e,r){super(),this.backend=e,this.injector=r}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(kS),...this.injector.get(jF,[])]));this.chain=r.reduceRight((i,o)=>pX(i,o,this.injector),BF)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(tu(()=>this.pendingTasks.remove(r)))}else return this.chain(e,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(qe(A0),qe(ni))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();var gX=/^\)\]\}',?\n/,vX=RegExp(`^${FF}:`,"m");function _X(n){return"responseURL"in n&&n.responseURL?n.responseURL:vX.test(n.getAllResponseHeaders())?n.getResponseHeader(FF):null}var MS=(()=>{class n{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Oe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?rt(r.\u0275loadImpl()):pt(null)).pipe(ti(()=>new Tt(o=>{let s=r.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((C,x)=>s.setRequestHeader(C,x.join(","))),e.headers.has(RF)||s.setRequestHeader(RF,cX),!e.headers.has(OF)){let C=e.detectContentTypeHeader();C!==null&&s.setRequestHeader(OF,C)}if(e.responseType){let C=e.responseType.toLowerCase();s.responseType=C!=="json"?C:"text"}let a=e.serializeBody(),u=null,c=()=>{if(u!==null)return u;let C=s.statusText||"OK",x=new Pl(s.getAllResponseHeaders()),S=_X(s)||e.url;return u=new ww({headers:x,status:s.status,statusText:C,url:S}),u},d=()=>{let{headers:C,status:x,statusText:S,url:N}=c(),F=null;x!==dX&&(F=typeof s.response>"u"?s.responseText:s.response),x===0&&(x=F?lX:0);let R=x>=200&&x<300;if(e.responseType==="json"&&typeof F=="string"){let j=F;F=F.replace(gX,"");try{F=F!==""?JSON.parse(F):null}catch(H){F=j,R&&(R=!1,F={error:H,text:F})}}R?(o.next(new D0({body:F,headers:C,status:x,statusText:S,url:N||void 0})),o.complete()):o.error(new P0({error:F,headers:C,status:x,statusText:S,url:N||void 0}))},h=C=>{let{url:x}=c(),S=new P0({error:C,status:s.status||0,statusText:s.statusText||"Unknown Error",url:x||void 0});o.error(S)},p=!1,m=C=>{p||(o.next(c()),p=!0);let x={type:_h.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),e.responseType==="text"&&s.responseText&&(x.partialText=s.responseText),o.next(x)},_=C=>{let x={type:_h.UploadProgress,loaded:C.loaded};C.lengthComputable&&(x.total=C.total),o.next(x)};return s.addEventListener("load",d),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),e.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",_)),s.send(a),o.next({type:_h.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",d),s.removeEventListener("timeout",h),e.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",_)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(qe(vh))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),zF=new $e(""),yX="XSRF-TOKEN",bX=new $e("",{providedIn:"root",factory:()=>yX}),wX="X-XSRF-TOKEN",CX=new $e("",{providedIn:"root",factory:()=>wX}),M0=class{},xX=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,r,i){this.doc=e,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=C0(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(r){return new(r||n)(qe(gr),qe(du),qe(bX))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function EX(n,t){let e=n.url.toLowerCase();if(!Se(zF)||n.method==="GET"||n.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(n);let r=Se(M0).getToken(),i=Se(CX);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),t(n)}var RS=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(RS||{});function IX(n,t){return{\u0275kind:n,\u0275providers:t}}function WF(...n){let t=[jp,MS,Cw,{provide:Bp,useExisting:Cw},{provide:A0,useFactory:()=>Se(hX,{optional:!0})??Se(MS)},{provide:kS,useValue:EX,multi:!0},{provide:zF,useValue:!0},{provide:M0,useClass:xX}];for(let e of n)t.push(...e.\u0275providers);return Po(t)}var NF=new $e("");function HF(){return IX(RS.LegacyInterceptors,[{provide:NF,useFactory:mX},{provide:kS,useExisting:NF,multi:!0}])}var NS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({providers:[WF(HF())]})}return n})();var xw=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(qe(gr))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vt="primary",H0=Symbol("RouteTitle"),US=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function wh(n){return new US(n)}function eL(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function SX(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!fu(n[e],t[e]))return!1;return!0}function fu(n,t){let e=n?jS(n):void 0,r=t?jS(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let o=0;o<e.length;o++)if(i=e[o],!tL(n[i],t[i]))return!1;return!0}function jS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tL(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,o)=>r[o]===i)}else return n===t}function nL(n){return n.length>0?n[n.length-1]:null}function Nl(n){return V2(n)?n:Il(n)?rt(Promise.resolve(n)):pt(n)}var TX={exact:iL,subset:oL},rL={exact:AX,subset:DX,ignored:()=>!0};function GF(n,t,e){return TX[e.paths](n.root,t.root,e.matrixParams)&&rL[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function AX(n,t){return fu(n,t)}function iL(n,t,e){if(!yh(n.segments,t.segments)||!Sw(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!iL(n.children[r],t.children[r],e))return!1;return!0}function DX(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>tL(n[e],t[e]))}function oL(n,t,e){return sL(n,t,t.segments,e)}function sL(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!yh(i,e)||t.hasChildren()||!Sw(i,e,r))}else if(n.segments.length===e.length){if(!yh(n.segments,e)||!Sw(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!oL(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!yh(n.segments,i)||!Sw(n.segments,i,r)||!n.children[Vt]?!1:sL(n.children[Vt],t,o,r)}}function Sw(n,t,e){return t.every((r,i)=>rL[e](n[i].parameters,r.parameters))}var mu=class{root;queryParams;fragment;_queryParamMap;constructor(t=new wn([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wh(this.queryParams),this._queryParamMap}toString(){return kX.serialize(this)}},wn=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Tw(this)}},Ml=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=wh(this.parameters),this._parameterMap}toString(){return uL(this)}};function PX(n,t){return yh(n,t)&&n.every((e,r)=>fu(e.parameters,t[r].parameters))}function yh(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function MX(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===Vt&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Vt&&(e=e.concat(t(i,r)))}),e}var Ch=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>new kl,providedIn:"root"})}return n})(),kl=class{parse(t){let e=new WS(t);return new mu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${k0(t.root,!0)}`,r=NX(t.queryParams),i=typeof t.fragment=="string"?`#${OX(t.fragment)}`:"";return`${e}${r}${i}`}},kX=new kl;function Tw(n){return n.segments.map(t=>uL(t)).join("/")}function k0(n,t){if(!n.hasChildren())return Tw(n);if(t){let e=n.children[Vt]?k0(n.children[Vt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Vt&&r.push(`${i}:${k0(o,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=MX(n,(r,i)=>i===Vt?[k0(n.children[Vt],!1)]:[`${i}:${k0(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Vt]!=null?`${Tw(n)}/${e[0]}`:`${Tw(n)}/(${e.join("//")})`}}function aL(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ew(n){return aL(n).replace(/%3B/gi,";")}function OX(n){return encodeURI(n)}function zS(n){return aL(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Aw(n){return decodeURIComponent(n)}function KF(n){return Aw(n.replace(/\+/g,"%20"))}function uL(n){return`${zS(n.path)}${RX(n.parameters)}`}function RX(n){return Object.entries(n).map(([t,e])=>`;${zS(t)}=${zS(e)}`).join("")}function NX(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Ew(e)}=${Ew(i)}`).join("&"):`${Ew(e)}=${Ew(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var FX=/^[^\/()?;#]+/;function FS(n){let t=n.match(FX);return t?t[0]:""}var LX=/^[^\/()?;=#]+/;function VX(n){let t=n.match(LX);return t?t[0]:""}var BX=/^[^=?&#]+/;function UX(n){let t=n.match(BX);return t?t[0]:""}var jX=/^[^&#]+/;function zX(n){let t=n.match(jX);return t?t[0]:""}var WS=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new wn([],{}):new wn([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Vt]=new wn(t,e)),r}parseSegment(){let t=FS(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Oe(4009,!1);return this.capture(t),new Ml(Aw(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=VX(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=FS(this.remaining);i&&(r=i,this.capture(r))}t[Aw(e)]=Aw(r)}parseQueryParam(t){let e=UX(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let s=zX(this.remaining);s&&(r=s,this.capture(r))}let i=KF(e),o=KF(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=FS(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Oe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Vt);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Vt]:new wn([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Oe(4011,!1)}};function cL(n){return n.segments.length>0?new wn([],{[Vt]:n}):n}function lL(n){let t={};for(let[r,i]of Object.entries(n.children)){let o=lL(i);if(r===Vt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let e=new wn(n.segments,t);return WX(e)}function WX(n){if(n.numberOfChildren===1&&n.children[Vt]){let t=n.children[Vt];return new wn(n.segments.concat(t.segments),t.children)}return n}function Ol(n){return n instanceof mu}function dL(n,t,e=null,r=null){let i=hL(n);return fL(i,t,e,r)}function hL(n){let t;function e(o){let s={};for(let u of o.children){let c=e(u);s[u.outlet]=c}let a=new wn(o.url,s);return o===n&&(t=a),a}let r=e(n.root),i=cL(r);return t??i}function fL(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return LS(i,i,i,e,r);let o=HX(t);if(o.toRoot())return LS(i,i,new wn([],{}),e,r);let s=$X(o,i,n),a=s.processChildren?R0(s.segmentGroup,s.index,o.commands):mL(s.segmentGroup,s.index,o.commands);return LS(i,s.segmentGroup,a,e,r)}function Pw(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function F0(n){return typeof n=="object"&&n!=null&&n.outlets}function LS(n,t,e,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;n===t?s=e:s=pL(n,t,e);let a=cL(lL(s));return new mu(a,o,i)}function pL(n,t,e){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===t?r[i]=e:r[i]=pL(o,t,e)}),new wn(n.segments,r)}var Mw=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&Pw(r[0]))throw new Oe(4003,!1);let i=r.find(F0);if(i&&i!==nL(r))throw new Oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function HX(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Mw(!0,0,n);let t=0,e=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Mw(e,t,r)}var Hp=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function $X(n,t,e){if(n.isAbsolute)return new Hp(t,!0,0);if(!e)return new Hp(t,!1,NaN);if(e.parent===null)return new Hp(e,!0,0);let r=Pw(n.commands[0])?0:1,i=e.segments.length-1+r;return qX(e,i,n.numberOfDoubleDots)}function qX(n,t,e){let r=n,i=t,o=e;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Oe(4005,!1);i=r.segments.length}return new Hp(r,!1,i-o)}function GX(n){return F0(n[0])?n[0].outlets:{[Vt]:n}}function mL(n,t,e){if(n??=new wn([],{}),n.segments.length===0&&n.hasChildren())return R0(n,t,e);let r=KX(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new wn(n.segments.slice(0,r.pathIndex),{});return o.children[Vt]=new wn(n.segments.slice(r.pathIndex),n.children),R0(o,0,i)}else return r.match&&i.length===0?new wn(n.segments,{}):r.match&&!n.hasChildren()?HS(n,t,e):r.match?R0(n,0,i):HS(n,t,e)}function R0(n,t,e){if(e.length===0)return new wn(n.segments,{});{let r=GX(e),i={};if(Object.keys(r).some(o=>o!==Vt)&&n.children[Vt]&&n.numberOfChildren===1&&n.children[Vt].segments.length===0){let o=R0(n.children[Vt],t,e);return new wn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=mL(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new wn(n.segments,i)}}function KX(n,t,e){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return o;let s=n.segments[i],a=e[r];if(F0(a))break;let u=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!ZF(u,c,s))return o;r+=2}else{if(!ZF(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function HS(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let o=e[i];if(F0(o)){let u=YX(o.outlets);return new wn(r,u)}if(i===0&&Pw(e[0])){let u=n.segments[t];r.push(new Ml(u.path,YF(e[0]))),i++;continue}let s=F0(o)?o.outlets[Vt]:`${o}`,a=i<e.length-1?e[i+1]:null;s&&a&&Pw(a)?(r.push(new Ml(s,YF(a))),i+=2):(r.push(new Ml(s,{})),i++)}return new wn(r,{})}function YX(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=HS(new wn([],{}),0,r))}),t}function YF(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function ZF(n,t,e){return n==e.path&&fu(t,e.parameters)}var Dw="imperative",Zr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Zr||{}),cs=class{id;url;constructor(t,e){this.id=t,this.url=e}},Rl=class extends cs{type=Zr.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ls=class extends cs{urlAfterRedirects;type=Zr.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ko=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ko||{}),qp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(qp||{}),pu=class extends cs{reason;code;type=Zr.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},gu=class extends cs{reason;code;type=Zr.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Gp=class extends cs{error;target;type=Zr.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},L0=class extends cs{urlAfterRedirects;state;type=Zr.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kw=class extends cs{urlAfterRedirects;state;type=Zr.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ow=class extends cs{urlAfterRedirects;state;shouldActivate;type=Zr.GuardsCheckEnd;constructor(t,e,r,i,o){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rw=class extends cs{urlAfterRedirects;state;type=Zr.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nw=class extends cs{urlAfterRedirects;state;type=Zr.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fw=class{route;type=Zr.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lw=class{route;type=Zr.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vw=class{snapshot;type=Zr.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bw=class{snapshot;type=Zr.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uw=class{snapshot;type=Zr.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jw=class{snapshot;type=Zr.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kp=class{routerEvent;position;anchor;type=Zr.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},V0=class{},Yp=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function ZX(n,t){return n.providers&&!n._injector&&(n._injector=l0(n.providers,t,`Route: ${n.path}`)),n._injector??t}function xa(n){return n.outlet||Vt}function QX(n,t){let e=n.filter(r=>xa(r)===t);return e.push(...n.filter(r=>xa(r)!==t)),e}function $0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var zw=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return $0(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new xh(this.rootInjector)}},xh=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new zw(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(qe(ni))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ww=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=$S(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=$S(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=qS(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return qS(t,this._root).map(e=>e.value)}};function $S(n,t){if(n===t.value)return t;for(let e of t.children){let r=$S(n,e);if(r)return r}return null}function qS(n,t){if(n===t.value)return[t];for(let e of t.children){let r=qS(n,e);if(r.length)return r.unshift(t),r}return[]}var us=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Wp(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var B0=class extends Ww{snapshot;constructor(t,e){super(t),this.snapshot=e,eT(this,t)}toString(){return this.snapshot.toString()}};function gL(n){let t=XX(n),e=new vi([new Ml("",{})]),r=new vi({}),i=new vi({}),o=new vi({}),s=new vi(""),a=new Fs(e,r,o,s,i,Vt,n,t.root);return a.snapshot=t.root,new B0(new us(a,[]),t)}function XX(n){let t={},e={},r={},i="",o=new bh([],t,r,i,e,Vt,n,null,{});return new U0("",new us(o,[]))}var Fs=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,o,s,a,u){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ct(c=>c[H0]))??pt(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ct(t=>wh(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ct(t=>wh(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hw(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:Ie(Ie({},t.params),n.params),data:Ie(Ie({},t.data),n.data),resolve:Ie(Ie(Ie(Ie({},n.data),t.data),i?.data),n._resolvedData)}:r={params:Ie({},n.params),data:Ie({},n.data),resolve:Ie(Ie({},n.data),n._resolvedData??{})},i&&_L(i)&&(r.resolve[H0]=i.title),r}var bh=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[H0]}constructor(t,e,r,i,o,s,a,u,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wh(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wh(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},U0=class extends Ww{url;constructor(t,e){super(e),this.url=t,eT(this,e)}toString(){return vL(this._root)}};function eT(n,t){t.value._routerState=n,t.children.forEach(e=>eT(n,e))}function vL(n){let t=n.children.length>0?` { ${n.children.map(vL).join(", ")} } `:"";return`${n.value}${t}`}function VS(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,fu(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),fu(t.params,e.params)||n.paramsSubject.next(e.params),SX(t.url,e.url)||n.urlSubject.next(e.url),fu(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function GS(n,t){let e=fu(n.params,t.params)&&PX(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||GS(n.parent,t.parent))}function _L(n){return typeof n.title=="string"||n.title===null}var yL=new $e(""),Eh=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Vt;activateEvents=new pr;deactivateEvents=new pr;attachEvents=new pr;detachEvents=new pr;routerOutletData=mN(void 0);parentContexts=Se(xh);location=Se(El);changeDetector=Se(vc);inputBinder=Se(q0,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Oe(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Oe(4013,!1);this._activatedRoute=e;let i=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new KS(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=sn({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ya]})}return n})(),KS=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Fs?this.route:t===xh?this.childContexts:t===yL?this.outletData:this.parent.get(t,e)}},q0=new $e(""),tT=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=jg([r.queryParams,r.params,r.data]).pipe(ti(([o,s,a],u)=>(a=Ie(Ie(Ie({},o),s),a),u===0?pt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let s=H3(r.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function JX(n,t,e){let r=j0(n,t._root,e?e._root:void 0);return new B0(r,t)}function j0(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=eJ(n,t,e);return new us(r,i)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>j0(n,a)),s}}let r=tJ(t.value),i=t.children.map(o=>j0(n,o));return new us(r,i)}}function eJ(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return j0(n,r,i);return j0(n,r)})}function tJ(n){return new Fs(new vi(n.url),new vi(n.params),new vi(n.queryParams),new vi(n.fragment),new vi(n.data),n.outlet,n.component,n)}var Zp=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},bL="ngNavigationCancelingError";function $w(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=Ol(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=wL(!1,ko.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function wL(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[bL]=!0,e.cancellationCode=t,e}function nJ(n){return CL(n)&&Ol(n.url)}function CL(n){return!!n&&n[bL]}var rJ=(n,t,e,r)=>ct(i=>(new YS(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),YS=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),VS(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=Wp(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,r);else o&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Wp(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,o=Wp(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=Wp(e);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jw(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Bw(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,o=e?e.value:null;if(VS(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),VS(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},qw=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$p=class{component;route;constructor(t,e){this.component=t,this.route=e}};function iJ(n,t,e){let r=n._root,i=t?t._root:null;return O0(r,i,e,[r.value])}function oJ(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Xp(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!dR(n)?n:t.get(n):r}function O0(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Wp(t);return n.children.forEach(s=>{sJ(s,o[s.value.outlet],e,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>N0(a,e.getContext(s),i)),i}function sJ(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=aJ(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new qw(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?O0(n,t,a?a.children:null,r,i):O0(n,t,e,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $p(a.outlet.component,s))}else s&&N0(t,a,i),i.canActivateChecks.push(new qw(r)),o.component?O0(n,null,a?a.children:null,r,i):O0(n,null,e,r,i);return i}function aJ(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!yh(n.url,t.url);case"pathParamsOrQueryParamsChange":return!yh(n.url,t.url)||!fu(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!GS(n,t)||!fu(n.queryParams,t.queryParams);case"paramsChange":default:return!GS(n,t)}}function N0(n,t,e){let r=Wp(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?t?N0(s,t.children.getContext(o),e):N0(s,null,e):N0(s,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new $p(t.outlet.component,i)):e.canDeactivateChecks.push(new $p(null,i)):e.canDeactivateChecks.push(new $p(null,i))}function G0(n){return typeof n=="function"}function uJ(n){return typeof n=="boolean"}function cJ(n){return n&&G0(n.canLoad)}function lJ(n){return n&&G0(n.canActivate)}function dJ(n){return n&&G0(n.canActivateChild)}function hJ(n){return n&&G0(n.canDeactivate)}function fJ(n){return n&&G0(n.canMatch)}function xL(n){return n instanceof oc||n?.name==="EmptyError"}var Iw=Symbol("INITIAL_VALUE");function Qp(){return ti(n=>jg(n.map(t=>t.pipe(ac(1),z2(Iw)))).pipe(ct(t=>{for(let e of t)if(e!==!0){if(e===Iw)return Iw;if(e===!1||pJ(e))return e}return!0}),ro(t=>t!==Iw),ac(1)))}function pJ(n){return Ol(n)||n instanceof Zp}function mJ(n,t){return Ir(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?pt(bt(Ie({},e),{guardsResult:!0})):gJ(s,r,i,n).pipe(Ir(a=>a&&uJ(a)?vJ(r,o,n,t):pt(a)),ct(a=>bt(Ie({},e),{guardsResult:a})))})}function gJ(n,t,e,r){return rt(n).pipe(Ir(i=>CJ(i.component,i.route,e,t,r)),uc(i=>i!==!0,!0))}function vJ(n,t,e,r){return rt(t).pipe(eu(i=>mp(yJ(i.route.parent,r),_J(i.route,r),wJ(n,i.path,e),bJ(n,i.route,e))),uc(i=>i!==!0,!0))}function _J(n,t){return n!==null&&t&&t(new Uw(n)),pt(!0)}function yJ(n,t){return n!==null&&t&&t(new Vw(n)),pt(!0)}function bJ(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return pt(!0);let i=r.map(o=>Gy(()=>{let s=$0(t)??e,a=Xp(o,s),u=lJ(a)?a.canActivate(t,n):oi(s,()=>a(t,n));return Nl(u).pipe(uc())}));return pt(i).pipe(Qp())}function wJ(n,t,e){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>oJ(s)).filter(s=>s!==null).map(s=>Gy(()=>{let a=s.guards.map(u=>{let c=$0(s.node)??e,d=Xp(u,c),h=dJ(d)?d.canActivateChild(r,n):oi(c,()=>d(r,n));return Nl(h).pipe(uc())});return pt(a).pipe(Qp())}));return pt(o).pipe(Qp())}function CJ(n,t,e,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return pt(!0);let s=o.map(a=>{let u=$0(t)??i,c=Xp(a,u),d=hJ(c)?c.canDeactivate(n,t,e,r):oi(u,()=>c(n,t,e,r));return Nl(d).pipe(uc())});return pt(s).pipe(Qp())}function xJ(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return pt(!0);let o=i.map(s=>{let a=Xp(s,n),u=cJ(a)?a.canLoad(t,e):oi(n,()=>a(t,e));return Nl(u)});return pt(o).pipe(Qp(),EL(r))}function EL(n){return P2(_i(t=>{if(typeof t!="boolean")throw $w(n,t)}),ct(t=>t===!0))}function EJ(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return pt(!0);let o=i.map(s=>{let a=Xp(s,n),u=fJ(a)?a.canMatch(t,e):oi(n,()=>a(t,e));return Nl(u)});return pt(o).pipe(Qp(),EL(r))}var z0=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},W0=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function zp(n){return pp(new z0(n))}function IJ(n){return pp(new Oe(4e3,!1))}function SJ(n){return pp(wL(!1,ko.GuardRejected))}var ZS=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pt(r);if(i.numberOfChildren>1||!i.children[Vt])return IJ(`${t.redirectTo}`);i=i.children[Vt]}}applyRedirectCommands(t,e,r,i,o){if(typeof e!="string"){let a=e,{queryParams:u,fragment:c,routeConfig:d,url:h,outlet:p,params:m,data:_,title:C}=i,x=oi(o,()=>a({params:m,data:_,queryParams:u,fragment:c,routeConfig:d,url:h,outlet:p,title:C}));if(x instanceof mu)throw new W0(x);e=x}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,r);if(e[0]==="/")throw new W0(s);return s}applyRedirectCreateUrlTree(t,e,r,i){let o=this.createSegmentGroup(t,e.root,r,i);return new mu(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=e[a]}else r[i]=o}),r}createSegmentGroup(t,e,r,i){let o=this.createSegments(t,e.segments,r,i),s={};return Object.entries(e.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(t,u,r,i)}),new wn(o,s)}createSegments(t,e,r,i){return e.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new Oe(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}},QS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function TJ(n,t,e,r,i){let o=IL(n,t,e);return o.matched?(r=ZX(t,r),EJ(r,t,e,i).pipe(ct(s=>s===!0?o:Ie({},QS)))):pt(o)}function IL(n,t,e){if(t.path==="**")return AJ(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?Ie({},QS):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||eL)(e,n,t);if(!i)return Ie({},QS);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?Ie(Ie({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AJ(n){return{matched:!0,parameters:n.length>0?nL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function QF(n,t,e,r){return e.length>0&&MJ(n,e,r)?{segmentGroup:new wn(t,PJ(r,new wn(e,n.children))),slicedSegments:[]}:e.length===0&&kJ(n,e,r)?{segmentGroup:new wn(n.segments,DJ(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new wn(n.segments,n.children),slicedSegments:e}}function DJ(n,t,e,r){let i={};for(let o of e)if(Kw(n,t,o)&&!r[xa(o)]){let s=new wn([],{});i[xa(o)]=s}return Ie(Ie({},r),i)}function PJ(n,t){let e={};e[Vt]=t;for(let r of n)if(r.path===""&&xa(r)!==Vt){let i=new wn([],{});e[xa(r)]=i}return e}function MJ(n,t,e){return e.some(r=>Kw(n,t,r)&&xa(r)!==Vt)}function kJ(n,t,e){return e.some(r=>Kw(n,t,r))}function Kw(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function OJ(n,t,e){return t.length===0&&!n.children[e]}var XS=class{};function RJ(n,t,e,r,i,o,s="emptyOnly"){return new JS(n,t,e,r,i,s,o).recognize()}var NJ=31,JS=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ZS(this.urlSerializer,this.urlTree)}noMatchError(t){return new Oe(4002,`'${t.segmentGroup}'`)}recognize(){let t=QF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ct(({children:e,rootSnapshot:r})=>{let i=new us(r,e),o=new U0("",i),s=dL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(t){let e=new bh([],Object.freeze({}),Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Vt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Vt,e).pipe(ct(r=>({children:r,rootSnapshot:e})),sc(r=>{if(r instanceof W0)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof z0?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,o):this.processSegment(t,e,r,r.segments,i,!0,o).pipe(ct(s=>s instanceof us?[s]:[]))}processChildren(t,e,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return rt(o).pipe(eu(s=>{let a=r.children[s],u=QX(e,s);return this.processSegmentGroup(t,u,a,s,i)}),j2((s,a)=>(s.push(...a),s)),bl(null),U2(),Ir(s=>{if(s===null)return zp(r);let a=SL(s);return FJ(a),pt(a)}))}processSegment(t,e,r,i,o,s,a){return rt(e).pipe(eu(u=>this.processSegmentAgainstRoute(u._injector??t,e,u,r,i,o,s,a).pipe(sc(c=>{if(c instanceof z0)return pt(null);throw c}))),uc(u=>!!u),sc(u=>{if(xL(u))return OJ(r,i,o)?pt(new XS):zp(r);throw u}))}processSegmentAgainstRoute(t,e,r,i,o,s,a,u){return xa(r)!==s&&(s===Vt||!Kw(i,o,r))?zp(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,o,s,u):zp(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,o,s,a){let{matched:u,parameters:c,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=IL(e,i,o);if(!u)return zp(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NJ&&(this.allowRedirects=!1));let m=new bh(o,c,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,XF(i),xa(i),i.component??i._loadedComponent??null,i,JF(i)),_=Hw(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let C=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,t);return this.applyRedirects.lineralizeSegments(i,C).pipe(Ir(x=>this.processSegment(t,r,e,x.concat(p),s,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,o,s){let a=TJ(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(ti(u=>u.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(ti(({routes:c})=>{let d=r._loadedInjector??t,{parameters:h,consumedSegments:p,remainingSegments:m}=u,_=new bh(p,h,Object.freeze(Ie({},this.urlTree.queryParams)),this.urlTree.fragment,XF(r),xa(r),r.component??r._loadedComponent??null,r,JF(r)),C=Hw(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(C.params),_.data=Object.freeze(C.data);let{segmentGroup:x,slicedSegments:S}=QF(e,p,m,c);if(S.length===0&&x.hasChildren())return this.processChildren(d,c,x,_).pipe(ct(F=>new us(_,F)));if(c.length===0&&S.length===0)return pt(new us(_,[]));let N=xa(r)===o;return this.processSegment(d,c,x,S,N?Vt:o,!0,_).pipe(ct(F=>new us(_,F instanceof us?[F]:[])))}))):zp(e)))}getChildConfig(t,e,r){return e.children?pt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?pt({routes:e._loadedRoutes,injector:e._loadedInjector}):xJ(t,e,r,this.urlSerializer).pipe(Ir(i=>i?this.configLoader.loadChildren(t,e).pipe(_i(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):SJ(e))):pt({routes:[],injector:t})}};function FJ(n){n.sort((t,e)=>t.value.outlet===Vt?-1:e.value.outlet===Vt?1:t.value.outlet.localeCompare(e.value.outlet))}function LJ(n){let t=n.value.routeConfig;return t&&t.path===""}function SL(n){let t=[],e=new Set;for(let r of n){if(!LJ(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=SL(r.children);t.push(new us(r.value,i))}return t.filter(r=>!e.has(r))}function XF(n){return n.data||{}}function JF(n){return n.resolve||{}}function VJ(n,t,e,r,i,o){return Ir(s=>RJ(n,t,e,r,s.extractedUrl,i,o).pipe(ct(({state:a,tree:u})=>bt(Ie({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function BJ(n,t){return Ir(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return pt(e);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of TL(u))s.add(c);let a=0;return rt(s).pipe(eu(u=>o.has(u)?UJ(u,r,n,t):(u.data=Hw(u,u.parent,n).resolve,pt(void 0))),_i(()=>a++),gp(1),Ir(u=>a===s.size?pt(e):Io))})}function TL(n){let t=n.children.map(e=>TL(e)).flat();return[n,...t]}function UJ(n,t,e,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!_L(i)&&(o[H0]=i.title),jJ(o,n,t,r).pipe(ct(s=>(n._resolvedData=s,n.data=Hw(n,n.parent,e).resolve,null)))}function jJ(n,t,e,r){let i=jS(n);if(i.length===0)return pt({});let o={};return rt(i).pipe(Ir(s=>zJ(n[s],t,e,r).pipe(uc(),_i(a=>{if(a instanceof Zp)throw $w(new kl,a);o[s]=a}))),gp(1),ct(()=>o),sc(s=>xL(s)?Io:pp(s)))}function zJ(n,t,e,r){let i=$0(t)??r,o=Xp(n,i),s=o.resolve?o.resolve(t,e):oi(i,()=>o(t,e));return Nl(s)}function BS(n){return ti(t=>{let e=n(t);return e?rt(e).pipe(ct(()=>t)):pt(t)})}var nT=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Vt);return r}getResolvedTitleForRoute(e){return e.data[H0]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(AL),providedIn:"root"})}return n})(),AL=(()=>{class n extends nT{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(qe(xw))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ih=new $e("",{providedIn:"root",factory:()=>({})}),rT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=_t({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&G(0,"router-outlet")},dependencies:[Eh],encapsulation:2})}return n})();function iT(n){let t=n.children&&n.children.map(iT),e=t?bt(Ie({},n),{children:t}):Ie({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Vt&&(e.component=rT),e}var Sh=new $e(""),Yw=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Se(Zb);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return pt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let r=Nl(e.loadComponent()).pipe(ct(PL),_i(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),tu(()=>{this.componentLoaders.delete(e)})),i=new lp(r,()=>new Er).pipe(cp());return this.componentLoaders.set(e,i),i}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DL(r,this.compiler,e,this.onLoadEndListener).pipe(tu(()=>{this.childrenLoaders.delete(r)})),s=new lp(o,()=>new Er).pipe(cp());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function DL(n,t,e,r){return Nl(n.loadChildren()).pipe(ct(PL),Ir(i=>i instanceof J6||Array.isArray(i)?pt(i):rt(t.compileModuleAsync(i))),ct(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(e).injector,s=o.get(Sh,[],{optional:!0,self:!0}).flat()),{routes:s.map(iT),injector:o}}))}function WJ(n){return n&&typeof n=="object"&&"default"in n}function PL(n){return WJ(n)?n.default:n}var Zw=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(HJ),providedIn:"root"})}return n})(),HJ=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oT=new $e(""),sT=new $e("");function ML(n,t,e){let r=n.get(sT),i=n.get(gr);return n.get(tn).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),$J(n))),{onViewTransitionCreated:u}=r;return u&&oi(n,()=>u({transition:a,from:t,to:e})),s})}function $J(n){return new Promise(t=>{N6({read:()=>setTimeout(t)},{injector:n})})}var aT=new $e(""),Qw=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Er;transitionAbortSubject=new Er;configLoader=Se(Yw);environmentInjector=Se(ni);destroyRef=Se(Rp);urlSerializer=Se(Ch);rootContexts=Se(xh);location=Se(Al);inputBindingEnabled=Se(q0,{optional:!0})!==null;titleStrategy=Se(nT);options=Se(Ih,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Se(Zw);createViewTransition=Se(oT,{optional:!0});navigationErrorHandler=Se(aT,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pt(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new Fw(i)),r=i=>this.events.next(new Lw(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;this.transitions?.next(bt(Ie({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(e){return this.transitions=new vi(null),this.transitions.pipe(ro(r=>r!==null),ti(r=>{let i=!1,o=!1;return pt(r).pipe(ti(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ko.SupersededByNewNavigation),Io;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?bt(Ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&u!=="reload"){let c="";return this.events.next(new gu(s.id,this.urlSerializer.serialize(s.rawUrl),c,qp.IgnoredSameUrlNavigation)),s.resolve(!1),Io}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return pt(s).pipe(ti(c=>(this.events.next(new Rl(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?Io:Promise.resolve(c))),VJ(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),_i(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=bt(Ie({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let d=new L0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:d,source:h,restoredState:p,extras:m}=s,_=new Rl(c,this.urlSerializer.serialize(d),h,p);this.events.next(_);let C=gL(this.rootComponentType).snapshot;return this.currentTransition=r=bt(Ie({},s),{targetSnapshot:C,urlAfterRedirects:d,extras:bt(Ie({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,pt(r)}else{let c="";return this.events.next(new gu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,qp.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Io}}),_i(s=>{let a=new kw(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ct(s=>(this.currentTransition=r=bt(Ie({},s),{guards:iJ(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),mJ(this.environmentInjector,s=>this.events.next(s)),_i(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw $w(this.urlSerializer,s.guardsResult);let a=new Ow(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),ro(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",ko.GuardRejected),!1)),BS(s=>{if(s.guards.canActivateChecks.length!==0)return pt(s).pipe(_i(a=>{let u=new Rw(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),ti(a=>{let u=!1;return pt(a).pipe(BJ(this.paramsInheritanceStrategy,this.environmentInjector),_i({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",ko.NoDataFromResolver)}}))}),_i(a=>{let u=new Nw(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),BS(s=>{let a=u=>{let c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(_i(d=>{u.component=d}),ct(()=>{})));for(let d of u.children)c.push(...a(d));return c};return jg(a(s.targetSnapshot.root)).pipe(bl(null),ac(1))}),BS(()=>this.afterPreactivation()),ti(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?rt(u).pipe(ct(()=>r)):pt(r)}),ct(s=>{let a=JX(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=bt(Ie({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),_i(()=>{this.events.next(new V0)}),rJ(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ac(1),_i({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ls(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),W2(this.transitionAbortSubject.pipe(_i(s=>{throw s}))),tu(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",ko.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),sc(s=>{if(this.destroyed)return r.resolve(!1),Io;if(o=!0,CL(s))this.events.next(new pu(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),nJ(s)?this.events.next(new Yp(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Gp(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=oi(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Zp){let{message:c,cancellationCode:d}=$w(this.urlSerializer,u);this.events.next(new pu(r.id,this.urlSerializer.serialize(r.extractedUrl),c,d)),this.events.next(new Yp(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Io}))}))}cancelNavigationTransition(e,r,i){let o=new pu(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qJ(n){return n!==Dw}var kL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(GJ),providedIn:"root"})}return n})(),Gw=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},GJ=(()=>{class n extends Gw{static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OL=(()=>{class n{urlSerializer=Se(Ch);options=Se(Ih,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Se(Al);urlHandlingStrategy=Se(Zw);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mu;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,s=i??o;return s instanceof mu?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=gL(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:()=>Se(KJ),providedIn:"root"})}return n})(),KJ=(()=>{class n extends OL{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof Rl?this.updateStateMemento():e instanceof gu?this.commitTransition(r):e instanceof L0?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof V0?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof pu&&(e.code===ko.GuardRejected||e.code===ko.NoDataFromResolver)?this.restoreHistory(r):e instanceof Gp?this.restoreHistory(r,!0):e instanceof ls&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,u=Ie(Ie({},s),this.generateNgRouterState(i,a));this.location.replaceState(e,"",u)}else{let a=Ie(Ie({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xw(n,t){n.events.pipe(ro(e=>e instanceof ls||e instanceof pu||e instanceof Gp||e instanceof gu),ct(e=>e instanceof ls||e instanceof gu?0:(e instanceof pu?e.code===ko.Redirect||e.code===ko.SupersededByNewNavigation:!1)?2:1),ro(e=>e!==2),ac(1)).subscribe(()=>{t()})}var YJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ar=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Se(y3);stateManager=Se(OL);options=Se(Ih,{optional:!0})||{};pendingTasks=Se(lu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Se(Qw);urlSerializer=Se(Ch);location=Se(Al);urlHandlingStrategy=Se(Zw);_events=new Er;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Se(kL);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Se(Sh,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Se(q0,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new fr;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof pu&&r.code!==ko.Redirect&&r.code!==ko.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ls)this.navigated=!0;else if(r instanceof Yp){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=Ie({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qJ(i.source)},s);this.scheduleNavigation(a,Dw,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}XJ(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Dw,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=Ie({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(iT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=Ie(Ie({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=i?i.snapshot:this.routerState.snapshot.root;h=hL(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),h=this.currentUrlTree.root}return fL(h,e,d,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=Ol(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Dw,null,r)}navigate(e,r={skipLocationChange:!1}){return QJ(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=Ie({},YJ):r===!1?i=Ie({},ZJ):i=r,Ol(e))return GF(this.currentUrlTree,e,i);let o=this.parseUrl(e);return GF(this.currentUrlTree,o,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(e,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c;s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((h,p)=>{a=h,u=p});let d=this.pendingTasks.add();return Xw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QJ(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Oe(4008,!1)}function XJ(n){return!(n instanceof V0)&&!(n instanceof Yp)}var $n=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Er;constructor(e,r,i,o,s,a){this.router=e,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof ls&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ol(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let r=this.href===null?null:MN(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(e,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,e,r):i.removeAttribute(o,e)}get urlTree(){return this.routerLinkInput===null?null:Ol(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(me(Ar),me(Fs),S6("tabindex"),me(Ms),me(Vi),me(Os))};static \u0275dir=sn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&je("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&mc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Tl],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Tl],replaceUrl:[2,"replaceUrl","replaceUrl",Tl],routerLink:"routerLink"},features:[ya]})}return n})(),cT=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new pr;constructor(e,r,i,o,s){this.router=e,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=e.events.subscribe(a=>{a instanceof ls&&this.update()})}ngAfterContentInit(){pt(this.links.changes,pt(null)).pipe(yl()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=rt(e).pipe(yl()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(e){let r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let r=JJ(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?e.isActive(o,r):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static \u0275fac=function(r){return new(r||n)(me(Ar),me(Vi),me(Ms),me(vc),me($n,8))};static \u0275dir=sn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&k3(o,$n,5),r&2){let s;O3(s=R3())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ya]})}return n})();function JJ(n){return!!n.paths}var K0=class{};var RL=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,o,s){this.router=e,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ro(e=>e instanceof ls),eu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=l0(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return rt(i).pipe(yl())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=pt(null);let o=i.pipe(Ir(s=>s===null?pt(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return rt([o,s]).pipe(yl())}else return o})}static \u0275fac=function(r){return new(r||n)(qe(Ar),qe(Zb),qe(ni),qe(K0),qe(Yw))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NL=new $e(""),eee=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(e,r,i,o,s={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Rl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ls?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof gu&&e.code===qp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Kp&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kp(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){a3()};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function Y0(n,...t){return Po([{provide:Sh,multi:!0,useValue:n},[],{provide:Fs,useFactory:FL,deps:[Ar]},{provide:Hb,multi:!0,useFactory:LL},t.map(e=>e.\u0275providers)])}function FL(n){return n.routerState.root}function Jp(n,t){return{\u0275kind:n,\u0275providers:t}}function LL(){let n=Se(rr);return t=>{let e=n.get(lh);if(t!==e.components[0])return;let r=n.get(Ar),i=n.get(VL);n.get(lT)===1&&r.initialNavigation(),n.get(jL,null,qt.Optional)?.setUpPreloading(),n.get(NL,null,qt.Optional)?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var VL=new $e("",{factory:()=>new Er}),lT=new $e("",{providedIn:"root",factory:()=>1});function BL(){let n=[{provide:lT,useValue:0},nS(()=>{let t=Se(rr);return t.get(lS,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(Ar),o=t.get(VL);Xw(i,()=>{r(!0)}),t.get(Qw).afterPreactivation=()=>(r(!0),o.closed?pt(void 0):o),i.initialNavigation()}))})];return Jp(2,n)}function UL(){let n=[nS(()=>{Se(Ar).setUpLocationChangeListener()}),{provide:lT,useValue:2}];return Jp(3,n)}var jL=new $e("");function zL(n){return Jp(0,[{provide:jL,useExisting:RL},{provide:K0,useExisting:n}])}function dT(){return Jp(6,[{provide:Os,useClass:cw}])}function WL(){return Jp(8,[tT,{provide:q0,useExisting:tT}])}function HL(n){hu("NgRouterViewTransitions");let t=[{provide:oT,useValue:ML},{provide:sT,useValue:Ie({skipNextTransition:!!n?.skipInitialTransition},n)}];return Jp(9,t)}var $L=[Al,{provide:Ch,useClass:kl},Ar,xh,{provide:Fs,useFactory:FL,deps:[Ar]},Yw,[]],hT=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[$L,[],{provide:Sh,multi:!0,useValue:e},[],r?.errorHandler?{provide:aT,useValue:r.errorHandler}:[],{provide:Ih,useValue:r||{}},r?.useHash?nee():ree(),tee(),r?.preloadingStrategy?zL(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?iee(r):[],r?.bindToComponentInputs?WL().\u0275providers:[],r?.enableViewTransitions?HL().\u0275providers:[],oee()]}}static forChild(e){return{ngModule:n,providers:[{provide:Sh,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({})}return n})();function tee(){return{provide:NL,useFactory:()=>{let n=Se(bF),t=Se(tn),e=Se(Ih),r=Se(Qw),i=Se(Ch);return e.scrollOffset&&n.setOffset(e.scrollOffset),new eee(i,r,n,t,e)}}}function nee(){return{provide:Os,useClass:cw}}function ree(){return{provide:Os,useClass:Jb}}function iee(n){return[n.initialNavigation==="disabled"?UL().\u0275providers:[],n.initialNavigation==="enabledBlocking"?BL().\u0275providers:[]]}var uT=new $e("");function oee(){return[{provide:uT,useFactory:LL},{provide:Hb,multi:!0,useExisting:uT}]}var Pt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(Pt||{}),Ls="*";function fT(n,t){return{type:Pt.Trigger,name:n,definitions:t,options:{}}}function pT(n,t=null){return{type:Pt.Animate,styles:t,timings:n}}function qL(n,t=null){return{type:Pt.Sequence,steps:n,options:t}}function em(n){return{type:Pt.Style,styles:n,offset:null}}function mT(n,t,e){return{type:Pt.State,name:n,styles:t,options:e}}function gT(n,t,e=null){return{type:Pt.Transition,expr:n,animation:t,options:e}}var vu=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(t=0,e=0){this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Th=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(t){this.players=t;let e=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},tm="!";var N7=ha(_T());var GL=()=>{};var bT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var Ne=function(n,t){if(!n)throw Ah(t)},Ah=function(n){return new Error("Firebase Database ("+bT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};var YL=function(n){let t=[],e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},see=function(n){let t=[],e=0,r=0;for(;e<n.length;){let i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[e++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[e++],s=n[e++],a=n[e++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[e++],s=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},im={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0,d=o>>2,h=(o&3)<<4|a>>4,p=(a&15)<<2|c>>6,m=c&63;u||(m=64,s||(p=64)),r.push(e[d],e[h],e[p],e[m])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(YL(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):see(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=e[n.charAt(i++)],a=i<n.length?e[n.charAt(i)]:0;++i;let c=i<n.length?e[n.charAt(i)]:64;++i;let h=i<n.length?e[n.charAt(i)]:64;if(++i,o==null||a==null||c==null||h==null)throw new wT;let p=o<<2|a>>4;if(r.push(p),c!==64){let m=a<<4&240|c>>2;if(r.push(m),h!==64){let _=c<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},wT=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xT=function(n){let t=YL(n);return im.encodeByteArray(t,!0)},X0=function(n){return xT(n).replace(/\./g,"")},nm=function(n){try{return im.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ZL(n){return QL(void 0,n)}function QL(n,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let e=t;return new Date(e.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return t}for(let e in t)!t.hasOwnProperty(e)||!aee(e)||(n[e]=QL(n[e],t[e]));return n}function aee(n){return n!=="__proto__"}function XL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var uee=()=>XL().__FIREBASE_DEFAULTS__,cee=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lee=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&nm(n[1]);return t&&JSON.parse(t)},ET=()=>{try{return GL()||uee()||cee()||lee()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},IT=n=>{var t,e;return(e=(t=ET())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},eC=n=>{let t=IT(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},ST=()=>{var n;return(n=ET())===null||n===void 0?void 0:n.config},TT=n=>{var t;return(t=ET())===null||t===void 0?void 0:t[`_${n}`]};var Vs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}};function tC(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[X0(JSON.stringify(e)),X0(JSON.stringify(s)),""].join(".")}function yi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())}function JL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eV(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tV(){let n=yi();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _u(){return bT.NODE_CLIENT===!0||bT.NODE_ADMIN===!0}function ev(){try{return typeof indexedDB=="object"}catch{return!1}}function nV(){return new Promise((n,t)=>{try{let e=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}var dee="FirebaseError",ds=class n extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=dee,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ea.prototype.create)}},Ea=class{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){let r=e[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?hee(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ds(i,a,r)}};function hee(n,t){return n.replace(fee,(e,r)=>{let i=t[r];return i!=null?String(i):`<${r}?>`})}var fee=/\{\$([^}]+)}/g;function rm(n){return JSON.parse(n)}function Br(n){return JSON.stringify(n)}var rV=function(n){let t={},e={},r={},i="";try{let o=n.split(".");t=rm(nm(o[0])||""),e=rm(nm(o[1])||""),i=o[2],r=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:r,signature:i}};var iV=function(n){let t=rV(n),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},oV=function(n){let t=rV(n).claims;return typeof t=="object"&&t.admin===!0};function Ia(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function Dh(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}function tv(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function nv(n,t,e){let r={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=t.call(e,n[i],i,n));return r}function Bs(n,t){if(n===t)return!0;let e=Object.keys(n),r=Object.keys(t);for(let i of e){if(!r.includes(i))return!1;let o=n[i],s=t[i];if(KL(o)&&KL(s)){if(!Bs(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!e.includes(i))return!1;return!0}function KL(n){return n!==null&&typeof n=="object"}function Ph(n){let t=[];for(let[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function om(n){let t={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function sm(n){let t=n.indexOf("?");if(!t)return"";let e=n.indexOf("#",t);return n.substring(t,e>0?e:void 0)}var Jw=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);let r=this.W_;if(typeof t=="string")for(let h=0;h<16;h++)r[h]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let h=0;h<16;h++)r[h]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let h=16;h<80;h++){let p=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=(p<<1|p>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],u=this.chain_[4],c,d;for(let h=0;h<80;h++){h<40?h<20?(c=a^o&(s^a),d=1518500249):(c=o^s^a,d=1859775393):h<60?(c=o&s|a&(o|s),d=2400959708):(c=o^s^a,d=3395469782);let p=(i<<5|i>>>27)+c+u+d+r[h]&4294967295;u=a,a=s,s=(o<<30|o>>>2)&4294967295,o=i,i=p}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);let r=e-this.blockSize,i=0,o=this.buf_,s=this.inbuf_;for(;i<e;){if(s===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<e;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){let t=[],e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=e&255,e/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}};function sV(n,t){let e=new CT(n,t);return e.subscribe.bind(e)}var CT=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,r){let i;if(t===void 0&&e===void 0&&r===void 0)throw new Error("Missing Observer.");pee(t,["next","error","complete"])?i=t:i={next:t,error:e,complete:r},i.next===void 0&&(i.next=yT),i.error===void 0&&(i.error=yT),i.complete===void 0&&(i.complete=yT);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function pee(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function yT(){}function am(n,t){return`${n} failed: ${t} argument `}var aV=function(n){let t=[],e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);if(i>=55296&&i<=56319){let o=i-55296;r++,Ne(r<n.length,"Surrogate pair missing trail surrogate.");let s=n.charCodeAt(r)-56320;i=65536+(o<<10)+s}i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):i<65536?(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},rv=function(n){let t=0;for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,e++):t+=3}return t};var l6e=4*60*60*1e3;function Dr(n){return n&&n._delegate?n._delegate:n}var bi=class{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Mh="[DEFAULT]";var rC=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let r=new Vs;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let r=this.normalizeInstanceIdentifier(t?.identifier),i=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gee(t))try{this.getOrInitializeService({instanceIdentifier:Mh})}catch{}for(let[e,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Mh){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return se(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Mh){return this.instances.has(t)}getOptions(t=Mh){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(t,e){var r;let i=this.normalizeInstanceIdentifier(e),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){let r=this.onInitCallbacks.get(e);if(r)for(let i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mee(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Mh){return this.component?this.component.multipleInstances?t:Mh:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mee(n){return n===Mh?void 0:n}function gee(n){return n.instantiationMode==="EAGER"}var iv=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new rC(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var vee=[],dn=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(dn||{}),_ee={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},yee=dn.INFO,bee={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},wee=(n,t,...e)=>{if(t<n.logLevel)return;let r=new Date().toISOString(),i=bee[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Us=class{constructor(t){this.name=t,this._logLevel=yee,this._logHandler=wee,this._userLogHandler=null,vee.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?_ee[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...t),this._logHandler(this,dn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...t),this._logHandler(this,dn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dn.INFO,...t),this._logHandler(this,dn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dn.WARN,...t),this._logHandler(this,dn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...t),this._logHandler(this,dn.ERROR,...t)}};var Cee=(n,t)=>t.some(e=>n instanceof e),uV,cV;function xee(){return uV||(uV=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Eee(){return cV||(cV=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lV=new WeakMap,DT=new WeakMap,dV=new WeakMap,AT=new WeakMap,MT=new WeakMap;function Iee(n){let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(yu(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&lV.set(e,n)}).catch(()=>{}),MT.set(t,n),t}function See(n){if(DT.has(n))return;let t=new Promise((e,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});DT.set(n,t)}var PT={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return DT.get(n);if(t==="objectStoreNames")return n.objectStoreNames||dV.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return yu(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function hV(n){PT=n(PT)}function Tee(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let r=n.call(iC(this),t,...e);return dV.set(r,t.sort?t.sort():[t]),yu(r)}:Eee().includes(n)?function(...t){return n.apply(iC(this),t),yu(lV.get(this))}:function(...t){return yu(n.apply(iC(this),t))}}function Aee(n){return typeof n=="function"?Tee(n):(n instanceof IDBTransaction&&See(n),Cee(n,xee())?new Proxy(n,PT):n)}function yu(n){if(n instanceof IDBRequest)return Iee(n);if(AT.has(n))return AT.get(n);let t=Aee(n);return t!==n&&(AT.set(n,t),MT.set(t,n)),t}var iC=n=>MT.get(n);function pV(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,t),a=yu(s);return r&&s.addEventListener("upgradeneeded",u=>{r(yu(s.result),u.oldVersion,u.newVersion,yu(s.transaction),u)}),e&&s.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var Dee=["get","getKey","getAll","getAllKeys","count"],Pee=["put","add","delete","clear"],kT=new Map;function fV(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(kT.get(t))return kT.get(t);let e=t.replace(/FromIndex$/,""),r=t!==e,i=Pee.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Dee.includes(e)))return;let o=function(s,...a){return se(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),c=u.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[e](...a),i&&u.done]))[0]})};return kT.set(t,o),o}hV(n=>bt(Ie({},n),{get:(t,e,r)=>fV(t,e)||n.get(t,e,r),has:(t,e)=>!!fV(t,e)||n.has(t,e)}));var RT=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Mee(e)){let r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}};function Mee(n){let t=n.getComponent();return t?.type==="VERSION"}var NT="@firebase/app",mV="0.11.4";var Cc=new Us("@firebase/app"),kee="@firebase/app-compat",Oee="@firebase/analytics-compat",Ree="@firebase/analytics",Nee="@firebase/app-check-compat",Fee="@firebase/app-check",Lee="@firebase/auth",Vee="@firebase/auth-compat",Bee="@firebase/database",Uee="@firebase/data-connect",jee="@firebase/database-compat",zee="@firebase/functions",Wee="@firebase/functions-compat",Hee="@firebase/installations",$ee="@firebase/installations-compat",qee="@firebase/messaging",Gee="@firebase/messaging-compat",Kee="@firebase/performance",Yee="@firebase/performance-compat",Zee="@firebase/remote-config",Qee="@firebase/remote-config-compat",Xee="@firebase/storage",Jee="@firebase/storage-compat",ete="@firebase/firestore",tte="@firebase/vertexai",nte="@firebase/firestore-compat",rte="firebase",ite="11.6.0";var FT="[DEFAULT]",ote={[NT]:"fire-core",[kee]:"fire-core-compat",[Ree]:"fire-analytics",[Oee]:"fire-analytics-compat",[Fee]:"fire-app-check",[Nee]:"fire-app-check-compat",[Lee]:"fire-auth",[Vee]:"fire-auth-compat",[Bee]:"fire-rtdb",[Uee]:"fire-data-connect",[jee]:"fire-rtdb-compat",[zee]:"fire-fn",[Wee]:"fire-fn-compat",[Hee]:"fire-iid",[$ee]:"fire-iid-compat",[qee]:"fire-fcm",[Gee]:"fire-fcm-compat",[Kee]:"fire-perf",[Yee]:"fire-perf-compat",[Zee]:"fire-rc",[Qee]:"fire-rc-compat",[Xee]:"fire-gcs",[Jee]:"fire-gcs-compat",[ete]:"fire-fst",[nte]:"fire-fst-compat",[tte]:"fire-vertex","fire-js":"fire-js",[rte]:"fire-js-all"};var ov=new Map,ste=new Map,LT=new Map;function gV(n,t){try{n.container.addComponent(t)}catch(e){Cc.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function hs(n){let t=n.name;if(LT.has(t))return Cc.debug(`There were multiple attempts to register component ${t}.`),!1;LT.set(t,n);for(let e of ov.values())gV(e,n);for(let e of ste.values())gV(e,n);return!0}function Ll(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function zi(n){return n==null?!1:n.settings!==void 0}var ate={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fl=new Ea("app","Firebase",ate);var VT=class{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fl.create("app-deleted",{appName:this._name})}};var bu=ite;function jT(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let r=Object.assign({name:FT,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Fl.create("bad-app-name",{appName:String(i)});if(e||(e=ST()),!e)throw Fl.create("no-options");let o=ov.get(i);if(o){if(Bs(e,o.options)&&Bs(r,o.config))return o;throw Fl.create("duplicate-app",{appName:i})}let s=new iv(i);for(let u of LT.values())s.addComponent(u);let a=new VT(e,r,s);return ov.set(i,a),a}function xc(n=FT){let t=ov.get(n);if(!t&&n===FT&&ST())return jT();if(!t)throw Fl.create("no-app",{appName:n});return t}function oC(){return Array.from(ov.values())}function Un(n,t,e){var r;let i=(r=ote[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);let o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${t}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cc.warn(a.join(" "));return}hs(new bi(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}var ute="firebase-heartbeat-database",cte=1,sv="firebase-heartbeat-store",OT=null;function bV(){return OT||(OT=pV(ute,cte,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(sv)}catch(e){console.warn(e)}}}}).catch(n=>{throw Fl.create("idb-open",{originalErrorMessage:n.message})})),OT}function lte(n){return se(this,null,function*(){try{let e=(yield bV()).transaction(sv),r=yield e.objectStore(sv).get(wV(n));return yield e.done,r}catch(t){if(t instanceof ds)Cc.warn(t.message);else{let e=Fl.create("idb-get",{originalErrorMessage:t?.message});Cc.warn(e.message)}}})}function vV(n,t){return se(this,null,function*(){try{let r=(yield bV()).transaction(sv,"readwrite");yield r.objectStore(sv).put(t,wV(n)),yield r.done}catch(e){if(e instanceof ds)Cc.warn(e.message);else{let r=Fl.create("idb-set",{originalErrorMessage:e?.message});Cc.warn(r.message)}}})}function wV(n){return`${n.name}!${n.options.appId}`}var dte=1024,hte=30,BT=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new UT(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return se(this,null,function*(){var t,e;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_V();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>hte){let s=pte(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cc.warn(r)}})}getHeartbeatsHeader(){return se(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=_V(),{heartbeatsToSend:r,unsentEntries:i}=fte(this._heartbeatsCache.heartbeats),o=X0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Cc.warn(e),""}})}};function _V(){return new Date().toISOString().substring(0,10)}function fte(n,t=dte){let e=[],r=n.slice();for(let i of n){let o=e.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),yV(e)>t){o.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),yV(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}var UT=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return se(this,null,function*(){return ev()?nV().then(()=>!0).catch(()=>!1):!1})}read(){return se(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield lte(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return se(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vV(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return se(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return vV(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return})}};function yV(n){return X0(JSON.stringify({version:2,heartbeats:n})).length}function pte(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let r=1;r<n.length;r++)n[r].date<e&&(e=n[r].date,t=r);return t}function mte(n){hs(new bi("platform-logger",t=>new RT(t),"PRIVATE")),hs(new bi("heartbeat",t=>new BT(t),"PRIVATE")),Un(NT,mV,n),Un(NT,mV,"esm2017"),Un("fire-js","")}mte("");var gte="firebase",vte="11.6.0";Un(gte,vte,"app");function zT(n){n===void 0&&(f6(zT),n=Se(rr));let t=n.get(Fb);return e=>new Tt(r=>{let i=t.add(),o=!1;function s(){o||(i(),o=!0)}let a=e.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var wu=new hh("ANGULARFIRE2_VERSION");function Oh(n,t,e){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===e);if(o.length===1)return o[0]}return e.container.getProvider(n).getImmediate({optional:!0})}var Vl=(n,t)=>{let e=t?[t]:oC(),r=[];return e.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},um=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(um||{}),CV=aS()&&typeof Zone<"u"?um.WARN:um.SILENT;var sC=class{zone;delegate;constructor(t,e=F2){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{t.apply(this,[s])}):t.apply(this,[s])};return this.delegate.schedule(o,e,r)}},Cu=(()=>{class n{outsideAngular;insideAngular;constructor(){let e=Se(tn);this.outsideAngular=e.runOutsideAngular(()=>new sC(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=e.run(()=>new sC(typeof Zone>"u"?void 0:Zone.current,N2))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xV=!1;function _te(n,t){!xV&&(CV>um.SILENT||aS())&&(xV=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),CV>=t&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function yte(n){let t=Se(tn,{optional:!0});return t?t.runOutsideAngular(()=>n()):n()}function kh(n){let t=Se(tn,{optional:!0});return t?t.run(()=>n()):n()}var bte=(n,t,e)=>(...r)=>(t&&setTimeout(t,0),oi(e,()=>kh(()=>n.apply(void 0,r)))),ir=(n,t,e)=>(e||=t?um.WARN:um.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=Se(Cu),s=Se(Fb),a=Se(ni)}catch{return _te(n,e),n.apply(this,i)}for(let c=0;c<arguments.length;c++)typeof i[c]=="function"&&(t&&(r||=kh(()=>s.add())),i[c]=bte(i[c],r,a));let u=yte(()=>n.apply(this,i));return t?u instanceof Tt?u.pipe(_l(o.outsideAngular),vl(o.insideAngular),zT(a)):u instanceof Promise?kh(()=>new Promise((c,d)=>{s.run(()=>u).then(h=>oi(a,()=>kh(()=>c(h))),h=>oi(a,()=>kh(()=>d(h))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:kh(()=>u):u instanceof Tt?u.pipe(_l(o.outsideAngular),vl(o.insideAngular)):kh(()=>u)});var Sa=class{constructor(t){return t}},Ec=class{constructor(){return oC()}};function wte(n){return n&&n.length===1?n[0]:new Sa(xc())}var WT=new $e("angularfire2._apps"),Cte={provide:Sa,useFactory:wte,deps:[[new ii,WT]]},xte={provide:Ec,deps:[[new ii,WT]]};function Ete(n){return(t,e)=>{let r=e.get(du);Un("angularfire",wu.full,"core"),Un("angularfire",wu.full,"app"),Un("angular",B3.full,r.toString());let i=t.runOutsideAngular(()=>n(e));return new Sa(i)}}function EV(n,...t){return Po([Cte,xte,{provide:WT,useFactory:Ete(n),multi:!0,deps:[tn,rr,Cu,...t]}])}var IV=ir(jT,!0);var Ite=new Map,Ste={activated:!1,tokenObservers:[]},Tte={initialized:!1,enabled:!1};function Ta(n){return Ite.get(n)||Object.assign({},Ste)}function DV(){return Tte}var Ate="https://content-firebaseappcheck.googleapis.com/v1";var Dte="exchangeDebugToken",SV={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},mSe=24*60*60*1e3;var qT=class{constructor(t,e,r,i,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return se(this,null,function*(){this.stop();try{this.pending=new Vs,this.pending.promise.catch(e=>{}),yield Pte(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vs,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function Pte(n){return new Promise(t=>{setTimeout(t,n)})}var Mte={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Bl=new Ea("appCheck","AppCheck",Mte);function PV(n){if(!Ta(n).activated)throw Bl.create("use-before-activation",{appName:n.name})}function MV(r,i){return se(this,arguments,function*({url:n,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(t),headers:o},u;try{u=yield fetch(n,a)}catch(m){throw Bl.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Bl.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(m){throw Bl.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Bl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:c.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function kV(n,t){let{projectId:e,appId:r,apiKey:i}=n.options;return{url:`${Ate}/projects/${e}/apps/${r}:${Dte}?key=${i}`,body:{debug_token:t}}}var kte="firebase-app-check-database",Ote=1,GT="firebase-app-check-store";var aC=null;function Rte(){return aC||(aC=new Promise((n,t)=>{try{let e=indexedDB.open(kte,Ote);e.onsuccess=r=>{n(r.target.result)},e.onerror=r=>{var i;t(Bl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},e.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(GT,{keyPath:"compositeKey"})}}}catch(e){t(Bl.create("storage-open",{originalErrorMessage:e?.message}))}}),aC)}function Nte(n,t){return Fte(Lte(n),t)}function Fte(n,t){return se(this,null,function*(){let r=(yield Rte()).transaction(GT,"readwrite"),o=r.objectStore(GT).put({compositeKey:n,value:t});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(Bl.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function Lte(n){return`${n.options.appId}-${n.name}`}var av=new Us("@firebase/app-check");function HT(n,t){return ev()?Nte(n,t).catch(e=>{av.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function OV(){return DV().enabled}function RV(){return se(this,null,function*(){let n=DV();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Vte={error:"UNKNOWN_ERROR"};function Bte(n){return im.encodeString(JSON.stringify(n),!1)}function KT(n,t=!1,e=!1){return se(this,null,function*(){let r=n.app;PV(r);let i=Ta(r),o=i.token,s;if(o&&!uv(o)&&(i.token=void 0,o=void 0),!o){let c=yield i.cachedTokenPromise;c&&(uv(c)?o=c:yield HT(r,void 0))}if(!t&&o&&uv(o))return{token:o.token};let a=!1;if(OV())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=MV(kV(r,yield RV()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let c=yield i.exchangeTokenPromise;return yield HT(r,c),i.token=c,{token:c.token}}catch(c){return c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?av.warn(c.message):e&&av.error(c),$T(c)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Ta(r).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"||c.code==="appCheck/initial-throttle"?av.warn(c.message):e&&av.error(c),s=c}let u;return o?s?uv(o)?u={token:o.token,internalError:s}:u=$T(s):(u={token:o.token},i.token=o,yield HT(r,o)):u=$T(s),a&&Wte(r,u),u})}function Ute(n){return se(this,null,function*(){let t=n.app;PV(t);let{provider:e}=Ta(t);if(OV()){let r=yield RV(),{token:i}=yield MV(kV(t,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield e.getToken();return{token:r}}})}function jte(n,t,e,r){let{app:i}=n,o=Ta(i),s={next:e,error:r,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&uv(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),TV(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>TV(n))}function NV(n,t){let e=Ta(n),r=e.tokenObservers.filter(i=>i.next!==t);r.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=r}function TV(n){let{app:t}=n,e=Ta(t),r=e.tokenRefresher;r||(r=zte(n),e.tokenRefresher=r),!r.isRunning()&&e.isTokenAutoRefreshEnabled&&r.start()}function zte(n){let{app:t}=n;return new qT(()=>se(this,null,function*(){let e=Ta(t),r;if(e.token?r=yield KT(n,!0):r=yield KT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let e=Ta(t);if(e.token){let r=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,i=e.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},SV.RETRIAL_MIN_WAIT,SV.RETRIAL_MAX_WAIT)}function Wte(n,t){let e=Ta(n).tokenObservers;for(let r of e)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function uv(n){return n.expireTimeMillis-Date.now()>0}function $T(n){return{token:Bte(Vte),error:n}}var YT=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Ta(this.app);for(let e of t)NV(this.app,e.next);return Promise.resolve()}};function Hte(n,t){return new YT(n,t)}function $te(n){return{getToken:t=>KT(n,t),getLimitedUseToken:()=>Ute(n),addTokenListener:t=>jte(n,"INTERNAL",t),removeTokenListener:t=>NV(n.app,t)}}var qte="@firebase/app-check",Gte="0.8.13";var Kte="app-check",AV="app-check-internal";function Yte(){hs(new bi(Kte,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return Hte(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(AV).initialize()})),hs(new bi(AV,n=>{let t=n.getProvider("app-check").getImmediate();return $te(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Un(qte,Gte)}Yte();var Zte="app-check";var Ul=class{constructor(){return Vl(Zte)}};var Qte=["localhost","0.0.0.0","127.0.0.1"],ASe=typeof window<"u"&&Qte.includes(window.location.hostname);function QV(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var XV=QV,JV=new Ea("auth","Firebase",QV());var fC=new Us("@firebase/auth");function Xte(n,...t){fC.logLevel<=dn.WARN&&fC.warn(`Auth (${bu}): ${n}`,...t)}function cC(n,...t){fC.logLevel<=dn.ERROR&&fC.error(`Auth (${bu}): ${n}`,...t)}function Eu(n,...t){throw bA(n,...t)}function Rh(n,...t){return bA(n,...t)}function eB(n,t,e){let r=Object.assign(Object.assign({},XV()),{[t]:e});return new Ea("auth","Firebase",r).create(t,{appName:n.name})}function Tc(n){return eB(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bA(n,...t){if(typeof n!="string"){let e=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(e,...r)}return JV.create(n,...t)}function wt(n,t,...e){if(!n)throw bA(t,...e)}function Ic(n){let t="INTERNAL ASSERTION FAILED: "+n;throw cC(t),new Error(t)}function Wl(n,t){n||Ic(t)}function JT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Jte(){return FV()==="http:"||FV()==="https:"}function FV(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function ene(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jte()||eV()||"connection"in navigator)?navigator.onLine:!0}function tne(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Nh=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Wl(e>t,"Short delay should be less than long delay!"),this.isMobile=J0()||nC()}get(){return ene()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wA(n,t){Wl(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var pC=class{static initialize(t,e,r){this.fetchImpl=t,e&&(this.headersImpl=e),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ic("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ic("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ic("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rne=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ine=new Nh(3e4,6e4);function Hl(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function Ac(o,s,a,u){return se(this,arguments,function*(n,t,e,r,i={}){return tB(n,i,()=>se(this,null,function*(){let c={},d={};r&&(t==="GET"?d=r:c={body:JSON.stringify(r)});let h=Ph(Object.assign({key:n.config.apiKey},d)).slice(1),p=yield n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:t,headers:p},c);return JL()||(m.referrerPolicy="no-referrer"),pC.fetch()(yield nB(n,n.config.apiHost,e,h),m)}))})}function tB(n,t,e){return se(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},nne),t);try{let i=new eA(n),o=yield Promise.race([e(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw uC(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw uC(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw uC(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw uC(n,"user-disabled",s);let d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eB(n,d,c);Eu(n,d)}}catch(i){if(i instanceof ds)throw i;Eu(n,"network-request-failed",{message:String(i)})}})}function gv(o,s,a,u){return se(this,arguments,function*(n,t,e,r,i={}){let c=yield Ac(n,t,e,r,i);return"mfaPendingCredential"in c&&Eu(n,"multi-factor-auth-required",{_serverResponse:c}),c})}function nB(n,t,e,r){return se(this,null,function*(){let i=`${t}${e}?${r}`,o=n,s=o.config.emulator?wA(n.config,i):`${n.config.apiScheme}://${i}`;return rne.includes(e)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function one(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var eA=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,r)=>{this.timer=setTimeout(()=>r(Rh(this.auth,"network-request-failed")),ine.get())})}};function uC(n,t,e){let r={appName:n.name};e.email&&(r.email=e.email),e.phoneNumber&&(r.phoneNumber=e.phoneNumber);let i=Rh(n,t,r);return i.customData._tokenResponse=e,i}function LV(n){return n!==void 0&&n.enterprise!==void 0}var tA=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return one(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function sne(n,t){return se(this,null,function*(){return Ac(n,"GET","/v2/recaptchaConfig",Hl(n,t))})}function ane(n,t){return se(this,null,function*(){return Ac(n,"POST","/v1/accounts:delete",t)})}function mC(n,t){return se(this,null,function*(){return Ac(n,"POST","/v1/accounts:lookup",t)})}function lv(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function CA(n,t=!1){return se(this,null,function*(){let e=Dr(n),r=yield e.getIdToken(t),i=xA(r);wt(i&&i.exp&&i.auth_time&&i.iat,e.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:lv(ZT(i.auth_time)),issuedAtTime:lv(ZT(i.iat)),expirationTime:lv(ZT(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ZT(n){return Number(n)*1e3}function xA(n){let[t,e,r]=n.split(".");if(t===void 0||e===void 0||r===void 0)return cC("JWT malformed, contained fewer than 3 sections"),null;try{let i=nm(e);return i?JSON.parse(i):(cC("Failed to decode base64 JWT payload"),null)}catch(i){return cC("Caught error parsing JWT payload as JSON",i?.toString()),null}}function VV(n){let t=xA(n);return wt(t,"internal-error"),wt(typeof t.exp<"u","internal-error"),wt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function cm(n,t,e=!1){return se(this,null,function*(){if(e)return t;try{return yield t}catch(r){throw r instanceof ds&&une(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function une({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var nA=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>se(this,null,function*(){yield this.iteration()}),e)}iteration(){return se(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var hv=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=lv(this.lastLoginAt),this.creationTime=lv(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function gC(n){return se(this,null,function*(){var t;let e=n.auth,r=yield n.getIdToken(),i=yield cm(n,mC(e,{idToken:r}));wt(i?.users.length,e,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?rB(o.providerUserInfo):[],a=cne(n.providerData,s),u=n.isAnonymous,c=!(n.email&&o.passwordHash)&&!a?.length,d=u?c:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new hv(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function EA(n){return se(this,null,function*(){let t=Dr(n);yield gC(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function cne(n,t){return[...n.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function rB(n){return n.map(t=>{var{providerId:e}=t,r=L2(t,["providerId"]);return{providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function lne(n,t){return se(this,null,function*(){let e=yield tB(n,{},()=>se(this,null,function*(){let r=Ph({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield nB(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pC.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function dne(n,t){return se(this,null,function*(){return Ac(n,"POST","/v2/accounts:revokeToken",Hl(n,t))})}var dv=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){wt(t.idToken,"internal-error"),wt(typeof t.idToken<"u","internal-error"),wt(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):VV(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){wt(t.length!==0,"internal-error");let e=VV(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return se(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(wt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return se(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield lne(t,e);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(t,e,r){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,e){let{refreshToken:r,accessToken:i,expirationTime:o}=e,s=new n;return r&&(wt(typeof r=="string","internal-error",{appName:t}),s.refreshToken=r),i&&(wt(typeof i=="string","internal-error",{appName:t}),s.accessToken=i),o&&(wt(typeof o=="number","internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ic("not implemented")}};function jl(n,t){wt(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var zl=class n{constructor(t){var{uid:e,auth:r,stsTokenManager:i}=t,o=L2(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new hv(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){return se(this,null,function*(){let e=yield cm(this,this.stsTokenManager.getToken(this.auth,t));return wt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return CA(this,t)}reload(){return EA(this)}_assign(t){this!==t&&(wt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return se(this,null,function*(){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),e&&(yield gC(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return se(this,null,function*(){if(zi(this.auth.app))return Promise.reject(Tc(this.auth));let t=yield this.getIdToken();return yield cm(this,ane(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var r,i,o,s,a,u,c,d;let h=(r=e.displayName)!==null&&r!==void 0?r:void 0,p=(i=e.email)!==null&&i!==void 0?i:void 0,m=(o=e.phoneNumber)!==null&&o!==void 0?o:void 0,_=(s=e.photoURL)!==null&&s!==void 0?s:void 0,C=(a=e.tenantId)!==null&&a!==void 0?a:void 0,x=(u=e._redirectEventId)!==null&&u!==void 0?u:void 0,S=(c=e.createdAt)!==null&&c!==void 0?c:void 0,N=(d=e.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:F,emailVerified:R,isAnonymous:j,providerData:H,stsTokenManager:B}=e;wt(F&&B,t,"internal-error");let k=dv.fromJSON(this.name,B);wt(typeof F=="string",t,"internal-error"),jl(h,t.name),jl(p,t.name),wt(typeof R=="boolean",t,"internal-error"),wt(typeof j=="boolean",t,"internal-error"),jl(m,t.name),jl(_,t.name),jl(C,t.name),jl(x,t.name),jl(S,t.name),jl(N,t.name);let D=new n({uid:F,auth:t,email:p,emailVerified:R,displayName:h,isAnonymous:j,photoURL:_,phoneNumber:m,tenantId:C,stsTokenManager:k,createdAt:S,lastLoginAt:N});return H&&Array.isArray(H)&&(D.providerData=H.map(P=>Object.assign({},P))),x&&(D._redirectEventId=x),D}static _fromIdTokenResponse(t,e,r=!1){return se(this,null,function*(){let i=new dv;i.updateFromServerResponse(e);let o=new n({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:r});return yield gC(o),o})}static _fromGetAccountInfoResponse(t,e,r){return se(this,null,function*(){let i=e.users[0];wt(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?rB(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new dv;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:s}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new hv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,c),u})}};var BV=new Map;function Sc(n){Wl(n instanceof Function,"Expected a class definition");let t=BV.get(n);return t?(Wl(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,BV.set(n,t),t)}var hne=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return se(this,null,function*(){return!0})}_set(e,r){return se(this,null,function*(){this.storage[e]=r})}_get(e){return se(this,null,function*(){let r=this.storage[e];return r===void 0?null:r})}_remove(e){return se(this,null,function*(){delete this.storage[e]})}_addListener(e,r){}_removeListener(e,r){}}return n.type="NONE",n})(),rA=hne;function lC(n,t,e){return`firebase:${n}:${t}:${e}`}var vC=class n{constructor(t,e,r){this.persistence=t,this.auth=e,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=lC(this.userKey,i.apiKey,o),this.fullPersistenceKey=lC("persistence",i.apiKey,o),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return se(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){let e=yield mC(this.auth,{idToken:t}).catch(()=>{});return e?zl._fromGetAccountInfoResponse(this.auth,e,t):null}return zl._fromJSON(this.auth,t)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return se(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,r="authUser"){return se(this,null,function*(){if(!e.length)return new n(Sc(rA),t,r);let i=(yield Promise.all(e.map(c=>se(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),o=i[0]||Sc(rA),s=lC(r,t.config.apiKey,t.name),a=null;for(let c of e)try{let d=yield c._get(s);if(d){let h;if(typeof d=="string"){let p=yield mC(t,{idToken:d}).catch(()=>{});if(!p)break;h=yield zl._fromGetAccountInfoResponse(t,p,d)}else h=zl._fromJSON(t,d);c!==o&&(a=h),o=c;break}}catch{}let u=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,t,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(e.map(c=>se(this,null,function*(){if(c!==o)try{yield c._remove(s)}catch{}}))),new n(o,t,r))})}};function UV(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aB(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iB(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cB(t))return"Blackberry";if(lB(t))return"Webos";if(oB(t))return"Safari";if((t.includes("chrome/")||sB(t))&&!t.includes("edge/"))return"Chrome";if(uB(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(e);if(r?.length===2)return r[1]}return"Other"}function iB(n=yi()){return/firefox\//i.test(n)}function oB(n=yi()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function sB(n=yi()){return/crios\//i.test(n)}function aB(n=yi()){return/iemobile/i.test(n)}function uB(n=yi()){return/android/i.test(n)}function cB(n=yi()){return/blackberry/i.test(n)}function lB(n=yi()){return/webos/i.test(n)}function IA(n=yi()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function fne(n=yi()){var t;return IA(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function pne(){return tV()&&document.documentMode===10}function dB(n=yi()){return IA(n)||uB(n)||lB(n)||cB(n)||/windows phone/i.test(n)||aB(n)}function hB(n,t=[]){let e;switch(n){case"Browser":e=UV(yi());break;case"Worker":e=`${UV(yi())}-${n}`;break;default:e=n}let r=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${bu}/${r}`}var iA=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let r=o=>new Promise((s,a)=>{try{let u=t(o);s(u)}catch(u){a(u)}});r.onAbort=e,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){return se(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let r of this.queue)yield r(t),r.onAbort&&e.push(r.onAbort)}catch(r){e.reverse();for(let i of e)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mne(e){return se(this,arguments,function*(n,t={}){return Ac(n,"GET","/v2/passwordPolicy",Hl(n,t))})}var gne=6,oA=class{constructor(t){var e,r,i,o;let s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=s.minPasswordLength)!==null&&e!==void 0?e:gne,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(e=u.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,e){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(e.meetsMinPasswordLength=t.length>=r),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,e,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}};var sA=class{constructor(t,e,r,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _C(this),this.idTokenSubscription=new _C(this),this.beforeStateQueue=new iA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Sc(e)),this._initializationPromise=this.queue(()=>se(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield vC.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return se(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return se(this,null,function*(){try{let e=yield mC(this,{idToken:t}),r=yield zl._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return se(this,null,function*(){var e;if(zi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(t);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return wt(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(t){return se(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return se(this,null,function*(){try{yield gC(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=tne()}_delete(){return se(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return se(this,null,function*(){if(zi(this.app))return Promise.reject(Tc(this));let e=t?Dr(t):null;return e&&wt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return se(this,null,function*(){if(!this._deleted)return t&&wt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>se(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return se(this,null,function*(){return zi(this.app)?Promise.reject(Tc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return zi(this.app)?Promise.reject(Tc(this)):this.queue(()=>se(this,null,function*(){yield this.assertedPersistence.setPersistence(Sc(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return se(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return se(this,null,function*(){let t=yield mne(this),e=new oA(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ea("auth","Firebase",t())}onAuthStateChanged(t,e,r){return this.registerStateListener(this.authStateSubscription,t,e,r)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,r){return this.registerStateListener(this.idTokenSubscription,t,e,r)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let r=this.onAuthStateChanged(()=>{r(),t()},e)}})}revokeAccessToken(t){return se(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(r.tenantId=this.tenantId),yield dne(this,r)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return se(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(e);return t===null?r.removeCurrentUser():r.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return se(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&Sc(t)||this._popupRedirectResolver;wt(e,this,"argument-error"),this.redirectPersistenceManager=yield vC.create(this,[Sc(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return se(this,null,function*(){var e,r;return this._isInitialized&&(yield this.queue(()=>se(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return se(this,null,function*(){if(t===this.currentUser)return this.queue(()=>se(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,r,i){if(this._deleted)return()=>{};let o=typeof e=="function"?e:e.next.bind(e),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(wt(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof e=="function"){let u=t.addObserver(e,r,i);return()=>{s=!0,u()}}else{let u=t.addObserver(e);return()=>{s=!0,u()}}}directlySetCurrentUser(t){return se(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hB(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return se(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e})}_getAppCheckToken(){return se(this,null,function*(){var t;if(zi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&Xte(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Lh(n){return Dr(n)}var _C=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=sV(e=>this.observer=e)}get next(){return wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var IC={loadJS(){return se(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vne(n){IC=n}function fB(n){return IC.loadJS(n)}function _ne(){return IC.recaptchaEnterpriseScript}function yne(){return IC.gapiScript}function pB(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var aA=class{constructor(){this.enterprise=new uA}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}},uA=class{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}};var bne="recaptcha-enterprise",mB="NO_RECAPTCHA",cA=class{constructor(t){this.type=bne,this.auth=Lh(t)}verify(t="verify",e=!1){return se(this,null,function*(){function r(o){return se(this,null,function*(){if(!e){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>se(this,null,function*(){sne(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new tA(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;LV(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:t}).then(c=>{s(c)}).catch(()=>{s(mB)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aA().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!e&&LV(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_ne();u.length!==0&&(u+=a),fB(u).then(()=>{i(a,o,s)}).catch(c=>{s(c)})}}).catch(a=>{s(a)})})})}};function cv(n,t,e,r=!1,i=!1){return se(this,null,function*(){let o=new cA(n),s;if(i)s=mB;else try{s=yield o.verify(e)}catch{s=yield o.verify(e,!0)}let a=Object.assign({},t);if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function lA(n,t,e,r,i){return se(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield cv(n,t,e,e==="getOobCode");return r(n,a)}else return r(n,t).catch(a=>se(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield cv(n,t,e,e==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield cv(n,t,e);return r(n,a).catch(u=>se(this,null,function*(){var c;if(((c=n._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${e} flow.`);let d=yield cv(n,t,e,!1,!0);return r(n,d)}return Promise.reject(u)}))}else{let a=yield cv(n,t,e,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function SA(n,t){let e=Ll(n,"auth");if(e.isInitialized()){let i=e.getImmediate(),o=e.getOptions();if(Bs(o,t??{}))return i;Eu(i,"already-initialized")}return e.initialize({options:t})}function wne(n,t){let e=t?.persistence||[],r=(Array.isArray(e)?e:[e]).map(Sc);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(r,t?.popupRedirectResolver)}function TA(n,t,e){let r=Lh(n);wt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");let i=!!e?.disableWarnings,o=gB(t),{host:s,port:a}=Cne(t),u=a===null?"":`:${a}`,c={url:`${o}//${s}${u}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){wt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),wt(Bs(c,r.config.emulator)&&Bs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,i||xne()}function gB(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function Cne(n){let t=gB(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let r=e[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:jV(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:jV(s)}}}function jV(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function xne(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fv=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ic("not implemented")}_getIdTokenResponse(t){return Ic("not implemented")}_linkToIdToken(t,e){return Ic("not implemented")}_getReauthenticationResolver(t){return Ic("not implemented")}};function Ene(n,t){return se(this,null,function*(){return Ac(n,"POST","/v1/accounts:signUp",t)})}function Ine(n,t){return se(this,null,function*(){return gv(n,"POST","/v1/accounts:signInWithPassword",Hl(n,t))})}function Sne(n,t){return se(this,null,function*(){return gv(n,"POST","/v1/accounts:signInWithEmailLink",Hl(n,t))})}function Tne(n,t){return se(this,null,function*(){return gv(n,"POST","/v1/accounts:signInWithEmailLink",Hl(n,t))})}var pv=class n extends fv{constructor(t,e,r,i=null){super("password",r),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new n(t,e,"password")}static _fromEmailAndCode(t,e,r=null){return new n(t,e,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){return se(this,null,function*(){switch(this.signInMethod){case"password":let e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lA(t,e,"signInWithPassword",Ine,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Sne(t,{email:this._email,oobCode:this._password});default:Eu(t,"internal-error")}})}_linkToIdToken(t,e){return se(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lA(t,r,"signUpPassword",Ene,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Tne(t,{idToken:e,email:this._email,oobCode:this._password});default:Eu(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function QT(n,t){return se(this,null,function*(){return gv(n,"POST","/v1/accounts:signInWithIdp",Hl(n,t))})}function Ane(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dne(n){let t=om(sm(n)).link,e=t?om(sm(t)).deep_link_id:null,r=om(sm(n)).deep_link_id;return(r?om(sm(r)).link:null)||r||e||t||n}var yC=class n{constructor(t){var e,r,i,o,s,a;let u=om(sm(t)),c=(e=u.apiKey)!==null&&e!==void 0?e:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,h=Ane((i=u.mode)!==null&&i!==void 0?i:null);wt(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){let e=Dne(t);try{return new n(e)}catch{return null}}};var vB=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(e,r){return pv._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){let i=yC.parseLink(r);return wt(i,"argument-error"),pv._fromEmailAndCode(e,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),bC=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var dA=class extends bC{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function Pne(n,t){return se(this,null,function*(){return gv(n,"POST","/v1/accounts:signUp",Hl(n,t))})}var lm=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,r,i=!1){return se(this,null,function*(){let o=yield zl._fromIdTokenResponse(t,r,i),s=zV(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:e})})}static _forOperation(t,e,r){return se(this,null,function*(){yield t._updateTokensIfNecessary(r,!0);let i=zV(r);return new n({user:t,providerId:i,_tokenResponse:r,operationType:e})})}};function zV(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var hA=class n extends ds{constructor(t,e,r,i){var o;super(e.code,e.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:e.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,e,r,i){return new n(t,e,r,i)}};function _B(n,t,e,r){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?hA._fromErrorAndOperation(n,o,t,r):o})}function Mne(n,t,e=!1){return se(this,null,function*(){let r=yield cm(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return lm._forOperation(n,"link",r)})}function kne(n,t,e=!1){return se(this,null,function*(){let{auth:r}=n;if(zi(r.app))return Promise.reject(Tc(r));let i="reauthenticate";try{let o=yield cm(n,_B(r,i,t,n),e);wt(o.idToken,r,"internal-error");let s=xA(o.idToken);wt(s,r,"internal-error");let{sub:a}=s;return wt(n.uid===a,r,"user-mismatch"),lm._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Eu(r,"user-mismatch"),o}})}function yB(n,t,e=!1){return se(this,null,function*(){if(zi(n.app))return Promise.reject(Tc(n));let r="signIn",i=yield _B(n,r,t),o=yield lm._fromIdTokenResponse(n,r,i);return e||(yield n._updateCurrentUser(o.user)),o})}function AA(n,t){return se(this,null,function*(){return yB(Lh(n),t)})}function bB(n){return se(this,null,function*(){let t=Lh(n);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function DA(n,t,e){return se(this,null,function*(){if(zi(n.app))return Promise.reject(Tc(n));let r=Lh(n),s=yield lA(r,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pne,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bB(n),u}),a=yield lm._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function PA(n,t,e){return zi(n.app)?Promise.reject(Tc(n)):AA(Dr(n),vB.credential(t,e)).catch(r=>se(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&bB(n),r}))}function One(n,t){return se(this,null,function*(){return Ac(n,"POST","/v1/accounts:update",t)})}function MA(r,i){return se(this,arguments,function*(n,{displayName:t,photoURL:e}){if(t===void 0&&e===void 0)return;let o=Dr(n),a={idToken:yield o.getIdToken(),displayName:t,photoUrl:e,returnSecureToken:!0},u=yield cm(o,One(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let c=o.providerData.find(({providerId:d})=>d==="password");c&&(c.displayName=o.displayName,c.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function kA(n,t,e,r){return Dr(n).onIdTokenChanged(t,e,r)}function OA(n,t,e){return Dr(n).beforeAuthStateChanged(t,e)}function RA(n){return Dr(n).signOut()}var wC="__sak";var CC=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(wC,"1"),this.storage.removeItem(wC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var Rne=1e3,Nne=10,Fne=(()=>{class n extends CC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dB(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}let i=e.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);pne()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Nne):o()}notifyListeners(e,r){this.localCache[e]=r;let i=this.listeners[e];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},Rne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,r){return se(this,null,function*(){yield ml(n.prototype,this,"_set").call(this,e,r),this.localCache[e]=JSON.stringify(r)})}_get(e){return se(this,null,function*(){let r=yield ml(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(r),r})}_remove(e){return se(this,null,function*(){yield ml(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),wB=Fne;var Lne=(()=>{class n extends CC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}return n.type="SESSION",n})(),NA=Lne;function Vne(n){return Promise.all(n.map(t=>se(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var Bne=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let r=this.receivers.find(o=>o.isListeningto(e));if(r)return r;let i=new n(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}handleEvent(e){return se(this,null,function*(){let r=e,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(d=>se(this,null,function*(){return d(r.origin,s)})),c=yield Vne(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:c})})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function CB(n="",t=10){let e="";for(let r=0;r<t;r++)e+=Math.floor(Math.random()*10);return n+e}var fA=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,r=50){return se(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let c=CB("",20);i.port1.start();let d=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(d),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:c,data:e},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function xu(){return window}function Une(n){xu().location.href=n}function xB(){return typeof xu().WorkerGlobalScope<"u"&&typeof xu().importScripts=="function"}function jne(){return se(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function zne(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Wne(){return xB()?self:null}var EB="firebaseLocalStorageDb",Hne=1,xC="firebaseLocalStorage",IB="fbase_key",Fh=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function SC(n,t){return n.transaction([xC],t?"readwrite":"readonly").objectStore(xC)}function $ne(){let n=indexedDB.deleteDatabase(EB);return new Fh(n).toPromise()}function pA(){let n=indexedDB.open(EB,Hne);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(xC,{keyPath:IB})}catch(i){e(i)}}),n.addEventListener("success",()=>se(this,null,function*(){let r=n.result;r.objectStoreNames.contains(xC)?t(r):(r.close(),yield $ne(),t(yield pA()))}))})}function WV(n,t,e){return se(this,null,function*(){let r=SC(n,!0).put({[IB]:t,value:e});return new Fh(r).toPromise()})}function qne(n,t){return se(this,null,function*(){let e=SC(n,!1).get(t),r=yield new Fh(e).toPromise();return r===void 0?null:r.value})}function HV(n,t){let e=SC(n,!0).delete(t);return new Fh(e).toPromise()}var Gne=800,Kne=3,Yne=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return se(this,null,function*(){return this.db?this.db:(this.db=yield pA(),this.db)})}_withRetries(e){return se(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield e(i)}catch(i){if(r++>Kne)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return se(this,null,function*(){return xB()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return se(this,null,function*(){this.receiver=Bne._getInstance(Wne()),this.receiver._subscribe("keyChanged",(e,r)=>se(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(e,r)=>se(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return se(this,null,function*(){var e,r;if(this.activeServiceWorker=yield jne(),!this.activeServiceWorker)return;this.sender=new fA(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return se(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||zne()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return se(this,null,function*(){try{if(!indexedDB)return!1;let e=yield pA();return yield WV(e,wC,"1"),yield HV(e,wC),!0}catch{}return!1})}_withPendingWrite(e){return se(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,r){return se(this,null,function*(){return this._withPendingWrite(()=>se(this,null,function*(){return yield this._withRetries(i=>WV(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)}))})}_get(e){return se(this,null,function*(){let r=yield this._withRetries(i=>qne(i,e));return this.localCache[e]=r,r})}_remove(e){return se(this,null,function*(){return this._withPendingWrite(()=>se(this,null,function*(){return yield this._withRetries(r=>HV(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return se(this,null,function*(){let e=yield this._withRetries(o=>{let s=SC(o,!1).getAll();return new Fh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(e.length!==0)for(let{fbase_key:o,value:s}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(e,r){this.localCache[e]=r;let i=this.listeners[e];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>se(this,null,function*(){return this._poll()}),Gne)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SB=Yne;var FSe=pB("rcb"),LSe=new Nh(3e4,6e4);function Zne(n,t){return t?Sc(t):(wt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var mv=class extends fv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return QT(t,this._buildIdpRequest())}_linkToIdToken(t,e){return QT(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return QT(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function Qne(n){return yB(n.auth,new mv(n),n.bypassAuthState)}function Xne(n){let{auth:t,user:e}=n;return wt(e,t,"internal-error"),kne(e,new mv(n),n.bypassAuthState)}function Jne(n){return se(this,null,function*(){let{auth:t,user:e}=n;return wt(e,t,"internal-error"),Mne(e,new mv(n),n.bypassAuthState)})}var mA=class{constructor(t,e,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>se(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(t){return se(this,null,function*(){let{urlResponse:e,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=t;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:e,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(c){this.reject(c)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Qne;case"linkViaPopup":case"linkViaRedirect":return Jne;case"reauthViaPopup":case"reauthViaRedirect":return Xne;default:Eu(this.auth,"internal-error")}}resolve(t){Wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var VSe=new Nh(2e3,1e4);var ere="pendingRedirect",dC=new Map,gA=class n extends mA{constructor(t,e,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,r),this.eventId=null}execute(){return se(this,null,function*(){let t=dC.get(this.auth._key());if(!t){try{let r=(yield tre(this.resolver,this.auth))?yield ml(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(r)}catch(e){t=()=>Promise.reject(e)}dC.set(this.auth._key(),t)}return this.bypassAuthState||dC.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return se(this,null,function*(){if(t.type==="signInViaRedirect")return ml(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,ml(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return se(this,null,function*(){})}cleanUp(){}};function tre(n,t){return se(this,null,function*(){let e=ire(t),r=rre(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(e))==="true";return yield r._remove(e),i})}function nre(n,t){dC.set(n._key(),t)}function rre(n){return Sc(n._redirectPersistence)}function ire(n){return lC(ere,n.config.apiKey,n.name)}function ore(n,t,e=!1){return se(this,null,function*(){if(zi(n.app))return Promise.reject(Tc(n));let r=Lh(n),i=Zne(r,t),s=yield new gA(r,i,e).execute();return s&&!e&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})}var sre=10*60*1e3,vA=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(e=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!are(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var r;if(t.error&&!TB(t)){let i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";e.onError(Rh(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let r=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=sre&&this.cachedEventUids.clear(),this.cachedEventUids.has($V(t))}saveEventToCache(t){this.cachedEventUids.add($V(t)),this.lastProcessedEventTime=Date.now()}};function $V(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function TB({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function are(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TB(n);default:return!1}}function ure(e){return se(this,arguments,function*(n,t={}){return Ac(n,"GET","/v1/projects",t)})}var cre=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lre=/^https?/;function dre(n){return se(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield ure(n);for(let e of t)try{if(hre(e))return}catch{}Eu(n,"unauthorized-domain")})}function hre(n){let t=JT(),{protocol:e,hostname:r}=new URL(t);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&s.hostname===r}if(!lre.test(e))return!1;if(cre.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fre=new Nh(3e4,6e4);function qV(){let n=xu().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function pre(n){return new Promise((t,e)=>{var r,i,o;function s(){qV(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qV(),e(Rh(n,"network-request-failed"))},timeout:fre.get()})}if(!((i=(r=xu().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=xu().gapi)===null||o===void 0)&&o.load)s();else{let a=pB("iframefcb");return xu()[a]=()=>{gapi.load?s():e(Rh(n,"network-request-failed"))},fB(`${yne()}?onload=${a}`).catch(u=>e(u))}}).catch(t=>{throw hC=null,t})}var hC=null;function mre(n){return hC=hC||pre(n),hC}var gre=new Nh(5e3,15e3),vre="__/auth/iframe",_re="emulator/auth/iframe",yre={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bre=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wre(n){let t=n.config;wt(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?wA(t,_re):`https://${n.config.authDomain}/${vre}`,r={apiKey:t.apiKey,appName:n.name,v:bu},i=bre.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${e}?${Ph(r).slice(1)}`}function Cre(n){return se(this,null,function*(){let t=yield mre(n),e=xu().gapi;return wt(e,n,"internal-error"),t.open({where:document.body,url:wre(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yre,dontclear:!0},r=>new Promise((i,o)=>se(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Rh(n,"network-request-failed"),a=xu().setTimeout(()=>{o(s)},gre.get());function u(){xu().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var xre={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ere=500,Ire=600,Sre="_blank",Tre="http://localhost",EC=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Are(n,t,e,r=Ere,i=Ire){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},xre),{width:r.toString(),height:i.toString(),top:o,left:s}),c=yi().toLowerCase();e&&(a=sB(c)?Sre:e),iB(c)&&(t=t||Tre,u.scrollbars="yes");let d=Object.entries(u).reduce((p,[m,_])=>`${p}${m}=${_},`,"");if(fne(c)&&a!=="_self")return Dre(t||"",a),new EC(null);let h=window.open(t||"",a,d);wt(h,n,"popup-blocked");try{h.focus()}catch{}return new EC(h)}function Dre(n,t){let e=document.createElement("a");e.href=n,e.target=t;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(r)}var Pre="__/auth/handler",Mre="emulator/auth/handler",kre=encodeURIComponent("fac");function GV(n,t,e,r,i,o){return se(this,null,function*(){wt(n.config.authDomain,n,"auth-domain-config-required"),wt(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:r,v:bu,eventId:i};if(t instanceof bC){t.setDefaultLanguage(n.languageCode),s.providerId=t.providerId||"",tv(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(let[d,h]of Object.entries(o||{}))s[d]=h}if(t instanceof dA){let d=t.getScopes().filter(h=>h!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let u=yield n._getAppCheckToken(),c=u?`#${kre}=${encodeURIComponent(u)}`:"";return`${Ore(n)}?${Ph(a).slice(1)}${c}`})}function Ore({config:n}){return n.emulator?wA(n,Mre):`https://${n.authDomain}/${Pre}`}var XT="webStorageSupport",_A=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NA,this._completeRedirectFn=ore,this._overrideRedirectResult=nre}_openPopup(t,e,r,i){return se(this,null,function*(){var o;Wl((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield GV(t,e,r,JT(),i);return Are(t,s,CB())})}_openRedirect(t,e,r,i){return se(this,null,function*(){yield this._originValidation(t);let o=yield GV(t,e,r,JT(),i);return Une(o),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:i,promise:o}=this.eventManagers[e];return i?Promise.resolve(i):(Wl(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(t);return this.eventManagers[e]={promise:r},r.catch(()=>{delete this.eventManagers[e]}),r}initAndGetManager(t){return se(this,null,function*(){let e=yield Cre(t),r=new vA(t);return e.register("authEvent",i=>(wt(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=e,r})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(XT,{type:XT},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[XT];s!==void 0&&e(!!s),Eu(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=dre(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return dB()||oB()||IA()}},AB=_A;var KV="@firebase/auth",YV="1.10.0";var yA=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return se(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rre(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nre(n){hs(new bi("auth",(t,{options:e})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;wt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hB(n)},c=new sA(r,i,o,u);return wne(c,e),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,r)=>{t.getProvider("auth-internal").initialize()})),hs(new bi("auth-internal",t=>{let e=Lh(t.getProvider("auth").getImmediate());return(r=>new yA(r))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Un(KV,YV,Rre(n)),Un(KV,YV,"esm2017")}var Fre=5*60,Lre=TT("authIdTokenMaxAge")||Fre,ZV=null,Vre=n=>t=>se(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),r=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(r&&r>Lre)return;let i=e?.token;ZV!==i&&(ZV=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function FA(n=xc()){let t=Ll(n,"auth");if(t.isInitialized())return t.getImmediate();let e=SA(n,{popupRedirectResolver:AB,persistence:[SB,wB,NA]}),r=TT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Vre(o.toString());OA(e,s,()=>s(e.currentUser)),kA(e,a=>s(a))}}let i=IT("auth");return i&&TA(e,`http://${i}`),e}function Bre(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}vne({loadJS(n){return new Promise((t,e)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=t,r.onerror=i=>{let o=Rh("internal-error");o.customData=i,e(o)},r.type="text/javascript",r.charset="UTF-8",Bre().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nre("Browser");var DB="auth",or=class{constructor(t){return t}},Vh=class{constructor(){return Vl(DB)}};var LA=new $e("angularfire2.auth-instances");function Tie(n,t){let e=Oh(DB,n,t);return e&&new or(e)}function Aie(n){return(t,e)=>{let r=t.runOutsideAngular(()=>n(e));return new or(r)}}var Die={provide:Vh,deps:[[new ii,LA]]},Pie={provide:or,useFactory:Tie,deps:[[new ii,LA],Sa]};function PB(n,...t){return Un("angularfire",wu.full,"auth"),Po([Pie,Die,{provide:LA,useFactory:Aie(n),multi:!0,deps:[tn,rr,Cu,Ec,[new ii,Ul],...t]}])}var MB=ir(DA,!0,2);var kB=ir(FA,!0);var OB=ir(PA,!0,2);var TC=ir(RA,!0,2);var RB=ir(MA,!0,2);var NB="@firebase/database",FB="1.0.14";var WD="";function Mie(n){WD=n}var $A=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Br(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:rm(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var qA=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Ia(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var p5=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $A(t)}}catch{}return new qA},Uh=p5("localStorage"),GA=p5("sessionStorage");var fm=new Us("@firebase/database"),kie=function(){let n=1;return function(){return n++}}(),m5=function(n){let t=aV(n),e=new Jw;e.update(t);let r=e.digest();return im.encodeByteArray(r)},Lv=function(...n){let t="";for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Lv.apply(null,r):typeof r=="object"?t+=Br(r):t+=r,t+=" "}return t},jh=null,LB=!0,Oie=function(n,t){Ne(!t||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(fm.logLevel=dn.VERBOSE,jh=fm.log.bind(fm),t&&GA.set("logging_enabled",!0)):typeof n=="function"?jh=n:(jh=null,GA.remove("logging_enabled"))},wi=function(...n){if(LB===!0&&(LB=!1,jh===null&&GA.get("logging_enabled")===!0&&Oie(!0)),jh){let t=Lv.apply(null,n);jh(t)}},Vv=function(n){return function(...t){wi(n,...t)}},KA=function(...n){let t="FIREBASE INTERNAL ERROR: "+Lv(...n);fm.error(t)},Pc=function(...n){let t=`FIREBASE FATAL ERROR: ${Lv(...n)}`;throw fm.error(t),new Error(t)},ao=function(...n){let t="FIREBASE WARNING: "+Lv(...n);fm.warn(t)},Rie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ao("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},HD=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nie=function(n){if(_u()||document.readyState==="complete")n();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Wh="[MIN_NAME]",Kl="[MAX_NAME]",qh=function(n,t){if(n===t)return 0;if(n===Wh||t===Kl)return-1;if(t===Wh||n===Kl)return 1;{let e=VB(n),r=VB(t);return e!==null?r!==null?e-r===0?n.length-t.length:e-r:-1:r!==null?1:n<t?-1:1}},Fie=function(n,t){return n===t?0:n<t?-1:1},vv=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+Br(t))},$D=function(n){if(typeof n!="object"||n===null)return Br(n);let t=[];for(let r in n)t.push(r);t.sort();let e="{";for(let r=0;r<t.length;r++)r!==0&&(e+=","),e+=Br(t[r]),e+=":",e+=$D(n[t[r]]);return e+="}",e},g5=function(n,t){let e=n.length;if(e<=t)return[n];let r=[];for(let i=0;i<e;i+=t)i+t>e?r.push(n.substring(i,e)):r.push(n.substring(i,i+t));return r};function Ci(n,t){for(let e in n)n.hasOwnProperty(e)&&t(e,n[e])}var v5=function(n){Ne(!HD(n),"Invalid JSON number");let t=11,e=52,r=(1<<t-1)-1,i,o,s,a,u;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,e-a)-Math.pow(2,e))):(o=0,s=Math.round(n/Math.pow(2,1-r-e))));let c=[];for(u=e;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(u=t;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(i?1:0),c.reverse();let d=c.join(""),h="";for(u=0;u<64;u+=8){let p=parseInt(d.substr(u,8),2).toString(16);p.length===1&&(p="0"+p),h=h+p}return h.toLowerCase()},Lie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Vie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Bie(n,t){let e="Unknown Error";n==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?e="Client doesn't have permission to access the desired data.":n==="unavailable"&&(e="The service is unavailable");let r=new Error(n+" at "+t._path.toString()+": "+e);return r.code=n.toUpperCase(),r}var Uie=new RegExp("^-?(0*)\\d{1,10}$"),jie=-2147483648,zie=2147483647,VB=function(n){if(Uie.test(n)){let t=Number(n);if(t>=jie&&t<=zie)return t}return null},xm=function(n){try{n()}catch(t){setTimeout(()=>{let e=t.stack||"";throw ao("Exception was thrown by user callback.",e),t},Math.floor(0))}},Wie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cv=function(n,t){let e=setTimeout(n,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var YA=class{constructor(t,e){this.appCheckProvider=e,this.appName=t.name,zi(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(r=>this.appCheck=r)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((e,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){ao(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}};var ZA=class{constructor(t,e,r){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(wi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,r):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ao(t)}},xv=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),DC="5",_5="v",y5="s",b5="r",w5="f",C5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,x5="ls",E5="p",QA="ac",I5="websocket",S5="long_polling";var PC=class{constructor(t,e,r,i,o=!1,s="",a=!1,u=!1,c=null){this.secure=e,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this.emulatorOptions=c,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Uh.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Uh.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function Hie(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function T5(n,t,e){Ne(typeof t=="string","typeof type must == string"),Ne(typeof e=="object","typeof params must == object");let r;if(t===I5)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(t===S5)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Hie(n)&&(e.ns=n.namespace);let i=[];return Ci(e,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var XA=class{constructor(){this.counters_={}}incrementCounter(t,e=1){Ia(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return ZL(this.counters_)}};var VA={},BA={};function qD(n){let t=n.toString();return VA[t]||(VA[t]=new XA),VA[t]}function $ie(n,t){let e=n.toString();return BA[e]||(BA[e]=t()),BA[e]}var JA=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&xm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var BB="start",qie="close",Gie="pLPCommand",Kie="pRTLPCB",A5="id",D5="pw",P5="ser",Yie="cb",Zie="seg",Qie="ts",Xie="d",Jie="dframe",M5=1870,k5=30,eoe=M5-k5,toe=25e3,noe=3e4,eD=class n{constructor(t,e,r,i,o,s,a){this.connId=t,this.repoInfo=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vv(t),this.stats_=qD(e),this.urlFn=u=>(this.appCheckToken&&(u[QA]=this.appCheckToken),T5(e,S5,u))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new JA(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(noe)),Nie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tD((...o)=>{let[s,a,u,c,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===BB)this.id=a,this.password=u;else if(s===qie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[BB]="t",r[P5]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Yie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_5]=DC,this.transportSessionId&&(r[y5]=this.transportSessionId),this.lastSessionId&&(r[x5]=this.lastSessionId),this.applicationId&&(r[E5]=this.applicationId),this.appCheckToken&&(r[QA]=this.appCheckToken),typeof location<"u"&&location.hostname&&C5.test(location.hostname)&&(r[b5]=w5);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return _u()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Lie()&&!Vie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=Br(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let r=xT(e),i=g5(r,eoe);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(_u())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Jie]="t",r[A5]=t,r[D5]=e,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=Br(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},tD=class n{constructor(t,e,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,_u())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=kie(),window[Gie+this.uniqueCallbackIdentifier]=t,window[Kie+this.uniqueCallbackIdentifier]=e,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){wi("frame writing exception"),a.stack&&wi(a.stack),wi(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||wi("No IE domain setting required")}catch{let r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[A5]=this.myID,t[D5]=this.myPW,t[P5]=this.currentSerial;let e=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+k5+r.length<=M5;){let s=this.pendingSegs.shift();r=r+"&"+Zie+i+"="+s.seg+"&"+Qie+i+"="+s.ts+"&"+Xie+i+"="+s.d,i++}return e=e+r,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,r){this.pendingSegs.push({seg:t,ts:e,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let r=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(r,Math.floor(toe)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,e){_u()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=()=>{wi("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var roe=16384,ioe=45e3,MC=null;typeof MozWebSocket<"u"?MC=MozWebSocket:typeof WebSocket<"u"&&(MC=WebSocket);var _v=(()=>{class n{constructor(e,r,i,o,s,a,u){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vv(this.connId),this.stats_=qD(r),this.connURL=n.connectionURL_(r,a,u,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(e,r,i,o,s){let a={};return a[_5]=DC,!_u()&&typeof location<"u"&&location.hostname&&C5.test(location.hostname)&&(a[b5]=w5),r&&(a[y5]=r),i&&(a[x5]=i),o&&(a[QA]=o),s&&(a[E5]=s),T5(e,I5,a)}open(e,r){this.onDisconnect=r,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Uh.set("previous_websocket_failure",!0);try{let i;if(_u()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${DC}/${WD}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new MC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&MC!==null&&!n.forceDisallow_}static previouslyFailed(){return Uh.isInMemoryStorage||Uh.get("previous_websocket_failure")===!0}markConnectionHealthy(){Uh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=rm(r);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ne(this.frames===null,"We already have a frame buffer"),e.length<=6){let r=Number(e);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let r=e.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();let r=Br(e);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=g5(r,roe);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ioe))}sendString_(e){try{this.mySock.send(e)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),ooe=(()=>{class n{static get ALL_TRANSPORTS(){return[eD,_v]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){let r=_v&&_v.isAvailable(),i=r&&!_v.previouslyFailed();if(e.webSocketOnly&&(r||ao("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_v];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),soe=6e4,aoe=5e3,uoe=10*1024,coe=100*1024,UA="t",UB="d",loe="s",jB="r",doe="e",zB="o",WB="a",HB="n",$B="p",hoe="h",nD=class{constructor(t,e,r,i,o,s,a,u,c,d){this.id=t,this.repoInfo_=e,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vv("c:"+this.id+":"),this.transportManager_=new ooe(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,r)},Math.floor(0));let i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>coe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uoe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(UA in t){let e=t[UA];e===WB?this.upgradeIfSecondaryHealthy_():e===jB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===zB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=vv("t",t),r=vv("d",t);if(e==="c")this.onSecondaryControl_(r);else if(e==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$B,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:WB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:HB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=vv("t",t),r=vv("d",t);e==="c"?this.onControl_(r):e==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=vv(UA,t);if(UB in t){let r=t[UB];if(e===hoe){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(e===HB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===loe?this.onConnectionShutdown_(r):e===jB?this.onReset_(r):e===doe?KA("Server Error: "+r):e===zB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KA("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),DC!==r&&ao("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,r),Cv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(soe))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(aoe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$B,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Uh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var kC=class{put(t,e,r,i){}merge(t,e,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,r){}onDisconnectMerge(t,e,r){}onDisconnectCancel(t,e){}reportStats(t){}};var OC=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Ne(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)}}on(t,e,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:r});let i=this.getInitialEvent(t);i&&e.apply(r,i)}off(t,e,r){this.validateEventType_(t);let i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===e&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){Ne(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var RC=class n extends OC{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!J0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return Ne(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var qB=32,GB=768,Cn=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function pn(){return new Cn("")}function Yt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yl(n){return n.pieces_.length-n.pieceNum_}function qn(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Cn(n.pieces_,t)}function GD(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function foe(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)n.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}function Tv(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function O5(n){if(n.pieceNum_>=n.pieces_.length)return null;let t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Cn(t,0)}function vr(n,t){let e=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)e.push(n.pieces_[r]);if(t instanceof Cn)for(let r=t.pieceNum_;r<t.pieces_.length;r++)e.push(t.pieces_[r]);else{let r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&e.push(r[i])}return new Cn(e,0)}function Zt(n){return n.pieceNum_>=n.pieces_.length}function so(n,t){let e=Yt(n),r=Yt(t);if(e===null)return t;if(e===r)return so(qn(n),qn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function poe(n,t){let e=Tv(n,0),r=Tv(t,0);for(let i=0;i<e.length&&i<r.length;i++){let o=qh(e[i],r[i]);if(o!==0)return o}return e.length===r.length?0:e.length<r.length?-1:1}function KD(n,t){if(Yl(n)!==Yl(t))return!1;for(let e=n.pieceNum_,r=t.pieceNum_;e<=n.pieces_.length;e++,r++)if(n.pieces_[e]!==t.pieces_[r])return!1;return!0}function js(n,t){let e=n.pieceNum_,r=t.pieceNum_;if(Yl(n)>Yl(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[r])return!1;++e,++r}return!0}var rD=class{constructor(t,e){this.errorPrefix_=e,this.parts_=Tv(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=rv(this.parts_[r]);R5(this)}};function moe(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=rv(t),R5(n)}function goe(n){let t=n.parts_.pop();n.byteLength_-=rv(t),n.parts_.length>0&&(n.byteLength_-=1)}function R5(n){if(n.byteLength_>GB)throw new Error(n.errorPrefix_+"has a key path longer than "+GB+" bytes ("+n.byteLength_+").");if(n.parts_.length>qB)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qB+") or object contains a cycle "+Bh(n))}function Bh(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var iD=class n extends OC{static getInstance(){return new n}constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return Ne(t==="visible","Unknown event type: "+t),[this.visible_]}};var yv=1e3,voe=60*5*1e3,KB=30*1e3,_oe=1.3,yoe=3e4,boe="server_kill",YB=3,YD=(()=>{class n extends kC{constructor(e,r,i,o,s,a,u,c){if(super(),this.repoInfo_=e,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Vv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yv,this.maxReconnectDelay_=voe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!_u())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iD.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&RC.getInstance().on("online",this.onOnline_,this)}sendRequest(e,r,i){let o=++this.requestNumber_,s={r:o,a:e,b:r};this.log_(Br(s)),Ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();let r=new Vs,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(e,r,i,o){this.initConnection_();let s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ne(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let u={onComplete:o,hashFn:r,query:e,tag:i};this.listens.get(a).set(s,u),this.connected_&&this.sendListen_(u)}sendGet_(e){let r=this.outstandingGets_[e];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(e){let r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";e.tag&&(s.q=r._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,u=>{let c=u.d,d=u.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",u),d!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,r){if(e&&typeof e=="object"&&Ia(e,"w")){let i=Dh(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();ao(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||oV(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=KB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,r=iV(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let r=e.s,i=e.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(e,r){let i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,r)}sendUnlisten_(e,r,i,o){this.log_("Unlisten on "+e+" for "+r);let s={p:e},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:r,onComplete:i})}onDisconnectMerge(e,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,r,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:r,onComplete:i})}onDisconnectCancel(e,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(e,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(e,r,i,o){this.putInternal("p",e,r,i,o)}merge(e,r,i,o){this.putInternal("m",e,r,i,o)}putInternal(e,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:o}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(e){let r=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(e){if(this.connected_){let r={c:e};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Br(e));let r=e.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,r){this.log_("handleServerMessage",e,r),e==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):e==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):e==="c"?this.onListenRevoked_(r.p,r.q):e==="ac"?this.onAuthRevoked_(r.s,r.d):e==="apc"?this.onAppCheckRevoked_(r.s,r.d):e==="sd"?this.onSecurityDebugPacket_(r):KA("Unrecognized action received from server: "+Br(e)+`
Are you using the latest client?`)}onReady_(e,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>yoe&&(this.reconnectDelay_=yv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_),r=Math.max(0,this.reconnectDelay_-e);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_oe)}this.onConnectStatus_(!1)}establishConnection_(){return se(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,i())},d=function(p){Ne(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(p)};this.realtime_={close:c,sendRequest:d};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[p,m]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?wi("getToken() completed but was canceled"):(wi("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=m&&m.token,u=new nD(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,r,i,_=>{ao(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(boe)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&ao(p),c())}}})}interrupt(e){wi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){wi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],tv(this.interruptReasons_)&&(this.reconnectDelay_=yv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let r=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let r=this.outstandingPuts_[e];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,r){let i;r?i=r.map(s=>$D(s)).join("$"):i="default";let o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,r){let i=new Cn(e).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,r){wi("Auth token revoked: "+e+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=YB&&(this.reconnectDelay_=KB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,r){wi("App check token revoked: "+e+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=YB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let r of e.values())this.sendListen_(r);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},r="js";_u()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),e["sdk."+r+"."+WD.replace(/\./g,"-")]=1,J0()?e["framework.cordova"]=1:nC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=RC.getInstance().currentlyOnline();return tv(this.interruptReasons_)&&e}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Qt=class n{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new n(t,e)}};var pm=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let r=new Qt(Wh,t),i=new Qt(Wh,e);return this.compare(r,i)!==0}minPost(){return Qt.MIN}};var AC,NC=class extends pm{static get __EMPTY_NODE(){return AC}static set __EMPTY_NODE(t){AC=t}compare(t,e){return qh(t.name,e.name)}isDefinedOn(t){throw Ah("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Qt.MIN}maxPost(){return new Qt(Kl,AC)}makePost(t,e){return Ne(typeof t=="string","KeyIndex indexValue must always be a string."),new Qt(t,AC)}toString(){return".key"}},zh=new NC;var hm=class{constructor(t,e,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=e?r(t.key,e):1,i&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Aa=(()=>{class n{constructor(e,r,i,o,s){this.key=e,this.value=r,this.color=i??n.RED,this.left=o??zs.EMPTY_NODE,this.right=s??zs.EMPTY_NODE}copy(e,r,i,o,s){return new n(e??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let o=this,s=i(e,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(e,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return zs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,r){let i,o;if(i=this,r(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(e,i.key)===0){if(i.right.isEmpty())return zs.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),oD=class{copy(t,e,r,i,o){return this}insert(t,e,r){return new Aa(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},zs=class n{constructor(t,e=n.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new n(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Aa.BLACK,null,null))}remove(t){return new n(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Aa.BLACK,null,null))}get(t){let e,r=this.root_;for(;!r.isEmpty();){if(e=this.comparator_(t,r.key),e===0)return r.value;e<0?r=r.left:e>0&&(r=r.right)}return null}getPredecessorKey(t){let e,r=this.root_,i=null;for(;!r.isEmpty();)if(e=this.comparator_(t,r.key),e===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else e<0?r=r.left:e>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new hm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new hm(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new hm(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new hm(this.root_,null,this.comparator_,!0,t)}};zs.EMPTY_NODE=new oD;function woe(n,t){return qh(n.name,t.name)}function ZD(n,t){return qh(n,t)}var sD;function Coe(n){sD=n}var N5=function(n){return typeof n=="number"?"number:"+v5(n):"string:"+n},F5=function(n){if(n.isLeafNode()){let t=n.val();Ne(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ia(t,".sv"),"Priority must be a string or number.")}else Ne(n===sD||n.isEmpty(),"priority of unexpected type.");Ne(n===sD||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var ZB,mm=(()=>{class n{static set __childrenNodeConstructor(e){ZB=e}static get __childrenNodeConstructor(){return ZB}constructor(e,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=r,this.lazyHash_=null,Ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),F5(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Zt(e)?this:Yt(e)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,r){return null}updateImmediateChild(e,r){return e===".priority"?this.updatePriority(r):r.isEmpty()&&e!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,r).updatePriority(this.priorityNode_)}updateChild(e,r){let i=Yt(e);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Ne(i!==".priority"||Yl(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(e),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,r){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+N5(this.priorityNode_.val())+":");let r=typeof this.value_;e+=r+":",r==="number"?e+=v5(this.value_):e+=this.value_,this.lazyHash_=m5(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:(Ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let r=typeof e.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return Ne(o>=0,"Unknown leaf type: "+r),Ne(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let r=e;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),L5,V5;function xoe(n){L5=n}function Eoe(n){V5=n}var aD=class extends pm{compare(t,e){let r=t.node.getPriority(),i=e.node.getPriority(),o=r.compareTo(i);return o===0?qh(t.name,e.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Qt.MIN}maxPost(){return new Qt(Kl,new mm("[PRIORITY-POST]",V5))}makePost(t,e){let r=L5(t);return new Qt(e,new mm("[PRIORITY-POST]",r))}toString(){return".priority"}},sr=new aD;var Ioe=Math.log(2),uD=class{constructor(t){let e=o=>parseInt(Math.log(o)/Ioe,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},FC=function(n,t,e,r){n.sort(t);let i=function(u,c){let d=c-u,h,p;if(d===0)return null;if(d===1)return h=n[u],p=e?e(h):h,new Aa(p,h.node,Aa.BLACK,null,null);{let m=parseInt(d/2,10)+u,_=i(u,m),C=i(m+1,c);return h=n[m],p=e?e(h):h,new Aa(p,h.node,Aa.BLACK,_,C)}},o=function(u){let c=null,d=null,h=n.length,p=function(_,C){let x=h-_,S=h;h-=_;let N=i(x+1,S),F=n[x],R=e?e(F):F;m(new Aa(R,F.node,C,null,N))},m=function(_){c?(c.left=_,c=_):(d=_,c=_)};for(let _=0;_<u.count;++_){let C=u.nextBitIsOne(),x=Math.pow(2,u.count-(_+1));C?p(x,Aa.BLACK):(p(x,Aa.BLACK),p(x,Aa.RED))}return d},s=new uD(n.length),a=o(s);return new zs(r||t,a)};var jA,dm={},gm=class n{static get Default(){return Ne(dm&&sr,"ChildrenNode.ts has not been loaded"),jA=jA||new n({".priority":dm},{".priority":sr}),jA}constructor(t,e){this.indexes_=t,this.indexSet_=e}get(t){let e=Dh(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof zs?e:null}hasIndex(t){return Ia(this.indexSet_,t.toString())}addIndex(t,e){Ne(t!==zh,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=e.getIterator(Qt.Wrap),s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=FC(r,t.getCompare()):a=dm;let u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;let d=Object.assign({},this.indexes_);return d[u]=a,new n(d,c)}addToIndexes(t,e){let r=nv(this.indexes_,(i,o)=>{let s=Dh(this.indexSet_,o);if(Ne(s,"Missing index implementation for "+o),i===dm)if(s.isDefinedOn(t.node)){let a=[],u=e.getIterator(Qt.Wrap),c=u.getNext();for(;c;)c.name!==t.name&&a.push(c),c=u.getNext();return a.push(t),FC(a,s.getCompare())}else return dm;else{let a=e.get(t.name),u=i;return a&&(u=u.remove(new Qt(t.name,a))),u.insert(t,t.node)}});return new n(r,this.indexSet_)}removeFromIndexes(t,e){let r=nv(this.indexes_,i=>{if(i===dm)return i;{let o=e.get(t.name);return o?i.remove(new Qt(t.name,o)):i}});return new n(r,this.indexSet_)}};var bv,Bt=(()=>{class n{static get EMPTY_NODE(){return bv||(bv=new n(new zs(ZD),null,gm.Default))}constructor(e,r,i){this.children_=e,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&F5(this.priorityNode_),this.children_.isEmpty()&&Ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bv}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let r=this.children_.get(e);return r===null?bv:r}}getChild(e){let r=Yt(e);return r===null?this:this.getImmediateChild(r).getChild(qn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,r){if(Ne(r,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(r);{let i=new Qt(e,r),o,s;r.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?bv:this.priorityNode_;return new n(o,a,s)}}updateChild(e,r){let i=Yt(e);if(i===null)return r;{Ne(Yt(e)!==".priority"||Yl(e)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(qn(e),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(sr,(a,u)=>{r[a]=u.val(e),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!e&&s&&o<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return e&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+N5(this.getPriority().val())+":"),this.forEachChild(sr,(r,i)=>{let o=i.hash();o!==""&&(e+=":"+r+":"+o)}),this.lazyHash_=e===""?"":m5(e)}return this.lazyHash_}getPredecessorChildName(e,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Qt(e,r));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let r=this.resolveIndex_(e);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){let r=this.getFirstChildName(e);return r?new Qt(r,this.children_.get(r)):null}getLastChildName(e){let r=this.resolveIndex_(e);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){let r=this.getLastChildName(e);return r?new Qt(r,this.children_.get(r)):null}forEachChild(e,r){let i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(e,o=>o);{let o=this.children_.getIteratorFrom(e.name,Qt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,e)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(e,o=>o);{let o=this.children_.getReverseIteratorFrom(e.name,Qt.Wrap),s=o.peek();for(;s!=null&&r.compare(s,e)>0;)o.getNext(),s=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Bv?-1:0}withIndex(e){if(e===zh||this.indexMap_.hasIndex(e))return this;{let r=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(e){return e===zh||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let r=e;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(sr),o=r.getIterator(sr),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===zh?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),cD=class extends Bt{constructor(){super(new zs(ZD),Bt.EMPTY_NODE,gm.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Bt.EMPTY_NODE}isEmpty(){return!1}},Bv=new cD;Object.defineProperties(Qt,{MIN:{value:new Qt(Wh,Bt.EMPTY_NODE)},MAX:{value:new Qt(Kl,Bv)}});NC.__EMPTY_NODE=Bt.EMPTY_NODE;mm.__childrenNodeConstructor=Bt;Coe(Bv);Eoe(Bv);var Soe=!0;function Qr(n,t=null){if(n===null)return Bt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(t=n[".priority"]),Ne(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let e=n;return new mm(e,Qr(t))}if(!(n instanceof Array)&&Soe){let e=[],r=!1;if(Ci(n,(s,a)=>{if(s.substring(0,1)!=="."){let u=Qr(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),e.push(new Qt(s,u)))}}),e.length===0)return Bt.EMPTY_NODE;let o=FC(e,woe,s=>s.name,ZD);if(r){let s=FC(e,sr.getCompare());return new Bt(o,Qr(t),new gm({".priority":s},{".priority":sr}))}else return new Bt(o,Qr(t),gm.Default)}else{let e=Bt.EMPTY_NODE;return Ci(n,(r,i)=>{if(Ia(n,r)&&r.substring(0,1)!=="."){let o=Qr(i);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(r,o))}}),e.updatePriority(Qr(t))}}xoe(Qr);var Av=class extends pm{constructor(t){super(),this.indexPath_=t,Ne(!Zt(t)&&Yt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let r=this.extractChild(t.node),i=this.extractChild(e.node),o=r.compareTo(i);return o===0?qh(t.name,e.name):o}makePost(t,e){let r=Qr(t),i=Bt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Qt(e,i)}maxPost(){let t=Bt.EMPTY_NODE.updateChild(this.indexPath_,Bv);return new Qt(Kl,t)}toString(){return Tv(this.indexPath_,0).join("/")}};var lD=class extends pm{compare(t,e){let r=t.node.compareTo(e.node);return r===0?qh(t.name,e.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Qt.MIN}maxPost(){return Qt.MAX}makePost(t,e){let r=Qr(t);return new Qt(e,r)}toString(){return".value"}},B5=new lD;function U5(n){return{type:"value",snapshotNode:n}}function vm(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function Dv(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function Pv(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}function Toe(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}var Mv=class{constructor(t){this.index_=t}updateChild(t,e,r,i,o,s){Ne(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?t.hasChild(e)?s.trackChildChange(Dv(e,a)):Ne(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(vm(e,r)):s.trackChildChange(Pv(e,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(e,r).withIndex(this.index_)}updateFullNode(t,e,r){return r!=null&&(t.isLeafNode()||t.forEachChild(sr,(i,o)=>{e.hasChild(i)||r.trackChildChange(Dv(i,o))}),e.isLeafNode()||e.forEachChild(sr,(i,o)=>{if(t.hasChild(i)){let s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(Pv(i,o,s))}else r.trackChildChange(vm(i,o))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Bt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var LC=class n{constructor(t){this.indexedFilter_=new Mv(t.getIndex()),this.index_=t.getIndex(),this.startPost_=n.getStartPost_(t),this.endPost_=n.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&r}updateChild(t,e,r,i,o,s){return this.matches(new Qt(e,r))||(r=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,r,i,o,s)}updateFullNode(t,e,r){e.isLeafNode()&&(e=Bt.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(Bt.EMPTY_NODE);let o=this;return e.forEachChild(sr,(s,a)=>{o.matches(new Qt(s,a))||(i=i.updateImmediateChild(s,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var dD=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=e=>{let r=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new LC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,r,i,o,s){return this.rangedFilter_.matches(new Qt(e,r))||(r=Bt.EMPTY_NODE),t.getImmediateChild(e).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,r,i,o,s):this.fullLimitUpdateChild_(t,e,r,o,s)}updateFullNode(t,e,r){let i;if(e.isLeafNode()||e.isEmpty())i=Bt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){i=Bt.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=e.withIndex(this.index_),i=i.updatePriority(Bt.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,r,i,o){let s;if(this.reverse_){let h=this.index_.getCompare();s=(p,m)=>h(m,p)}else s=this.index_.getCompare();let a=t;Ne(a.numChildren()===this.limit_,"");let u=new Qt(e,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(u);if(a.hasChild(e)){let h=a.getImmediateChild(e),p=i.getChildAfterChild(this.index_,c,this.reverse_);for(;p!=null&&(p.name===e||a.hasChild(p.name));)p=i.getChildAfterChild(this.index_,p,this.reverse_);let m=p==null?1:s(p,u);if(d&&!r.isEmpty()&&m>=0)return o?.trackChildChange(Pv(e,r,h)),a.updateImmediateChild(e,r);{o?.trackChildChange(Dv(e,h));let C=a.updateImmediateChild(e,Bt.EMPTY_NODE);return p!=null&&this.rangedFilter_.matches(p)?(o?.trackChildChange(vm(p.name,p.node)),C.updateImmediateChild(p.name,p.node)):C}}else return r.isEmpty()?t:d&&s(c,u)>=0?(o!=null&&(o.trackChildChange(Dv(c.name,c.node)),o.trackChildChange(vm(e,r))),a.updateImmediateChild(e,r).updateImmediateChild(c.name,Bt.EMPTY_NODE)):t}};var hD=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wh}hasEnd(){return this.endSet_}getIndexEndValue(){return Ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sr}copy(){let t=new n;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Aoe(n){return n.loadsAllData()?new Mv(n.getIndex()):n.hasLimit()?new dD(n):new LC(n)}function Doe(n,t,e){let r=n.copy();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,e!=null?(r.startNameSet_=!0,r.indexStartName_=e):(r.startNameSet_=!1,r.indexStartName_=""),r}function Poe(n,t,e){let r=n.copy();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,e!==void 0?(r.endNameSet_=!0,r.indexEndName_=e):(r.endNameSet_=!1,r.indexEndName_=""),r}function Moe(n,t){let e=n.copy();return e.index_=t,e}function QB(n){let t={};if(n.isDefault())return t;let e;if(n.index_===sr?e="$priority":n.index_===B5?e="$value":n.index_===zh?e="$key":(Ne(n.index_ instanceof Av,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=Br(e),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";t[r]=Br(n.indexStartValue_),n.startNameSet_&&(t[r]+=","+Br(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";t[r]=Br(n.indexEndValue_),n.endNameSet_&&(t[r]+=","+Br(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function XB(n){let t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_),t.sin=!n.startAfterSet_),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_),t.ein=!n.endBeforeSet_),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;e===""&&(n.isViewFromLeft()?e="l":e="r"),t.vf=e}return n.index_!==sr&&(t.i=n.index_.toString()),t}var fD=class n extends kC{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(Ne(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,e,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Vv("p:rest:"),this.listens_={}}listen(t,e,r,i){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=n.getListenId_(t,r),a={};this.listens_[s]=a;let u=QB(t._queryParams);this.restRequest_(o+".json",u,(c,d)=>{let h=d;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(o,h,!1,r),Dh(this.listens_,s)===a){let p;c?c===401?p="permission_denied":p="rest_error:"+c:p="ok",i(p,null)}})}unlisten(t,e){let r=n.getListenId_(t,e);delete this.listens_[r]}get(t){let e=QB(t._queryParams),r=t._path.toString(),i=new Vs;return this.restRequest_(r+".json",e,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,e={},r){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ph(e);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=rm(a.responseText)}catch{ao("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&ao("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var pD=class{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function VC(){return{value:null,children:new Map}}function j5(n,t,e){if(Zt(t))n.value=e,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(t,e);else{let r=Yt(t);n.children.has(r)||n.children.set(r,VC());let i=n.children.get(r);t=qn(t),j5(i,t,e)}}function mD(n,t,e){n.value!==null?e(t,n.value):koe(n,(r,i)=>{let o=new Cn(t.toString()+"/"+r);mD(i,o,e)})}function koe(n,t){n.children.forEach((e,r)=>{t(r,e)})}var gD=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Ci(this.last_,(r,i)=>{e[r]=e[r]-i}),this.last_=t,e}};var JB=10*1e3,Ooe=30*1e3,Roe=5*60*1e3,vD=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new gD(t);let r=JB+(Ooe-JB)*Math.random();Cv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let t=this.statsListener_.get(),e={},r=!1;Ci(t,(i,o)=>{o>0&&Ia(this.statsToReport_,i)&&(e[i]=o,r=!0)}),r&&this.server_.reportStats(e),Cv(this.reportStats_.bind(this),Math.floor(Math.random()*2*Roe))}};var Iu=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Iu||{});function QD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function XD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function JD(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var _D=class n{constructor(t,e,r){this.path=t,this.affectedTree=e,this.revert=r,this.type=Iu.ACK_USER_WRITE,this.source=QD()}operationForChild(t){if(Zt(this.path)){if(this.affectedTree.value!=null)return Ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Cn(t));return new n(pn(),e,this.revert)}}else return Ne(Yt(this.path)===t,"operationForChild called for unrelated child."),new n(qn(this.path),this.affectedTree,this.revert)}};var BC=class n{constructor(t,e){this.source=t,this.path=e,this.type=Iu.LISTEN_COMPLETE}operationForChild(t){return Zt(this.path)?new n(this.source,pn()):new n(this.source,qn(this.path))}};var _m=class n{constructor(t,e,r){this.source=t,this.path=e,this.snap=r,this.type=Iu.OVERWRITE}operationForChild(t){return Zt(this.path)?new n(this.source,pn(),this.snap.getImmediateChild(t)):new n(this.source,qn(this.path),this.snap)}};var kv=class n{constructor(t,e,r){this.source=t,this.path=e,this.children=r,this.type=Iu.MERGE}operationForChild(t){if(Zt(this.path)){let e=this.children.subtree(new Cn(t));return e.isEmpty()?null:e.value?new _m(this.source,pn(),e.value):new n(this.source,pn(),e)}else return Ne(Yt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new n(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Su=class{constructor(t,e,r){this.node_=t,this.fullyInitialized_=e,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Zt(t))return this.isFullyInitialized()&&!this.filtered_;let e=Yt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var yD=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function Noe(n,t,e,r){let i=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Toe(s.childName,s.snapshotNode))}),wv(n,i,"child_removed",t,r,e),wv(n,i,"child_added",t,r,e),wv(n,i,"child_moved",o,r,e),wv(n,i,"child_changed",t,r,e),wv(n,i,"value",t,r,e),i}function wv(n,t,e,r,i,o){let s=r.filter(a=>a.type===e);s.sort((a,u)=>Loe(n,a,u)),s.forEach(a=>{let u=Foe(n,a,o);i.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(u,n.query_))})})}function Foe(n,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}function Loe(n,t,e){if(t.childName==null||e.childName==null)throw Ah("Should only compare child_ events.");let r=new Qt(t.childName,t.snapshotNode),i=new Qt(e.childName,e.snapshotNode);return n.index_.compare(r,i)}function JC(n,t){return{eventCache:n,serverCache:t}}function Ev(n,t,e,r){return JC(new Su(t,e,r),n.serverCache)}function z5(n,t,e,r){return JC(n.eventCache,new Su(t,e,r))}function UC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hh(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var zA,Voe=()=>(zA||(zA=new zs(Fie)),zA),uo=class n{static fromObject(t){let e=new n(null);return Ci(t,(r,i)=>{e=e.set(new Cn(r),i)}),e}constructor(t,e=Voe()){this.value=t,this.children=e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:pn(),value:this.value};if(Zt(t))return null;{let r=Yt(t),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(qn(t),e);return o!=null?{path:vr(new Cn(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Zt(t))return this;{let e=Yt(t),r=this.children.get(e);return r!==null?r.subtree(qn(t)):new n(null)}}set(t,e){if(Zt(t))return new n(e,this.children);{let r=Yt(t),o=(this.children.get(r)||new n(null)).set(qn(t),e),s=this.children.insert(r,o);return new n(this.value,s)}}remove(t){if(Zt(t))return this.children.isEmpty()?new n(null):new n(null,this.children);{let e=Yt(t),r=this.children.get(e);if(r){let i=r.remove(qn(t)),o;return i.isEmpty()?o=this.children.remove(e):o=this.children.insert(e,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(t){if(Zt(t))return this.value;{let e=Yt(t),r=this.children.get(e);return r?r.get(qn(t)):null}}setTree(t,e){if(Zt(t))return e;{let r=Yt(t),o=(this.children.get(r)||new n(null)).setTree(qn(t),e),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(t){return this.fold_(pn(),t)}fold_(t,e){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(vr(t,i),e)}),e(t,this.value,r)}findOnPath(t,e){return this.findOnPath_(t,pn(),e)}findOnPath_(t,e,r){let i=this.value?r(e,this.value):!1;if(i)return i;if(Zt(t))return null;{let o=Yt(t),s=this.children.get(o);return s?s.findOnPath_(qn(t),vr(e,o),r):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,pn(),e)}foreachOnPath_(t,e,r){if(Zt(t))return this;{this.value&&r(e,this.value);let i=Yt(t),o=this.children.get(i);return o?o.foreachOnPath_(qn(t),vr(e,i),r):new n(null)}}foreach(t){this.foreach_(pn(),t)}foreach_(t,e){this.children.inorderTraversal((r,i)=>{i.foreach_(vr(t,r),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,r)=>{r.value&&t(e,r.value)})}};var Da=class n{constructor(t){this.writeTree_=t}static empty(){return new n(new uo(null))}};function Iv(n,t,e){if(Zt(t))return new Da(new uo(e));{let r=n.writeTree_.findRootMostValueAndPath(t);if(r!=null){let i=r.path,o=r.value,s=so(i,t);return o=o.updateChild(s,e),new Da(n.writeTree_.set(i,o))}else{let i=new uo(e),o=n.writeTree_.setTree(t,i);return new Da(o)}}}function bD(n,t,e){let r=n;return Ci(e,(i,o)=>{r=Iv(r,vr(t,i),o)}),r}function e5(n,t){if(Zt(t))return Da.empty();{let e=n.writeTree_.setTree(t,new uo(null));return new Da(e)}}function wD(n,t){return Gh(n,t)!=null}function Gh(n,t){let e=n.writeTree_.findRootMostValueAndPath(t);return e!=null?n.writeTree_.get(e.path).getChild(so(e.path,t)):null}function t5(n){let t=[],e=n.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(sr,(r,i)=>{t.push(new Qt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new Qt(r,i.value))}),t}function ql(n,t){if(Zt(t))return n;{let e=Gh(n,t);return e!=null?new Da(new uo(e)):new Da(n.writeTree_.subtree(t))}}function CD(n){return n.writeTree_.isEmpty()}function ym(n,t){return W5(pn(),n.writeTree_,t)}function W5(n,t,e){if(t.value!=null)return e.updateChild(n,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(Ne(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):e=W5(vr(n,i),o,e)}),!e.getChild(n).isEmpty()&&r!==null&&(e=e.updateChild(vr(n,".priority"),r)),e}}function e1(n,t){return G5(t,n)}function Boe(n,t,e,r,i){Ne(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:t,snap:e,writeId:r,visible:i}),i&&(n.visibleWrites=Iv(n.visibleWrites,t,e)),n.lastWriteId=r}function Uoe(n,t,e,r){Ne(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:r,visible:!0}),n.visibleWrites=bD(n.visibleWrites,t,e),n.lastWriteId=r}function joe(n,t){for(let e=0;e<n.allWrites.length;e++){let r=n.allWrites[e];if(r.writeId===t)return r}return null}function zoe(n,t){let e=n.allWrites.findIndex(a=>a.writeId===t);Ne(e>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[e];n.allWrites.splice(e,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=e&&Woe(a,r.path)?i=!1:js(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return Hoe(n),!0;if(r.snap)n.visibleWrites=e5(n.visibleWrites,r.path);else{let a=r.children;Ci(a,u=>{n.visibleWrites=e5(n.visibleWrites,vr(r.path,u))})}return!0}else return!1}function Woe(n,t){if(n.snap)return js(n.path,t);for(let e in n.children)if(n.children.hasOwnProperty(e)&&js(vr(n.path,e),t))return!0;return!1}function Hoe(n){n.visibleWrites=H5(n.allWrites,$oe,pn()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function $oe(n){return n.visible}function H5(n,t,e){let r=Da.empty();for(let i=0;i<n.length;++i){let o=n[i];if(t(o)){let s=o.path,a;if(o.snap)js(e,s)?(a=so(e,s),r=Iv(r,a,o.snap)):js(s,e)&&(a=so(s,e),r=Iv(r,pn(),o.snap.getChild(a)));else if(o.children){if(js(e,s))a=so(e,s),r=bD(r,a,o.children);else if(js(s,e))if(a=so(s,e),Zt(a))r=bD(r,pn(),o.children);else{let u=Dh(o.children,Yt(a));if(u){let c=u.getChild(qn(a));r=Iv(r,pn(),c)}}}else throw Ah("WriteRecord should have .snap or .children")}}return r}function $5(n,t,e,r,i){if(!r&&!i){let o=Gh(n.visibleWrites,t);if(o!=null)return o;{let s=ql(n.visibleWrites,t);if(CD(s))return e;if(e==null&&!wD(s,pn()))return null;{let a=e||Bt.EMPTY_NODE;return ym(s,a)}}}else{let o=ql(n.visibleWrites,t);if(!i&&CD(o))return e;if(!i&&e==null&&!wD(o,pn()))return null;{let s=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(js(c.path,t)||js(t,c.path))},a=H5(n.allWrites,s,t),u=e||Bt.EMPTY_NODE;return ym(a,u)}}}function qoe(n,t,e){let r=Bt.EMPTY_NODE,i=Gh(n.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(sr,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(e){let o=ql(n.visibleWrites,t);return e.forEachChild(sr,(s,a)=>{let u=ym(ql(o,new Cn(s)),a);r=r.updateImmediateChild(s,u)}),t5(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=ql(n.visibleWrites,t);return t5(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function Goe(n,t,e,r,i){Ne(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=vr(t,e);if(wD(n.visibleWrites,o))return null;{let s=ql(n.visibleWrites,o);return CD(s)?i.getChild(e):ym(s,i.getChild(e))}}function Koe(n,t,e,r){let i=vr(t,e),o=Gh(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(e)){let s=ql(n.visibleWrites,i);return ym(s,r.getNode().getImmediateChild(e))}else return null}function Yoe(n,t){return Gh(n.visibleWrites,t)}function Zoe(n,t,e,r,i,o,s){let a,u=ql(n.visibleWrites,t),c=Gh(u,pn());if(c!=null)a=c;else if(e!=null)a=ym(u,e);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],h=s.getCompare(),p=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),m=p.getNext();for(;m&&d.length<i;)h(m,r)!==0&&d.push(m),m=p.getNext();return d}else return[]}function Qoe(){return{visibleWrites:Da.empty(),allWrites:[],lastWriteId:-1}}function jC(n,t,e,r){return $5(n.writeTree,n.treePath,t,e,r)}function eP(n,t){return qoe(n.writeTree,n.treePath,t)}function n5(n,t,e,r){return Goe(n.writeTree,n.treePath,t,e,r)}function zC(n,t){return Yoe(n.writeTree,vr(n.treePath,t))}function Xoe(n,t,e,r,i,o){return Zoe(n.writeTree,n.treePath,t,e,r,i,o)}function tP(n,t,e){return Koe(n.writeTree,n.treePath,t,e)}function q5(n,t){return G5(vr(n.treePath,t),n.writeTree)}function G5(n,t){return{treePath:n,writeTree:t}}var xD=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,r=t.childName;Ne(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),Ne(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(e==="child_added"&&o==="child_removed")this.changeMap.set(r,Pv(r,t.snapshotNode,i.snapshotNode));else if(e==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(e==="child_removed"&&o==="child_changed")this.changeMap.set(r,Dv(r,i.oldSnap));else if(e==="child_changed"&&o==="child_added")this.changeMap.set(r,vm(r,t.snapshotNode));else if(e==="child_changed"&&o==="child_changed")this.changeMap.set(r,Pv(r,t.snapshotNode,i.oldSnap));else throw Ah("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}};var ED=class{getCompleteChild(t){return null}getChildAfterChild(t,e,r){return null}},K5=new ED,Ov=class{constructor(t,e,r=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=r}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let r=this.optCompleteServerCache_!=null?new Su(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tP(this.writes_,t,r)}}getChildAfterChild(t,e,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Hh(this.viewCache_),o=Xoe(this.writes_,i,e,1,r,t);return o.length===0?null:o[0]}};function Joe(n){return{filter:n}}function ese(n,t){Ne(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Ne(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function tse(n,t,e,r,i){let o=new xD,s,a;if(e.type===Iu.OVERWRITE){let c=e;c.source.fromUser?s=ID(n,t,c.path,c.snap,r,i,o):(Ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Zt(c.path),s=WC(n,t,c.path,c.snap,r,i,a,o))}else if(e.type===Iu.MERGE){let c=e;c.source.fromUser?s=rse(n,t,c.path,c.children,r,i,o):(Ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=SD(n,t,c.path,c.children,r,i,a,o))}else if(e.type===Iu.ACK_USER_WRITE){let c=e;c.revert?s=sse(n,t,c.path,r,i,o):s=ise(n,t,c.path,c.affectedTree,r,i,o)}else if(e.type===Iu.LISTEN_COMPLETE)s=ose(n,t,e.path,r,o);else throw Ah("Unknown operation type: "+e.type);let u=o.getChanges();return nse(t,s,u),{viewCache:s,changes:u}}function nse(n,t,e){let r=t.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=UC(n);(e.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&e.push(U5(UC(t)))}}function Y5(n,t,e,r,i,o){let s=t.eventCache;if(zC(r,e)!=null)return t;{let a,u;if(Zt(e))if(Ne(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Hh(t),d=c instanceof Bt?c:Bt.EMPTY_NODE,h=eP(r,d);a=n.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{let c=jC(r,Hh(t));a=n.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{let c=Yt(e);if(c===".priority"){Ne(Yl(e)===1,"Can't have a priority with additional path components");let d=s.getNode();u=t.serverCache.getNode();let h=n5(r,e,d,u);h!=null?a=n.filter.updatePriority(d,h):a=s.getNode()}else{let d=qn(e),h;if(s.isCompleteForChild(c)){u=t.serverCache.getNode();let p=n5(r,e,s.getNode(),u);p!=null?h=s.getNode().getImmediateChild(c).updateChild(d,p):h=s.getNode().getImmediateChild(c)}else h=tP(r,c,t.serverCache);h!=null?a=n.filter.updateChild(s.getNode(),c,h,d,i,o):a=s.getNode()}}return Ev(t,a,s.isFullyInitialized()||Zt(e),n.filter.filtersNodes())}}function WC(n,t,e,r,i,o,s,a){let u=t.serverCache,c,d=s?n.filter:n.filter.getIndexedFilter();if(Zt(e))c=d.updateFullNode(u.getNode(),r,null);else if(d.filtersNodes()&&!u.isFiltered()){let m=u.getNode().updateChild(e,r);c=d.updateFullNode(u.getNode(),m,null)}else{let m=Yt(e);if(!u.isCompleteForPath(e)&&Yl(e)>1)return t;let _=qn(e),x=u.getNode().getImmediateChild(m).updateChild(_,r);m===".priority"?c=d.updatePriority(u.getNode(),x):c=d.updateChild(u.getNode(),m,x,_,K5,null)}let h=z5(t,c,u.isFullyInitialized()||Zt(e),d.filtersNodes()),p=new Ov(i,h,o);return Y5(n,h,e,i,p,a)}function ID(n,t,e,r,i,o,s){let a=t.eventCache,u,c,d=new Ov(i,t,o);if(Zt(e))c=n.filter.updateFullNode(t.eventCache.getNode(),r,s),u=Ev(t,c,!0,n.filter.filtersNodes());else{let h=Yt(e);if(h===".priority")c=n.filter.updatePriority(t.eventCache.getNode(),r),u=Ev(t,c,a.isFullyInitialized(),a.isFiltered());else{let p=qn(e),m=a.getNode().getImmediateChild(h),_;if(Zt(p))_=r;else{let C=d.getCompleteChild(h);C!=null?GD(p)===".priority"&&C.getChild(O5(p)).isEmpty()?_=C:_=C.updateChild(p,r):_=Bt.EMPTY_NODE}if(m.equals(_))u=t;else{let C=n.filter.updateChild(a.getNode(),h,_,p,d,s);u=Ev(t,C,a.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function r5(n,t){return n.eventCache.isCompleteForChild(t)}function rse(n,t,e,r,i,o,s){let a=t;return r.foreach((u,c)=>{let d=vr(e,u);r5(t,Yt(d))&&(a=ID(n,a,d,c,i,o,s))}),r.foreach((u,c)=>{let d=vr(e,u);r5(t,Yt(d))||(a=ID(n,a,d,c,i,o,s))}),a}function i5(n,t,e){return e.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function SD(n,t,e,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u=t,c;Zt(e)?c=r:c=new uo(null).setTree(e,r);let d=t.serverCache.getNode();return c.children.inorderTraversal((h,p)=>{if(d.hasChild(h)){let m=t.serverCache.getNode().getImmediateChild(h),_=i5(n,m,p);u=WC(n,u,new Cn(h),_,i,o,s,a)}}),c.children.inorderTraversal((h,p)=>{let m=!t.serverCache.isCompleteForChild(h)&&p.value===null;if(!d.hasChild(h)&&!m){let _=t.serverCache.getNode().getImmediateChild(h),C=i5(n,_,p);u=WC(n,u,new Cn(h),C,i,o,s,a)}}),u}function ise(n,t,e,r,i,o,s){if(zC(i,e)!=null)return t;let a=t.serverCache.isFiltered(),u=t.serverCache;if(r.value!=null){if(Zt(e)&&u.isFullyInitialized()||u.isCompleteForPath(e))return WC(n,t,e,u.getNode().getChild(e),i,o,a,s);if(Zt(e)){let c=new uo(null);return u.getNode().forEachChild(zh,(d,h)=>{c=c.set(new Cn(d),h)}),SD(n,t,e,c,i,o,a,s)}else return t}else{let c=new uo(null);return r.foreach((d,h)=>{let p=vr(e,d);u.isCompleteForPath(p)&&(c=c.set(d,u.getNode().getChild(p)))}),SD(n,t,e,c,i,o,a,s)}}function ose(n,t,e,r,i){let o=t.serverCache,s=z5(t,o.getNode(),o.isFullyInitialized()||Zt(e),o.isFiltered());return Y5(n,s,e,r,K5,i)}function sse(n,t,e,r,i,o){let s;if(zC(r,e)!=null)return t;{let a=new Ov(r,t,i),u=t.eventCache.getNode(),c;if(Zt(e)||Yt(e)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=jC(r,Hh(t));else{let h=t.serverCache.getNode();Ne(h instanceof Bt,"serverChildren would be complete if leaf node"),d=eP(r,h)}d=d,c=n.filter.updateFullNode(u,d,o)}else{let d=Yt(e),h=tP(r,d,t.serverCache);h==null&&t.serverCache.isCompleteForChild(d)&&(h=u.getImmediateChild(d)),h!=null?c=n.filter.updateChild(u,d,h,qn(e),a,o):t.eventCache.getNode().hasChild(d)?c=n.filter.updateChild(u,d,Bt.EMPTY_NODE,qn(e),a,o):c=u,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=jC(r,Hh(t)),s.isLeafNode()&&(c=n.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||zC(r,pn())!=null,Ev(t,c,s,n.filter.filtersNodes())}}var TD=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Mv(r.getIndex()),o=Aoe(r);this.processor_=Joe(o);let s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Bt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Bt.EMPTY_NODE,a.getNode(),null),d=new Su(u,s.isFullyInitialized(),i.filtersNodes()),h=new Su(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=JC(h,d),this.eventGenerator_=new yD(this.query_)}get query(){return this.query_}};function ase(n){return n.viewCache_.serverCache.getNode()}function use(n){return UC(n.viewCache_)}function cse(n,t){let e=Hh(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Zt(t)&&!e.getImmediateChild(Yt(t)).isEmpty())?e.getChild(t):null}function o5(n){return n.eventRegistrations_.length===0}function lse(n,t){n.eventRegistrations_.push(t)}function s5(n,t,e){let r=[];if(e){Ne(t==null,"A cancel should cancel all event registrations.");let i=n.query._path;n.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(e,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){let s=n.eventRegistrations_[o];if(!s.matches(t))i.push(s);else if(t.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function a5(n,t,e,r){t.type===Iu.MERGE&&t.source.queryId!==null&&(Ne(Hh(n.viewCache_),"We should always have a full cache before handling merges"),Ne(UC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=tse(n.processor_,i,t,e,r);return ese(n.processor_,o.viewCache),Ne(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Z5(n,o.changes,o.viewCache.eventCache.getNode(),null)}function dse(n,t){let e=n.viewCache_.eventCache,r=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(sr,(o,s)=>{r.push(vm(o,s))}),e.isFullyInitialized()&&r.push(U5(e.getNode())),Z5(n,r,e.getNode(),t)}function Z5(n,t,e,r){let i=r?[r]:n.eventRegistrations_;return Noe(n.eventGenerator_,t,e,i)}var HC,$C=class{constructor(){this.views=new Map}};function hse(n){Ne(!HC,"__referenceConstructor has already been defined"),HC=n}function fse(){return Ne(HC,"Reference.ts has not been loaded"),HC}function pse(n){return n.views.size===0}function nP(n,t,e,r){let i=t.source.queryId;if(i!==null){let o=n.views.get(i);return Ne(o!=null,"SyncTree gave us an op for an invalid query."),a5(o,t,e,r)}else{let o=[];for(let s of n.views.values())o=o.concat(a5(s,t,e,r));return o}}function Q5(n,t,e,r,i){let o=t._queryIdentifier,s=n.views.get(o);if(!s){let a=jC(e,i?r:null),u=!1;a?u=!0:r instanceof Bt?(a=eP(e,r),u=!1):(a=Bt.EMPTY_NODE,u=!1);let c=JC(new Su(a,u,!1),new Su(r,i,!1));return new TD(t,c)}return s}function mse(n,t,e,r,i,o){let s=Q5(n,t,r,i,o);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,s),lse(s,e),dse(s,e)}function gse(n,t,e,r){let i=t._queryIdentifier,o=[],s=[],a=Zl(n);if(i==="default")for(let[u,c]of n.views.entries())s=s.concat(s5(c,e,r)),o5(c)&&(n.views.delete(u),c.query._queryParams.loadsAllData()||o.push(c.query));else{let u=n.views.get(i);u&&(s=s.concat(s5(u,e,r)),o5(u)&&(n.views.delete(i),u.query._queryParams.loadsAllData()||o.push(u.query)))}return a&&!Zl(n)&&o.push(new(fse())(t._repo,t._path)),{removed:o,events:s}}function X5(n){let t=[];for(let e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Gl(n,t){let e=null;for(let r of n.views.values())e=e||cse(r,t);return e}function J5(n,t){if(t._queryParams.loadsAllData())return t1(n);{let r=t._queryIdentifier;return n.views.get(r)}}function e7(n,t){return J5(n,t)!=null}function Zl(n){return t1(n)!=null}function t1(n){for(let t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var qC;function vse(n){Ne(!qC,"__referenceConstructor has already been defined"),qC=n}function _se(){return Ne(qC,"Reference.ts has not been loaded"),qC}var yse=1,GC=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new uo(null),this.pendingWriteTree_=Qoe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function t7(n,t,e,r,i){return Boe(n.pendingWriteTree_,t,e,r,i),i?Em(n,new _m(QD(),t,e)):[]}function bse(n,t,e,r){Uoe(n.pendingWriteTree_,t,e,r);let i=uo.fromObject(e);return Em(n,new kv(QD(),t,i))}function $l(n,t,e=!1){let r=joe(n.pendingWriteTree_,t);if(zoe(n.pendingWriteTree_,t)){let o=new uo(null);return r.snap!=null?o=o.set(pn(),!0):Ci(r.children,s=>{o=o.set(new Cn(s),!0)}),Em(n,new _D(r.path,o,e))}else return[]}function Uv(n,t,e){return Em(n,new _m(XD(),t,e))}function wse(n,t,e){let r=uo.fromObject(e);return Em(n,new kv(XD(),t,r))}function Cse(n,t){return Em(n,new BC(XD(),t))}function xse(n,t,e){let r=iP(n,e);if(r){let i=oP(r),o=i.path,s=i.queryId,a=so(o,t),u=new BC(JD(s),a);return sP(n,o,u)}else return[]}function KC(n,t,e,r,i=!1){let o=t._path,s=n.syncPointTree_.get(o),a=[];if(s&&(t._queryIdentifier==="default"||e7(s,t))){let u=gse(s,t,e,r);pse(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));let c=u.removed;if(a=u.events,!i){let d=c.findIndex(p=>p._queryParams.loadsAllData())!==-1,h=n.syncPointTree_.findOnPath(o,(p,m)=>Zl(m));if(d&&!h){let p=n.syncPointTree_.subtree(o);if(!p.isEmpty()){let m=Sse(p);for(let _=0;_<m.length;++_){let C=m[_],x=C.query,S=o7(n,C);n.listenProvider_.startListening(Sv(x),Rv(n,x),S.hashFn,S.onComplete)}}}!h&&c.length>0&&!r&&(d?n.listenProvider_.stopListening(Sv(t),null):c.forEach(p=>{let m=n.queryToTagMap.get(n1(p));n.listenProvider_.stopListening(Sv(p),m)}))}Tse(n,c)}return a}function n7(n,t,e,r){let i=iP(n,r);if(i!=null){let o=oP(i),s=o.path,a=o.queryId,u=so(s,t),c=new _m(JD(a),u,e);return sP(n,s,c)}else return[]}function Ese(n,t,e,r){let i=iP(n,r);if(i){let o=oP(i),s=o.path,a=o.queryId,u=so(s,t),c=uo.fromObject(e),d=new kv(JD(a),u,c);return sP(n,s,d)}else return[]}function AD(n,t,e,r=!1){let i=t._path,o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(p,m)=>{let _=so(p,i);o=o||Gl(m,_),s=s||Zl(m)});let a=n.syncPointTree_.get(i);a?(s=s||Zl(a),o=o||Gl(a,pn())):(a=new $C,n.syncPointTree_=n.syncPointTree_.set(i,a));let u;o!=null?u=!0:(u=!1,o=Bt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((m,_)=>{let C=Gl(_,pn());C&&(o=o.updateImmediateChild(m,C))}));let c=e7(a,t);if(!c&&!t._queryParams.loadsAllData()){let p=n1(t);Ne(!n.queryToTagMap.has(p),"View does not exist, but we have a tag");let m=Ase();n.queryToTagMap.set(p,m),n.tagToQueryMap.set(m,p)}let d=e1(n.pendingWriteTree_,i),h=mse(a,t,e,d,o,u);if(!c&&!s&&!r){let p=J5(a,t);h=h.concat(Dse(n,t,p))}return h}function rP(n,t,e){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(t,(s,a)=>{let u=so(s,t),c=Gl(a,u);if(c)return c});return $5(i,t,o,e,!0)}function Ise(n,t){let e=t._path,r=null;n.syncPointTree_.foreachOnPath(e,(c,d)=>{let h=so(c,e);r=r||Gl(d,h)});let i=n.syncPointTree_.get(e);i?r=r||Gl(i,pn()):(i=new $C,n.syncPointTree_=n.syncPointTree_.set(e,i));let o=r!=null,s=o?new Su(r,!0,!1):null,a=e1(n.pendingWriteTree_,t._path),u=Q5(i,t,a,o?s.getNode():Bt.EMPTY_NODE,o);return use(u)}function Em(n,t){return r7(t,n.syncPointTree_,null,e1(n.pendingWriteTree_,pn()))}function r7(n,t,e,r){if(Zt(n.path))return i7(n,t,e,r);{let i=t.get(pn());e==null&&i!=null&&(e=Gl(i,pn()));let o=[],s=Yt(n.path),a=n.operationForChild(s),u=t.children.get(s);if(u&&a){let c=e?e.getImmediateChild(s):null,d=q5(r,s);o=o.concat(r7(a,u,c,d))}return i&&(o=o.concat(nP(i,n,r,e))),o}}function i7(n,t,e,r){let i=t.get(pn());e==null&&i!=null&&(e=Gl(i,pn()));let o=[];return t.children.inorderTraversal((s,a)=>{let u=e?e.getImmediateChild(s):null,c=q5(r,s),d=n.operationForChild(s);d&&(o=o.concat(i7(d,a,u,c)))}),i&&(o=o.concat(nP(i,n,r,e))),o}function o7(n,t){let e=t.query,r=Rv(n,e);return{hashFn:()=>(ase(t)||Bt.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?xse(n,e._path,r):Cse(n,e._path);{let o=Bie(i,e);return KC(n,e,null,o)}}}}function Rv(n,t){let e=n1(t);return n.queryToTagMap.get(e)}function n1(n){return n._path.toString()+"$"+n._queryIdentifier}function iP(n,t){return n.tagToQueryMap.get(t)}function oP(n){let t=n.indexOf("$");return Ne(t!==-1&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Cn(n.substr(0,t))}}function sP(n,t,e){let r=n.syncPointTree_.get(t);Ne(r,"Missing sync point for query tag that we're tracking");let i=e1(n.pendingWriteTree_,t);return nP(r,e,i,null)}function Sse(n){return n.fold((t,e,r)=>{if(e&&Zl(e))return[t1(e)];{let i=[];return e&&(i=X5(e)),Ci(r,(o,s)=>{i=i.concat(s)}),i}})}function Sv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(_se())(n._repo,n._path):n}function Tse(n,t){for(let e=0;e<t.length;++e){let r=t[e];if(!r._queryParams.loadsAllData()){let i=n1(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}function Ase(){return yse++}function Dse(n,t,e){let r=t._path,i=Rv(n,t),o=o7(n,e),s=n.listenProvider_.startListening(Sv(t),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)Ne(!Zl(a.value),"If we're adding a query, it shouldn't be shadowed");else{let u=a.fold((c,d,h)=>{if(!Zt(c)&&d&&Zl(d))return[t1(d).query];{let p=[];return d&&(p=p.concat(X5(d).map(m=>m.query))),Ci(h,(m,_)=>{p=p.concat(_)}),p}});for(let c=0;c<u.length;++c){let d=u[c];n.listenProvider_.stopListening(Sv(d),Rv(n,d))}}return s}var DD=class n{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new n(e)}node(){return this.node_}},PD=class n{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=vr(this.path_,t);return new n(this.syncTree_,e)}node(){return rP(this.syncTree_,this.path_)}},Pse=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},u5=function(n,t,e){if(!n||typeof n!="object")return n;if(Ne(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Mse(n[".sv"],t,e);if(typeof n[".sv"]=="object")return kse(n[".sv"],t);Ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Mse=function(n,t,e){switch(n){case"timestamp":return e.timestamp;default:Ne(!1,"Unexpected server value: "+n)}},kse=function(n,t,e){n.hasOwnProperty("increment")||Ne(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&Ne(!1,"Unexpected increment value: "+r);let i=t.node();if(Ne(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},s7=function(n,t,e,r){return aP(t,new PD(e,n),r)},a7=function(n,t,e){return aP(n,new DD(t),e)};function aP(n,t,e){let r=n.getPriority().val(),i=u5(r,t.getImmediateChild(".priority"),e),o;if(n.isLeafNode()){let s=n,a=u5(s.getValue(),t,e);return a!==s.getValue()||i!==s.getPriority().val()?new mm(a,Qr(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new mm(i))),s.forEachChild(sr,(a,u)=>{let c=aP(u,t.getImmediateChild(a),e);c!==u&&(o=o.updateImmediateChild(a,c))}),o}}var Nv=class{constructor(t="",e=null,r={children:{},childCount:0}){this.name=t,this.parent=e,this.node=r}};function uP(n,t){let e=t instanceof Cn?t:new Cn(t),r=n,i=Yt(e);for(;i!==null;){let o=Dh(r.node.children,i)||{children:{},childCount:0};r=new Nv(i,r,o),e=qn(e),i=Yt(e)}return r}function Im(n){return n.node.value}function u7(n,t){n.node.value=t,MD(n)}function c7(n){return n.node.childCount>0}function Ose(n){return Im(n)===void 0&&!c7(n)}function r1(n,t){Ci(n.node.children,(e,r)=>{t(new Nv(e,n,r))})}function l7(n,t,e,r){e&&!r&&t(n),r1(n,i=>{l7(i,t,!0,r)}),e&&r&&t(n)}function Rse(n,t,e){let r=e?n:n.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function jv(n){return new Cn(n.parent===null?n.name:jv(n.parent)+"/"+n.name)}function MD(n){n.parent!==null&&Nse(n.parent,n.name,n)}function Nse(n,t,e){let r=Ose(e),i=Ia(n.node.children,t);r&&i?(delete n.node.children[t],n.node.childCount--,MD(n)):!r&&!i&&(n.node.children[t]=e.node,n.node.childCount++,MD(n))}var Fse=/[\[\].#$\/\u0000-\u001F\u007F]/,Lse=/[\[\].#$\u0000-\u001F\u007F]/,WA=10*1024*1024,i1=function(n){return typeof n=="string"&&n.length!==0&&!Fse.test(n)},d7=function(n){return typeof n=="string"&&n.length!==0&&!Lse.test(n)},Vse=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),d7(n)},kD=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!HD(n)||n&&typeof n=="object"&&Ia(n,".sv")},zv=function(n,t,e,r){r&&t===void 0||o1(am(n,"value"),t,e)},o1=function(n,t,e){let r=e instanceof Cn?new rD(e,n):e;if(t===void 0)throw new Error(n+"contains undefined "+Bh(r));if(typeof t=="function")throw new Error(n+"contains a function "+Bh(r)+" with contents = "+t.toString());if(HD(t))throw new Error(n+"contains "+t.toString()+" "+Bh(r));if(typeof t=="string"&&t.length>WA/3&&rv(t)>WA)throw new Error(n+"contains a string greater than "+WA+" utf8 bytes "+Bh(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(Ci(t,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!i1(s)))throw new Error(n+" contains an invalid key ("+s+") "+Bh(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);moe(r,s),o1(n,a,r),goe(r)}),i&&o)throw new Error(n+' contains ".value" child '+Bh(r)+" in addition to actual children.")}},Bse=function(n,t){let e,r;for(e=0;e<t.length;e++){r=t[e];let o=Tv(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!i1(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(poe);let i=null;for(e=0;e<t.length;e++){if(r=t[e],i!==null&&js(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},Use=function(n,t,e,r){if(r&&t===void 0)return;let i=am(n,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");let o=[];Ci(t,(s,a)=>{let u=new Cn(s);if(o1(i,a,vr(e,u)),GD(u)===".priority"&&!kD(a))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(u)}),Bse(i,o)};var jse=function(n,t,e,r){if(!(r&&e===void 0)&&!i1(e))throw new Error(am(n,t)+'was an invalid key = "'+e+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},cP=function(n,t,e,r){if(!(r&&e===void 0)&&!d7(e))throw new Error(am(n,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zse=function(n,t,e,r){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cP(n,t,e,r)},lP=function(n,t){if(Yt(t)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Wse=function(n,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!i1(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!Vse(e))throw new Error(am(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var OD=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function s1(n,t){let e=null;for(let r=0;r<t.length;r++){let i=t[r],o=i.getPath();e!==null&&!KD(o,e.path)&&(n.eventLists_.push(e),e=null),e===null&&(e={events:[],path:o}),e.events.push(i)}e&&n.eventLists_.push(e)}function h7(n,t,e){s1(n,e),f7(n,r=>KD(r,t))}function Ws(n,t,e){s1(n,e),f7(n,r=>js(r,t)||js(t,r))}function f7(n,t){n.recursionDepth_++;let e=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;t(o)?(Hse(n.eventLists_[r]),n.eventLists_[r]=null):e=!1}}e&&(n.eventLists_=[]),n.recursionDepth_--}function Hse(n){for(let t=0;t<n.events.length;t++){let e=n.events[t];if(e!==null){n.events[t]=null;let r=e.getEventRunner();jh&&wi("event: "+e.toString()),xm(r)}}}var $se="repo_interrupt",qse=25,RD=class{constructor(t,e,r,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new OD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=VC(),this.transactionQueueTree_=new Nv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Gse(n,t,e){if(n.stats_=qD(n.repoInfo_),n.forceRestClient_||Wie())n.server_=new fD(n.repoInfo_,(r,i,o,s)=>{c5(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>l5(n,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Br(e)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new YD(n.repoInfo_,t,(r,i,o,s)=>{c5(n,r,i,o,s)},r=>{l5(n,r)},r=>{Kse(n,r)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=$ie(n.repoInfo_,()=>new vD(n.stats_,n.server_)),n.infoData_=new pD,n.infoSyncTree_=new GC({startListening:(r,i,o,s)=>{let a=[],u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=Uv(n.infoSyncTree_,r._path,u),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),dP(n,"connected",!1),n.serverSyncTree_=new GC({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,u)=>{let c=s(a,u);Ws(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function p7(n){let e=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function a1(n){return Pse({timestamp:p7(n)})}function c5(n,t,e,r,i){n.dataUpdateCount++;let o=new Cn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let s=[];if(i)if(r){let u=nv(e,c=>Qr(c));s=Ese(n.serverSyncTree_,o,u,i)}else{let u=Qr(e);s=n7(n.serverSyncTree_,o,u,i)}else if(r){let u=nv(e,c=>Qr(c));s=wse(n.serverSyncTree_,o,u)}else{let u=Qr(e);s=Uv(n.serverSyncTree_,o,u)}let a=o;s.length>0&&(a=bm(n,o)),Ws(n.eventQueue_,a,s)}function l5(n,t){dP(n,"connected",t),t===!1&&Xse(n)}function Kse(n,t){Ci(t,(e,r)=>{dP(n,e,r)})}function dP(n,t,e){let r=new Cn("/.info/"+t),i=Qr(e);n.infoData_.updateSnapshot(r,i);let o=Uv(n.infoSyncTree_,r,i);Ws(n.eventQueue_,r,o)}function hP(n){return n.nextWriteId_++}function Yse(n,t,e){let r=Ise(n.serverSyncTree_,t);return r!=null?Promise.resolve(r):n.server_.get(t).then(i=>{let o=Qr(i).withIndex(t._queryParams.getIndex());AD(n.serverSyncTree_,t,e,!0);let s;if(t._queryParams.loadsAllData())s=Uv(n.serverSyncTree_,t._path,o);else{let a=Rv(n.serverSyncTree_,t);s=n7(n.serverSyncTree_,t._path,o,a)}return Ws(n.eventQueue_,t._path,s),KC(n.serverSyncTree_,t,e,null,!0),o},i=>(Wv(n,"get for query "+Br(t)+" failed: "+i),Promise.reject(new Error(i))))}function Zse(n,t,e,r,i){Wv(n,"set",{path:t.toString(),value:e,priority:r});let o=a1(n),s=Qr(e,r),a=rP(n.serverSyncTree_,t),u=a7(s,a,o),c=hP(n),d=t7(n.serverSyncTree_,t,u,c,!0);s1(n.eventQueue_,d),n.server_.put(t.toString(),s.val(!0),(p,m)=>{let _=p==="ok";_||ao("set at "+t+" failed: "+p);let C=$l(n.serverSyncTree_,c,!_);Ws(n.eventQueue_,t,C),ND(n,i,p,m)});let h=pP(n,t);bm(n,h),Ws(n.eventQueue_,h,[])}function Qse(n,t,e,r){Wv(n,"update",{path:t.toString(),value:e});let i=!0,o=a1(n),s={};if(Ci(e,(a,u)=>{i=!1,s[a]=s7(vr(t,a),Qr(u),n.serverSyncTree_,o)}),i)wi("update() called with empty data.  Don't do anything."),ND(n,r,"ok",void 0);else{let a=hP(n),u=bse(n.serverSyncTree_,t,s,a);s1(n.eventQueue_,u),n.server_.merge(t.toString(),e,(c,d)=>{let h=c==="ok";h||ao("update at "+t+" failed: "+c);let p=$l(n.serverSyncTree_,a,!h),m=p.length>0?bm(n,t):t;Ws(n.eventQueue_,m,p),ND(n,r,c,d)}),Ci(e,c=>{let d=pP(n,vr(t,c));bm(n,d)}),Ws(n.eventQueue_,t,[])}}function Xse(n){Wv(n,"onDisconnectEvents");let t=a1(n),e=VC();mD(n.onDisconnect_,pn(),(i,o)=>{let s=s7(i,o,n.serverSyncTree_,t);j5(e,i,s)});let r=[];mD(e,pn(),(i,o)=>{r=r.concat(Uv(n.serverSyncTree_,i,o));let s=pP(n,i);bm(n,s)}),n.onDisconnect_=VC(),Ws(n.eventQueue_,pn(),r)}function Jse(n,t,e){let r;Yt(t._path)===".info"?r=AD(n.infoSyncTree_,t,e):r=AD(n.serverSyncTree_,t,e),h7(n.eventQueue_,t._path,r)}function d5(n,t,e){let r;Yt(t._path)===".info"?r=KC(n.infoSyncTree_,t,e):r=KC(n.serverSyncTree_,t,e),h7(n.eventQueue_,t._path,r)}function eae(n){n.persistentConnection_&&n.persistentConnection_.interrupt($se)}function Wv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),wi(e,...t)}function ND(n,t,e,r){t&&xm(()=>{if(e==="ok")t(null);else{let i=(e||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,t(s)}})}function m7(n,t,e){return rP(n.serverSyncTree_,t,e)||Bt.EMPTY_NODE}function fP(n,t=n.transactionQueueTree_){if(t||u1(n,t),Im(t)){let e=v7(n,t);Ne(e.length>0,"Sending zero length transaction queue"),e.every(i=>i.status===0)&&tae(n,jv(t),e)}else c7(t)&&r1(t,e=>{fP(n,e)})}function tae(n,t,e){let r=e.map(c=>c.currentWriteId),i=m7(n,t,r),o=i,s=i.hash();for(let c=0;c<e.length;c++){let d=e[c];Ne(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let h=so(t,d.path);o=o.updateChild(h,d.currentOutputSnapshotRaw)}let a=o.val(!0),u=t;n.server_.put(u.toString(),a,c=>{Wv(n,"transaction put response",{path:u.toString(),status:c});let d=[];if(c==="ok"){let h=[];for(let p=0;p<e.length;p++)e[p].status=2,d=d.concat($l(n.serverSyncTree_,e[p].currentWriteId)),e[p].onComplete&&h.push(()=>e[p].onComplete(null,!0,e[p].currentOutputSnapshotResolved)),e[p].unwatcher();u1(n,uP(n.transactionQueueTree_,t)),fP(n,n.transactionQueueTree_),Ws(n.eventQueue_,t,d);for(let p=0;p<h.length;p++)xm(h[p])}else{if(c==="datastale")for(let h=0;h<e.length;h++)e[h].status===3?e[h].status=4:e[h].status=0;else{ao("transaction at "+u.toString()+" failed: "+c);for(let h=0;h<e.length;h++)e[h].status=4,e[h].abortReason=c}bm(n,t)}},s)}function bm(n,t){let e=g7(n,t),r=jv(e),i=v7(n,e);return nae(n,i,r),r}function nae(n,t,e){if(t.length===0)return;let r=[],i=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let u=t[a],c=so(e,u.path),d=!1,h;if(Ne(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)d=!0,h=u.abortReason,i=i.concat($l(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=qse)d=!0,h="maxretry",i=i.concat($l(n.serverSyncTree_,u.currentWriteId,!0));else{let p=m7(n,u.path,s);u.currentInputSnapshot=p;let m=t[a].update(p.val());if(m!==void 0){o1("transaction failed: Data returned ",m,u.path);let _=Qr(m);typeof m=="object"&&m!=null&&Ia(m,".priority")||(_=_.updatePriority(p.getPriority()));let x=u.currentWriteId,S=a1(n),N=a7(_,p,S);u.currentOutputSnapshotRaw=_,u.currentOutputSnapshotResolved=N,u.currentWriteId=hP(n),s.splice(s.indexOf(x),1),i=i.concat(t7(n.serverSyncTree_,u.path,N,u.currentWriteId,u.applyLocally)),i=i.concat($l(n.serverSyncTree_,x,!0))}else d=!0,h="nodata",i=i.concat($l(n.serverSyncTree_,u.currentWriteId,!0))}Ws(n.eventQueue_,e,i),i=[],d&&(t[a].status=2,function(p){setTimeout(p,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(h==="nodata"?r.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):r.push(()=>t[a].onComplete(new Error(h),!1,null))))}u1(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)xm(r[a]);fP(n,n.transactionQueueTree_)}function g7(n,t){let e,r=n.transactionQueueTree_;for(e=Yt(t);e!==null&&Im(r)===void 0;)r=uP(r,e),t=qn(t),e=Yt(t);return r}function v7(n,t){let e=[];return _7(n,t,e),e.sort((r,i)=>r.order-i.order),e}function _7(n,t,e){let r=Im(t);if(r)for(let i=0;i<r.length;i++)e.push(r[i]);r1(t,i=>{_7(n,i,e)})}function u1(n,t){let e=Im(t);if(e){let r=0;for(let i=0;i<e.length;i++)e[i].status!==2&&(e[r]=e[i],r++);e.length=r,u7(t,e.length>0?e:void 0)}r1(t,r=>{u1(n,r)})}function pP(n,t){let e=jv(g7(n,t)),r=uP(n.transactionQueueTree_,t);return Rse(r,i=>{HA(n,i)}),HA(n,r),l7(r,i=>{HA(n,i)}),e}function HA(n,t){let e=Im(t);if(e){let r=[],i=[],o=-1;for(let s=0;s<e.length;s++)e[s].status===3||(e[s].status===1?(Ne(o===s-1,"All SENT items should be at beginning of queue."),o=s,e[s].status=3,e[s].abortReason="set"):(Ne(e[s].status===0,"Unexpected transaction status in abort"),e[s].unwatcher(),i=i.concat($l(n.serverSyncTree_,e[s].currentWriteId,!0)),e[s].onComplete&&r.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?u7(t,void 0):e.length=o+1,Ws(n.eventQueue_,jv(t),i);for(let s=0;s<r.length;s++)xm(r[s])}}function rae(n){let t="",e=n.split("/");for(let r=0;r<e.length;r++)if(e[r].length>0){let i=e[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function iae(n){let t={};n.charAt(0)==="?"&&(n=n.substring(1));for(let e of n.split("&")){if(e.length===0)continue;let r=e.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ao(`Invalid query segment '${e}' in query '${n}'`)}return t}var h5=function(n,t){let e=oae(n),r=e.namespace;e.domain==="firebase.com"&&Pc(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&e.domain!=="localhost"&&Pc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||Rie();let i=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new PC(e.host,e.secure,r,i,t,"",r!==e.subdomain),path:new Cn(e.pathString)}},oae=function(n){let t="",e="",r="",i="",o="",s=!0,a="https",u=443;if(typeof n=="string"){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let d=n.indexOf("/");d===-1&&(d=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),t=n.substring(0,Math.min(d,h)),d<h&&(i=rae(n.substring(d,h)));let p=iae(n.substring(Math.min(n.length,h)));c=t.indexOf(":"),c>=0?(s=a==="https"||a==="wss",u=parseInt(t.substring(c+1),10)):c=t.length;let m=t.slice(0,c);if(m.toLowerCase()==="localhost")e="localhost";else if(m.split(".").length<=2)e=m;else{let _=t.indexOf(".");r=t.substring(0,_).toLowerCase(),e=t.substring(_+1),o=r}"ns"in p&&(o=p.ns)}return{host:t,port:u,domain:e,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var f5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",sae=function(){let n=0,t=[];return function(e){let r=e===n;n=e;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=f5.charAt(e%64),e=Math.floor(e/64);Ne(e===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=f5.charAt(t[i]);return Ne(s.length===20,"nextPushId: Length should be 20."),s}}();var YC=class{constructor(t,e,r,i){this.eventType=t,this.eventRegistration=e,this.snapshot=r,this.prevName=i}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Br(this.snapshot.exportVal())}},ZC=class{constructor(t,e,r){this.eventRegistration=t,this.error=e,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var QC=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return Ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var wm=class n{constructor(t,e,r,i){this._repo=t,this._path=e,this._queryParams=r,this._orderByCalled=i}get key(){return Zt(this._path)?null:GD(this._path)}get ref(){return new Tu(this._repo,this._path)}get _queryIdentifier(){let t=XB(this._queryParams),e=$D(t);return e==="{}"?"default":e}get _queryObject(){return XB(this._queryParams)}isEqual(t){if(t=Dr(t),!(t instanceof n))return!1;let e=this._repo===t._repo,r=KD(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+foe(this._path)}};function aae(n,t){if(n._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function mP(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===zh){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Wh)throw new Error(r);if(typeof t!="string")throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Kl)throw new Error(r);if(typeof e!="string")throw new Error(i)}}else if(n.getIndex()===sr){if(t!=null&&!kD(t)||e!=null&&!kD(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ne(n.getIndex()instanceof Av||n.getIndex()===B5,"unknown index type."),t!=null&&typeof t=="object"||e!=null&&typeof e=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function y7(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Tu=class n extends wm{constructor(t,e){super(t,e,new hD,!1)}get parent(){let t=O5(this._path);return t===null?null:new n(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Fv=class n{constructor(t,e,r){this._node=t,this.ref=e,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new Cn(t),r=$h(this.ref,t);return new n(this._node.getChild(e),r,sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new n(i,$h(this.ref,r),sr)))}hasChild(t){let e=new Cn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function b7(n,t){return n=Dr(n),n._checkNotDeleted("ref"),t!==void 0?$h(n._root,t):n._root}function $h(n,t){return n=Dr(n),Yt(n._path)===null?zse("child","path",t,!1):cP("child","path",t,!1),new Tu(n._repo,vr(n._path,t))}function w7(n,t){n=Dr(n),lP("push",n._path),zv("push",t,n._path,!0);let e=p7(n._repo),r=sae(e),i=$h(n,r),o=$h(n,r),s;return t!=null?s=c1(o,t).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function C7(n){return lP("remove",n._path),c1(n,null)}function c1(n,t){n=Dr(n),lP("set",n._path),zv("set",t,n._path,!1);let e=new Vs;return Zse(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function x7(n,t){Use("update",t,n._path,!1);let e=new Vs;return Qse(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function E7(n){n=Dr(n);let t=new QC(()=>{}),e=new XC(t);return Yse(n._repo,n,e).then(r=>new Fv(r,new Tu(n._repo,n._path),n._queryParams.getIndex()))}var XC=class n{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let r=e._queryParams.getIndex();return new YC("value",this,new Fv(t.snapshotNode,new Tu(e._repo,e._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ZC(this,t,e):null}matches(t){return t instanceof n?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},FD=class n{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new ZC(this,t,e):null}createEvent(t,e){Ne(t.childName!=null,"Child events should have a childName.");let r=$h(new Tu(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new YC(t.type,this,new Fv(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof n?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function uae(n,t,e,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let u=e,c=(d,h)=>{d5(n._repo,n,a),u(d,h)};c.userCallback=e.userCallback,c.context=e.context,e=c}let s=new QC(e,o||void 0),a=t==="value"?new XC(s):new FD(t,s);return Jse(n._repo,n,a),()=>d5(n._repo,n,a)}function I7(n,t,e,r){return uae(n,"value",t,e,r)}var Cm=class{},LD=class extends Cm{constructor(t,e){super(),this._value=t,this._key=e,this.type="endAt"}_apply(t){zv("endAt",this._value,t._path,!0);let e=Poe(t._queryParams,this._value,this._key);if(y7(e),mP(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wm(t._repo,t._path,e,t._orderByCalled)}};var VD=class extends Cm{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAt"}_apply(t){zv("startAt",this._value,t._path,!0);let e=Doe(t._queryParams,this._value,this._key);if(y7(e),mP(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wm(t._repo,t._path,e,t._orderByCalled)}};var BD=class extends Cm{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){aae(t,"orderByChild");let e=new Cn(this._path);if(Zt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new Av(e),i=Moe(t._queryParams,r);return mP(i),new wm(t._repo,t._path,i,!0)}};function S7(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cP("orderByChild","path",n,!1),new BD(n)}var UD=class extends Cm{constructor(t,e){super(),this._value=t,this._key=e,this.type="equalTo"}_apply(t){if(zv("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new LD(this._value,this._key)._apply(new VD(this._value,this._key)._apply(t))}};function T7(n,t){return jse("equalTo","key",t,!0),new UD(n,t)}function A7(n,...t){let e=Dr(n);for(let r of t)e=r._apply(e);return e}hse(Tu);vse(Tu);var cae="FIREBASE_DATABASE_EMULATOR_HOST",jD={},lae=!1;function dae(n,t,e,r){n.repoInfo_=new PC(t,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,e),r&&(n.authTokenProvider_=r)}function hae(n,t,e,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Pc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=h5(o,i),a=s.repoInfo,u,c;typeof process<"u"&&process.env&&(c=process.env[cae]),c?(u=!0,o=`http://${c}?ns=${a.namespace}`,s=h5(o,i),a=s.repoInfo):u=!s.repoInfo.secure;let d=i&&u?new xv(xv.OWNER):new ZA(n.name,n.options,t);Wse("Invalid Firebase Database URL",s),Zt(s.path)||Pc("Database URL must point to the root of a Firebase Database (not including a child path).");let h=pae(a,n,d,new YA(n,e));return new zD(h,n)}function fae(n,t){let e=jD[t];(!e||e[n.key]!==n)&&Pc(`Database ${t}(${n.repoInfo_}) has already been deleted.`),eae(n),delete e[n.key]}function pae(n,t,e,r){let i=jD[t.name];i||(i={},jD[t.name]=i);let o=i[n.toURLString()];return o&&Pc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new RD(n,lae,e,r),i[n.toURLString()]=o,o}var zD=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Gse(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tu(this._repo,pn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(fae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Pc("Cannot call "+t+" on a deleted database.")}};function D7(n=xc(),t){let e=Ll(n,"database").getImmediate({identifier:t});if(!e._instanceStarted){let r=eC("database");r&&P7(e,...r)}return e}function P7(n,t,e,r={}){n=Dr(n),n._checkNotDeleted("useEmulator");let i=`${t}:${e}`,o=n._repoInternal;if(n._instanceStarted){if(i===n._repoInternal.repoInfo_.host&&Bs(r,o.repoInfo_.emulatorOptions))return;Pc("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let s;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Pc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xv(xv.OWNER);else if(r.mockUserToken){let a=typeof r.mockUserToken=="string"?r.mockUserToken:tC(r.mockUserToken,n.app.options.projectId);s=new xv(a)}dae(o,i,r,s)}function mae(n){Mie(bu),hs(new bi("database",(t,{instanceIdentifier:e})=>{let r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return hae(r,i,o,e)},"PUBLIC").setMultipleInstances(!0)),Un(NB,FB,n),Un(NB,FB,"esm2017")}YD.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)};YD.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)};mae();var xi=class{constructor(t){return t}},M7="database",gP=class{constructor(){return Vl(M7)}};var vP=new $e("angularfire2.database-instances");function gae(n,t){let e=Oh(M7,n,t);return e&&new xi(e)}function vae(n){return(t,e)=>{let r=t.runOutsideAngular(()=>n(e));return new xi(r)}}var _ae={provide:gP,deps:[[new ii,vP]]},yae={provide:xi,useFactory:gae,deps:[[new ii,vP],Sa]};function k7(n,...t){return Un("angularfire",wu.full,"rtdb"),Po([yae,_ae,{provide:vP,useFactory:vae(n),multi:!0,deps:[tn,rr,Cu,Ec,[new ii,Vh],[new ii,Ul],...t]}])}var O7=ir(T7,!0,2);var ai=ir(E7,!0),R7=ir(D7,!0);var _P=ir(I7,!0),yP=ir(S7,!0,2);var Kh=ir(w7,!0,2),bP=ir(A7,!0,2),jt=ir(b7,!0,2);var Yh=ir(C7,!0,2);var fs=ir(c1,!0,2);var Mc=ir(x7,!0,2);var Wi=class n{constructor(t){this.db=t}createUserData(t,e){let r=jt(this.db,`users/${t}`),i=Ie({uid:t},e);return rt(fs(r,i))}getUserData(t){let e=jt(this.db,`users/${t}`);return rt(ai(e))}updateUserData(t,e){let r=jt(this.db,`users/${t}`);return rt(Mc(r,e))}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hs=class n{constructor(t){this.db=t}adminsList=[{email:"info@tabibi.com",password:"123456"}];getAllDoctors(){let t=jt(this.db,"users");return rt(ai(t)).pipe(ct(e=>{let r=e.val();return r?Object.entries(r).filter(([i,o])=>o.role==="doctor").map(([i,o])=>Ie({uid:i},o)):[]}))}getAllUsers(){let t=jt(this.db,"users");return rt(ai(t)).pipe(ct(e=>{let r=e.val();return r?Object.entries(r).filter(([i,o])=>o.role!=="doctor").map(([i,o])=>Ie({uid:i},o)):[]}))}getUserById(t){let e=jt(this.db,`users/${t}`);return rt(ai(e)).pipe(ct(r=>{let i=r.val();return i?Ie({uid:t},i):null}))}createUser(t){let e=jt(this.db,"users"),r=Kh(e);return rt(fs(r,bt(Ie({},t),{role:"client"}))).pipe(ct(()=>Ie({uid:r.key},t)))}createDoctor(t){let e=jt(this.db,"users"),r=Kh(e);return rt(fs(r,bt(Ie({},t),{role:"doctor"}))).pipe(ct(()=>Ie({uid:r.key},t)))}updateUser(t,e){let r=jt(this.db,`users/${t}`);return rt(Mc(r,e))}updateDoctor(t,e){let r=jt(this.db,`users/${t}`);return rt(Mc(r,e))}deleteUser(t){let e=jt(this.db,`users/${t}`);return rt(Yh(e))}deleteDoctor(t){let e=jt(this.db,`users/${t}`);return rt(Yh(e))}toggleUserStatus(t,e){let r=jt(this.db,`users/${t}`);return rt(Mc(r,{isActive:e}))}toggleDoctorVerification(t,e){let r=jt(this.db,`users/${t}`);return rt(Mc(r,{isVerified:e}))}batchDeleteUsers(t){let e=t.map(r=>Yh(jt(this.db,`users/${r}`)));return rt(Promise.all(e))}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ql=class n{constructor(t){this.db=t;this.doctorsRef=jt(this.db,"doctors")}doctorsRef;getAllDoctors(){let t=jt(this.db,"users");return rt(ai(t)).pipe(ct(e=>{let r=e.val();return r?Object.entries(r).filter(([i,o])=>o.role==="doctor").map(([i,o])=>Ie({uid:i},o)):[]}))}getDoctorById(t){let e=jt(this.db,`users/${t}`);return rt(ai(e)).pipe(ct(r=>{let i=r.val();return i?Ie({uid:t},i):null}))}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var $s=class n{constructor(t){this.http=t}egyptCities=["\u0627\u0644\u0642\u0627\u0647\u0631\u0629","\u0627\u0644\u062C\u064A\u0632\u0629","\u0627\u0644\u0625\u0633\u0643\u0646\u062F\u0631\u064A\u0629","\u0628\u0648\u0631\u0633\u0639\u064A\u062F","\u0627\u0644\u0633\u0648\u064A\u0633","\u062F\u0645\u064A\u0627\u0637","\u0627\u0644\u062F\u0642\u0647\u0644\u064A\u0629","\u0627\u0644\u0634\u0631\u0642\u064A\u0629","\u0627\u0644\u0642\u0644\u064A\u0648\u0628\u064A\u0629","\u0643\u0641\u0631 \u0627\u0644\u0634\u064A\u062E","\u0627\u0644\u063A\u0631\u0628\u064A\u0629","\u0627\u0644\u0645\u0646\u0648\u0641\u064A\u0629","\u0627\u0644\u0628\u062D\u064A\u0631\u0629","\u0627\u0644\u0625\u0633\u0645\u0627\u0639\u064A\u0644\u064A\u0629","\u0628\u0646\u064A \u0633\u0648\u064A\u0641","\u0627\u0644\u0641\u064A\u0648\u0645","\u0627\u0644\u0645\u0646\u064A\u0627","\u0623\u0633\u064A\u0648\u0637","\u0633\u0648\u0647\u0627\u062C","\u0642\u0646\u0627","\u0627\u0644\u0623\u0642\u0635\u0631","\u0623\u0633\u0648\u0627\u0646","\u0627\u0644\u0648\u0627\u062F\u064A \u0627\u0644\u062C\u062F\u064A\u062F","\u0645\u0637\u0631\u0648\u062D","\u0634\u0645\u0627\u0644 \u0633\u064A\u0646\u0627\u0621","\u062C\u0646\u0648\u0628 \u0633\u064A\u0646\u0627\u0621","\u0627\u0644\u0628\u062D\u0631 \u0627\u0644\u0623\u062D\u0645\u0631"];doctorSpecializations=["\u0628\u0627\u0637\u0646\u0629","\u0623\u0637\u0641\u0627\u0644 \u0648\u062D\u062F\u064A\u062B\u064A \u0627\u0644\u0648\u0644\u0627\u062F\u0629","\u0646\u0633\u0627\u0621 \u0648\u062A\u0648\u0644\u064A\u062F","\u062C\u0631\u0627\u062D\u0629 \u0639\u0627\u0645\u0629","\u062C\u0631\u0627\u062D\u0629 \u0639\u0638\u0627\u0645","\u0623\u0646\u0641 \u0648\u0623\u0630\u0646 \u0648\u062D\u0646\u062C\u0631\u0629","\u062C\u0644\u062F\u064A\u0629 \u0648\u062A\u0646\u0627\u0633\u0644\u064A\u0629","\u0623\u0633\u0646\u0627\u0646","\u0645\u062E \u0648\u0623\u0639\u0635\u0627\u0628","\u0642\u0644\u0628 \u0648\u0623\u0648\u0639\u064A\u0629 \u062F\u0645\u0648\u064A\u0629","\u0631\u0645\u0636 (\u0639\u064A\u0648\u0646)","\u0646\u0641\u0633\u064A\u0629 \u0648\u0639\u0635\u0628\u064A\u0629","\u062A\u063A\u0630\u064A\u0629 \u0639\u0644\u0627\u062C\u064A\u0629","\u0623\u0648\u0631\u0627\u0645","\u0637\u0628 \u0627\u0644\u0623\u0633\u0631\u0629","\u0635\u062F\u0631 \u0648\u062D\u0633\u0627\u0633\u064A\u0629","\u0643\u0644\u0649","\u0623\u0634\u0639\u0629 \u0648\u062A\u0634\u062E\u064A\u0635 \u0637\u0628\u064A","\u0639\u0644\u0627\u062C \u0637\u0628\u064A\u0639\u064A","\u062A\u062D\u0627\u0644\u064A\u0644 \u0637\u0628\u064A\u0629 \u0648\u0645\u0639\u0645\u0644"];getLocation(t,e){return this.http.get(`https://geocode.maps.co/reverse?lat=${t}&lon=${e}`)}static \u0275fac=function(e){return new(e||n)(qe(jp))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var bae=n=>["/doctor",n];function wae(n,t){n&1&&(w(0,"p",54),A(1," \u0645\u0646\u0635\u062A\u0643 \u0627\u0644\u0645\u0648\u062B\u0648\u0642\u0629 \u0644\u062D\u062C\u0632 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0637\u0628\u064A\u0629 \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0633\u0631\u0639\u0629. \u0627\u0643\u062A\u0634\u0641 \u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0641\u064A \u0645\u062E\u062A\u0644\u0641 \u0627\u0644\u062A\u062E\u0635\u0635\u0627\u062A \u0648\u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0643 \u0627\u0644\u0622\u0646. "),b(),w(2,"div",55)(3,"a",56),A(4,"\u0627\u0628\u062F\u0623 \u0627\u0644\u0622\u0646"),b(),w(5,"a",57),A(6,"\u062A\u0635\u0641\u062D \u0627\u0644\u0623\u0637\u0628\u0627\u0621"),b()())}function Cae(n,t){if(n&1&&(w(0,"p",54),A(1),b(),w(2,"div",55)(3,"a",58),G(4,"i",59),A(5,"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645 "),b(),w(6,"a",60),G(7,"i",61),A(8,"\u0645\u0648\u0627\u0639\u064A\u062F \u0639\u064A\u0627\u062F\u062A\u064A "),b()()),n&2){let e=ve();W(),Ze(" \u0645\u0631\u062D\u0628\u0627\u064B \u062F. ",e.userData.displayName,"! \u064A\u0645\u0643\u0646\u0643 \u0625\u062F\u0627\u0631\u0629 \u0645\u0648\u0627\u0639\u064A\u062F\u0643 \u0648\u062A\u062D\u062F\u064A\u062B \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0639\u064A\u0627\u062F\u062A\u0643 \u0645\u0646 \u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645. ")}}function xae(n,t){if(n&1&&(w(0,"p",54),A(1),b(),w(2,"div",55)(3,"a",62),G(4,"i",63),A(5,"\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628 "),b(),w(6,"a",64),G(7,"i",65),A(8,"\u0645\u0648\u0627\u0639\u064A\u062F\u064A "),b()()),n&2){let e=ve();W(),Ze(" \u0645\u0631\u062D\u0628\u0627\u064B ",e.userData.displayName,"! \u064A\u0645\u0643\u0646\u0643 \u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628 \u0648\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0643 \u0628\u0643\u0644 \u0633\u0647\u0648\u0644\u0629. ")}}function Eae(n,t){n&1&&(w(0,"section",25)(1,"div",12)(2,"h2",36),A(3,"\u0643\u064A\u0641 \u064A\u0639\u0645\u0644 \u0637\u0628\u064A\u0628\u064A\u061F"),b(),w(4,"div",66)(5,"div",67)(6,"div",68)(7,"div",69),G(8,"i",70),b(),w(9,"h4"),A(10,"\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628"),b(),w(11,"p"),A(12,"\u0627\u062E\u062A\u0631 \u0627\u0644\u062A\u062E\u0635\u0635 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0648\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628\u0643"),b()()(),w(13,"div",71)(14,"div",68)(15,"div",72),G(16,"i",73),b(),w(17,"h4"),A(18,"\u0627\u062E\u062A\u0631 \u0645\u0648\u0639\u062F\u0643"),b(),w(19,"p"),A(20,"\u062D\u062F\u062F \u0627\u0644\u0648\u0642\u062A \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0644\u0643 \u0645\u0646 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),b()()(),w(21,"div",67)(22,"div",68)(23,"div",74),G(24,"i",75),b(),w(25,"h4"),A(26,"\u0623\u0643\u062F \u062D\u062C\u0632\u0643"),b(),w(27,"p"),A(28,"\u0642\u0645 \u0628\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632 \u0648\u0627\u0633\u062A\u0644\u0645 \u062A\u0641\u0627\u0635\u064A\u0644 \u0645\u0648\u0639\u062F\u0643"),b()()()()()())}function Iae(n,t){if(n&1&&(w(0,"div",77)(1,"div",78)(2,"div",79),G(3,"img",80),w(4,"div",81)(5,"div",82)(6,"p"),G(7,"i",83),A(8),b(),w(9,"p"),G(10,"i",84),A(11),b()()()(),w(12,"div",85)(13,"h5",86),A(14),b(),w(15,"p",87),G(16,"i",88),A(17),b(),w(18,"div",89)(19,"a",90),G(20,"i",91),A(21," \u0627\u062A\u0635\u0627\u0644 "),b(),w(22,"a",92),G(23,"i",93),A(24," \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A "),b()()()()()),n&2){let e=t.$implicit,r=t.$index;mc("data-aos-delay",r*100),W(3),rS("alt",e.displayName),xe("src",e.image||"assets/images/default-doctor.jpg",It),W(5),st(e.specialization),W(3),Ze("\u062E\u0628\u0631\u0629: ",e.experience," \u0633\u0646\u0648\u0627\u062A"),W(3),Ze("\u062F. ",e.displayName,""),W(3),f0(" ",e.city," - ",e.clinicAddress," "),W(2),xe("href","tel:+20"+e.phone,It),W(3),xe("routerLink",ph(10,bae,e.uid))}}function Sae(n,t){if(n&1&&(w(0,"section",33)(1,"div",12)(2,"h2",36),A(3,"\u0623\u0637\u0628\u0627\u0624\u0646\u0627 \u0627\u0644\u0645\u0645\u064A\u0632\u0648\u0646"),b(),w(4,"div",76),_n(5,Iae,25,12,"div",77,Lr),b()()()),n&2){let e=ve();W(5),yn(e.doctors)}}function Tae(n,t){n&1&&(w(0,"section",34)(1,"div",12)(2,"div",94)(3,"div",95)(4,"h3",96),A(5,"\u0627\u0634\u062A\u0631\u0643 \u0641\u064A \u0646\u0634\u0631\u062A\u0646\u0627 \u0627\u0644\u0628\u0631\u064A\u062F\u064A\u0629"),b(),w(6,"p",96),A(7,"\u0627\u062D\u0635\u0644 \u0639\u0644\u0649 \u0622\u062E\u0631 \u0627\u0644\u0623\u062E\u0628\u0627\u0631 \u0648\u0627\u0644\u0639\u0631\u0648\u0636 \u0627\u0644\u0637\u0628\u064A\u0629"),b(),w(8,"div",97),G(9,"input",98),w(10,"button",99),A(11,"\u0627\u0634\u062A\u0631\u0643 \u0627\u0644\u0622\u0646"),b()()()()()())}function Aae(n,t){n&1&&(w(0,"section",52)(1,"div",12)(2,"h2",36),A(3,"\u0627\u0644\u0623\u0633\u0626\u0644\u0629 \u0627\u0644\u0634\u0627\u0626\u0639\u0629"),b(),w(4,"div",100)(5,"div",101)(6,"h2",102)(7,"button",103),A(8," \u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0639 \u0637\u0628\u064A\u0628\u061F "),b()(),w(9,"div",104)(10,"div",105),A(11," \u064A\u0645\u0643\u0646\u0643 \u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0637\u0628\u064A\u0628 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u0644\u062A\u062E\u0635\u0635 \u0623\u0648 \u0627\u0644\u0645\u0648\u0642\u0639\u060C \u062B\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u062A\u0627\u062D \u0648\u0627\u0644\u062D\u062C\u0632 \u0645\u0628\u0627\u0634\u0631\u0629 \u0639\u0628\u0631 \u0627\u0644\u0645\u0646\u0635\u0629. "),b()()(),w(12,"div",101)(13,"h2",106)(14,"button",107),A(15," \u0647\u0644 \u0627\u0644\u062E\u062F\u0645\u0629 \u0645\u062C\u0627\u0646\u064A\u0629\u061F "),b()(),w(16,"div",108)(17,"div",105),A(18," \u0646\u0639\u0645\u060C \u062E\u062F\u0645\u0629 \u0627\u0644\u062D\u062C\u0632 \u0639\u0628\u0631 \u0645\u0646\u0635\u0629 \u0637\u0628\u064A\u0628\u064A \u0645\u062C\u0627\u0646\u064A\u0629 \u062A\u0645\u0627\u0645\u064B\u0627 \u062F\u0648\u0646 \u0623\u064A \u0631\u0633\u0648\u0645 \u0625\u0636\u0627\u0641\u064A\u0629. "),b()()()()()())}function Dae(n,t){n&1&&(w(0,"section",53)(1,"div",12)(2,"h2",109),A(3,'\u0627\u0646\u0636\u0645 \u0625\u0644\u0649 \u0622\u0644\u0627\u0641 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0627\u0644\u0630\u064A\u0646 \u064A\u062B\u0642\u0648\u0646 \u0628\u0640 "\u0637\u0628\u064A\u0628\u064A"'),b(),w(4,"a",110),A(5,"\u0633\u062C\u0644 \u0627\u0644\u0622\u0646"),b()()())}var l1=class n{constructor(t,e,r,i,o,s){this.auth=t;this.router=e;this.userService=r;this.adminService=i;this.doctorService=o;this.settingsService=s;this.specializations=this.settingsService.doctorSpecializations,this.auth.onAuthStateChanged(a=>{this.user=a,this.isLoggedIn=!!a,this.isAdmin=this.adminService.adminsList.some(u=>u.email===a?.email),a&&!this.isAdmin&&this.userService.getUserData(a.uid).subscribe(u=>{this.userData=u.val(),this.isDoctor=this.userData.role==="doctor"})})}user;userData=null;isLoggedIn=!1;isAdmin=!1;isDoctor=!1;doctors;specializations=[];testimonials=[{name:"\u0633\u0627\u0631\u0629 \u0645\u062D\u0645\u062F",role:"\u0645\u0631\u064A\u0636\u0629",image:"assets/images/testimonial-1.jpg",comment:"\u062A\u062C\u0631\u0628\u0629 \u0631\u0627\u0626\u0639\u0629! \u062D\u062C\u0632\u062A \u0645\u0648\u0639\u062F\u064A \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0627\u0644\u0637\u0628\u064A\u0628 \u0643\u0627\u0646 \u0645\u062D\u062A\u0631\u0641\u064B\u0627 \u062C\u062F\u064B\u0627.",rating:5},{name:"\u0623\u062D\u0645\u062F \u0639\u0644\u064A",role:"\u0645\u0631\u064A\u0636",image:"assets/images/testimonial-2.jpg",comment:"\u0645\u0646\u0635\u0629 \u0645\u0648\u062B\u0648\u0642\u0629 \u0648\u0633\u0647\u0644\u0629 \u0627\u0644\u0627\u0633\u062A\u062E\u062F\u0627\u0645. \u0623\u0646\u0635\u062D \u0628\u0647\u0627 \u0644\u0644\u062C\u0645\u064A\u0639.",rating:5},{name:"\u0644\u064A\u0644\u0649 \u062D\u0633\u0646",role:"\u0645\u0631\u064A\u0636\u0629",image:"assets/images/testimonial-3.jpg",comment:"\u062E\u062F\u0645\u0629 \u0645\u0645\u062A\u0627\u0632\u0629 \u0648\u062F\u0639\u0645 \u0641\u0646\u064A \u0645\u062A\u0639\u0627\u0648\u0646. \u0634\u0643\u0631\u064B\u0627 \u0637\u0628\u064A\u0628\u064A!",rating:5}];stats=[{icon:"user-md",count:"500+",label:"\u0637\u0628\u064A\u0628 \u0645\u0639\u062A\u0645\u062F",color:"primary"},{icon:"users",count:"10,000+",label:"\u0645\u0631\u064A\u0636 \u0633\u0639\u064A\u062F",color:"success"},{icon:"hospital",count:"50+",label:"\u062A\u062E\u0635\u0635 \u0637\u0628\u064A",color:"info"},{icon:"calendar-check",count:"20,000+",label:"\u0645\u0648\u0639\u062F \u0646\u0627\u062C\u062D",color:"warning"}];ngOnInit(){N7.init({duration:1e3,once:!0,mirror:!1}),this.getDoctors()}getDoctors(){this.doctorService.getAllDoctors().subscribe(t=>{this.doctors=t.slice(0,3)})}static \u0275fac=function(e){return new(e||n)(me(or),me(Ar),me(Wi),me(Hs),me(Ql),me($s))};static \u0275cmp=_t({type:n,selectors:[["app-home"]],decls:105,vars:8,consts:[[1,"hero-section","py-5","bg-gradient","position-relative","overflow-hidden"],[1,"container","position-relative",2,"z-index","2"],[1,"row","align-items-center"],[1,"col-md-6","text-center","text-md-start"],[1,"display-4","fw-bold","text-primary"],[1,"text-success","animate__animated","animate__pulse","animate__infinite"],[1,"col-md-6","text-center"],["src","assets/images/logo-image.png","draggable","false","alt","landing-image",1,"img-fluid","floating-animation"],[1,"shape","shape-1"],[1,"shape","shape-2"],[1,"shape","shape-3"],[1,"stats-section","py-5","bg-light"],[1,"container"],[1,"row","text-center"],["data-aos","fade-up",1,"col-md-3","mb-4"],[1,"stat-card","p-4","rounded-4","bg-white","shadow-sm"],[1,"fas","fa-user-md","display-4","text-primary","mb-3"],[1,"counter"],[1,"text-muted"],["data-aos","fade-up","data-aos-delay","100",1,"col-md-3","mb-4"],[1,"fas","fa-users","display-4","text-success","mb-3"],["data-aos","fade-up","data-aos-delay","200",1,"col-md-3","mb-4"],[1,"fas","fa-hospital","display-4","text-info","mb-3"],["data-aos","fade-up","data-aos-delay","300",1,"col-md-3","mb-4"],[1,"fas","fa-calendar-check","display-4","text-warning","mb-3"],[1,"how-it-works","py-5"],[1,"features-section","py-5"],[1,"col-md-4","mb-4"],[1,"p-4","border","rounded","shadow-sm","h-100"],[1,"bi","bi-calendar-check","display-4","text-success","mb-3"],[1,"fw-bold"],[1,"bi","bi-person-check","display-4","text-success","mb-3"],[1,"bi","bi-shield-check","display-4","text-success","mb-3"],[1,"doctors-section","py-5","bg-light"],[1,"newsletter-section","py-5","bg-primary","text-white"],[1,"testimonials-section","py-5"],[1,"text-center","fw-bold","mb-5"],["id","testimonialCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],[1,"row"],[1,"col-md-4"],[1,"testimonial-card","p-4","rounded-4","shadow-sm"],[1,"d-flex","align-items-center","mb-3"],["src","assets/images/testimonial-1.jpg","width","60","height","60","alt","",1,"rounded-circle","me-3"],[1,"fw-bold","mb-0"],[1,"text-warning"],[1,"fas","fa-star"],["type","button","data-bs-target","#testimonialCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],["type","button","data-bs-target","#testimonialCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"faq-section","py-5","bg-light"],[1,"call-to-action-section","bg-success","text-white","text-center","py-5"],[1,"lead","text-muted","mb-4"],[1,"d-flex","gap-3","justify-content-center","justify-content-md-start"],["routerLink","/login",1,"btn","btn-success","btn-lg","px-4","animate__animated","animate__fadeInUp"],["routerLink","/doctors",1,"btn","btn-outline-primary","btn-lg","px-4","animate__animated","animate__fadeInUp","animate__delay-1s"],["routerLink","/controlPanel",1,"btn","btn-primary","btn-lg","px-4","animate__animated","animate__fadeInUp"],[1,"fas","fa-cog","me-2"],["routerLink","/bookings",1,"btn","btn-outline-success","btn-lg","px-4","animate__animated","animate__fadeInUp","animate__delay-1s"],[1,"fas","fa-calendar-alt","me-2"],["routerLink","/doctors",1,"btn","btn-success","btn-lg","px-4","animate__animated","animate__fadeInUp"],[1,"fas","fa-search","me-2"],["routerLink","/appointments",1,"btn","btn-outline-primary","btn-lg","px-4","animate__animated","animate__fadeInUp","animate__delay-1s"],[1,"fas","fa-calendar-check","me-2"],[1,"timeline"],["data-aos","fade-right",1,"timeline-item"],[1,"timeline-content"],[1,"timeline-icon","bg-primary"],[1,"fas","fa-search"],["data-aos","fade-left",1,"timeline-item"],[1,"timeline-icon","bg-success"],[1,"fas","fa-calendar-alt"],[1,"timeline-icon","bg-info"],[1,"fas","fa-check-circle"],[1,"row","g-4"],["data-aos","fade-up",1,"col-md-4","mb-4"],[1,"doctor-card","card","h-100","border-0","shadow-sm","rounded-4","overflow-hidden","hover-effect"],[1,"position-relative","doctor-image-wrapper"],[1,"w-100",2,"height","220px","object-fit","cover",3,"src","alt"],[1,"doctor-overlay"],[1,"doctor-info","p-3","text-white"],[1,"fas","fa-graduation-cap","me-2"],[1,"fas","fa-briefcase","me-2"],[1,"card-body","text-center"],[1,"card-title","mb-1"],[1,"text-muted","mb-2"],[1,"fas","fa-map-marker-alt","me-1"],[1,"d-flex","justify-content-center","gap-2","mt-3"],[1,"btn","btn-outline-primary","btn-sm","rounded-pill","hover-scale",3,"href"],[1,"fas","fa-phone"],[1,"btn","btn-outline-success","btn-sm","rounded-pill","hover-scale",3,"routerLink"],[1,"fas","fa-user-md"],[1,"row","justify-content-center"],[1,"col-md-8","text-center"],[1,"mb-4"],[1,"input-group","mb-3"],["type","email","placeholder","\u0623\u062F\u062E\u0644 \u0628\u0631\u064A\u062F\u0643 \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"form-control"],["type","button",1,"btn","btn-success"],["id","faqAccordion",1,"accordion"],[1,"accordion-item"],["id","faqHeadingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#faqCollapseOne","aria-expanded","true","aria-controls","faqCollapseOne",1,"accordion-button"],["id","faqCollapseOne","aria-labelledby","faqHeadingOne","data-bs-parent","#faqAccordion",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["id","faqHeadingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#faqCollapseTwo","aria-expanded","false","aria-controls","faqCollapseTwo",1,"accordion-button","collapsed"],["id","faqCollapseTwo","aria-labelledby","faqHeadingTwo","data-bs-parent","#faqAccordion",1,"accordion-collapse","collapse"],[1,"fw-bold","mb-4"],["routerLink","/login",1,"btn","btn-light","btn-lg","px-5"]],template:function(e,r){e&1&&(w(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),A(5,"\u0645\u0631\u062D\u0628\u064B\u0627 \u0628\u0643 \u0641\u064A "),w(6,"span",5),A(7,"\u0637\u0628\u064A\u0628\u064A"),b()(),Te(8,wae,7,0)(9,Cae,9,1)(10,xae,9,1),b(),w(11,"div",6),G(12,"img",7),b()()(),G(13,"div",8)(14,"div",9)(15,"div",10),b(),w(16,"section",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),G(21,"i",16),w(22,"h2",17),A(23,"500+"),b(),w(24,"p",18),A(25,"\u0637\u0628\u064A\u0628 \u0645\u0639\u062A\u0645\u062F"),b()()(),w(26,"div",19)(27,"div",15),G(28,"i",20),w(29,"h2",17),A(30,"10,000+"),b(),w(31,"p",18),A(32,"\u0645\u0631\u064A\u0636 \u0633\u0639\u064A\u062F"),b()()(),w(33,"div",21)(34,"div",15),G(35,"i",22),w(36,"h2",17),A(37,"50+"),b(),w(38,"p",18),A(39,"\u062A\u062E\u0635\u0635 \u0637\u0628\u064A"),b()()(),w(40,"div",23)(41,"div",15),G(42,"i",24),w(43,"h2",17),A(44,"20,000+"),b(),w(45,"p",18),A(46,"\u0645\u0648\u0639\u062F \u0646\u0627\u062C\u062D"),b()()()()()(),Te(47,Eae,29,0,"section",25),w(48,"section",26)(49,"div",12)(50,"div",13)(51,"div",27)(52,"div",28),G(53,"i",29),w(54,"h5",30),A(55,"\u062D\u062C\u0632 \u0645\u0648\u0627\u0639\u064A\u062F \u0633\u0631\u064A\u0639"),b(),w(56,"p",18),A(57,"\u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0643 \u0645\u0639 \u0627\u0644\u0637\u0628\u064A\u0628 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0641\u064A \u062F\u0642\u0627\u0626\u0642 \u0645\u0639\u062F\u0648\u062F\u0629 \u062F\u0648\u0646 \u0639\u0646\u0627\u0621."),b()()(),w(58,"div",27)(59,"div",28),G(60,"i",31),w(61,"h5",30),A(62,"\u0623\u0637\u0628\u0627\u0621 \u0645\u0639\u062A\u0645\u062F\u0648\u0646"),b(),w(63,"p",18),A(64,"\u0646\u0642\u062F\u0645 \u0644\u0643 \u0642\u0627\u0626\u0645\u0629 \u0628\u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0627\u0644\u0645\u0639\u062A\u0645\u062F\u064A\u0646 \u0641\u064A \u0645\u062E\u062A\u0644\u0641 \u0627\u0644\u062A\u062E\u0635\u0635\u0627\u062A."),b()()(),w(65,"div",27)(66,"div",28),G(67,"i",32),w(68,"h5",30),A(69,"\u062E\u0635\u0648\u0635\u064A\u0629 \u0648\u0623\u0645\u0627\u0646"),b(),w(70,"p",18),A(71,"\u0646\u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u062E\u0635\u0648\u0635\u064A\u062A\u0643 \u0648\u0646\u0636\u0645\u0646 \u0623\u0645\u0627\u0646 \u0645\u0639\u0644\u0648\u0645\u0627\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629."),b()()()()()(),Te(72,Sae,7,0,"section",33)(73,Tae,12,0,"section",34),w(74,"section",35)(75,"div",12)(76,"h2",36),A(77,"\u0622\u0631\u0627\u0621 \u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646\u0627"),b(),w(78,"div",37)(79,"div",38)(80,"div",39)(81,"div",40)(82,"div",41)(83,"div",42)(84,"div",43),G(85,"img",44),w(86,"div")(87,"h6",45),A(88,"\u0633\u0627\u0631\u0629 \u0645\u062D\u0645\u062F"),b(),w(89,"small",18),A(90,"\u0645\u0631\u064A\u0636\u0629"),b()()(),w(91,"p",18),A(92,'"\u062A\u062C\u0631\u0628\u0629 \u0631\u0627\u0626\u0639\u0629! \u062D\u062C\u0632\u062A \u0645\u0648\u0639\u062F\u064A \u0628\u0633\u0647\u0648\u0644\u0629 \u0648\u0627\u0644\u0637\u0628\u064A\u0628 \u0643\u0627\u0646 \u0645\u062D\u062A\u0631\u0641\u064B\u0627 \u062C\u062F\u064B\u0627."'),b(),w(93,"div",46),G(94,"i",47)(95,"i",47)(96,"i",47)(97,"i",47)(98,"i",47),b()()()()()(),w(99,"button",48),G(100,"span",49),b(),w(101,"button",50),G(102,"span",51),b()()()(),Te(103,Aae,19,0,"section",52)(104,Dae,6,0,"section",53)),e&2&&(W(8),be(r.isLoggedIn?-1:8),W(),be(r.isLoggedIn&&(r.userData==null?null:r.userData.role)==="doctor"?9:-1),W(),be(r.isLoggedIn&&(r.userData==null?null:r.userData.role)==="client"?10:-1),W(37),be(!r.isLoggedIn||r.isLoggedIn&&(r.userData==null?null:r.userData.role)==="client"?47:-1),W(25),be(r.doctors!==null&&(!r.isLoggedIn||r.isLoggedIn&&(r.userData==null?null:r.userData.role)!=="doctor")?72:-1),W(),be(r.isLoggedIn?-1:73),W(30),be(!r.isLoggedIn||r.isLoggedIn&&(r.userData==null?null:r.userData.role)==="client"?103:-1),W(),be(r.isLoggedIn?-1:104))},dependencies:[$n],styles:['.hero-section[_ngcontent-%COMP%]{background-color:#f8f9fa}.hero-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:1.2rem}.features-section[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-color:#dee2e6!important}.features-section[_ngcontent-%COMP%]   .shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.doctors-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{transition:transform .3s ease}.doctors-section[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.doctors-section[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover}.testimonials-section[_ngcontent-%COMP%]{background-color:#fff}.testimonials-section[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-color:#dee2e6!important}.hero-section[_ngcontent-%COMP%]{min-height:80vh;background:linear-gradient(135deg,#f8f9fa,#e9ecef)}.floating-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0)}50%{transform:translateY(-20px)}to{transform:translateY(0)}}.shape[_ngcontent-%COMP%]{position:absolute;z-index:1;opacity:.1}.shape-1[_ngcontent-%COMP%]{width:300px;height:300px;background:#28a745;border-radius:50%;top:-150px;right:-150px}.shape-2[_ngcontent-%COMP%]{width:200px;height:200px;background:#007bff;border-radius:50%;bottom:-100px;left:-100px}.shape-3[_ngcontent-%COMP%]{width:150px;height:150px;background:#ffc107;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%)}.search-box[_ngcontent-%COMP%]{transform:translateY(-50%);margin-top:-20px;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.stat-card[_ngcontent-%COMP%]{transition:transform .3s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.counter[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#28a745}.timeline[_ngcontent-%COMP%]{position:relative;max-width:1200px;margin:0 auto}.timeline[_ngcontent-%COMP%]:after{content:"";position:absolute;width:2px;background:#e9ecef;top:0;bottom:0;left:50%;margin-left:-1px}.timeline-item[_ngcontent-%COMP%]{padding:10px 40px;position:relative;width:50%;margin-bottom:30px}.timeline-item[_ngcontent-%COMP%]:nth-child(odd){left:0}.timeline-item[_ngcontent-%COMP%]:nth-child(2n){left:50%}.timeline-content[_ngcontent-%COMP%]{padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}.timeline-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;position:absolute;right:-25px;top:50%;transform:translateY(-50%)}.doctor-card[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease}.doctor-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 10px 20px #0000001a!important}.doctor-image-wrapper[_ngcontent-%COMP%]{overflow:hidden}.doctor-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;opacity:0;transition:opacity .3s ease;display:flex;align-items:flex-end}.doctor-card[_ngcontent-%COMP%]:hover   .doctor-overlay[_ngcontent-%COMP%]{opacity:1}.hover-scale[_ngcontent-%COMP%]{transition:transform .2s ease}.hover-scale[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.newsletter-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3)}.testimonial-card[_ngcontent-%COMP%]{background:#fff;transition:transform .3s ease}.testimonial-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}@media (max-width: 768px){.timeline[_ngcontent-%COMP%]:after{left:31px}.timeline-item[_ngcontent-%COMP%]{width:100%;padding-left:70px;padding-right:25px}.timeline-item[_ngcontent-%COMP%]:nth-child(2n){left:0}.timeline-icon[_ngcontent-%COMP%]{left:6px;right:auto}}'],data:{animation:[fT("fadeInOut",[mT("void",em({opacity:0})),gT("void <=> *",[pT("0.3s ease-in-out")])])]}})};var d1=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-not-found"]],decls:14,vars:0,consts:[[1,"not-found-container"],["data-aos","fade-up",1,"content"],[1,"error-code"],[1,"error-message"],[1,"description"],[1,"actions"],["routerLink","/",1,"home-button"],[1,"fas","fa-home"],["data-aos","fade-left",1,"illustration"],["src","assets/images/empty.png","alt","404 Doctor Illustration"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2),A(3,"404"),b(),w(4,"div",3),A(5,"\u0639\u0630\u0631\u0627\u064B\u060C \u0627\u0644\u0635\u0641\u062D\u0629 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629"),b(),w(6,"div",4),A(7," \u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u062A\u064A \u062A\u0628\u062D\u062B \u0639\u0646\u0647\u0627 \u0642\u062F \u062A\u0643\u0648\u0646 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629 \u0623\u0648 \u062A\u0645 \u0646\u0642\u0644\u0647\u0627 \u0623\u0648 \u062D\u0630\u0641\u0647\u0627 "),b(),w(8,"div",5)(9,"a",6),G(10,"i",7),A(11," \u0627\u0644\u0639\u0648\u062F\u0629 \u0644\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629 "),b()()(),w(12,"div",8),G(13,"img",9),b()())},dependencies:[In,$n],styles:[".not-found-container[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;padding:2rem;gap:4rem;background:linear-gradient(135deg,#f8fafc,#e2e8f0)}.content[_ngcontent-%COMP%]{text-align:center}.error-code[_ngcontent-%COMP%]{font-size:8rem;font-weight:700;color:#6366f1;line-height:1;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.error-message[_ngcontent-%COMP%]{font-size:2rem;color:#1e293b;margin:1rem 0}.description[_ngcontent-%COMP%]{color:#64748b;margin-bottom:2rem}.home-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;padding:.75rem 1.5rem;border-radius:9999px;text-decoration:none;transition:transform .3s ease}.home-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.illustration[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:400px;height:auto}@media (max-width: 768px){.not-found-container[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.illustration[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}.error-code[_ngcontent-%COMP%]{font-size:6rem}}"]})};var $7=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(me(Ms),me(Vi))};static \u0275dir=sn({type:n})}return n})(),Pm=(()=>{class n extends $7{static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,features:[Tr]})}return n})(),ed=new $e(""),Pae={provide:ed,useExisting:ri(()=>kc),multi:!0},kc=(()=>{class n extends Pm{writeValue(e){this.setProperty("checked",e)}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ui([Pae]),Tr]})}return n})(),Mae={provide:ed,useExisting:ri(()=>Jn),multi:!0};function kae(){let n=ks()?ks().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Oae=new $e(""),Jn=(()=>{class n extends $7{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!kae())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(me(Ms),me(Vi),me(Oae,8))};static \u0275dir=sn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ui([Mae]),Tr]})}return n})();function TP(n){return n==null||AP(n)===0}function AP(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Oc=new $e(""),Mm=new $e(""),Rae=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,We=class{static min(t){return q7(t)}static max(t){return G7(t)}static required(t){return K7(t)}static requiredTrue(t){return Nae(t)}static email(t){return Fae(t)}static minLength(t){return Lae(t)}static maxLength(t){return Vae(t)}static pattern(t){return Bae(t)}static nullValidator(t){return f1()}static compose(t){return eU(t)}static composeAsync(t){return tU(t)}};function q7(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function G7(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function K7(n){return TP(n.value)?{required:!0}:null}function Nae(n){return n.value===!0?null:{required:!0}}function Fae(n){return TP(n.value)||Rae.test(n.value)?null:{email:!0}}function Lae(n){return t=>{let e=t.value?.length??AP(t.value);return e===null||e===0?null:e<n?{minlength:{requiredLength:n,actualLength:e}}:null}}function Vae(n){return t=>{let e=t.value?.length??AP(t.value);return e!==null&&e>n?{maxlength:{requiredLength:n,actualLength:e}}:null}}function Bae(n){if(!n)return f1;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),r=>{if(TP(r.value))return null;let i=r.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function f1(n){return null}function Y7(n){return n!=null}function Z7(n){return Il(n)?rt(n):n}function Q7(n){let t={};return n.forEach(e=>{t=e!=null?Ie(Ie({},t),e):t}),Object.keys(t).length===0?null:t}function X7(n,t){return t.map(e=>e(n))}function Uae(n){return!n.validate}function J7(n){return n.map(t=>Uae(t)?t:e=>t.validate(e))}function eU(n){if(!n)return null;let t=n.filter(Y7);return t.length==0?null:function(e){return Q7(X7(e,t))}}function DP(n){return n!=null?eU(J7(n)):null}function tU(n){if(!n)return null;let t=n.filter(Y7);return t.length==0?null:function(e){let r=X7(e,t).map(Z7);return B2(r).pipe(ct(Q7))}}function PP(n){return n!=null?tU(J7(n)):null}function F7(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function nU(n){return n._rawValidators}function rU(n){return n._rawAsyncValidators}function CP(n){return n?Array.isArray(n)?n:[n]:[]}function p1(n,t){return Array.isArray(n)?n.includes(t):n===t}function L7(n,t){let e=CP(t);return CP(n).forEach(i=>{p1(e,i)||e.push(i)}),e}function V7(n,t){return CP(t).filter(e=>!p1(n,e))}var m1=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=DP(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=PP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},co=class extends m1{name;get formDirective(){return null}get path(){return null}},Xl=class extends m1{_parent=null;name=null;valueAccessor=null},g1=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},jae={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},iDe=bt(Ie({},jae),{"[class.ng-submitted]":"isSubmitted"}),_r=(()=>{class n extends g1{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(me(Xl,2))};static \u0275dir=sn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Nt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Tr]})}return n})(),yr=(()=>{class n extends g1{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(me(co,10))};static \u0275dir=sn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Nt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Tr]})}return n})();var qv="VALID",h1="INVALID",Tm="PENDING",Gv="DISABLED",Jl=class{},v1=class extends Jl{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Yv=class extends Jl{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Zv=class extends Jl{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Am=class extends Jl{status;source;constructor(t,e){super(),this.status=t,this.source=e}},xP=class extends Jl{source;constructor(t){super(),this.source=t}},EP=class extends Jl{source;constructor(t){super(),this.source=t}};function MP(n){return(w1(n)?n.validators:n)||null}function zae(n){return Array.isArray(n)?DP(n):n||null}function kP(n,t){return(w1(t)?t.asyncValidators:n)||null}function Wae(n){return Array.isArray(n)?PP(n):n||null}function w1(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function iU(n,t,e){let r=n.controls;if(!(t?Object.keys(r):r).length)throw new Oe(1e3,"");if(!r[e])throw new Oe(1001,"")}function oU(n,t,e){n._forEachChild((r,i)=>{if(e[i]===void 0)throw new Oe(1002,"")})}var Dm=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return as(this.statusReactive)}set status(t){as(()=>this.statusReactive.set(t))}_status=mh(()=>this.statusReactive());statusReactive=fh(void 0);get valid(){return this.status===qv}get invalid(){return this.status===h1}get pending(){return this.status==Tm}get disabled(){return this.status===Gv}get enabled(){return this.status!==Gv}errors;get pristine(){return as(this.pristineReactive)}set pristine(t){as(()=>this.pristineReactive.set(t))}_pristine=mh(()=>this.pristineReactive());pristineReactive=fh(!0);get dirty(){return!this.pristine}get touched(){return as(this.touchedReactive)}set touched(t){as(()=>this.touchedReactive.set(t))}_touched=mh(()=>this.touchedReactive());touchedReactive=fh(!1);get untouched(){return!this.touched}_events=new Er;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(L7(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(L7(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(V7(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(V7(t,this._rawAsyncValidators))}hasValidator(t){return p1(this._rawValidators,t)}hasAsyncValidator(t){return p1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(bt(Ie({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Zv(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Zv(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(bt(Ie({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Yv(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Yv(!0,r))}markAsPending(t={}){this.status=Tm;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Am(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(bt(Ie({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Gv,this.errors=null,this._forEachChild(i=>{i.disable(bt(Ie({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new v1(this.value,r)),this._events.next(new Am(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(bt(Ie({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=qv,this._forEachChild(r=>{r.enable(bt(Ie({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(bt(Ie({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qv||this.status===Tm)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new v1(this.value,e)),this._events.next(new Am(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(bt(Ie({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gv:qv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Tm,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=Z7(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Am(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new pr,this.statusChanges=new pr}_calculateStatus(){return this._allControlsDisabled()?Gv:this.errors?h1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tm)?Tm:this._anyControlsHaveStatus(h1)?h1:qv}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Yv(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Zv(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){w1(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=zae(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Wae(this._rawAsyncValidators)}},Du=class extends Dm{constructor(t,e,r){super(MP(e),kP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){oU(this,!0,t),Object.keys(t).forEach(r=>{iU(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,o)=>{r=e(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var IP=class extends Du{};var km=new $e("",{providedIn:"root",factory:()=>Qv}),Qv="always";function C1(n,t){return[...t.path,n]}function _1(n,t,e=Qv){OP(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),$ae(n,t),Gae(n,t),qae(n,t),Hae(n,t)}function B7(n,t,e=!0){let r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),b1(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function y1(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Hae(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function OP(n,t){let e=nU(n);t.validator!==null?n.setValidators(F7(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=rU(n);t.asyncValidator!==null?n.setAsyncValidators(F7(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();y1(t._rawValidators,i),y1(t._rawAsyncValidators,i)}function b1(n,t){let e=!1;if(n!==null){if(t.validator!==null){let i=nU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.validator);o.length!==i.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let i=rU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(e=!0,n.setAsyncValidators(o))}}}let r=()=>{};return y1(t._rawValidators,r),y1(t._rawAsyncValidators,r),e}function $ae(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&sU(n,t)})}function qae(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&sU(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function sU(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Gae(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function aU(n,t){n==null,OP(n,t)}function Kae(n,t){return b1(n,t)}function uU(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Yae(n){return Object.getPrototypeOf(n.constructor)===Pm}function cU(n,t){n._syncPendingControls(),t.forEach(e=>{let r=e.control;r.updateOn==="submit"&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lU(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(o=>{o.constructor===Jn?e=o:Yae(o)?r=o:i=o}),i||r||e||null}function Zae(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var Qae={provide:co,useExisting:ri(()=>Rc)},Kv=Promise.resolve(),Rc=(()=>{class n extends co{callSetDisabledState;get submitted(){return as(this.submittedReactive)}_submitted=mh(()=>this.submittedReactive());submittedReactive=fh(!1);_directives=new Set;form;ngSubmit=new pr;options;constructor(e,r,i){super(),this.callSetDisabledState=i,this.form=new Du({},DP(e),PP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Kv.then(()=>{let r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),_1(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Kv.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Kv.then(()=>{let r=this._findContainer(e.path),i=new Du({});aU(i,e),r.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Kv.then(()=>{let r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){Kv.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),cU(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(r){return new(r||n)(me(Oc,10),me(Mm,10),me(km,8))};static \u0275dir=sn({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ui([Qae]),Tr]})}return n})();function U7(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function j7(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Au=class extends Dm{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(MP(e),kP(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),w1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(j7(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){U7(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){U7(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){j7(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Xae=n=>n instanceof Au,Jae=(()=>{class n extends co{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return C1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,standalone:!1,features:[Tr]})}return n})();var eue={provide:Xl,useExisting:ri(()=>Nc)},z7=Promise.resolve(),Nc=(()=>{class n extends Xl{_changeDetectorRef;callSetDisabledState;control=new Au;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new pr;constructor(e,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lU(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),uU(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){z7.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Tl(r);z7.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?C1(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(me(co,9),me(Oc,10),me(Mm,10),me(ed,10),me(vc,8),me(km,8))};static \u0275dir=sn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ui([eue]),Tr,ya]})}return n})();var br=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=sn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),tue={provide:ed,useExisting:ri(()=>ps),multi:!0},ps=(()=>{class n extends Pm{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&je("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ui([tue]),Tr]})}return n})(),nue={provide:ed,useExisting:ri(()=>Pa),multi:!0};var rue=(()=>{class n{_accessors=[];add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e){this._accessors.splice(r,1);return}}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return e[0].control?e[0]._parent===r._control._parent&&e[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pa=(()=>{class n extends Pm{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=Se(km,{optional:!0})??Qv;constructor(e,r,i,o){super(e,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(Xl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}setDisabledState(e){(this.setDisabledStateFired||e||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",e),this.setDisabledStateFired=!0}fireUncheck(e){this.writeValue(e)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(me(Ms),me(Vi),me(rue),me(rr))};static \u0275dir=sn({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ui([nue]),Tr]})}return n})();var dU=new $e("");var iue={provide:co,useExisting:ri(()=>Hi)},Hi=(()=>{class n extends co{callSetDisabledState;get submitted(){return as(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=mh(()=>this._submittedReactive());_submittedReactive=fh(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new pr;constructor(e,r,i){super(),this.callSetDisabledState=i,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(b1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let r=this.form.get(e.path);return _1(r,e,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){B7(e.control||null,e,!1),Zae(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this._submittedReactive.set(!0),cU(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new xP(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new EP(this.form))}_updateDomValue(){this.directives.forEach(e=>{let r=e.control,i=this.form.get(e.path);r!==i&&(B7(r||null,e),Xae(i)&&(_1(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let r=this.form.get(e.path);aU(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let r=this.form.get(e.path);r&&Kae(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){OP(this.form,this),this._oldForm&&b1(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(me(Oc,10),me(Mm,10),me(km,8))};static \u0275dir=sn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&je("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ui([iue]),Tr,ya]})}return n})(),oue={provide:co,useExisting:ri(()=>x1)},x1=(()=>{class n extends Jae{name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){fU(this._parent)}static \u0275fac=function(r){return new(r||n)(me(co,13),me(Oc,10),me(Mm,10))};static \u0275dir=sn({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Ui([oue]),Tr]})}return n})(),sue={provide:co,useExisting:ri(()=>hU)},hU=(()=>{class n extends co{_parent;name=null;constructor(e,r,i){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){fU(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return C1(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(me(co,13),me(Oc,10),me(Mm,10))};static \u0275dir=sn({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Ui([sue]),Tr]})}return n})();function fU(n){return!(n instanceof x1)&&!(n instanceof Hi)&&!(n instanceof hU)}var aue={provide:Xl,useExisting:ri(()=>lo)},lo=(()=>{class n extends Xl{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(e){}model;update=new pr;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(e,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lU(this,o)}ngOnChanges(e){this._added||this._setUpControl(),uU(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return C1(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(me(co,13),me(Oc,10),me(Mm,10),me(ed,10),me(dU,8))};static \u0275dir=sn({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ui([aue]),Tr,ya]})}return n})();var uue={provide:ed,useExisting:ri(()=>$i),multi:!0};function pU(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function cue(n){return n.split(":")[0]}var $i=(()=>{class n extends Pm{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r=this._getOptionId(e),i=pU(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=cue(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ui([uue]),Tr]})}return n})(),Oo=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(pU(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(me(Vi),me(Ms),me($i,9))};static \u0275dir=sn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),lue={provide:ed,useExisting:ri(()=>mU),multi:!0};function W7(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function due(n){return n.split(":")[0]}var mU=(()=>{class n extends Pm{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],c=this._getOptionValue(u.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=due(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&je("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ui([lue]),Tr]})}return n})(),Ro=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(W7(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(W7(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(me(Vi),me(Ms),me(mU,9))};static \u0275dir=sn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function gU(n){return typeof n=="number"?n:parseFloat(n)}var RP=(()=>{class n{_validator=f1;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):f1,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=sn({type:n,features:[ya]})}return n})(),hue={provide:Oc,useExisting:ri(()=>Qh),multi:!0},Qh=(()=>{class n extends RP{max;inputName="max";normalizeInput=e=>gU(e);createValidator=e=>G7(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&mc("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Ui([hue]),Tr]})}return n})(),fue={provide:Oc,useExisting:ri(()=>Ma),multi:!0},Ma=(()=>{class n extends RP{min;inputName="min";normalizeInput=e=>gU(e);createValidator=e=>q7(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&mc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Ui([fue]),Tr]})}return n})(),pue={provide:Oc,useExisting:ri(()=>Xh),multi:!0};var Xh=(()=>{class n extends RP{required;inputName="required";normalizeInput=Tl;createValidator=e=>K7;enabled(e){return e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=is(n)))(i||n)}})();static \u0275dir=sn({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&mc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ui([pue]),Tr]})}return n})();var vU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({})}return n})(),SP=class extends Dm{constructor(t,e,r){super(MP(e),kP(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){oU(this,!1,t),t.forEach((r,i)=>{iU(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function H7(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var qs=(()=>{class n{useNonNullable=!1;get nonNullable(){let e=new n;return e.useNonNullable=!0,e}group(e,r=null){let i=this._reduceControls(e),o={};return H7(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Du(i,o)}record(e,r=null){let i=this._reduceControls(e);return new IP(i,r)}control(e,r,i){let o={};return this.useNonNullable?(H7(r)?o=r:(o.validators=r,o.asyncValidators=i),new Au(e,bt(Ie({},o),{nonNullable:!0}))):new Au(e,r,i)}array(e,r,i){let o=e.map(s=>this._createControl(s));return new SP(o,r,i)}_reduceControls(e){let r={};return Object.keys(e).forEach(i=>{r[i]=this._createControl(e[i])}),r}_createControl(e){if(e instanceof Au)return e;if(e instanceof Dm)return e;if(Array.isArray(e)){let r=e[0],i=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(r,i,o)}else return this.control(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gs=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:km,useValue:e.callSetDisabledState??Qv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({imports:[vU]})}return n})(),No=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:dU,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:km,useValue:e.callSetDisabledState??Qv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=os({type:n});static \u0275inj=rs({imports:[vU]})}return n})();var _U=ha(td());var nd=class n{constructor(t){this.auth=t}login(t,e){return rt(OB(this.auth,t,e))}register(t,e){return rt(MB(this.auth,t,e))}logout(){return rt(TC(this.auth))}get currentUser(){return this.auth.currentUser}static \u0275fac=function(e){return new(e||n)(qe(or))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function mue(n,t){n&1&&(w(0,"small",16),G(1,"i",26),A(2," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u063A\u064A\u0631 \u0635\u0627\u0644\u062D "),b())}function gue(n,t){n&1&&(w(0,"small",16),G(1,"i",26),A(2," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0629 "),b())}function vue(n,t){n&1&&(w(0,"span"),G(1,"span",27),A(2," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0633\u062C\u064A\u0644... "),b())}function _ue(n,t){n&1&&(w(0,"span"),G(1,"i",28),A(2," \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "),b())}function yue(n,t){if(n&1&&(w(0,"div",21),G(1,"i",29),A(2),b()),n&2){let e=ve();W(2),Ze(" ",e.errorMessage," ")}}var E1=class n{constructor(t,e,r){this.fb=t;this.authService=e;this.router=r;this.form=this.fb.group({email:["",[We.required,We.email]],password:["",[We.required]]})}errorMessage="";form;isLoading=!1;login(){if(this.form.invalid||this.isLoading)return;this.isLoading=!0;let{email:t,password:e}=this.form.value;this.authService.login(t,e).subscribe({next:()=>{_U.default.fire({icon:"success",title:"\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0643 \u{1F44B}",text:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0628\u0646\u062C\u0627\u062D!",confirmButtonText:"\u0627\u0633\u062A\u0645\u0631\u0627\u0631",confirmButtonColor:"#0d6efd"}).then(()=>{this.router.navigate(["/"])})},error:()=>{this.errorMessage="\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0623\u0648 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629",this.isLoading=!1},complete:()=>{this.isLoading=!1}})}static \u0275fac=function(e){return new(e||n)(me(qs),me(nd),me(Ar))};static \u0275cmp=_t({type:n,selectors:[["app-login"]],decls:37,vars:6,consts:[[1,"min-vh-100","d-flex","align-items-center","justify-content-center","bg-light"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","col-lg-5"],[1,"card","shadow-lg","border-0","rounded-4","overflow-hidden"],[1,"card-body","p-5"],[1,"text-center","mb-4"],["src","assets/images/logo-image.png","alt","Logo","width","120",1,"mb-4"],[1,"fw-bold","text-primary"],[1,"text-muted"],[3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"form-floating"],["type","email","formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","id","emailInput",1,"form-control"],["for","emailInput"],[1,"fas","fa-envelope","me-2","text-muted"],[1,"text-danger"],["type","password","formControlName","password","placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","id","passwordInput",1,"form-control"],["for","passwordInput"],[1,"fas","fa-lock","me-2","text-muted"],["type","submit",1,"btn","btn-primary","w-100","py-3","rounded-pill","mb-3",3,"disabled"],[1,"alert","alert-danger","text-center","py-2"],[1,"text-center","mt-4"],[1,"text-muted","mb-0"],["routerLink","/register",1,"text-primary","fw-bold","text-decoration-none"],[1,"fas","fa-arrow-right","ms-1"],[1,"fas","fa-exclamation-circle","me-1"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-sign-in-alt","me-2"],[1,"fas","fa-exclamation-triangle","me-2"]],template:function(e,r){if(e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),G(7,"img",7),w(8,"h2",8),A(9,"\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0639\u0648\u062F\u062A\u0643!"),b(),w(10,"p",9),A(11,"\u0633\u062C\u0644 \u062F\u062E\u0648\u0644\u0643 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u062D\u0633\u0627\u0628\u0643"),b()(),w(12,"form",10),je("ngSubmit",function(){return r.login()}),w(13,"div",11)(14,"div",12),G(15,"input",13),w(16,"label",14),G(17,"i",15),A(18," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),b()(),Te(19,mue,3,0,"small",16),b(),w(20,"div",11)(21,"div",12),G(22,"input",17),w(23,"label",18),G(24,"i",19),A(25," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),b()(),Te(26,gue,3,0,"small",16),b(),w(27,"button",20),Te(28,vue,3,0,"span")(29,_ue,3,0,"span"),b(),Te(30,yue,3,1,"div",21),w(31,"div",22)(32,"p",23),A(33," \u0644\u064A\u0633 \u0644\u062F\u064A\u0643 \u062D\u0633\u0627\u0628\u061F "),w(34,"a",24),A(35," \u0633\u062C\u0644 \u0627\u0644\u0622\u0646 "),G(36,"i",25),b()()()()()()()()()()),e&2){let i,o;W(12),xe("formGroup",r.form),W(7),be((i=r.form.get("email"))!=null&&i.invalid&&((i=r.form.get("email"))!=null&&i.touched)?19:-1),W(7),be((o=r.form.get("password"))!=null&&o.invalid&&((o=r.form.get("password"))!=null&&o.touched)?26:-1),W(),xe("disabled",r.form.invalid||r.isLoading),W(),be(r.isLoading?28:29),W(2),be(r.errorMessage?30:-1)}},dependencies:[$n,No,br,Jn,_r,yr,Hi,lo],encapsulation:2})};var md=ha(LP()),Hx=ha(td());var aj=function(n,t){return(aj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])})(n,t)};function Na(n,t){function e(){this.constructor=n}aj(n,t),n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function tt(n,t,e,r){return new(e||(e=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(d){o(d)}}function a(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):new e(function(d){d(c.value)}).then(s,a)}u((r=r.apply(n,t||[])).next())})}function nt(n,t){var e,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return function(d){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(i=2&d[0]?r.return:d[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,d[1])).done)return i;switch(r=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return s.label++,{value:d[1],done:!1};case 5:s.label++,r=d[1],d=[0];continue;case 7:d=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){s=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){s.label=d[1];break}if(d[0]===6&&s.label<i[1]){s.label=i[1],i=d;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(d);break}i[2]&&s.ops.pop(),s.trys.pop();continue}d=t.call(n,s)}catch(h){d=[6,h],r=0}finally{e=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([u,c])}}}var bue=function(){function n(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(t,e){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+e+"."),this.platformName=t,this.platform=e},n.prototype.registerFlag=function(t,e,r){if(this.flagRegistry[t]={evaluationFn:e,setHook:r},this.urlFlags[t]!=null){var i=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+i+"."),this.set(t,i)}},n.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},n.prototype.getNumber=function(t){return this.get(t)},n.prototype.getBool=function(t){return this.get(t)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(t,e){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)},n.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},n.prototype.setFlags=function(t){this.flags=Object.assign({},t)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var e,r,i=(e=this.global.location.search,r={},e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return wue(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),a=s[0],u=s[1];t.urlFlags[a]=function(c,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+c+".")}(a,u)})}},n}();function wue(n,t,e){n[decodeURIComponent(t)]=decodeURIComponent(e||"")}function _e(){return uj}var uj=null,z1=new Map,oM=new Map;function cj(n,t){var e=dj(n,t);return z1.get(e)}function Cue(n){return oM.get(n)}function EU(n){for(var t=z1.entries(),e=[];;){var r=t.next(),i=r.done,o=r.value;if(i)break;var s=o[0],a=o[1];s.split("_")[0]===n&&e.push(a)}return e}function lj(n){var t=n.kernelName,e=n.backendName,r=dj(t,e);if(z1.has(r))throw new Error("The kernel '"+t+"' for backend '"+e+"' is already registered");z1.set(r,n)}function xue(n){var t=n.kernelName;oM.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),oM.set(t,n)}function dj(n,t){return t+"_"+n}function IU(n){for(var t=n.length,e=0,r=0;t>0;)r=Math.random()*t|0,e=n[--t],n[t]=n[r],n[r]=e}function W1(n,t,e){return Math.max(n,Math.min(t,e))}function SM(n){return n%2==0?n:n+1}function hj(n){for(var t=0,e=0;e<n.length;e++)t+=n[e];return t}function Q(n,t){if(!n)throw new Error(typeof t=="string"?t:t())}function xn(n,t,e){e===void 0&&(e=""),Q(Ur(n,t),function(){return e+" Shapes "+n+" and "+t+" must match"})}function hf(n){Q(n!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Uc(n,t,e){if(t===void 0&&(t=[]),e===void 0&&(e=!1),t==null&&(t=[]),Array.isArray(n)||Si(n)&&!e)for(var r=0;r<n.length;++r)Uc(n[r],t,e);else t.push(n);return t}function ot(n){if(n.length===0)return 1;for(var t=n[0],e=1;e<n.length;e++)t*=n[e];return t}function Ur(n,t){if(n===t)return!0;if(n==null||t==null||n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function cr(n){return n%1==0}function fj(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var t=Math.exp(2*n);return(t-1)/(t+1)}function H1(n){var t=Math.ceil(Math.sqrt(n));return[t,Math.ceil(n/t)]}function sf(n,t){return t<=n.length?n:n+" ".repeat(t-n.length)}function sM(n,t,e){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,i){var o=0,s=function(){if(n())r();else{o++;var a=t(o);e!=null&&o>=e?i():setTimeout(s,a)}};s()})}function pj(n,t){for(var e=1,r=-1,i=0;i<n.length;++i)if(n[i]>=0)e*=n[i];else if(n[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(n[i]<0)throw Error("Shapes can not be < 0. Found "+n[i]+" at dim "+i);if(r===-1){if(t>0&&t!==e)throw Error("Size("+t+") must match the product of shape "+n);return n}if(e===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(t%e!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+e);var o=n.slice();return o[r]=t/e,o}function zr(n,t){var e=t.length;return Q((n=n==null?t.map(function(r,i){return i}):[].concat(n)).every(function(r){return r>=-e&&r<e}),function(){return"All values in axis param must be in range [-"+e+", "+e+") but got axis "+n}),Q(n.every(function(r){return cr(r)}),function(){return"All values in axis param must be integers but got axis "+n}),n.map(function(r){return r<0?e+r:r})}function rd(n,t){for(var e=[],r=[],i=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||i?null:zr(t,n).sort(),s=0,a=0;a<n.length;++a){if(o!=null){if(o[s]===a&&n[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+n[a]+"' is not 1");(o[s]==null||o[s]>a)&&n[a]===1&&(e.push(n[a]),r.push(a)),o[s]<=a&&s++}n[a]!==1&&(e.push(n[a]),r.push(a))}return{newShape:e,keptDims:r}}function $m(n,t){var e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else{if(n!=="bool")throw new Error("Unknown data type "+n);e=new Uint8Array(t)}return e}function a_(n,t){var e=null;if(n==null||n==="float32")e=new Float32Array(t);else if(n==="int32")e=new Int32Array(t);else if(n==="bool")e=new Uint8Array(t);else{if(n!=="string")throw new Error("Unknown data type "+n);e=new Array(t)}return e}function mj(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function gj(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function vj(n,t){return t!=="complex64"&&(t!=="float32"||n==="complex64")&&(t!=="int32"||n==="float32"||n==="complex64")&&(t!=="bool"||n!=="bool")}function Si(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function TM(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function _j(n){if(n==null)return 0;var t=0;return n.forEach(function(e){return t+=e.length}),t}function id(n){return typeof n=="string"||n instanceof String}function yj(n){return typeof n=="boolean"}function bj(n){return typeof n=="number"}function Gm(n){return Array.isArray(n)?Gm(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":bj(n)?"float32":id(n)?"string":yj(n)?"bool":"float32"}function $1(n){return!!(n&&n.constructor&&n.call&&n.apply)}function q1(n,t){for(var e=t;e<n;++e)if(n%e==0)return e;return n}function Oa(n){var t=n.length;if(t<2)return[];var e=new Array(t-1);e[t-2]=n[t-1];for(var r=t-3;r>=0;--r)e[r]=e[r+1]*n[r+1];return e}function AM(n,t,e){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=Uc(n)),e&&mj(n,t),function(o,s){return o instanceof Float32Array&&s==="float32"||o instanceof Int32Array&&s==="int32"||o instanceof Uint8Array&&s==="bool"}(n,t))return n;if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool"){for(var r=new Uint8Array(n.length),i=0;i<r.length;++i)Math.round(n[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function aM(n,t){if(n.length===0)return t[0];var e=n.reduce(function(r,i){return r*i});if(e===0)return[];if(e!==t.length)throw new Error("["+n+"] does not match the input size.");return function r(i,o,s){var a=new Array;if(o.length===1)for(var u=o[0],c=0;c<u;c++)a[c]=s[i+c];else{u=o[0];var d=o.slice(1),h=d.reduce(function(p,m){return p*m});for(c=0;c<u;c++)a[c]=r(i+c*h,d,s)}return a}(0,n,t)}function DM(n,t){for(var e=Km(n,t),r=0;r<e.length;r++)e[r]=1;return e}function Km(n,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(n);if(t==="int32")return new Int32Array(n);if(t==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+t)}function ka(){return _e().platform.now()}function PM(n){n.forEach(function(t){Q(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."})})}function wj(n,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",_e().platform.encode(n,t)}function u_(n,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",_e().platform.decode(n,t)}function uM(n,t,e){if(t===0)return 0;if(t===1)return n[0];for(var r=n[n.length-1],i=0;i<n.length-1;++i)r+=e[i]*n[i];return r}function Cj(n,t,e){if(t===0)return[];if(t===1)return[n];for(var r=new Array(t),i=0;i<r.length-1;++i)r[i]=Math.floor(n/e[i]),n-=r[i]*e[i];return r[r.length-1]=n,r}var wDe=Object.freeze({shuffle:IU,clamp:W1,nearestLargerEven:SM,sum:hj,randUniform:function(n,t){var e=Math.random();return t*e+(1-e)*n},distSquared:function(n,t){for(var e=0,r=0;r<n.length;r++){var i=Number(n[r])-Number(t[r]);e+=i*i}return e},assert:Q,assertShapesMatch:xn,assertNonNull:hf,flatten:Uc,sizeFromShape:ot,isScalarShape:function(n){return n.length===0},arraysEqual:Ur,isInt:cr,tanh:fj,sizeToSquarishShape:H1,createShuffledIndices:function(n){for(var t=new Uint32Array(n),e=0;e<n;++e)t[e]=e;return IU(t),t},rightPad:sf,repeatedTry:sM,inferFromImplicitShape:pj,parseAxisParam:zr,squeezeShape:rd,getTypedArrayFromDType:$m,getArrayFromDType:a_,checkConversionForErrors:mj,isValidDtype:gj,hasEncodingLoss:vj,isTypedArray:Si,bytesPerElement:TM,bytesFromStringArray:_j,isString:id,isBoolean:yj,isNumber:bj,inferDtype:Gm,isFunction:$1,nearestDivisor:q1,computeStrides:Oa,toTypedArray:AM,toNestedArray:aM,makeOnesTypedArray:DM,makeZerosTypedArray:Km,now:ka,assertNonNegativeIntegerDimensions:PM,fetch:function(n,t){return _e().platform.fetch(n,t)},encodeString:wj,decodeString:u_,locToIndex:uM,indexToLoc:Cj}),Eue=function(){function n(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new Iue)}return n.prototype.profileKernel=function(t,e,r){var i,o=this,s=this.backendTimer.time(function(){i=r()});return i.forEach(function(a){a.data().then(function(u){(function(c,d,h){if(d!=="float32")return!1;for(var p=0;p<c.length;p++){var m=c[p];if(isNaN(m)||!isFinite(m))return console.warn("Found "+m+" in the result of '"+h+"'"),!0}})(u,a.dtype,t),s.then(function(c){var d="";c.getExtraProfileInfo!=null&&(d=c.getExtraProfileInfo()),o.logger.logKernelProfile(t,a,u,c.kernelMs,e,d)})})}),i},n}(),Iue=function(){function n(){}return n.prototype.logKernelProfile=function(t,e,r,i,o,s){var a=typeof i=="number"?sf(i+"ms",9):i.error,u=sf(t,25),c=e.rank,d=e.size,h=sf(e.shape.toString(),14),p="";for(var m in o){var _=o[m].shape||e.shape,C=_.length;p+=m+": "+C+"D "+(C>0?_:"")+" "}console.log("%c"+u+"	%c"+a+"	%c"+c+"D "+h+"	%c"+d+"	%c"+p+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n}(),SU=20,Xv=3,VP=7;function Sue(n,t,e,r){var i=Oa(t),o=function(c,d,h,p){var m=ot(d),_=p[p.length-1],C=new Array(_).fill(0),x=d.length,S=h==="complex64"?e_(c):c;if(x>1)for(var N=0;N<m/_;N++)for(var F=N*_,R=0;R<_;R++)C[R]=Math.max(C[R],Jv(S[F+R],0,h).length);return C}(n,t,e,i),s=t.length,a=function c(d,h,p,m,_,C){C===void 0&&(C=!0);var x=p==="complex64"?2:1,S=h[0],N=h.length;if(N===0)return p==="complex64"?[Jv(e_(d)[0],0,p)]:p==="bool"?[xj(d[0])]:[d[0].toString()];if(N===1){if(S>SU){var F=Xv*x,R=Array.from(d.slice(0,F)),j=Array.from(d.slice((S-Xv)*x,S*x));return p==="complex64"&&(R=e_(R),j=e_(j)),["["+R.map(function(de,X){return Jv(de,_[X],p)}).join(", ")+", ..., "+j.map(function(de,X){return Jv(de,_[S-Xv+X],p)}).join(", ")+"]"]}return["["+(p==="complex64"?e_(d):Array.from(d)).map(function(de,X){return Jv(de,_[X],p)}).join(", ")+"]"]}var H=h.slice(1),B=m.slice(1),k=m[0]*x,D=[];if(S>SU){for(var P=0;P<Xv;P++){var z=(U=P*k)+k;D.push.apply(D,c(d.slice(U,z),H,p,B,_,!1))}for(D.push("..."),P=S-Xv;P<S;P++)z=(U=P*k)+k,D.push.apply(D,c(d.slice(U,z),H,p,B,_,P===S-1))}else for(P=0;P<S;P++){var U;z=(U=P*k)+k,D.push.apply(D,c(d.slice(U,z),H,p,B,_,P===S-1))}var $=N===2?",":"";for(D[0]="["+D[0]+$,P=1;P<D.length-1;P++)D[P]=" "+D[P]+$;var ae=`,
`;for(P=2;P<N;P++)ae+=`
`;return D[D.length-1]=" "+D[D.length-1]+"]"+(C?"":ae),D}(n,t,e,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+e),u.push("  rank: "+s),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(a.map(function(c){return"    "+c}).join(`
`)),u.join(`
`)}function Jv(n,t,e){return sf(Array.isArray(n)?parseFloat(n[0].toFixed(VP))+" + "+parseFloat(n[1].toFixed(VP))+"j":id(n)?"'"+n+"'":e==="bool"?xj(n):parseFloat(n.toFixed(VP)).toString(),t)}function xj(n){return n===0?"false":"true"}function e_(n){for(var t=[],e=0;e<n.length;e+=2)t.push([n[e],n[e+1]]);return t}var c_=function(){function n(t,e,r){var i=this;if(this.dtype=e,this.shape=t.slice(),this.size=ot(t),r!=null){var o=r.length;Q(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||a_(e,this.size),this.strides=Oa(t)}return n.prototype.set=function(t){for(var e=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),Q(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+e.rank+")"});var o=this.locToIndex(r);this.values[o]=t},n.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];t.length===0&&(t=[0]);for(var r=0,i=0,o=t;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r]){var a="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]},n.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var e=t[t.length-1],r=0;r<t.length-1;++r)e+=this.strides[r]*t[r];return e},n.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var e=new Array(this.shape.length),r=0;r<e.length-1;++r)e[r]=Math.floor(t/this.strides[r]),t-=e[r]*this.strides[r];return e[e.length-1]=t,e},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return Mu().makeTensor(this.values,this.shape,this.dtype)},n}(),Mu=null,ge=null,Ej=null,Nn=function(){function n(t,e,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=ot(t),this.strides=Oa(t),this.dataId=r,this.id=i,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),Q(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},n.prototype.as3D=function(t,e,r){return this.throwIfDisposed(),this.reshape([t,e,r])},n.prototype.as4D=function(t,e,r,i){return this.throwIfDisposed(),this.reshape([t,e,r,i])},n.prototype.as5D=function(t,e,r,i,o){return this.throwIfDisposed(),this.reshape([t,e,r,i,o])},n.prototype.asType=function(t){return this.throwIfDisposed(),ge.cast(this,t)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,ge.buffer(this.shape,this.dtype,t)]}})})},n.prototype.bufferSync=function(){return ge.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(e){switch(e.label){case 0:return[4,this.data()];case 1:return t=e.sent(),[2,aM(this.shape,t)]}})})},n.prototype.arraySync=function(){return aM(this.shape,this.dataSync())},n.prototype.data=function(){return tt(this,void 0,void 0,function(){var t,e;return nt(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Mu().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:e=r.sent();try{return[2,e.map(function(i){return u_(i)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},n.prototype.dataSync=function(){this.throwIfDisposed();var t=Mu().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(e){return u_(e)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},n.prototype.bytes=function(){return tt(this,void 0,void 0,function(){var t;return nt(this,function(e){switch(e.label){case 0:return this.throwIfDisposed(),[4,Mu().read(this.dataId)];case 1:return t=e.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},n.prototype.dispose=function(){this.isDisposed||(Mu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(t){return t===void 0&&(t=!1),ge.print(this,t)},n.prototype.reshape=function(t){return this.throwIfDisposed(),ge.reshape(this,t)},n.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},n.prototype.expandDims=function(t){return t===void 0&&(t=0),ge.expandDims(this,t)},n.prototype.cumsum=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=!1),r===void 0&&(r=!1),ge.cumsum(this,t,e,r)},n.prototype.squeeze=function(t){return this.throwIfDisposed(),ge.squeeze(this,t)},n.prototype.clone=function(){return this.throwIfDisposed(),ge.clone(this)},n.prototype.oneHot=function(t,e,r){return this.throwIfDisposed(),ge.oneHot(this,t,e,r)},n.prototype.toString=function(t){return t===void 0&&(t=!1),Sue(this.dataSync(),this.shape,this.dtype,t)},n.prototype.tile=function(t){return this.throwIfDisposed(),ge.tile(this,t)},n.prototype.gather=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),ge.gather(this,t,e)},n.prototype.matMul=function(t,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!1),this.throwIfDisposed(),ge.matMul(this,t,e,r)},n.prototype.dot=function(t){return this.throwIfDisposed(),ge.dot(this,t)},n.prototype.norm=function(t,e,r){return t===void 0&&(t="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1),this.throwIfDisposed(),ge.norm(this,t,e,r)},n.prototype.slice=function(t,e){return this.throwIfDisposed(),ge.slice(this,t,e)},n.prototype.reverse=function(t){return this.throwIfDisposed(),ge.reverse(this,t)},n.prototype.concat=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),t instanceof n&&(t=[t]),ge.concat([this].concat(t),e)},n.prototype.split=function(t,e){return e===void 0&&(e=0),this.throwIfDisposed(),ge.split(this,t,e)},n.prototype.stack=function(t,e){return e===void 0&&(e=0),ge.stack([this,t],e)},n.prototype.unstack=function(t){return t===void 0&&(t=0),ge.unstack(this,t)},n.prototype.pad=function(t,e){return e===void 0&&(e=0),ge.pad(this,t,e)},n.prototype.batchNormalization=function(t,e,r,i,o){return r===void 0&&(r=.001),Ej("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,e,o,i,r)},n.prototype.batchNorm=function(t,e,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),ge.batchNorm(this,t,e,r,i,o)},n.prototype.all=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.all(this,t,e)},n.prototype.any=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.any(this,t,e)},n.prototype.logSumExp=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.logSumExp(this,t,e)},n.prototype.sum=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.sum(this,t,e)},n.prototype.prod=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.prod(this,t,e)},n.prototype.mean=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.mean(this,t,e)},n.prototype.min=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.min(this,t,e)},n.prototype.max=function(t,e){return t===void 0&&(t=null),e===void 0&&(e=!1),this.throwIfDisposed(),ge.max(this,t,e)},n.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),ge.argMin(this,t)},n.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),ge.argMax(this,t)},n.prototype.cast=function(t){return this.throwIfDisposed(),ge.cast(this,t)},n.prototype.add=function(t){return this.throwIfDisposed(),ge.add(this,t)},n.prototype.addStrict=function(t){return this.throwIfDisposed(),ge.addStrict(this,t)},n.prototype.atan2=function(t){return this.throwIfDisposed(),ge.atan2(this,t)},n.prototype.sub=function(t){return this.throwIfDisposed(),ge.sub(this,t)},n.prototype.subStrict=function(t){return this.throwIfDisposed(),ge.subStrict(this,t)},n.prototype.pow=function(t){return this.throwIfDisposed(),ge.pow(this,t)},n.prototype.powStrict=function(t){return this.throwIfDisposed(),ge.powStrict(this,t)},n.prototype.mul=function(t){return this.throwIfDisposed(),ge.mul(this,t)},n.prototype.mulStrict=function(t){return this.throwIfDisposed(),ge.mulStrict(this,t)},n.prototype.div=function(t){return this.throwIfDisposed(),ge.div(this,t)},n.prototype.divNoNan=function(t){return this.throwIfDisposed(),ge.divNoNan(this,t)},n.prototype.floorDiv=function(t){return this.throwIfDisposed(),ge.floorDiv(this,t)},n.prototype.divStrict=function(t){return this.throwIfDisposed(),ge.divStrict(this,t)},n.prototype.minimum=function(t){return this.throwIfDisposed(),ge.minimum(this,t)},n.prototype.minimumStrict=function(t){return this.throwIfDisposed(),ge.minimumStrict(this,t)},n.prototype.maximum=function(t){return this.throwIfDisposed(),ge.maximum(this,t)},n.prototype.maximumStrict=function(t){return this.throwIfDisposed(),ge.maximumStrict(this,t)},n.prototype.mod=function(t){return this.throwIfDisposed(),ge.mod(this,t)},n.prototype.modStrict=function(t){return this.throwIfDisposed(),ge.modStrict(this,t)},n.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),ge.squaredDifferenceStrict(this,t)},n.prototype.transpose=function(t){return this.throwIfDisposed(),ge.transpose(this,t)},n.prototype.notEqual=function(t){return this.throwIfDisposed(),ge.notEqual(this,t)},n.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),ge.notEqualStrict(this,t)},n.prototype.less=function(t){return this.throwIfDisposed(),ge.less(this,t)},n.prototype.lessStrict=function(t){return this.throwIfDisposed(),ge.lessStrict(this,t)},n.prototype.equal=function(t){return this.throwIfDisposed(),ge.equal(this,t)},n.prototype.equalStrict=function(t){return this.throwIfDisposed(),ge.equalStrict(this,t)},n.prototype.lessEqual=function(t){return this.throwIfDisposed(),ge.lessEqual(this,t)},n.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),ge.lessEqualStrict(this,t)},n.prototype.greater=function(t){return this.throwIfDisposed(),ge.greater(this,t)},n.prototype.greaterStrict=function(t){return this.throwIfDisposed(),ge.greaterStrict(this,t)},n.prototype.greaterEqual=function(t){return this.throwIfDisposed(),ge.greaterEqual(this,t)},n.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),ge.greaterEqualStrict(this,t)},n.prototype.logicalAnd=function(t){return this.throwIfDisposed(),ge.logicalAnd(this,t)},n.prototype.logicalOr=function(t){return this.throwIfDisposed(),ge.logicalOr(this,t)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),ge.logicalNot(this)},n.prototype.logicalXor=function(t){return this.throwIfDisposed(),ge.logicalXor(this,t)},n.prototype.where=function(t,e){return this.throwIfDisposed(),ge.where(t,this,e)},n.prototype.neg=function(){return this.throwIfDisposed(),ge.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),ge.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),ge.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),ge.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),ge.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),ge.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),ge.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),ge.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),ge.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),ge.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),ge.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),ge.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),ge.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),ge.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),ge.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),ge.abs(this)},n.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),ge.clipByValue(this,t,e)},n.prototype.relu=function(){return this.throwIfDisposed(),ge.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),ge.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),ge.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),ge.selu(this)},n.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),ge.leakyRelu(this,t)},n.prototype.prelu=function(t){return this.throwIfDisposed(),ge.prelu(this,t)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),ge.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),ge.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),ge.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),ge.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),ge.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),ge.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),ge.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),ge.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),ge.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),ge.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),ge.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),ge.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),ge.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),ge.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),ge.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),ge.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),ge.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),ge.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),ge.round(this)},n.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),ge.step(this,t)},n.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),ge.softmax(this,t)},n.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),ge.logSoftmax(this,t)},n.prototype.resizeBilinear=function(t,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ge.image.resizeBilinear(this,t,e)},n.prototype.resizeNearestNeighbor=function(t,e){return e===void 0&&(e=!1),this.throwIfDisposed(),ge.image.resizeNearestNeighbor(this,t,e)},n.prototype.conv1d=function(t,e,r,i,o,s){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),ge.conv1d(this,t,e,r,i,o,s)},n.prototype.conv2d=function(t,e,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ge.conv2d(this,t,e,r,i,o,s)},n.prototype.conv2dTranspose=function(t,e,r,i,o){return this.throwIfDisposed(),ge.conv2dTranspose(this,t,e,r,i,o)},n.prototype.depthwiseConv2D=function(t,e,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),ge.depthwiseConv2d(this,t,e,r,i,o,s)},n.prototype.separableConv2d=function(t,e,r,i,o,s){return o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),ge.separableConv2d(this,t,e,r,i,o,s)},n.prototype.avgPool=function(t,e,r,i){return this.throwIfDisposed(),ge.avgPool(this,t,e,r,i)},n.prototype.maxPool=function(t,e,r,i){return this.throwIfDisposed(),ge.maxPool(this,t,e,r,i)},n.prototype.localResponseNormalization=function(t,e,r,i){return t===void 0&&(t=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5),ge.localResponseNormalization(this,t,e,r,i)},n.prototype.pool=function(t,e,r,i,o){return this.throwIfDisposed(),ge.pool(this,t,e,r,i,o)},n.prototype.variable=function(t,e,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Mu().makeVariable(this,t,e,r)},n.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),ge.unsortedSegmentSum(this,t,e)},n.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),ge.batchToSpaceND(this,t,e)},n.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),ge.spaceToBatchND(this,t,e)},n.prototype.topk=function(t,e){return t===void 0&&(t=1),e===void 0&&(e=!0),this.throwIfDisposed(),ge.topk(this,t,e)},n.prototype.stridedSlice=function(t,e,r,i,o,s,a,u){return i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),this.throwIfDisposed(),ge.stridedSlice(this,t,e,r,i,o,s,a,u)},n.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),ge.depthToSpace(this,t,e)},n.prototype.fft=function(){return this.throwIfDisposed(),ge.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),ge.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),ge.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),ge.spectral.irfft(this)},n}();Object.defineProperty(Nn,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var TU,cM,lM,dM,hM,uf=function(n){function t(e,r,i,o){var s=n.call(this,e.shape,e.dtype,e.dataId,o)||this;return s.trainable=r,s.name=i,s}return Na(t,n),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Ur(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Mu().disposeTensor(this),this.dataId=e.dataId,Mu().incRef(this,null)},t.prototype.dispose=function(){Mu().disposeVariable(this),this.isDisposedInternal=!0},t}(Nn);Object.defineProperty(uf,Symbol.hasInstance,{value:function(n){return n instanceof Nn&&n.assign!=null&&n.assign instanceof Function}}),function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"}(TU||(TU={})),function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"}(cM||(cM={})),function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"}(lM||(lM={})),function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"}(dM||(dM={})),function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"}(hM||(hM={}));var Tue={float32:dM,int32:cM,bool:lM,complex64:hM};function ui(n,t){if(n==="string"||t==="string"){if(n==="string"&&t==="string")return"string";throw new Error("Can not upcast "+n+" with "+t)}return Tue[n][t]}function BP(n){return ui(n,"int32")}function er(n,t){if(n.dtype===t.dtype)return[n,t];var e=ui(n.dtype,t.dtype);return[n.cast(e),t.cast(e)]}function Ij(n,t){Q(n.dtype===t.dtype,function(){return"The dtypes of the first("+n.dtype+") and second("+t.dtype+") input must match"})}function MM(n){var t=[];return function e(r,i,o){if(r!=null){if(r instanceof Nn)return void i.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,a=r;for(var u in a){var c=a[u];o.has(c)||(o.add(c),e(c,i,o))}}}}(n,t,new Set),t}var UP,CDe=Object.freeze({makeTypesMatch:er,assertTypesMatch:Ij,isTensorInList:function(n,t){return t.some(function(e){return e.id===n.id})},getTensorsInContainer:MM}),AU=function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},n}(),Aue=function(){function n(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new AU}return n.prototype.ready=function(){return tt(this,void 0,void 0,function(){var t,e,r;return nt(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),e=0,i.label=1;case 1:return e<t.length?(r=t[e],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return e++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),e=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+e+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(e)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},n.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},n.prototype.registerBackend=function(t,e,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:e,priority:r},!0)},n.prototype.setBackend=function(t){return tt(this,void 0,void 0,function(){var e,r,i;return nt(this,function(o){switch(o.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,e=this.initializeBackend(t),r=e.success,e.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Eue(this.backendInstance),[2,!0]}})})},n.prototype.setupRegisteredKernels=function(){var t=this;EU(this.backendName).forEach(function(e){e.setupFunc!=null&&e.setupFunc(t.backendInstance)})},n.prototype.disposeRegisteredKernels=function(t){var e=this;EU(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(e.registry[t])})},n.prototype.initializeBackend=function(t){var e=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then(function(a){return!(o<e.pendingBackendInitId)&&(e.registry[t]=a,e.pendingBackendInit=null,!0)}).catch(function(a){return!(o<e.pendingBackendInitId)&&(e.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[t]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+t+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(e,r){return t.registryFactory[r].priority-t.registryFactory[e].priority})},n.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),e=0;e<t.length;e++){var r=t[e],i=this.initializeBackend(r),o=i.success,s=i.asyncInit;if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(t,e){var r=this.state.tensorInfo.get(e),i=r.backend,o=this.readSync(e);i.disposeData(e),r.backend=t,t.move(e,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(t,e){var r,i=this,o=null;if(e==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");e=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof e!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=t}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},n.prototype.scopedRun=function(t,e,r){t();try{var i=r();return e(),i}catch(o){throw e(),o}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(t){var e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[e],function(i){return{x:function(){return i.toFloat()}}},[]),e},n.prototype.runKernel=function(t,e,r,i,o){return this.runKernelFunc(null,e,null,t,r,i,o)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(t,e,r){var i=this.backend.numDataIds(),o=0;r.forEach(function(u){o+=u.dtype==="complex64"?3:1});var s=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=i-e-o-s;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+t+"'")},n.prototype.runKernelFunc=function(t,e,r,i,o,s,a){var u,c=this;s===void 0&&(s=[]),a===void 0&&(a=[]);var d=[],h=this.isTapeOn();i==null&&(i=this.state.activeScope!=null?this.state.activeScope.name:"");var p,m=function(N){h&&(d=N.map(function(F){return c.keep(c.clone(F))}))},_=this.state.numBytes,C=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var x,S=cj(i,this.backendName);return p=S!=null?function(){var N=c.backend.numDataIds();x=S.kernelFunc({inputs:e,attrs:o,backend:c.backend});var F=Array.isArray(x)?x:[x];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,N,F);var R=F.map(function(H){var B=H.dataId,k=H.shape,D=H.dtype;return c.makeTensorFromDataId(B,k,D)}),j=R.filter(function(H,B){return a[B]});return m((s||[]).slice().concat(j)),R}:function(){var N=c.backend.numDataIds();x=c.tidy(function(){return t(c.backend,m)});var F=Array.isArray(x)?x:[x];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(i,N,F),F},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(i,e,function(){return p()}):p()}),h&&this.addTapeNode(i,e,u,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:i,bytesAdded:this.state.numBytes-_,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-C,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map(function(N){return e[N].shape}),outputShapes:u.map(function(N){return N.shape})}),Array.isArray(x)?u:u[0]},n.prototype.makeTensor=function(t,e,r,i){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",i=i||this.backend;var o=t;r==="string"&&id(t[0])&&(o=t.map(function(d){return wj(d)}));var s=i.write(o,e,r),a=new Nn(e,r,s,this.nextTensorId());if(this.incRef(a,i),r==="string"){var u=this.state.tensorInfo.get(s),c=_j(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return a},n.prototype.makeTensorFromDataId=function(t,e,r,i){var o=new Nn(e,r=r||"float32",t,this.nextTensorId());return this.incRef(o,i),o},n.prototype.makeVariable=function(t,e,r,i){e===void 0&&(e=!0),r=r||this.nextVariableId().toString(),i!=null&&i!==t.dtype&&(t=t.asType(i));var o=new uf(t,e,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},n.prototype.incRef=function(t,e){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(i=t.size*TM(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:i,refCount:0}),this.state.numBytes+=i}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof uf||this.track(t)},n.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var e=this.state.registeredVariables[t];this.disposeVariable(e)}},n.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},n.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},n.prototype.profile=function(t){return tt(this,void 0,void 0,function(){var e,r;return nt(this,function(i){return this.state.profiling=!0,e=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(t,e,r,i,o){var s=this,a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:r,saved:o},u=Cue(t);u!=null&&(i=u.gradFunc),i!=null&&(a.gradient=function(c){return c=c.map(function(d,h){if(d==null){var p=r[h],m=Km(p.size,p.dtype);return s.makeTensor(m,p.shape,p.dtype)}return d}),i(c.length>1?c:c[0],o)}),this.state.activeTape.push(a)},n.prototype.keep=function(t){return t.kept=!0,t},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(t){var e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e},n.prototype.endScope=function(t){for(var e=this,r=MM(t),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==a.id||e.track(u)})},n.prototype.gradients=function(t,e,r,i){var o=this;if(i===void 0&&(i=!1),Q(e.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",t)});Q(s instanceof Nn,function(){return"The result y returned by f() must be a tensor."});var a=function(u,c,d){for(var h={},p={},m=0;m<c.length;m++)h[c[m].id]=!0;for(m=0;m<u.length;m++){var _=(H=u[m]).inputs;for(var C in _){for(var x=_[C],S=!1,N=0;N<c.length;N++)if(h[x.id]){H.outputs.forEach(function(P){return h[P.id]=!0}),S=!0,p[H.id]=!0;break}if(S)break}}var F={};F[d.id]=!0;var R={};for(m=u.length-1;m>=0;m--)for(_=(H=u[m]).inputs,N=0;N<H.outputs.length;N++)if(F[H.outputs[N].id]){for(var C in _)F[_[C].id]=!0,R[H.id]=!0;break}var j=[];for(m=0;m<u.length;m++){var H;if(p[(H=u[m]).id]&&R[H.id]){var B={};for(var C in H.inputs){var k=H.inputs[C];h[k.id]&&(B[C]=k)}var D=Object.assign({},H);D.inputs=B,D.outputs=H.outputs,j.push(D)}}return j}(this.state.activeTape,e,s);if(!i&&a.length===0&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,c,d={};d[s.id]=r??(u=s.shape,c=DM(ot(u),"float32"),ne.makeTensor(c,u,"float32")),function(p,m,_){for(var C=function(S){var N=m[S],F=[];if(N.outputs.forEach(function(B){var k=p[B.id];k!=null?F.push(k):F.push(null)}),N.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+N.kernelName+".");var R=N.gradient(F),j=function(B){if(!(B in R))throw new Error("Cannot backprop through input "+B+". Available gradients found: "+Object.keys(R)+".");var k=_(function(){return R[B]()});if(k.dtype!=="float32")throw new Error("Error in gradient for op "+N.kernelName+". The gradient of input "+B+" must have 'float32' dtype, but has '"+k.dtype+"'");var D=N.inputs[B];if(!Ur(k.shape,D.shape))throw new Error("Error in gradient for op "+N.kernelName+". The gradient of input '"+B+"' has shape '"+k.shape+"', which does not match the shape of the input '"+D.shape+"'");if(p[D.id]==null)p[D.id]=k;else{var P=p[D.id];p[D.id]=P.add(k),P.dispose()}};for(var H in N.inputs)j(H)},x=m.length-1;x>=0;x--)C(x)}(d,a,function(p){return o.tidy(p)});var h=e.map(function(p){return d[p.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(p){for(var m=0,_=p.saved;m<_.length;m++)_[m].dispose()}),o.state.activeTape=null),{value:s,grads:h}})},n.prototype.customGrad=function(t){var e=this;return Q($1(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];Q(i.every(function(a){return a instanceof Nn}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return i.forEach(function(a,u){s[u]=a}),e.runKernelFunc(function(a,u){return Q((r=t.apply(void 0,i.concat([u]))).value instanceof Nn,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),Q($1(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(a,u){var c=r.gradFunc(a,u),d=Array.isArray(c)?c:[c];Q(d.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),Q(d.every(function(p){return p instanceof Nn}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return d.forEach(function(p,m){h[m]=function(){return p}}),h})}},n.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},n.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},n.prototype.time=function(t){return tt(this,void 0,void 0,function(){var e,r;return nt(this,function(i){switch(i.label){case 0:return e=ka(),[4,this.backend.time(t)];case 1:return(r=i.sent()).wallMs=ka()-e,[2,r]}})})},n.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new AU,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n}(),ne=function(){var n=function(){if(UP==null){var e=void 0;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else{if(typeof self>"u")throw new Error("Could not find a global object");e=self}UP=e}return UP}();if(n._tfengine==null){var t=new bue(n);n._tfengine=new Aue(t)}return function(e){uj=e}(n._tfengine.ENV),Mu=function(){return n._tfengine},n._tfengine}();function Sj(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Fc=_e();Fc.registerFlag("DEBUG",function(){return!1},function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Fc.registerFlag("IS_BROWSER",function(){return Sj()}),Fc.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Fc.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Fc.registerFlag("PROD",function(){return!1}),Fc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Fc.getBool("DEBUG")}),Fc.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Fc.registerFlag("IS_TEST",function(){return!1});var l_,gs,ms,tf={},jP={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Tj(n,t){tf[n]=t}function Nu(n){n in tf||(tf[n]=function(e){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(i){if(typeof OffscreenCanvas<"u"&&i===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete tf[e]},!1),e===1?r.getContext("webgl",jP)||r.getContext("experimental-webgl",jP):r.getContext("webgl2",jP)}(n));var t=tf[n];return t.isContextLost()?(delete tf[n],Nu(n)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),tf[n])}function ix(n,t){return[t,n]}function o_(n){var t=ot(n);return H1(Math.ceil(t/4))}function v_(n,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(n/2))]}function kM(n,t){var e,r,i,o,s,a,u,c,d,h=n;return _e().getNumber("WEBGL_VERSION")===2?(e=h.R32F,r=h.R16F,i=h.RGBA16F,o=h.RGBA32F,s=h.RED,a=4,u=1,c=h.HALF_FLOAT,d=h.FLOAT):(e=n.RGBA,r=n.RGBA,i=n.RGBA,o=h.RGBA,s=n.RGBA,a=4,u=4,c=t!=null?t.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:e,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:d}}function Xe(n,t,e){var r=e();return t&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+Dj(i,o))}(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(l_||(l_={})),function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"}(gs||(gs={})),function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(ms||(ms={}));var Due=596e-10,Pue=65504;function Aj(n){return!!(_e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||Due<Math.abs(n)&&Math.abs(n)<Pue)}function Dj(n,t){switch(t){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function n_(n,t,e){return jc(n,t,function(){return n.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function Pj(n,t,e){var r=jc(n,t,function(){return n.createShader(n.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Xe(n,t,function(){return n.shaderSource(r,e)}),Xe(n,t,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function Mj(n,t,e){var r=jc(n,t,function(){return n.createShader(n.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Xe(n,t,function(){return n.shaderSource(r,e)}),Xe(n,t,function(){return n.compileShader(r)}),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw function(i,o){var s=Mue.exec(o);if(s==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],u=i.split(`
`),c=u.length.toString().length+2,d=u.map(function(x,S){return sf((S+1).toString(),c)+x}),h=0,p=0;p<d.length;p++)h=Math.max(d[p].length,h);var m=d.slice(0,a-1),_=d.slice(a-1,a),C=d.slice(a);console.log(m.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+sf(_[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(C.join(`
`))}(e,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var N1,F1,Mue=/ERROR: [0-9]+:([0-9]+):/g;function kj(n,t){return jc(n,t,function(){return n.createProgram()},"Unable to create WebGLProgram.")}function Oj(n,t,e){if(Xe(n,t,function(){return n.linkProgram(e)}),n.getProgramParameter(e,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function L1(n,t,e){if(Xe(n,t,function(){return n.validateProgram(e)}),n.getProgramParameter(e,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Rj(n,t,e){var r=jc(n,t,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Xe(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),Xe(n,t,function(){return n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW)}),r}function Nj(n,t,e){var r=jc(n,t,function(){return n.createBuffer()},"Unable to create WebGLBuffer");return Xe(n,t,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)}),Xe(n,t,function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,e,n.STATIC_DRAW)}),r}function Fj(n,t){return jc(n,t,function(){return n.createTexture()},"Unable to create WebGLTexture.")}function Lj(n,t){var e=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||t<=0){var r="["+n+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>e||t>e)throw r="["+n+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+e+"x"+e+"]")+".")}function Vj(n,t){return jc(n,t,function(){return n.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function fM(n,t,e,r,i,o,s,a){var u=n.getAttribLocation(e,r);return u!==-1&&(Xe(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,i)}),Xe(n,t,function(){return n.vertexAttribPointer(u,o,n.FLOAT,!1,s,a)}),Xe(n,t,function(){return n.enableVertexAttribArray(u)}),!0)}function Bj(n,t,e,r){Hj(n,r),Xe(n,t,function(){return n.activeTexture(n.TEXTURE0+r)}),Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)})}function Uj(n,t,e,r){return jc(n,t,function(){return n.getUniformLocation(e,r)},'uniform "'+r+'" not present in program.')}function jj(n,t,e){return n.getUniformLocation(t,e)}function zj(n,t,e,r,i,o){Xe(n,t,function(){return Bj(n,t,r,o)}),Xe(n,t,function(){return n.uniform1i(i,o)})}function V1(n,t,e,r){Xe(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)}),Xe(n,t,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0)})}function pM(n,t,e){Xe(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,e)}),Xe(n,t,function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)})}function r_(n){var t=n.checkFramebufferStatus(n.FRAMEBUFFER);if(t!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Wj(n,t))}function Wj(n,t){switch(t){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function jc(n,t,e,r){var i=Xe(n,t,function(){return e()});if(i==null)throw new Error(r);return i}function Hj(n,t){var e=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+n.TEXTURE0;if(r<n.TEXTURE0||r>e)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+e+"]")+".")}function d_(n,t){return t===void 0&&(t=2),ot(n.slice(0,n.length-t))}function h_(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function B1(n){var t=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(t=[d_(n)].concat(h_(n))),t}function $j(n,t){var e;t===void 0&&(t=!1);var r=_e().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(n=n.map(function(c,d){return d>=n.length-2?SM(n[d]):n[d]})).length===1&&(n=[2,n[0]])),n.length!==2){var i=rd(n);n=i.newShape}var o=ot(n);if(n.length<=1&&o<=r)return[1,o];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(t){var s=d_(n),a=2,u=2;return n.length&&(a=(e=h_(n))[0],u=e[1]),H1(o=s*(a/2)*(u/2)).map(function(c){return 2*c})}return H1(o)}function S1(n){return n%2==0}function i_(n,t){if(Ur(n=n.slice(-2),t=t.slice(-2))||!n.length||!t.length||n[0]===0||n[1]===0||t[0]===0||t[1]===0)return!0;if(n.length!==t.length){var e=n.slice(-1)[0],r=t.slice(-1)[0];if(e===r||S1(e)&&S1(r)&&(n[0]===1||t[0]===1))return!0}return n[1]===t[1]&&S1(n[0])&&S1(t[0])}function qj(n){if(N1==null){var t=Nu(n);N1=t.getParameter(t.MAX_TEXTURE_SIZE)}return N1}function Gj(n){if(F1==null){var t=Nu(n);F1=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,F1)}function Kj(n){if(n===0)return 0;var t=Nu(n);return vs(t,"EXT_disjoint_timer_query_webgl2")&&n===2?2:vs(t,"EXT_disjoint_timer_query")?1:0}function vs(n,t){return n.getExtension(t)!=null}function mM(n){try{if(Nu(n)!=null)return!0}catch{return!1}return!1}function Yj(n){if(n===0)return!1;var t=Nu(n);if(n===1){if(!vs(t,"OES_texture_float"))return!1}else if(!vs(t,"EXT_color_buffer_float"))return!1;return gM(t)}function Zj(n){if(n===0)return!1;var t=Nu(n);if(n!==1){if(vs(t,"EXT_color_buffer_float"))return gM(t);if(vs(t,"EXT_color_buffer_half_float")){var e=t.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=kM(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),u}(t,e)}return!1}return!!vs(t,"OES_texture_float")&&!!vs(t,"WEBGL_color_buffer_float")&&gM(t)}function gM(n){var t=kM(n),e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e),n.texImage2D(n.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var i=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(e),n.deleteFramebuffer(r),i}function Qj(n){return n===2&&Nu(n).fenceSync!=null}var kue=Object.freeze({callAndCheck:Xe,canBeRepresented:Aj,getWebGLErrorMessage:Dj,getExtensionOrThrow:n_,createVertexShader:Pj,createFragmentShader:Mj,createProgram:kj,linkProgram:Oj,validateProgram:L1,createStaticVertexBuffer:Rj,createStaticIndexBuffer:Nj,getNumChannels:function(){return _e().getNumber("WEBGL_VERSION")===2?1:4},createTexture:Fj,validateTextureSize:Lj,createFramebuffer:Vj,bindVertexBufferToProgramAttribute:fM,bindTextureUnit:Bj,unbindTextureUnit:function(n,t,e){Hj(n,e),Xe(n,t,function(){return n.activeTexture(n.TEXTURE0+e)}),Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Uj,getProgramUniformLocation:jj,bindTextureToProgramUniformSampler:zj,bindCanvasToFramebuffer:function(n,t){Xe(n,t,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),Xe(n,t,function(){return n.viewport(0,0,n.canvas.width,n.canvas.height)}),Xe(n,t,function(){return n.scissor(0,0,n.canvas.width,n.canvas.height)})},bindColorTextureToFramebuffer:V1,unbindColorTextureFromFramebuffer:pM,validateFramebuffer:r_,getFramebufferErrorMessage:Wj,getBatchDim:d_,getRowsCols:h_,getShapeAs3D:B1,getTextureShapeFromLogicalShape:$j,isReshapeFree:i_,getWebGLMaxTextureSize:qj,resetMaxTextureSize:function(){N1=null},resetMaxTexturesInShader:function(){F1=null},getMaxTexturesInShader:Gj,getWebGLDisjointQueryTimerVersion:Kj,hasExtension:vs,isWebGLVersionEnabled:mM,isCapableOfRenderingToFloatTexture:Yj,isDownloadFloatTextureEnabled:Zj,isWebGLFenceEnabled:Qj}),xt=_e();function Xj(n){_e().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function ke(n,t){return ne.tidy(n,t)}function Vo(n){MM(n).forEach(function(t){return t.dispose()})}function Oue(n){return ne.keep(n)}function G1(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];_e().getBool("IS_TEST")||console.warn.apply(console,n)}function Ru(n,t){var e=n;if(Si(n))return t==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(e)||Si(e)&&t!=="string";)r.push(e.length),e=e[0];return Array.isArray(n)&&_e().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,s,a){if(a=a||[],!Array.isArray(o)&&!Si(o))return void Q(s.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});Q(s.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),Q(o.length===s[0],function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var u=s.slice(1),c=0;c<o.length;++c)i(o[c],u,a.concat(c))}(n,r,[]),r}function DU(n,t,e,r){if(n!=null&&(n!=="numeric"&&n!==t||n==="numeric"&&t==="string"))throw new Error("Argument '"+e+"' passed to '"+r+"' must be "+n+" tensor, but got "+t+" tensor")}function Y(n,t,e,r){if(r===void 0&&(r="numeric"),n instanceof Nn)return DU(r,n.dtype,t,e),n;var i=Gm(n);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),DU(r,i,t,e),n==null||!Si(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var o=n==null?"null":n.constructor.name;throw new Error("Argument '"+t+"' passed to '"+e+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=Ru(n,i);Si(n)||Array.isArray(n)||(n=[n]);var a=i!=="string"?AM(n,i,_e().getBool("DEBUG")):Uc(n,[],!0);return ne.makeTensor(a,s,i)}function K1(n,t,e,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+t+" passed to "+e+" must be a `Tensor[]` or `TensorLike[]`");return n.map(function(i,o){return Y(i,t+"["+o+"]",e)},r)}function OM(n,t){for(var e=0;e<n.length;++e)if(n[n.length-e-1]!==t-1-e)return!1;return!0}function Jj(n,t,e){for(var r=n.length+t.length,i=[],o=0,s=0,a=0;a<r;a++)e.indexOf(a)===-1?i.push(n[o++]):i.push(t[s++]);return i}function Ii(n,t){for(var e=[],r=n.length,i=0;i<r;i++)t.indexOf(i)===-1&&e.push(n[i]);return[e,t.map(function(o){return n[o]})]}function ho(n,t){return Jj(n,t.map(function(e){return 1}),t)}function Fo(n,t,e){Q(OM(t,e),function(){return n+" supports only inner-most axes for now. Got axes "+t+" and rank-"+e+" input."})}function Fa(n,t){if(OM(n,t))return null;for(var e=[],r=0;r<t;++r)n.indexOf(r)===-1&&e.push(r);return n.forEach(function(i){return e.push(i)}),e}function ox(n){return n.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function La(n,t){for(var e=[],r=t-n;r<t;++r)e.push(r);return e}function ez(n,t){var e=n[0].length;n.forEach(function(i,o){Q(i.length===e,function(){return"Error in concat"+e+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+e+")"})}),Q(t>=0&&t<e,function(){return"Error in concat"+e+"D: axis must be between 0 and "+(e-1)+"."});var r=n[0];n.forEach(function(i,o){for(var s=0;s<e;s++)Q(s===t||i[s]===r[s],function(){return"Error in concat"+e+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function cf(n,t){for(var e=n[0].slice(),r=1;r<n.length;r++)e[t]+=n[r][t];return e}function te(n){var t=Object.keys(n);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var e=t[0],r=n[e];e.endsWith("_")&&(e=e.substring(0,e.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];ne.startScope(e);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ne.endScope(a),a}catch(u){throw ne.endScope(null),u}};return Object.defineProperty(i,"name",{value:e,configurable:!0}),i}xt.registerFlag("HAS_WEBGL",function(){return xt.getNumber("WEBGL_VERSION")>0}),xt.registerFlag("WEBGL_VERSION",function(){return mM(2)?2:mM(1)?1:0}),xt.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return xt.get("WEBGL_VERSION")===2}),xt.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),xt.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),xt.registerFlag("WEBGL_PACK",function(){return xt.getBool("HAS_WEBGL")}),xt.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_CLIP",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),xt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_PACK_REDUCE",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_LAZILY_UNPACK",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_CONV_IM2COL",function(){return xt.getBool("WEBGL_PACK")}),xt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return qj(xt.getNumber("WEBGL_VERSION"))}),xt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Gj(xt.getNumber("WEBGL_VERSION"))}),xt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var n=xt.getNumber("WEBGL_VERSION");return n===0?0:Kj(n)}),xt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return xt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n}),xt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Yj(xt.getNumber("WEBGL_VERSION"))}),xt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!xt.getBool("WEBGL_FORCE_F16_TEXTURES")&&xt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),xt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Zj(xt.getNumber("WEBGL_VERSION"))}),xt.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Qj(xt.getNumber("WEBGL_VERSION"))}),xt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return xt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),Ej=Xj;var Ei=te({complex_:function(n,t){var e=Y(n,"real","complex"),r=Y(t,"imag","complex");return xn(e.shape,r.shape,"real and imag shapes, "+e.shape+" and "+r.shape+", must match in call to tf.complex()."),ne.runKernelFunc(function(i){return i.complex(e,r)},{$real:e,$imag:r})}}),Ys=te({real_:function(n){var t=Y(n,"input","real");return ne.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),ku=te({imag_:function(n){var t=Y(n,"input","imag");return ne.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function ci(n,t,e){return ad(n,t,Ru(n,e),e)}function ad(n,t,e,r){if(r==null&&(r=Gm(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Si(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){PM(t);var i=ot(t),o=ot(e);Q(i===o,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<e.length;++s){var a=e[s],u=s!==e.length-1||a!==ot(t.slice(s));Q(e[s]===t[s]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+e+") does not match the provided shape ("+t+"). "})}}return Si(n)||Array.isArray(n)||(n=[n]),t=t||e,n=r!=="string"?AM(n,r,_e().getBool("DEBUG")):Uc(n,[],!0),ne.makeTensor(n,t,r)}function Ue(n,t){if((Si(n)&&t!=="string"||Array.isArray(n))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Si(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ad(n,[],[],t)}function jn(n,t){hf(n);var e=Ru(n,t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ad(n,null,e,t)}function Ou(n,t,e){if(hf(n),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Ru(n,e);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ad(n,t,r,e)}function sx(n,t,e){if(hf(n),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Ru(n,e);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ad(n,t,r,e)}function Xr(n,t,e){if(hf(n),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Ru(n,e);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ad(n,t,r,e)}function Rue(n,t,e){if(hf(n),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Ru(n,e);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ad(n,t,r,e)}function Nue(n,t,e){if(hf(n),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Ru(n,e);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ad(n,t=t||r,r,e)}function Fue(n,t,e,r){return t===void 0&&(t=!0),ne.makeVariable(n,t,e,r)}function Ym(n,t){if(t===void 0&&(t="float32"),t==="complex64"){var e=Ym(n,"float32"),r=Gn(n,"float32");return Ei(e,r)}var i=DM(ot(n),t);return ne.makeTensor(i,n,t)}function Gn(n,t){if(t===void 0&&(t="float32"),t==="complex64"){var e=Gn(n,"float32"),r=Gn(n,"float32");return Ei(e,r)}var i=Km(ot(n),t);return ne.makeTensor(i,n,t)}function ys(n,t,e){return ne.runKernelFunc(function(r){return r.fill(n,t,e)},{})}function Lue(n,t,e){if(e<=0)throw new Error("The number of values should be positive.");return ne.runKernelFunc(function(r){return r.linspace(n,t,e)},{})}function Y1(n,t,e,r){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e===0)throw new Error("Cannot have a step of zero");if(n===t||n<t&&e<0||t<n&&e>1)return Gn([0],r);var i=Km(Math.abs(Math.ceil((t-n)/e)),r);t<n&&e===1&&(e=-1),i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+e;return jn(i,r)}var tz=te({onesLike_:function(n){var t=Y(n,"x","onesLike");if(t.dtype==="complex64"){var e=tz(Ys(t)),r=an(ku(t));return Ei(e,r)}return ne.runKernelFunc(function(i){return i.onesLike(t)},{$x:t},function(i,o){return{$x:function(){return an(i)}}})}}),an=te({zerosLike_:function(n){var t=Y(n,"x","zerosLike");return ne.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,r){return{$x:function(){return an(e)}}})}}),Xn=te({concat_:function(n,t){t===void 0&&(t=0),Q(n.length>=1,function(){return"Pass at least one tensor to concat"});var e=K1(n,"tensors","concat");e[0].dtype==="complex64"&&e.forEach(function(a){if(a.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+a.dtype+". ")}),t=zr(t,e[0].shape)[0];var r=cf(e.map(function(a){return a.shape}),t);if(ot(r)===0)return ci([],r);if((e=e.filter(function(a){return a.size>0})).length===1)return e[0];var i=e.map(function(a){return a.shape});ez(i,t);var o=e,s={axis:t};return ne.runKernelFunc(function(a){return a.concat(e,t)},o,function(a){var u=i.map(function(c){return c[t]});return RM(a,u,t).map(function(c){return function(){return c}})},"Concat",s)}}),Vue=te({concat1d_:function(n){return Xn(n,0)}}),Bue=te({concat2d_:function(n,t){return Xn(n,t)}}),Uue=te({concat3d_:function(n,t){return Xn(n,t)}}),jue=te({concat4d_:function(n,t){return Xn(n,t)}}),RM=te({split_:function(n,t,e){e===void 0&&(e=0);var r,i=Y(n,"x","split");return e=zr(e,i.shape)[0],typeof t=="number"?(Q(i.shape[e]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(i.shape[e]/t)):(Q(i.shape[e]===t.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),ne.runKernelFunc(function(o){return o.split(i,r,e)},{$x:i},function(o){return{$x:function(){return Xn(o,e)}}})}});function ff(n,t){return n(t={exports:{}},t.exports),t.exports}var zue=ff(function(n){(function(t,e,r){function i(a){var u,c=this,d=(u=4022871197,function(h){h=h.toString();for(var p=0;p<h.length;p++){var m=.02519603282416938*(u+=h.charCodeAt(p));m-=u=m>>>0,u=(m*=u)>>>0,u+=4294967296*(m-=u)}return 23283064365386963e-26*(u>>>0)});c.next=function(){var h=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=0|h)},c.c=1,c.s0=d(" "),c.s1=d(" "),c.s2=d(" "),c.s0-=d(a),c.s0<0&&(c.s0+=1),c.s1-=d(a),c.s1<0&&(c.s1+=1),c.s2-=d(a),c.s2<0&&(c.s2+=1),d=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var c=new i(a),d=u&&u.state,h=c.next;return h.int32=function(){return 4294967296*c.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.alea=s})(0,n,!1)}),Wue=ff(function(n){(function(t,e,r){function i(a){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var h=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^h^h>>>8},a===(0|a)?u.x=a:c+=a;for(var d=0;d<c.length+64;d++)u.x^=0|c.charCodeAt(d),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var c=new i(a),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(p===0);return p},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.xor128=s})(0,n,!1)}),Hue=ff(function(n){(function(t,e,r){function i(a){var u=this,c="";u.next=function(){var h=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^h^h<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:c+=a;for(var d=0;d<c.length+64;d++)u.x^=0|c.charCodeAt(d),d==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var c=new i(a),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(p===0);return p},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.xorwow=s})(0,n,!1)}),$ue=ff(function(n){(function(t,e,r){function i(a){var u=this;u.next=function(){var c,d,h=u.x,p=u.i;return c=h[p],d=(c^=c>>>7)^c<<24,d^=(c=h[p+1&7])^c>>>10,d^=(c=h[p+3&7])^c>>>3,d^=(c=h[p+4&7])^c<<7,c=h[p+7&7],d^=(c^=c<<13)^c<<9,h[p]=d,u.i=p+1&7,d},function(c,d){var h,p=[];if(d===(0|d))p[0]=d;else for(d=""+d,h=0;h<d.length;++h)p[7&h]=p[7&h]<<15^d.charCodeAt(h)+p[h+1&7]<<13;for(;p.length<8;)p.push(0);for(h=0;h<8&&p[h]===0;++h);for(h==8?p[7]=-1:p[h],c.x=p,c.i=0,h=256;h>0;--h)c.next()}(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){a==null&&(a=+new Date);var c=new i(a),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(p===0);return p},h.int32=c.next,h.quick=h,d&&(d.x&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.xorshift7=s})(0,n,!1)}),que=ff(function(n){(function(t,e,r){function i(a){var u=this;u.next=function(){var c,d,h=u.w,p=u.X,m=u.i;return u.w=h=h+1640531527|0,d=p[m+34&127],c=p[m=m+1&127],d^=d<<13,c^=c<<17,d^=d>>>15,c^=c>>>12,d=p[m]=d^c,u.i=m,d+(h^h>>>16)|0},function(c,d){var h,p,m,_,C,x=[],S=128;for(d===(0|d)?(p=d,d=null):(d+="\0",p=0,S=Math.max(S,d.length)),m=0,_=-32;_<S;++_)d&&(p^=d.charCodeAt((_+32)%d.length)),_===0&&(C=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,_>=0&&(C=C+1640531527|0,m=(h=x[127&_]^=p+C)==0?m+1:0);for(m>=128&&(x[127&(d&&d.length||0)]=-1),m=127,_=512;_>0;--_)p=x[m+34&127],h=x[m=m+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,x[m]=p^h;c.w=C,c.X=x,c.i=m}(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){a==null&&(a=+new Date);var c=new i(a),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(p===0);return p},h.int32=c.next,h.quick=h,d&&(d.X&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.xor4096=s})(0,n,!1)}),Gue=ff(function(n){(function(t,e,r){function i(a){var u=this,c="";u.next=function(){var h=u.b,p=u.c,m=u.d,_=u.a;return h=h<<25^h>>>7^p,p=p-m|0,m=m<<24^m>>>8^_,_=_-h|0,u.b=h=h<<20^h>>>12^p,u.c=p=p-m|0,u.d=m<<16^p>>>16^_,u.a=_-h|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):c+=a;for(var d=0;d<c.length+20;d++)u.b^=0|c.charCodeAt(d),u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var c=new i(a),d=u&&u.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(p===0);return p},h.int32=c.next,h.quick=h,d&&(typeof d=="object"&&o(d,c),h.state=function(){return o(c,{})}),h}e&&e.exports?e.exports=s:r&&r.amd?r(function(){return s}):this.tychei=s})(0,n,!1)}),nf=ff(function(n){(function(t,e){var r,i=this,o=256,s=6,a="random",u=e.pow(o,s),c=e.pow(2,52),d=2*c,h=o-1;function p(S,N,F){var R=[],j=C(function k(D,P){var z,U=[],$=typeof D;if(P&&$=="object")for(z in D)try{U.push(k(D[z],P-1))}catch{}return U.length?U:$=="string"?D:D+"\0"}((N=N==1?{entropy:!0}:N||{}).entropy?[S,x(t)]:S??function(){try{var k;return r&&(k=r.randomBytes)?k=k(o):(k=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(k)),x(k)}catch{var D=i.navigator,P=D&&D.plugins;return[+new Date,i,P,i.screen,x(t)]}}(),3),R),H=new m(R),B=function(){for(var k=H.g(s),D=u,P=0;k<c;)k=(k+P)*o,D*=o,P=H.g(1);for(;k>=d;)k/=2,D/=2,P>>>=1;return(k+P)/D};return B.int32=function(){return 0|H.g(4)},B.quick=function(){return H.g(4)/4294967296},B.double=B,C(x(H.S),t),(N.pass||F||function(k,D,P,z){return z&&(z.S&&_(z,H),k.state=function(){return _(H,{})}),P?(e[a]=k,D):k})(B,j,"global"in N?N.global:this==e,N.state)}function m(S){var N,F=S.length,R=this,j=0,H=R.i=R.j=0,B=R.S=[];for(F||(S=[F++]);j<o;)B[j]=j++;for(j=0;j<o;j++)B[j]=B[H=h&H+S[j%F]+(N=B[j])],B[H]=N;(R.g=function(k){for(var D,P=0,z=R.i,U=R.j,$=R.S;k--;)D=$[z=h&z+1],P=P*o+$[h&($[z]=$[U=h&U+D])+($[U]=D)];return R.i=z,R.j=U,P})(o)}function _(S,N){return N.i=S.i,N.j=S.j,N.S=S.S.slice(),N}function C(S,N){for(var F,R=S+"",j=0;j<R.length;)N[h&j]=h&(F^=19*N[h&j])+R.charCodeAt(j++);return x(N)}function x(S){return String.fromCharCode.apply(0,S)}if(e["seed"+a]=p,C(e.random(),t),n.exports){n.exports=p;try{r=bU()}catch{}}})([],Math)});nf.alea=zue,nf.xor128=Wue,nf.xorwow=Hue,nf.xorshift7=$ue,nf.xor4096=que,nf.tychei=Gue;var ax=nf.alea,NM=function(){function n(t,e,r,i,o){this.mean=t,this.stdDev=e,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=ax(s.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s;while(a>=1||a===0);var u=Math.sqrt(-2*Math.log(a)/a);e=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*s*u,this.truncated&&!this.isValidTruncated(e)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(e)},n.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},n.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},n}(),Kue=function(){function n(t,e,r,i){this.alpha=t,this.beta=1/e,this.dtype=r;var o=i||Math.random();this.randu=ax(o.toString()),this.randn=new NM(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var t,e,r,i,o,s;;){do i=this.randn.nextValue(),s=1+this.c*i;while(s<=0);if(s*=s*s,e=1-.331*(t=i*i)*t,r=.5*t+this.d*(1-s+Math.log(s)),(o=this.randu())<e||Math.log(o)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},n.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},n}(),Yue=function(){function n(t,e,r,i){var o=this;if(t===void 0&&(t=0),e===void 0&&(e=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=t,this.range=e-t,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+e+" <= 1 and dtype is not float");this.random=ax(i)}return n.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n}();function Mt(n,t,e){return t===void 0&&(t="float32"),t=t||"float32",PM(n),new c_(n,t,e)}function Zue(n,t){t===void 0&&(t=!1),console.log(n.toString(t))}var nz=te({batchToSpaceND_:function(n,t,e){var r=Y(n,"x","batchToSpaceND"),i=t.reduce(function(o,s){return o*s});return Q(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),Q(e.length===t.length,function(){return"crops.length is "+e.length+" but should be equal to blockShape.length  "+t.length}),Q(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i}),ne.runKernelFunc(function(o){return o.batchToSpaceND(r,t,e)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(t,e)}}})}}),Que=te({broadcastTo_:function(n,t){var e=Y(n,"broadcastTo","x"),r=e.shape;if(t.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<e.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+e.rank+".");if(t.length>e.rank){for(var i=e.shape.slice();i.length<t.length;)i.unshift(1);e=e.reshape(i)}for(var o=Array.from(t),s=t.length-1;s>=0;s--)if(e.shape[s]===t[s])o[s]=1;else if(e.shape[s]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var a=o.map(function(u,c){return u>1?c:-1}).filter(function(u){return u>=0});return a.length===0?e.clone():ne.runKernelFunc(function(u){return u.tile(e,o)},{input:e},function(u){return{input:function(){return u.sum(a,!0)}}})}}),Xue=te({cast_:function(n,t){var e=Y(n,"x","cast");if(!gj(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return ne.runKernelFunc(function(i){return i.cast(e,t)},{x:e},function(i){return{x:function(){return i.clone()}}},"Cast",r)}}),Jue=te({clone_:function(n){var t=Y(n,"x","clone",null);return ne.runKernelFunc(function(){return ne.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),ece=te({cumsum_:function(n,t,e,r){t===void 0&&(t=0),e===void 0&&(e=!1),r===void 0&&(r=!1);var i=Y(n,"x","cumsum"),o=Fa([t|=0],i.rank),s=i;o!=null&&(s=i.transpose(o));var a=La(1,i.rank)[0],u=ne.runKernelFunc(function(c){return c.cumsum(s,a,e,r)},{permutedX:s},function(c){return{permutedX:function(){return c.cumsum(t,e,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),tce=te({depthToSpace_:function(n,t,e){e===void 0&&(e="NHWC");var r=Y(n,"x","depthToSpace"),i=e==="NHWC"?r.shape[1]:r.shape[2],o=e==="NHWC"?r.shape[2]:r.shape[3],s=e==="NHWC"?r.shape[3]:r.shape[1];return Q(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),Q(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+` for depthToSpace with input shape
          `+r.shape}),Q(s%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+s+" for depthToSpace with input shape "+r.shape}),ne.runKernelFunc(function(a){return a.depthToSpace(r,t,e)},{$x:r})}}),qi=te({expandDims_:function(n,t){t===void 0&&(t=0);var e=Y(n,"x","expandDims",null);Q(t<=e.rank,function(){return"Axis must be <= rank of the tensor"});var r=e.shape.slice();return t<0&&(Q(-(e.rank+1)<=t,function(){return"Axis must be in the interval ["+-(e.rank+1)+", "+e.rank+"]"}),t=e.rank+t+1),r.splice(t,0,1),po(e,r)}}),rz=te({eye_:function(n,t,e,r){r===void 0&&(r="float32"),t==null&&(t=n);for(var i=Mt([n,t],r),o=n<=t?n:t,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(n,t);if(e==null)return a;if(e.length===1)return af(qi(a,0),[e[0],1,1]);if(e.length===2)return af(qi(qi(a,0),0),[e[0],e[1],1,1]);if(e.length===3)return af(qi(qi(qi(a,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+e.length+"D.")}}),nce=te({multinomial_:function(n,t,e,r){r===void 0&&(r=!1);var i=Y(n,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);e=e||Math.random();var a=s===1?i.as2D(1,-1):i,u=ne.runKernelFunc(function(c){return c.multinomial(a,r,t,e)},{logits2D:a});return s===1?u.as1D():u}}),vM=te({oneHot_:function(n,t,e,r){if(e===void 0&&(e=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=Y(n,"indices","oneHot","int32"),o=i.shape.concat([t]);return i=i.flatten(),ne.runKernelFunc(function(s){return s.oneHot(i,t,e,r)},{$indices:i},function(s){return{$indices:function(){return Gn(i.shape,"float32")}}}).reshape(o)}}),zc=te({pad_:function(n,t,e){e===void 0&&(e=0);var r=Y(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i={paddings:t,constantValue:e};return ne.runKernelFunc(function(o){return o.pad(r,t,e)},{x:r},function(o){var s=t.map(function(a){return a[0]});return{x:function(){return o.slice(s,r.shape)}}},"PadV2",i)}}),rce=te({pad1d_:function(n,t,e){return e===void 0&&(e=0),Q(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),zc(n,[t],e)}}),ice=te({pad2d_:function(n,t,e){return e===void 0&&(e=0),Q(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),zc(n,t,e)}}),oce=te({pad3d_:function(n,t,e){return e===void 0&&(e=0),Q(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),zc(n,t,e)}}),sce=te({pad4d_:function(n,t,e){return e===void 0&&(e=0),Q(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),zc(n,t,e)}}),ace=te({rand_:function(n,t,e){var r=ot(n),i=null;if(e==null||e==="float32")i=new Float32Array(r);else if(e==="int32")i=new Int32Array(r);else{if(e!=="bool")throw new Error("Unknown data type "+e);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t();return ne.makeTensor(i,n,e)}}),uce=te({randomNormal_:function(n,t,e,r,i){if(t===void 0&&(t=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new NM(t,e,r,!1,i),s=Mt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),cce=te({randomGamma_:function(n,t,e,r,i){if(e===void 0&&(e=1),r===void 0&&(r="float32"),e==null&&(e=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new Kue(t,e,r,i),s=Mt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),iz=te({randomUniform_:function(n,t,e,r,i){t===void 0&&(t=0),e===void 0&&(e=1),r===void 0&&(r="float32");for(var o=Mt(n,r),s=new Yue(t,e,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),po=te({reshape_:function(n,t){var e=Y(n,"x","reshape",null);t=pj(t,e.size),Q(e.size===ot(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return ne.runKernelFunc(function(i){return i.reshape(e,t)},{x:e},function(i){return{x:function(){return i.reshape(e.shape)}}},"Reshape",r)}}),oz=te({spaceToBatchND_:function(n,t,e){var r=Y(n,"x","spaceToBatchND");return Q(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),Q(e.length===t.length,function(){return"paddings.shape[0] "+e.length+" must be equal to [blockShape] "+t.length}),Q(r.shape.reduce(function(i,o,s){return s>0&&s<=t.length?i&&(o+e[s-1][0]+e[s-1][1])%t[s-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+e.toString()+" must be divisible by blockShapes "+t.toString()}),ne.runKernelFunc(function(i){return i.spaceToBatchND(r,t,e)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(t,e)}}})}}),sz=te({squeeze_:function(n,t){var e=Y(n,"x","squeeze");return po(e,rd(e.shape,t).newShape)}}),Ti=te({stack_:function(n,t){t===void 0&&(t=0);var e=K1(n,"tensors","stack");if(Q(e.length>=1,function(){return"Pass at least one tensor to tf.stack"}),e.length===1)return e[0].expandDims(t);var r=e[0].rank,i=e[0].shape,o=e[0].dtype;Q(t<=r,function(){return"Axis must be <= rank of the tensor"}),e.forEach(function(a){xn(i,a.shape,"All tensors passed to stack must have matching shapes")}),e.forEach(function(a){Q(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=e.map(function(a){return a.expandDims(t)});return Xn(s,t)}}),af=te({tile_:function(n,t){var e=Y(n,"x","tile",null);Q(e.rank===t.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of reps "+t+"."});var r=[e],i={reps:t};return ne.runKernelFunc(function(o,s){var a=o.tile(e,t);return s([e]),a},{x:e},function(o,s){var a=s[0];return{x:function(){var u=an(a);if(a.rank===1)for(var c=0;c<t[0];++c)u=u.add(o.slice([c*a.shape[0]],[a.shape[0]]));else if(a.rank===2)for(c=0;c<t[0];++c)for(var d=0;d<t[1];++d)u=u.add(o.slice([c*a.shape[0],d*a.shape[1]],[a.shape[0],a.shape[1]]));else if(a.rank===3)for(c=0;c<t[0];++c)for(d=0;d<t[1];++d)for(var h=0;h<t[2];++h)u=u.add(o.slice([c*a.shape[0],d*a.shape[1],h*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(a.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+a.rank+" tensors yet.");for(c=0;c<t[0];++c)for(d=0;d<t[1];++d)for(h=0;h<t[2];++h)for(var p=0;p<t[3];++p)u=u.add(o.slice([c*a.shape[0],d*a.shape[1],h*a.shape[2],p*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return u}}},"Tile",i,r)}}),lce=te({truncatedNormal_:function(n,t,e,r,i){if(t===void 0&&(t=0),e===void 0&&(e=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new NM(t,e,r,!0,i),s=Mt(n,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),Dn=te({unstack_:function(n,t){t===void 0&&(t=0),t=t||0;var e=Y(n,"x","unstack");Q(t>=-e.shape.length&&t<e.shape.length,function(){return"Axis = "+t+" is not in [-"+e.shape.length+", "+e.shape.length+")"}),t<0&&(t+=e.shape.length);var r={axis:t};return ne.runKernelFunc(function(i){return i.unstack(e,t)},{x:e},function(i){return{x:function(){return Ti(i,t)}}},"Unpack",r)}}),dce=function(n,t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,h;return nt(this,function(p){switch(p.label){case 0:return e=Y(n,"x","setdiff1d"),r=Y(t,"y","setdiff1d"),Q(e.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+e.dtype+") and y ("+r.dtype+")."}),Q(e.rank===1,function(){return"x should be 1D tensor, but got x ("+e.shape+")."}),Q(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,e.data()];case 1:return i=p.sent(),[4,r.data()];case 2:for(o=p.sent(),s=new Set(o),a=0,d=0;d<i.length;d++)s.has(i[d])||a++;for(u=new c_([a],e.dtype),c=new c_([a],"int32"),d=0,h=0;d<i.length;d++)s.has(i[d])||(u.values[h]=i[d],c.values[h]=d,h++);return[2,[u.toTensor(),c.toTensor()]]}})})};function Z1(n,t,e,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(n[0]/e),i=i.concat(n.slice(1));else{i=i.concat(n[0]);for(var o=t.length,s=0;s<o;++s)i=i.concat([n[s+1]/t[s],t[s]]);i=i.concat(n.slice(o+1))}return i}function Q1(n,t,e){e===void 0&&(e=!0);var r=[];if(e){r.push(t);for(var i=t+1;i<n;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<n;++i)i>=2*t+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function X1(n,t,e,r){r===void 0&&(r=!0);var i=[];r?i.push(n[0]/e):i.push(n[0]*e);for(var o=1;o<n.length;++o)o<=t.length?r?i.push(t[o-1]*n[o]):i.push(n[o]/t[o-1]):i.push(n[o]);return i}function az(n,t){for(var e=[0],r=0;r<t;++r)e.push(n[r][0]);return e}function uz(n,t,e){for(var r=n.slice(0,1),i=0;i<e;++i)r.push(n[i+1]-t[i][0]-t[i][1]);return r}function FM(n,t){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var e=t.shape,r=e[e.length-1],i=1,o=0;o<e.length-1;++o)i*=e[o];var s=n.shape,a=e.slice();a.pop();var u=1;for(o=r;o<n.rank;++o)u*=s[o],a.push(s[o]);var c=Oa(n.shape).map(function(d){return d/u}).concat([1]).slice(0,r);return[a,i,u,c]}var xDe=Object.freeze({prepareAndValidate:FM}),LM=30;function U1(n){return n<=LM?n:q1(n,Math.floor(Math.sqrt(n)))}function cz(n,t,e){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+e.shape+", indices.shape: "+t.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+i+".";if(e.rank<i)throw new Error(o+" update.rank < "+i+". ");if(n.length<r+(e.rank-i))throw new Error(o+" Output shape length < "+(r+(e.rank-i)));if(e.rank!==i+n.length-r)throw new Error(o+" update.rank != "+(i+n.length-r));for(var s=0;s<i;++s)if(e.shape[s]!==t.shape[s])throw new Error(o+" updates.shape["+s+"] ("+e.shape[s]+") != indices.shape["+s+"] ("+t.shape[s]+").");for(s=0;s<e.rank-i;++s)if(e.shape[s+i]!==n[s+r])throw new Error(o+" updates.shape["+(s+i)+"] ("+e.shape[s+i]+") != shape["+(s+i)+"] ("+n[s+i]+")")}function lz(n,t,e){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(e.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+e);if(e.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}cz(e,t,n)}function f_(n,t,e){for(var r=t.shape.length,i=r>1?t.shape[r-1]:1,o=e.length,s=1,a=i;a<o;++a)s*=e[a];var u=i<1?1:i;return{sliceRank:i,numUpdates:ot(t.shape)/u,sliceSize:s,strides:Oa(e.slice(0,i)).concat([1]),outputSize:ot(e)}}var EDe=Object.freeze({validateUpdateShape:cz,validateInput:lz,calculateShapes:f_});function dz(n,t,e){Q(n.rank===t.length,function(){return"Error in slice"+n.rank+"D: Length of begin "+t+" must match the rank of the array ("+n.rank+")."}),Q(n.rank===e.length,function(){return"Error in slice"+n.rank+"D: Length of size "+e+" must match the rank of the array ("+n.rank+")."});for(var r=function(o){Q(t[o]+e[o]<=n.shape[o],function(){return"Error in slice"+n.rank+"D: begin["+o+"] + size["+o+"] ("+(t[o]+e[o])+") would overflow input.shape["+o+"] ("+n.shape[o]+")"})},i=0;i<n.rank;++i)r(i)}function _M(n){for(var t=[],e=0;n>0;)1&n&&t.push(e),n/=2,e++;return t}function ux(n,t,e){for(var r=[],i=0;i<n.length;i++)r[i]=Math.ceil((t[i]-n[i])/e[i]);return r}function hz(n,t,e,r,i){var o=t[i],s=e[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=W1(0,o,a-1)}function fz(n,t,e,r,i){var o=t[i],s=e[i]||1;(n&1<<i||o==null)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=s>0?W1(0,o,a):W1(-1,o,a-1)}function VM(n,t,e){for(var r=e.length,i=0;i<e.length;i++)if(e[i]>1){r=i;break}for(i=r+1;i<e.length;i++)if(t[i]>0||e[i]!==n[i])return!1;return!0}function BM(n,t){for(var e=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)e+=n[r]*t[r];return e}var IDe=Object.freeze({assertParamsValid:dz,maskToAxes:_M,computeOutShape:ux,startForAxis:hz,stopForAxis:fz,isSliceContinous:VM,computeFlatOffset:BM});function hce(n,t){Q($1(n),function(){return"The f passed in variableGrads(f) must be a function"}),Q(t==null||Array.isArray(t)&&t.every(function(d){return d instanceof uf}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var e=t!=null;if(!e)for(var r in t=[],ne.registeredVariables)t.push(ne.registeredVariables[r]);var i=e?t.filter(function(d){return!d.trainable}):null,o=t.length;Q((t=t.filter(function(d){return d.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=ne.gradients(n,t,null,!0),a=s.value,u=s.grads;Q(u.some(function(d){return d!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),Q(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var c={};return t.forEach(function(d,h){u[h]!=null&&(c[d.name]=u[h])}),i?.forEach(function(d){return c[d.name]=null}),{value:a,grads:c}}function cx(n){return ne.customGrad(n)}var mo=te({softmax_:function(n,t){t===void 0&&(t=-1);var e=Y(n,"logits","softmax","float32");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and dim was "+t);return ne.runKernelFunc(function(r,i){var o=r.softmax(e,t);return i([o]),o},{logits:e},function(r,i){var o=i[0],s=r.mul(o);return{logits:function(){return s.sub(s.sum([t],!0).mul(o))}}},"Softmax",{dim:t},[],[!0])}}),fce=te({logSoftmax_:function(n,t){t===void 0&&(t=-1);var e=Y(n,"logits","logSoftmax");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+e.rank+" and axis was "+t);return cx(function(r,i){var o=r.max(t,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(t,!0).log());return i([a]),{value:a,gradFunc:function(u,c){var d=c[0].exp();return u.sub(u.sum(t,!0).mul(d))}}})(e)}}),pz=function(){function n(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},n.prototype.set=function(t,e){this.dataIdsCount++,this.data.set(t,e)},n.prototype.has=function(t){return this.data.has(t)},n.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},n.prototype.numDataIds=function(){return this.dataIdsCount},n}(),mz=function(){function n(){}return n.prototype.time=function(t){return he("time")},n.prototype.read=function(t){return he("read")},n.prototype.readSync=function(t){return he("readSync")},n.prototype.numDataIds=function(){return he("numDataIds")},n.prototype.disposeData=function(t){return he("disposeData")},n.prototype.write=function(t,e,r){return he("write")},n.prototype.move=function(t,e,r,i){return he("move")},n.prototype.memory=function(){return he("memory")},n.prototype.floatPrecision=function(){return he("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(t,e,r,i){return he("batchMatMul")},n.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,he("fusedBatchMatMul")},n.prototype.slice=function(t,e,r){return he("slice")},n.prototype.stridedSlice=function(t,e,r,i){return he("stridedSlice")},n.prototype.unstack=function(t,e){return he("unstack")},n.prototype.reverse=function(t,e){return he("reverse")},n.prototype.concat=function(t,e){return he("concat")},n.prototype.neg=function(t){return he("neg")},n.prototype.add=function(t,e){return he("add")},n.prototype.addN=function(t){return he("addN")},n.prototype.subtract=function(t,e){return he("subtract")},n.prototype.multiply=function(t,e){return he("multiply")},n.prototype.realDivide=function(t,e){return he("realDivide")},n.prototype.floorDiv=function(t,e){return he("floorDiv")},n.prototype.sum=function(t,e){return he("sum")},n.prototype.prod=function(t,e){return he("prod")},n.prototype.unsortedSegmentSum=function(t,e,r){return he("unsortedSegmentSum")},n.prototype.argMin=function(t,e){return he("argMin")},n.prototype.argMax=function(t,e){return he("argMax")},n.prototype.equal=function(t,e){return he("equal")},n.prototype.notEqual=function(t,e){return he("notEqual")},n.prototype.less=function(t,e){return he("less")},n.prototype.lessEqual=function(t,e){return he("lessEqual")},n.prototype.greater=function(t,e){return he("greater")},n.prototype.greaterEqual=function(t,e){return he("greaterEqual")},n.prototype.logicalNot=function(t){return he("logicalNot")},n.prototype.logicalAnd=function(t,e){return he("logicalAnd")},n.prototype.logicalOr=function(t,e){return he("logicalOr")},n.prototype.where=function(t){return he("where")},n.prototype.select=function(t,e,r){return he("select")},n.prototype.topk=function(t,e,r){return he("topk")},n.prototype.min=function(t,e){return he("min")},n.prototype.minimum=function(t,e){return he("minimum")},n.prototype.mod=function(t,e){return he("mod")},n.prototype.max=function(t,e){return he("max")},n.prototype.maximum=function(t,e){return he("maximum")},n.prototype.all=function(t,e){return he("all")},n.prototype.any=function(t,e){return he("any")},n.prototype.squaredDifference=function(t,e){return he("squaredDifference")},n.prototype.ceil=function(t){return he("ceil")},n.prototype.floor=function(t){return he("floor")},n.prototype.round=function(t){return he("round")},n.prototype.sign=function(t){return he("sign")},n.prototype.isNaN=function(t){return he("isNaN")},n.prototype.isInf=function(t){return he("isInf")},n.prototype.isFinite=function(t){return he("isFinite")},n.prototype.pow=function(t,e){return he("pow")},n.prototype.exp=function(t){return he("exp")},n.prototype.expm1=function(t){return he("expm1")},n.prototype.softmax=function(t,e){return he("softmax")},n.prototype.log=function(t){return he("log")},n.prototype.log1p=function(t){return he("log1p")},n.prototype.sqrt=function(t){return he("sqrt")},n.prototype.rsqrt=function(t){return he("rsqrt")},n.prototype.square=function(t){return he("square")},n.prototype.reciprocal=function(t){return he("reciprocal")},n.prototype.relu=function(t){return he("relu")},n.prototype.relu6=function(t){return he("relu6")},n.prototype.prelu=function(t,e){return he("prelu")},n.prototype.elu=function(t){return he("elu")},n.prototype.eluDer=function(t,e){return he("eluDer")},n.prototype.selu=function(t){return he("selu")},n.prototype.int=function(t){return he("int")},n.prototype.clip=function(t,e,r){return he("clip")},n.prototype.abs=function(t){return he("abs")},n.prototype.complexAbs=function(t){return he("complexAbs")},n.prototype.sigmoid=function(t){return he("sigmoid")},n.prototype.softplus=function(t){return he("softplus")},n.prototype.sin=function(t){return he("sin")},n.prototype.cos=function(t){return he("cos")},n.prototype.tan=function(t){return he("tan")},n.prototype.asin=function(t){return he("asin")},n.prototype.acos=function(t){return he("acos")},n.prototype.atan=function(t){return he("atan")},n.prototype.atan2=function(t,e){return he("atan2")},n.prototype.sinh=function(t){return he("sinh")},n.prototype.cosh=function(t){return he("cosh")},n.prototype.tanh=function(t){return he("tanh")},n.prototype.asinh=function(t){return he("asinh")},n.prototype.acosh=function(t){return he("acosh")},n.prototype.atanh=function(t){return he("atanh")},n.prototype.erf=function(t){return he("erf")},n.prototype.step=function(t,e){return he("step")},n.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,he("fusedConv2d")},n.prototype.conv2d=function(t,e,r){return he("conv2d")},n.prototype.conv2dDerInput=function(t,e,r){return he("conv2dDerInput")},n.prototype.conv2dDerFilter=function(t,e,r){return he("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,he("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(t,e,r){return he("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(t,e,r){return he("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(t,e,r){return he("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(t,e,r){return he("conv3d")},n.prototype.conv3dDerInput=function(t,e,r){return he("conv3dDerInput")},n.prototype.conv3dDerFilter=function(t,e,r){return he("conv3dDerFilter")},n.prototype.maxPool=function(t,e){return he("maxPool")},n.prototype.maxPoolBackprop=function(t,e,r,i){return he("maxPoolBackprop")},n.prototype.avgPool=function(t,e){return he("avgPool")},n.prototype.avgPoolBackprop=function(t,e,r){return he("avgPoolBackprop")},n.prototype.avgPool3d=function(t,e){return he("avgPool3d")},n.prototype.avgPool3dBackprop=function(t,e,r){return he("avgPool3dBackprop")},n.prototype.maxPool3d=function(t,e){return he("maxPool3d")},n.prototype.maxPool3dBackprop=function(t,e,r,i){return he("maxPool3dBackprop")},n.prototype.reshape=function(t,e){return he("reshape")},n.prototype.cast=function(t,e){return he("cast")},n.prototype.tile=function(t,e){return he("tile")},n.prototype.pad=function(t,e,r){return he("pad")},n.prototype.transpose=function(t,e){return he("transpose")},n.prototype.gather=function(t,e,r){return he("gather")},n.prototype.gatherND=function(t,e){return he("gatherND")},n.prototype.scatterND=function(t,e,r){return he("scatterND")},n.prototype.batchToSpaceND=function(t,e,r){return he("batchToSpaceND")},n.prototype.spaceToBatchND=function(t,e,r){return he("spaceToBatchND")},n.prototype.resizeBilinear=function(t,e,r,i){return he("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(t,e,r){return he("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(t,e,r,i){return he("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(t,e,r){return he("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(t,e,r,i,o,s){return he("batchNormalization")},n.prototype.localResponseNormalization4D=function(t,e,r,i,o){return he("localResponseNormalization4D")},n.prototype.LRNGrad=function(t,e,r,i,o,s,a){return he("LRNGrad")},n.prototype.multinomial=function(t,e,r,i){return he("multinomial")},n.prototype.oneHot=function(t,e,r,i){return he("oneHot")},n.prototype.cumsum=function(t,e,r,i){return he("cumsum")},n.prototype.nonMaxSuppression=function(t,e,r,i,o){return he("nonMaxSuppression")},n.prototype.fft=function(t){return he("fft")},n.prototype.ifft=function(t){return he("ifft")},n.prototype.complex=function(t,e){return he("complex")},n.prototype.real=function(t){return he("real")},n.prototype.imag=function(t){return he("imag")},n.prototype.cropAndResize=function(t,e,r,i,o,s){return he("cropAndResize")},n.prototype.depthToSpace=function(t,e,r){return he("depthToSpace")},n.prototype.split=function(t,e,r){return he("split")},n.prototype.sparseToDense=function(t,e,r,i){return he("sparseToDense")},n.prototype.diag=function(t){return he("diag")},n.prototype.fill=function(t,e,r){return he("fill")},n.prototype.onesLike=function(t){return he("onesLike")},n.prototype.zerosLike=function(t){return he("zerosLike")},n.prototype.linspace=function(t,e,r){return he("linspace")},n.prototype.dispose=function(){return he("dispose")},n}();function he(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Bc(n,t){for(var e=n.length,r=[],i=0;i<e;i++){var o=e-1-i,s=n[o]||1;(t[t.length-1-i]||1)>1&&s===1&&r.unshift(o)}return r}function jr(n,t){for(var e=[],r=0;r<t.length;r++){var i=n[n.length-r-1],o=t.length-r-1,s=t[o];(i==null||i===1&&s>1)&&e.unshift(o)}return e}function Xt(n,t){for(var e=[],r=Math.max(n.length,t.length),i=0;i<r;i++){var o=n[n.length-i-1];o==null&&(o=1);var s=t[t.length-i-1];if(s==null&&(s=1),o===1)e.unshift(s);else if(s===1)e.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+n+" and "+t+".");e.unshift(o)}}return e}function qm(n,t,e,r,i,o,s){s===void 0&&(s="channelsLast");var a,u=J1(t),c=u[0],d=u[1];if(s==="channelsLast")a=[c,d,n[3],n[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);a=[c,d,n[1],n[1]]}return ud(n,a,e,r,i,o,!1,s)}function p_(n,t,e,r,i,o,s){s===void 0&&(s="NDHWC");var a,u,c=yM(t),d=c[0],h=c[1],p=c[2];if(s==="NDHWC")u="channelsLast",a=[d,h,p,n[4],n[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);u="channelsFirst",a=[d,h,p,n[1],n[1]]}return m_(n,a,e,r,i,!1,u,o)}function ud(n,t,e,r,i,o,s,a){s===void 0&&(s=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1],c=u[0],d=u[1],h=u[2],p=u[3];if(a==="channelsLast")c=n[0],d=n[1],h=n[2],p=n[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);c=n[0],p=n[1],d=n[2],h=n[3]}var m,_=t[0],C=t[1],x=t[3],S=J1(e),N=S[0],F=S[1],R=J1(r),j=R[0],H=R[1],B=jm(_,j),k=jm(C,H),D=function(ae,de,X,re,J,ie,le,Ee){var ye,we,Ce;if(typeof ae=="number"){ye={top:ae,bottom:ae,left:ae,right:ae,type:ae===0?"VALID":"NUMBER"};var ze=function(Ge,Qe,at,ft,At){ft==null&&(ft=UM(Ge,Qe,at));var cn=Ge[0],Tn=Ge[1],Mr=s_((cn-Qe+2*ft)/at+1,At);Q(cr(Mr),function(){return"The output # of rows ("+Mr+") must be an integer. Change the stride and/or zero pad parameters"});var tr=s_((Tn-Qe+2*ft)/at+1,At);return Q(cr(tr),function(){return"The output # of columns ("+tr+") must be an integer. Change the stride and/or zero pad parameters"}),[Mr,tr]}([de,X],ie,re,ae,Ee);we=ze[0],Ce=ze[1]}else if(ae==="same"){we=Math.ceil(de/re),Ce=Math.ceil(X/J);var Ye=Math.max(0,(we-1)*re+ie-de),He=Math.max(0,(Ce-1)*J+le-X),it=Math.floor(Ye/2),Je=Ye-it,vt=Math.floor(He/2);ye={top:it,bottom:Je,left:vt,right:He-vt,type:"SAME"}}else{if(ae!=="valid")throw Error("Unknown padding parameter: "+ae);ye={top:0,bottom:0,left:0,right:0,type:"VALID"},we=Math.ceil((de-ie+1)/re),Ce=Math.ceil((X-le+1)/J)}return{padInfo:ye,outHeight:we,outWidth:Ce}}(i,d,h,N,F,B,k,o),P=D.padInfo,z=D.outHeight,U=D.outWidth,$=s?x*p:x;return a==="channelsFirst"?m=[c,$,z,U]:a==="channelsLast"&&(m=[c,z,U,$]),{batchSize:c,dataFormat:a,inHeight:d,inWidth:h,inChannels:p,outHeight:z,outWidth:U,outChannels:$,padInfo:P,strideHeight:N,strideWidth:F,filterHeight:_,filterWidth:C,effectiveFilterHeight:B,effectiveFilterWidth:k,dilationHeight:j,dilationWidth:H,inShape:n,outShape:m,filterShape:t}}function m_(n,t,e,r,i,o,s,a){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],d=u[1],h=u[2],p=u[3],m=u[4];if(s==="channelsLast")c=n[0],d=n[1],h=n[2],p=n[3],m=n[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=n[0],m=n[1],d=n[2],h=n[3],p=n[4]}var _,C=t[0],x=t[1],S=t[2],N=t[4],F=yM(e),R=F[0],j=F[1],H=F[2],B=yM(r),k=B[0],D=B[1],P=B[2],z=jm(C,k),U=jm(x,D),$=jm(S,P),ae=function(le,Ee,ye,we,Ce,ze,Ye,He,it,Je,vt){var Ge,Qe,at,ft;if(typeof le=="number"){Ge={top:le,bottom:le,left:le,right:le,front:le,back:le,type:le===0?"VALID":"NUMBER"};var At=function(hr,rn,Ln,An,hn,pi){hn==null&&(hn=UM(hr,rn,An));var Cr=hr[0],zu=hr[1],Ha=hr[2],Ji=s_((Cr-rn+2*hn)/An+1,pi);Q(cr(Ji),function(){return"The output # of depths ("+Ji+") must be an integer. Change the stride and/or zero pad parameters"});var bs=s_((zu-rn+2*hn)/An+1,pi);Q(cr(bs),function(){return"The output # of rows ("+bs+") must be an integer. Change the stride and/or zero pad parameters"});var _o=s_((Ha-rn+2*hn)/An+1,pi);return Q(cr(_o),function(){return"The output # of columns ("+_o+") must be an integer. Change the stride and/or zero pad parameters"}),[Ji,bs,_o,Ln]}([Ee,ye,we,1],He,1,Ce,le,vt);Qe=At[0],at=At[1],ft=At[2]}else if(le==="same"){Qe=Math.ceil(Ee/Ce),at=Math.ceil(ye/ze),ft=Math.ceil(we/Ye);var cn=(Qe-1)*Ce+He-Ee,Tn=(at-1)*ze+it-ye,Mr=(ft-1)*Ye+Je-we,tr=Math.floor(cn/2),Xi=cn-tr,yt=Math.floor(Tn/2),zn=Tn-yt,dr=Math.floor(Mr/2);Ge={top:yt,bottom:zn,left:dr,right:Mr-dr,front:tr,back:Xi,type:"SAME"}}else{if(le!=="valid")throw Error("Unknown padding parameter: "+le);Ge={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Qe=Math.ceil((Ee-He+1)/Ce),at=Math.ceil((ye-it+1)/ze),ft=Math.ceil((we-Je+1)/Ye)}return{padInfo:Ge,outDepth:Qe,outHeight:at,outWidth:ft}}(i,d,h,p,R,j,H,z,U,$,a),de=ae.padInfo,X=ae.outDepth,re=ae.outHeight,J=ae.outWidth,ie=o?N*m:N;return s==="channelsFirst"?_=[c,ie,X,re,J]:s==="channelsLast"&&(_=[c,X,re,J,ie]),{batchSize:c,dataFormat:s,inDepth:d,inHeight:h,inWidth:p,inChannels:m,outDepth:X,outHeight:re,outWidth:J,outChannels:ie,padInfo:de,strideDepth:R,strideHeight:j,strideWidth:H,filterDepth:C,filterHeight:x,filterWidth:S,effectiveFilterDepth:z,effectiveFilterHeight:U,effectiveFilterWidth:$,dilationDepth:k,dilationHeight:D,dilationWidth:P,inShape:n,outShape:_,filterShape:t}}function UM(n,t,e,r){r===void 0&&(r=1);var i=jm(t,r);return Math.floor((n[0]*(e-1)-e+i)/2)}function J1(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function yM(n){return typeof n=="number"?[n,n,n]:n}function jm(n,t){return t<=1?n:n+(n-1)*(t-1)}function s_(n,t){if(!t)return n;switch(t){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+t)}}function lf(n){var t=J1(n),e=t[0],r=t[1],i=t[2];return e===1&&r===1&&i===1}function fo(n,t){return lf(n)||lf(t)}function lx(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function jM(n,t,e){if(t==="complex64"){if(n.dtype==="complex64")return n.clone();var r=Gn(n.shape),i=n.toFloat(),o=e.complex(i,r);return r.dispose(),i.dispose(),o}if(!vj(n.dtype,t))return ne.makeTensorFromDataId(n.dataId,n.shape,t);if(n.dtype==="complex64"){var s=e.real(n);return o=s.cast(t),s.dispose(),o}if(t==="int32")return e.int(n);if(t==="bool"){var a=Ue(0,n.dtype);return o=e.notEqual(n,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+t)}function ex(n,t){return ne.makeTensorFromDataId(n.dataId,t,n.dtype)}function zM(n,t,e){var r=(t-n)/(e-1),i=Km(e,"float32");i[0]=n;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return jn(i,"float32")}var SDe=Object.freeze({castTensor:jM,reshapeTensor:ex,linspaceImpl:zM,upcastType:ui,axesAreInnerMostDims:OM,combineLocations:Jj,computeOutAndReduceShapes:Ii,expandShapeToKeepDim:ho,assertAxesAreInnerMostDims:Fo,getAxesPermutation:Fa,getUndoAxesPermutation:ox,getInnerMostAxes:La,getBroadcastDims:Bc,getReductionAxes:jr,assertAndGetBroadcastShape:Xt,assertParamsConsistent:ez,computeOutShape:cf,computePool2DInfo:qm,computePool3DInfo:p_,computeConv2DInfo:ud,computeConv3DInfo:m_,computeDefaultPad:UM,tupleValuesAreOne:lf,eitherStridesOrDilationsAreOne:fo,convertConv2DDataFormat:lx,PARALLELIZE_THRESHOLD:LM,computeOptimalWindowSize:U1});function bM(n,t){if(n.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+t.length+".");for(var e=new Float32Array(2*n.length),r=0;r<e.length;r+=2)e[r]=n[r/2],e[r+1]=t[r/2];return e}function PU(n,t){return{real:n[2*t],imag:n[2*t+1]}}function pce(n,t,e,r){n[2*r]=t,n[2*r+1]=e}function mce(n,t,e){var r=(e?2:-2)*Math.PI*(n/t);return{real:Math.cos(r),imag:Math.sin(r)}}function gce(n,t,e){var r=function(o,s,a){return function(u,c,d){for(var h=0,p=u.length,m=0,_=!1;h<p;){var C=d(c,u[m=h+(p-h>>>1)]);C>0?h=m+1:(p=m,_=!C)}return _?h:-h-1}(o,s,a||vce)}(n,t,e),i=r<0?-(r+1):r;n.splice(i,0,t)}function vce(n,t){return n>t?1:n<t?-1:0}function WM(n,t,e,r,i){return gz(n,t,e,r,i,0).selectedIndices}function HM(n,t,e,r,i,o){var s=gz(n,t,e,r,i,o,!0);return s.numValidOutputs.dispose(),{selectedIndices:s.selectedIndices,selectedScores:s.selectedScores}}function gz(n,t,e,r,i,o,s,a){s===void 0&&(s=!1),a===void 0&&(a=!1);for(var u=Array.from(t).map(function(R,j){return{score:R,boxIndex:j,suppressBeginIndex:0}}).filter(function(R){return R.score>i}).sort(MU),c=o>0?-.5/o:0,d=[],h=[];d.length<e&&u.length>0;){var p=u.pop(),m=p.score,_=p.boxIndex,C=p.suppressBeginIndex;if(m<i)break;for(var x=!1,S=d.length-1;S>=C;--S){var N=_ce(n,_,d[S]);if(N>=r){x=!0;break}if(p.score=p.score*yce(r,c,N),p.score<=i)break}p.suppressBeginIndex=d.length,x||(p.score===m?(d.push(_),h.push(p.score)):p.score>i&&gce(u,p,MU))}var F=d.length;return a&&(d.fill(0,F),h.fill(0,F)),{selectedIndices:jn(d,"int32"),selectedScores:jn(h,"float32"),numValidOutputs:Ue(F,"int32")}}function _ce(n,t,e){var r=n.subarray(4*t,4*t+4),i=n.subarray(4*e,4*e+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(i[0],i[2]),d=Math.min(i[1],i[3]),h=Math.max(i[0],i[2]),p=Math.max(i[1],i[3]),m=(a-o)*(u-s),_=(h-c)*(p-d);if(m<=0||_<=0)return 0;var C=Math.max(o,c),x=Math.max(s,d),S=Math.min(a,h),N=Math.min(u,p),F=Math.max(S-C,0)*Math.max(N-x,0);return F/(m+_-F)}function yce(n,t,e){var r=Math.exp(t*e*e);return e<=n?r:0}function MU(n,t){return n.score-t.score||n.score===t.score&&t.boxIndex-n.boxIndex}function vz(n,t,e){var r=new Array(n.rank).fill(0),i=n.shape.slice();return t.map(function(o){i[e]=o;var s=n.slice(r,i);return r[e]+=o,s})}function _z(n,t){for(var e=new Array(n.rank),r=0;r<e.length;r++)e[r]=n.shape[r]*t[r];var i=Mt(e,n.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(n.rank),a=0;a<s.length;a++)s[a]=o[a]%n.shape[a];var u=n.locToIndex(s);i.values[r]=n.values[u]}return i.toTensor()}function yz(n,t,e,r,i){for(var o=t[t.length-1],s=[n.length/o,o],a=s[0],u=s[1],c=$m(e,a*r),d=$m("int32",a*r),h=0;h<a;h++){for(var p=h*u,m=n.subarray(p,p+u),_=[],C=0;C<m.length;C++)_.push({value:m[C],index:C});_.sort(function(R,j){return j.value-R.value});var x=h*r,S=c.subarray(x,x+r),N=d.subarray(x,x+r);for(C=0;C<r;C++)S[C]=_[C].value,N[C]=_[C].index}var F=t.slice();return F[F.length-1]=r,[ci(c,F,e),ci(d,F,"int32")]}function $M(n,t){for(var e=[],r=0;r<t.length;r++)t[r]&&e.push(r);var i=Mt(n,"int32"),o=Mt([e.length,n.length],"int32");for(r=0;r<e.length;r++){var s=i.indexToLoc(e[r]),a=r*n.length;o.values.set(s,a)}return o.toTensor()}var bce=function(n,t){this.outputShape=[],this.outputShape=n,this.variableNames=t.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},wce=function(n,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=t.map(function(i,o){return"T"+o});var e=[];this.variableNames.forEach(function(i){e.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode=`
      void main() {
        `+e.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},Cce=function(n,t,e){this.variableNames=["A"];var r=n.windowSize,i=n.batchSize,o=n.inSize,s=Math.ceil(o/r);e||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];var a=t==="max"?">":"<",u=e?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+a+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function bz(n,t){return["x","y","z","w","u","v"].slice(0,t).map(function(e){return n+"."+e})}function Lo(n,t){return t===1?[n]:bz(n,t)}function Gi(){var n,t,e,r,i,o,s,a,u,c;return _e().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",t="in",e="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",t="attribute",e="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:t,varyingVs:e,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:c}}function rf(n,t,e){e===void 0&&(e="index");var r=Oa(t);return r.map(function(i,o){return"int "+n[o]+" = "+e+" / "+i+"; "+(o===r.length-1?"int "+n[o+1]+" = "+e+" - "+n[o]+" * "+i:"index -= "+n[o]+" * "+i)+";"}).join("")}function qM(n){var t=Oa(n).map(function(e){return e.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var wz=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function xce(n,t,e,r){var i=[];n.forEach(function(m){var _=ot(m.shapeInfo.logicalShape);m.shapeInfo.isUniform?i.push("uniform float "+m.name+(_>1?"["+_+"]":"")+";"):(i.push("uniform sampler2D "+m.name+";"),i.push("uniform int offset"+m.name+";"))});var o,s,a=i.join(`
`),u=n.map(function(m){return function(_,C,x){x===void 0&&(x=!1);var S="";S+=x?Cz(_):Lm(_);var N=_.shapeInfo.logicalShape,F=C.logicalShape;return N.length<=F.length&&(S+=x?function(R,j){var H,B=R.name,k=B.charAt(0).toUpperCase()+B.slice(1),D="get"+k+"AtOutCoords",P=R.shapeInfo.logicalShape.length,z=j.logicalShape.length,U=Bc(R.shapeInfo.logicalShape,j.logicalShape),$=Kn(z),ae=z-P,de=["x","y","z","w","u","v"];H=P===0?"":z<2&&U.length>=1?"coords = 0;":U.map(function(ye){return"coords."+de[ye+ae]+" = 0;"}).join(`
`);var X="";X=z<2&&P>0?"coords":R.shapeInfo.logicalShape.map(function(ye,we){return"coords."+de[we+ae]}).join(", ");var re="return outputValue;",J=ot(R.shapeInfo.logicalShape)===1,ie=ot(j.logicalShape)===1;if(P!==1||J||ie){if(J&&!ie)re=z===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(U.length){var le=P-2,Ee=P-1;U.indexOf(le)>-1&&U.indexOf(Ee)>-1?re="return vec4(outputValue.x);":U.indexOf(le)>-1?re="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":U.indexOf(Ee)>-1&&(re="return vec4(outputValue.xx, outputValue.zz);")}}else re=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+D+`() {
      `+$+` coords = getOutputCoords();
      `+H+`
      vec4 outputValue = get`+k+"("+X+`);
      `+re+`
    }
  `}(_,C):function(R,j){var H=R.name,B=H.charAt(0).toUpperCase()+H.slice(1),k="get"+B+"AtOutCoords",D=j.texShape,P=R.shapeInfo.texShape,z=R.shapeInfo.logicalShape.length,U=j.logicalShape.length;if(!R.shapeInfo.isUniform&&z===U&&R.shapeInfo.flatOffset==null&&Ur(P,D))return`
      float `+k+`() {
        return sampleTexture(`+H+`, resultUV);
      }
    `;var $,ae=Kn(U),de=Bc(R.shapeInfo.logicalShape,j.logicalShape),X=U-z,re=["x","y","z","w","u","v"];$=z===0?"":U<2&&de.length>=1?"coords = 0;":de.map(function(ie){return"coords."+re[ie+X]+" = 0;"}).join(`
`);var J="";return J=U<2&&z>0?"coords":R.shapeInfo.logicalShape.map(function(ie,le){return"coords."+re[le+X]}).join(", "),`
    float `+k+`() {
      `+ae+` coords = getOutputCoords();
      `+$+`
      return get`+B+"("+J+`);
    }
  `}(_,C)),S}(m,t,r)}).join(`
`),c=t.texShape,d=Gi(),h=function(m){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+m.texture2D+`(textureSampler, uv).r;
    }
  `}(d),p=function(m){return m.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+m.varyingFs+` vec2 resultUV;
    `+m.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+m.defineSpecialNaN+`
    `+m.defineSpecialInf+`
    `+m.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+Ece+`
    `+Ice+`
    `+Sce+`
  `}(d);return t.isPacked?(o=function(m,_){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(R,j){var H=[Math.ceil(j[0]/2),Math.ceil(j[1]/2)];return H[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+H[1]+`.0);
      }
    `:H[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+H[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+H[0]+", "+H[1]+`));
      return 2 * (resTexRC.x * `+H[1]+` + resTexRC.y);
    }
  `}(0,_);case 2:return function(R,j){var H=[Math.ceil(j[0]/2),Math.ceil(j[1]/2)];if(Ur(R,j))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+H[0]+", "+H[1]+`));
      }
    `;var B=Math.ceil(R[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+H[0]+", "+H[1]+`));

      int index = resTexRC.x * `+H[1]+` + resTexRC.y;
      int r = 2 * (index / `+B+`);
      int c = imod(index, `+B+`) * 2;

      return ivec2(r, c);
    }
  `}(m,_);case 3:return C=m,x=_,S=[Math.ceil(x[0]/2),Math.ceil(x[1]/2)],N=Math.ceil(C[2]/2),F=N*Math.ceil(C[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      int b = index / `+F+`;
      index -= b * `+F+`;

      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(R,j){for(var H=[Math.ceil(j[0]/2),Math.ceil(j[1]/2)],B=Math.ceil(R[R.length-1]/2),k=B*Math.ceil(R[R.length-2]/2),D=k,P="",z="b, r, c",U=2;U<R.length-1;U++)D*=R[R.length-U-1],P=`
      int b`+U+" = index / "+D+`;
      index -= b`+U+" * "+D+`;
    `+P,z="b"+U+", "+z;return`
    ivec`+R.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+H[0]+", "+H[1]+`));
      int index = resTexRC.x * `+H[1]+` + resTexRC.y;

      `+P+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+B+`);
      int c = imod(index, `+B+`) * 2;

      return ivec`+R.length+"("+z+`);
    }
  `}(m,_)}var C,x,S,N,F}(t.logicalShape,c),s=function(m){return`
    void setOutput(vec4 val) {
      `+m.output+` = val;
    }
  `}(d)):(o=function(m,_){switch(m.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(S,N){return N[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+N[1]+`.0);
      }
    `:N[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+N[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+N[0]+", "+N[1]+`));
      return resTexRC.x * `+N[1]+` + resTexRC.y;
    }
  `}(0,_);case 2:return function(S,N){return Ur(S,N)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+N[0]+", "+N[1]+`));
      }
    `:S[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+N[0]+", "+N[1]+`));
        int index = resTexRC.x * `+N[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:S[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+N[0]+", "+N[1]+`));
        int index = resTexRC.x * `+N[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+N[0]+", "+N[1]+`));
      int index = resTexRC.x * `+N[1]+` + resTexRC.y;
      int r = index / `+S[1]+`;
      int c = index - r * `+S[1]+`;
      return ivec2(r, c);
    }
  `}(m,_);case 3:return C=_,x=rf(["r","c","d"],m),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      `+x+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(S,N){var F=rf(["r","c","d","d2"],S);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+N[0]+", "+N[1]+`));
      int index = resTexRC.x * `+N[1]+` + resTexRC.y;
      `+F+`
      return ivec4(r, c, d, d2);
    }
  `}(m,_);case 5:return function(S,N){var F=rf(["r","c","d","d2","d3"],S);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+N[0]+`,
                             `+N[1]+`));

      int index = resTexRC.x * `+N[1]+` + resTexRC.y;

      `+F+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(m,_);case 6:return function(S,N){var F=rf(["r","c","d","d2","d3","d4"],S);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+N[0]+", "+N[1]+`));
      int index = resTexRC.x * `+N[1]+` + resTexRC.y;

      `+F+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(m,_);default:throw new Error(m.length+"-D output sampling is not yet supported")}var C,x}(t.logicalShape,c),s=function(m){return`
    void setOutput(float val) {
      `+m.output+` = vec4(val, 0, 0, 0);
    }
  `}(d)),r&&(p+=Tce),[p,h,s,a,o,u,e].join(`
`)}function Lm(n){var t=n.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(s===1&&a===1)return`
      float `+i+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=e.shapeInfo.texShape,c=u[0],d=u[1],h=Jh(r);return`
    float `+i+`() {
      vec2 uv = uvFromFlat(`+c+", "+d+", "+h+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 1:return function(e){var r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(e.shapeInfo.isUniform)return`
      float `+i+`(int index) {
        `+Rm(e)+`
      }
    `;var o=e.shapeInfo.texShape,s=o[0],a=o[1];if(a===1&&s===1)return`
      float `+i+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=Jh(r);return a===1?`
      float `+i+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+s+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:s===1?`
      float `+i+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+a+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+i+`(int index) {
      vec2 uv = uvFromFlat(`+s+", "+a+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(n);case 2:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=e.shapeInfo.texShape;if(s!=null&&Ur(r,s)){var a=s[0],u=s[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+a+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `}var c=rd(r),d=c.newShape,h=c.keptDims,p=d;if(p.length<r.length){var m=Vm(e,p);return`
      `+Lm(m)+`
      float `+o+`(int row, int col) {
        return `+o+"("+Bm(["row","col"],h)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Rm(e)+`
      }
    `;var _=s[0],C=s[1],x=Jh(i);return C===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+x+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+_+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `:_===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+x+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+C+`.0, 0.5);
      return sampleTexture(`+i+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+x+`;
    vec2 uv = uvFromFlat(`+_+", "+C+`, index);
    return sampleTexture(`+i+`, uv);
  }
`}(n);case 3:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],u=rd(r),c=u.newShape,d=u.keptDims,h=c;if(h.length<r.length){var p=Vm(e,h);return`
        `+Lm(p)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+Bm(["row","col","depth"],d)+`);
        }
      `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+s+", "+a+`, 1)));
        `+Rm(e)+`
      }
    `;var m=e.shapeInfo.texShape,_=m[0],C=m[1],x=e.shapeInfo.flatOffset;if(C===s&&x==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+a+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+C+".0, "+_+`.0);
          return sampleTexture(`+i+`, uv);
        }
      `;if(C===a&&x==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+C+".0, "+_+`.0);
      return sampleTexture(`+i+`, uv);
    }
  `;var S=Jh(i);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+s+" + col * "+a+" + depth + "+S+`;
        vec2 uv = uvFromFlat(`+_+", "+C+`, index);
        return sampleTexture(`+i+`, uv);
      }
  `}(n);case 4:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,u=r[1]*a,c=rd(r),d=c.newShape,h=c.keptDims;if(d.length<r.length){var p=Vm(e,d);return`
      `+Lm(p)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+Bm(["row","col","depth","depth2"],h)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+a+", "+s+`, 1)));
        `+Rm(e)+`
      }
    `;var m=e.shapeInfo.flatOffset,_=e.shapeInfo.texShape,C=_[0],x=_[1];if(x===u&&m==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+C+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(x===s&&m==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+C+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var S=Jh(i);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+a+` +
          depth * `+s+` + depth2;
      vec2 uv = uvFromFlat(`+C+", "+x+", index + "+S+`);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 5:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,u=r[2]*a,c=r[1]*u,d=rd(r),h=d.newShape,p=d.keptDims;if(h.length<r.length){var m=Vm(e,h);return`
      `+Lm(m)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+Bm(["row","col","depth","depth2","depth3"],p)+`);
      }
    `}if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+u+", "+a+", "+s+`)) +
          depth3;
        `+Rm(e)+`
      }
    `;var _=e.shapeInfo.flatOffset,C=e.shapeInfo.texShape,x=C[0],S=C[1];if(S===c&&_==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+a+", "+s+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(S===s&&_==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+x+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var N=Jh(i);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+" + depth * "+a+` +
          depth2 * `+s+" + depth3 + "+N+`;
      vec2 uv = uvFromFlat(`+x+", "+S+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);case 6:return function(e){var r=e.shapeInfo.logicalShape,i=e.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=rd(r),a=s.newShape,u=s.keptDims;if(a.length<r.length){var c=Vm(e,a);return`
      `+Lm(c)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+Bm(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var d=r[5],h=r[4]*d,p=r[3]*h,m=r[2]*p,_=r[1]*m;if(e.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+_+", "+m+", "+p+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Rm(e)+`
      }
    `;var C=e.shapeInfo.flatOffset,x=e.shapeInfo.texShape,S=x[0],N=x[1];if(N===_&&C==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+m+", "+p+", "+h+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+N+".0, "+S+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;if(N===d&&C==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+N+".0, "+S+`.0);
        return sampleTexture(`+i+`, uv);
      }
    `;var F=Jh(i);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+_+" + col * "+m+" + depth * "+p+` +
          depth2 * `+h+" + depth3 * "+d+" + depth4 + "+F+`;
      vec2 uv = uvFromFlat(`+S+", "+N+`, index);
      return sampleTexture(`+i+`, uv);
    }
  `}(n);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Cz(n){var t,e,r;switch(n.shapeInfo.logicalShape.length){case 0:return t=n.name,e="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Gi(),`
    vec4 `+e+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(i){var o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=Gi();return`
    vec4 `+s+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+c.texture2D+"("+o+`, uv);
    }
  `}(n);case 2:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=u[0],d=u[1],h=Gi();if(u!=null&&Ur(o,u))return`
      vec4 `+a+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+c+`.0);

        return `+h.texture2D+"("+s+`, uv);
      }
    `;var p=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],m=Math.ceil(o[1]/2);return`
    vec4 `+a+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+m+", "+p[0]+", "+p[1]+`, row, col);
      return `+h.texture2D+"("+s+`, uv);
    }
  `}(n);case 3:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var d=o.slice(1),h=Vm(i,d);return`
        `+Cz(h)+`
        vec4 `+a+`(int b, int row, int col) {
          return `+a+"("+Bm(["b","row","col"],[1,2])+`);
        }
      `}var p=c[0],m=c[1],_=Math.ceil(o[2]/2),C=_*Math.ceil(o[1]/2),x=Gi();return`
    vec4 `+a+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+p+", "+m+", "+C+", "+_+`, b, row, col);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(n);default:return function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),c=i.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],h=d[0],p=d[1],m=Math.ceil(o[s-1]/2),_=m*Math.ceil(o[s-2]/2),C="int b, int row, int col",x="b * "+_+" + (row / 2) * "+m+" + (col / 2)",S=2;S<s-1;S++)C="int b"+S+", "+C,_*=o[s-S-1],x="b"+S+" * "+_+" + "+x;var N=Gi();return`
    vec4 `+u+"("+C+`) {
      int index = `+x+`;
      int texR = index / `+p+`;
      int texC = index - texR * `+p+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+p+", "+h+`);
      return `+N.texture2D+"("+a+`, uv);
    }
  `}(n)}}var Ece=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Ice=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Sce=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,Tce=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Jh(n){return"offset"+n}function Rm(n){var t=n.name,e=ot(n.shapeInfo.logicalShape);return e<2?"return "+t+";":`
    for (int i = 0; i < `+e+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Kn(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function Vm(n,t){var e=JSON.parse(JSON.stringify(n));return e.shapeInfo.logicalShape=t,e}function Bm(n,t){return t.map(function(e){return n[e]}).join(", ")}var Ace=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Q(n.length>2,function(){return"Packed arg"+(e.charAt(0).toUpperCase()+e.slice(1))+" supports only inputs with rank above 2."});var i=n[n.length-1],o=Math.ceil(i/t);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,c=u.length,d=Kn(c),h=Lo("coords",c);if(o===1){var p=Kn(a=c+1);s=`
        `+p+" sourceLocR = "+p+"("+h.join()+`, 0);
        ++`+h[c-1]+`;
        `+p+" sourceLocG = "+p+"("+h.join()+`, 0);
        ++`+h[c-2]+`;
        `+p+" sourceLocA = "+p+"("+h.join()+`, 0);
        --`+h[c-1]+`;
        `+p+" sourceLocB = "+p+"("+h.join()+`, 0);
        --`+h[c-2]+";"}else a=c,s=`
        `+d+` sourceLocR = coords;
        ++`+h[c-1]+`;
        `+d+` sourceLocG = coords;
        ++`+h[c-2]+`;
        `+d+` sourceLocA = coords;
        --`+h[c-1]+`;
        `+d+` sourceLocB = coords;
        --`+h[c-2]+";";var m=["x","y","z","w","u","v"].slice(0,a),_="."+m[a-1],C=m.map(function(k){return"int "+k}),x=Lo("sourceLocR",a-1).concat("inIdx.r"),S=Lo("sourceLocG",a-1).concat("inIdx.g"),N=Lo("sourceLocB",a-1).concat("inIdx.b"),F=Lo("sourceLocA",a-1).concat("inIdx.a"),R=e==="max"?"greaterThan":"lessThan",j=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+N.join()+`),
                             getBestIndicesAChannel(`+F.join()+")));",H=`vec4(
            getAChannel(`+x.join()+`),
            hasNextCol ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow ? getAChannel(`+N.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+F.join()+") : 0.)",B=r?"":`
      float getBestIndicesAChannel(`+C.join()+`) {
        return getChannel(getBestIndicesA(`+m.join()+`),
                                          vec2(`+m.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+C.join()+`) {
        return getChannel(getA(`+m.join()+`),
                               vec2(`+m.slice(-2).join()+`));
      }
      `+B+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+h[c-1]+" < "+(u[c-1]-1)+`;
        bool hasNextRow = `+h[c-2]+" < "+(u[c-2]-1)+`;
        `+s+`
        ivec4 srcIdx = ivec4(sourceLocR`+_+", sourceLocG"+_+`,
          sourceLocB`+_+", sourceLocA"+_+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+H+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+j+`
          vec4 candidate = `+H+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+R+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Dce=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterHeight,u=n.effectiveFilterWidth,c=a-1-n.padInfo.top,d=u-1-n.padInfo.left,h=1/(t*e);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+d+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+s+`) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},Pce=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var t=n.filterDepth,e=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterDepth,h=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=d-1-n.padInfo.front,_=h-1-n.padInfo.top,C=p-1-n.padInfo.left,x=1/(t*e*r);this.userCode=`
      const ivec3 pads = ivec3(`+m+", "+_+", "+C+`);
      const float avgMultiplier = float(`+x+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+i+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+p+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Mce=function(n,t,e,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Xt(n,t),Xt(n,e);var s="0.0";r!=null&&(Xt(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";i!=null&&(Xt(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+s+`;
        float scale = `+a+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},kce=function(n,t,e,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Xt(n,t),Xt(n,e);var s="vec4(0.0)";r!=null&&(Xt(n,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";i!=null&&(Xt(n,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+s+`;
        vec4 scale = `+a+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Oce="return areal * breal - aimag * bimag;",Rce="return areal * bimag + aimag * breal;",kU=function(n,t,e){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Xt(t,e),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},zP="return a + b;",WP="return a - b;",OU="return a * b;",xz="return (a < 0.) ? b * a : a;",wr=function(n,t,e){this.variableNames=["A","B"],this.outputShape=Xt(t,e),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Ez=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Lc=function(n,t,e,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Xt(t,e);var i=this.outputShape.length,o="";if(r)if(i===0||ot(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+Kn(i)+` coords = getOutputCoords();
        `,i===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var s=Lo("coords",i);o+=`
            bool nextRowOutOfBounds =
              (`+s[i-2]+" + 1) >= "+this.outputShape[i-2]+`;
            bool nextColOutOfBounds =
              (`+s[i-1]+" + 1) >= "+this.outputShape[i-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},Nce=function(){function n(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n}(),Fce=function(){function n(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(t,e){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,t),i.gl.uniform1f(r.maxLoc,e)}},n}(),Lce=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Vce=function(n){this.outputShape=[],this.outputShape=cf(n,1),this.variableNames=n.map(function(a,u){return"T"+u});var t=new Array(n.length-1);t[0]=n[0][1];for(var e=1;e<t.length;e++)t[e]=t[e-1]+n[e][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(e=1;e<t.length;e++){var i=t[e-1];r.push("else if (yC < "+t[e]+") setOutput(getT"+e+"(yR, yC-"+i+"));")}var o=t.length,s=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Bce=function(n,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cf(n,t);var e=this.outputShape,r=e.length,i=Kn(r),o=Lo("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map(function(x,S){return"T"+S});var a=new Array(n.length-1);a[0]=n[0][t];for(var u=1;u<a.length;u++)a[u]=a[u-1]+n[u][t];var c=s[t],d=s.slice(-2),h=s.join(),p="if ("+c+" < "+a[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+d.join()+`));
        }`;for(u=1;u<a.length;u++){var m=a[u-1];p+=`
        if (`+c+" < "+a[u]+"  && "+c+" >= "+a[u-1]+`) {
          return getChannel(
            getT`+u+"("+T1(s,c,m)+`),
            vec2(`+T1(d,c,m)+`));
        }`}var _=a.length,C=a[a.length-1];p+=`
        return getChannel(
          getT`+_+"("+T1(s,c,C)+`),
          vec2(`+T1(d,c,C)+"));",this.userCode=`
      float getValue(`+s.map(function(x){return"int "+x})+`) {
        `+p+`
      }

      void main() {
        `+i+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+e[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+e[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+e[r-2]+` &&
            `+o[r-1]+" < "+e[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function T1(n,t,e){var r=n.indexOf(t);return n.map(function(i,o){return o===r?i+" - "+e:i}).join()}var Uce=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideHeight,e=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},jce=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=n.dataFormat==="channelsLast",s=t-1-n.padInfo.top,a=e-1-n.padInfo.left,u=o?1:2,c=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},zce=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideDepth,e=n.strideHeight,r=n.strideWidth,i=n.padInfo.front,o=n.padInfo.top,s=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+i+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+e+" - "+o+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+s+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Wce=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterDepth,e=n.filterHeight,r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=t-1-n.padInfo.front,u=e-1-n.padInfo.top,c=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+a+", "+u+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+i+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+e+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+e+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+s+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Hce=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var t=n.strideHeight,e=n.strideWidth,r=n.padInfo.top,i=n.padInfo.left,o=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+e+" - "+i+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},$ce=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var t=n.filterHeight,e=n.filterWidth,r=n.strideHeight,i=n.strideWidth,o=t-1-n.padInfo.top,s=e-1-n.padInfo.left,a=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+e+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+i+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+e+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+a+`; dm++) {
              int d2 = d1 * `+a+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},RU=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.padInfo.top,o=n.padInfo.left,s=n.strideHeight,a=n.strideWidth,u=n.dilationHeight,c=n.dilationWidth,d=n.filterHeight,h=n.filterWidth,p=4*Math.floor(n.inChannels/4),m=n.inChannels%4,_=n.dataFormat==="channelsLast",C=_?1:2,x=_?2:3,S=_?3:1,N="",F="";e&&(N=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,F="result = activation(result);");var R=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+N+`

      const ivec2 strides = ivec2(`+s+", "+a+`);
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+S+`];

        ivec2 xRCCorner =
            ivec2(coords[`+C+"], coords["+x+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+p+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+_+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(m===1)+`) {

              if (`+_+`) {
                dotProd +=
                    getX(batch, xR, xC, `+p+`) *
                    getW(wR, wC, `+p+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+p+`, xR, xC) *
                    getW(wR, wC, `+p+`, d2);
              }

            } else if (`+(m===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2)
              );

              if (`+_+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(m===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+p+`, d2),
                getW(wR, wC, `+p+` + 1, d2),
                getW(wR, wC, `+p+` + 2, d2)
              );

              if (`+_+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+p+`),
                  getX(batch, xR, xC, `+p+` + 1),
                  getX(batch, xR, xC, `+p+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+p+`, xR, xC),
                  getX(batch, `+p+` + 1, xR, xC),
                  getX(batch, `+p+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+R+`
        `+F+`
        setOutput(result);
      }
    `},qce=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var t=n.padInfo.front,e=n.padInfo.top,r=n.padInfo.left,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,d=n.filterDepth,h=n.filterHeight,p=n.filterWidth,m=4*Math.floor(n.inChannels/4),_=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+t+", "+e+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+a+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+p+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+m+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(_===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+m+`) *
                  getW(wF, wR, wC, `+m+`, d2);
              } else if (`+(_===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(_===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+m+`),
                  getX(batch, xF, xR, xC, `+m+` + 1),
                  getX(batch, xF, xR, xC, `+m+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+m+`, d2),
                  getW(wF, wR, wC, `+m+` + 1, d2),
                  getW(wF, wR, wC, `+m+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},NU=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,d=n.dilationHeight,h=n.dilationWidth,p=n.filterHeight,m=n.filterWidth,_=n.outChannels/n.inChannels,C="",x="";e&&(C=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`
          float activation(float x) {
            `+e+`
          }
        `,x="result = activation(result);");var S=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+_+`;
        int q = d2 - d1 * `+_+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+p+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+i+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+S+`
        `+x+`
        setOutput(result);
      }
    `},FU=function(n,t,e,r){t===void 0&&(t=!1),e===void 0&&(e=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var i=n.inHeight,o=n.inWidth,s=n.padInfo.top,a=n.padInfo.left,u=n.strideHeight,c=n.strideWidth,d=n.dilationHeight,h=n.dilationWidth,p=n.filterHeight,m=n.filterWidth,_=m,C="int xR; int xC; int xCOffset;",x=0;x<p;x++)for(var S=0;S<m;S++)C+=`
          vec4 xTexelR`+x+"C"+2*S+` = vec4(0.);
          vec4 wR`+x+"C"+S+` = vec4(0.);
          vec4 xR`+x+"C"+S+" = vec4(0.);";for(x=0;x<p;x++)for(var N=0;N<_;N++){if(C+=`
          xR = xRCorner + `+x*d+`;
          xC = xCCorner + `+(S=2*N)*h+`;
        `,c===1){if(S<m&&(C+=a%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+x+"C"+S+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+i+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+x+"C"+S+" = vec4(previous.zw, xTexelR"+x+"C"+S+`.xy);
                } else {
                  xR`+x+"C"+S+" = vec4(0, 0, xTexelR"+x+"C"+S+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+i+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xR`+x+"C"+S+" = xTexelR"+x+"C"+S+`;
              `,S+1<m)){var F=a%2==0?SM(h):h;h%2==0&&a%2==1||h%2!=0&&a%2!=1?(C+=`
                  xCOffset = xC + `+a%2+" + "+F+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(C+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+i+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+x+"C"+S+` = vec4(0.);
                    }
                  `),C+=`
                  xR`+x+"C"+(S+1)+` = vec4(
                    xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.xy);
                `):C+=`
                  xCOffset = xC + `+F+`;

                  if(xR >= 0 && xR < `+i+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+x+"C"+(S+1)+" = xTexelR"+x+"C"+(S+2)+`;
                `}}else S<m&&(C+=`
              if(xR >= 0 && xR < `+i+`) {
            `,a%2==1?(C+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+x+"C"+(S+2)+` = vec4(0.);
                }

                xR`+x+"C"+S+` = vec4(
                  xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.zw);
              `,S+1<m&&(C+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+x+"C"+(S+1)+" = vec4(xTexelR"+x+"C"+(S+2)+`.xy, final.xy);
                `)):(C+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+x+"C"+S+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+x+"C"+S+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+x+"C"+(S+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+x+"C"+(S+2)+` = vec4(0.);
                }

                xR`+x+"C"+S+` = vec4(
                  xTexelR`+x+"C"+S+".xy, xTexelR"+x+"C"+(S+2)+`.xy);
              `,S+1<m&&(C+=`
                  xR`+x+"C"+(S+1)+` = vec4(
                    xTexelR`+x+"C"+S+".zw, xTexelR"+x+"C"+(S+2)+`.zw);
                `)),C+="}");S<m&&(C+=`
            vec4 wTexelR`+x+"C"+S+" = getW("+x+", "+S+`, d1, q);
            wR`+x+"C"+S+" = vec4(wTexelR"+x+"C"+S+".xz, wTexelR"+x+"C"+S+`.xz);
          `,S+1<m&&(C+=`
              vec4 wTexelR`+x+"C"+(S+1)+" = getW("+x+", "+(S+1)+`, d1, q);
              wR`+x+"C"+(S+1)+` =
                vec4(wTexelR`+x+"C"+(S+1)+".xz, wTexelR"+x+"C"+(S+1)+".xz);"))}for(x=0;x<p;x++)for(S=0;S<m;S++)C+="dotProd += xR"+x+"C"+S+" * wR"+x+"C"+S+";";var R="",j="";e&&(R=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+e+`
        }`:`vec4 activation(vec4 x) {
          `+e+`
        }`,j="result = activation(result);");var H=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+R+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+C+`

        vec4 result = dotProd;
        `+H+`
        `+j+`
        setOutput(result);
      }
    `},Gce=function(n,t,e,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=n[0],s=n[1],a=n[2],u=n[3],c=t[0],d=e[0],h=e[1];this.outputShape=[c,d,h,u];var p=r==="bilinear"?1:0,m=[s-1+".0",a-1+".0"],_=m[0],C=m[1],x=d>1?[""+(s-1)/(d-1),"(y2-y1) * height_ratio","y1*"+_+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+_],S=x[0],N=x[1],F=x[2],R=h>1?[""+(a-1)/(h-1),"(x2-x1) * width_ratio","x1*"+C+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+C],j=R[0],H=R[1],B=R[2];this.userCode=`
      const float height_ratio = float(`+S+`);
      const float width_ratio = float(`+j+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+N+`;
        float width_scale = `+H+`;

        float in_y = `+F+`;
        if( in_y < 0.0 || in_y > `+_+` ) {
          setOutput(float(`+i+`));
          return;
        }
        float in_x = `+B+`;
        if( in_x < 0.0 || in_x > `+C+` ) {
          setOutput(float(`+i+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+p+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},Kce=function(n,t,e){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=n[n.length-1],o=e?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(e?"return "+i+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Kn(r)+` coords = getOutputCoords();
        int end = `+LU(r,"coords")+`;
        float val = 0.0;
        for (int i = `+i+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+LU(r,"coords")+` = idx;
          val += getX(`+function(s,a){if(s===1)return""+a;if(s===2)return a+".x, "+a+".y";if(s===3)return a+".x, "+a+".y, "+a+".z";if(s===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function LU(n,t){if(n===1)return""+t;if(n===2)return t+".y";if(n===3)return t+".z";if(n===4)return t+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var Yce=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=l_.DENSE;var t=o_(n),e=Gi();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+rf(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+e.output+` = result;
      }
    `},Zce=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=l_.DENSE;var t=o_(n),e=Gi();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+rf(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+e.output+` = result;
      }
    `},Qce=function(){function n(t,e,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+e+`;
      int offset_h = imod(h, `+e+`);
      int in_w = w / `+e+`;
      int offset_w = imod(w, `+e+`);
      int offset_d = (offset_h * `+e+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n}(),Xce=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},Jce=function(n){this.variableNames=["A"],this.outTexUsage=gs.DOWNLOAD;var t=Gi();this.outputShape=n,this.userCode=`
      `+wz+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},ele=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gs.DOWNLOAD;var t=Gi();this.outputShape=n,this.userCode=`
      `+wz+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},tle=function(n,t,e){e===void 0&&(e=!1),this.variableNames=["A"];var r=Gi(),i=t[0],o=t[1];this.outputShape=n;var s="result";e&&(s="floor(result * 255. + 0.5)"),this.userCode=`
      `+qM(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+s+`, 0., 0., 0.);
      }
    `},nle=function(n,t,e){e===void 0&&(e=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Gi(),i=t[0],o=t[1];this.outputShape=n;var s="",a="result";e&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var d=2*u+c;s+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+n[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+u+" < "+n[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+i+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+qM(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+s+`

        `+r.output+" = "+a+`;
      }
    `},rle="return real * expR - imag * expI;",ile="return real * expI + imag * expR;",VU=function(n,t,e){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=e?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=e?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+i+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},ole=function(){function n(t,e){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){e.valueLoc==null&&(e.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(e.valueLoc,t)}},n}(),sle=function(n,t,e){this.variableNames=["A","indices"];var r=n.slice();r[e]=t,this.outputShape=r,this.rank=r.length;var i=Kn(this.rank),o=function(s,a){var u=s.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],h=0;h<s.length;h++)h===a?d.push("int(getIndices("+c[h]+"))"):d.push(""+c[h]);return d.join()}(n,e);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},ale=function(n,t,e){this.sliceDim=n,this.strides=t,this.variableNames=["x","indices"],this.outputShape=e;var r=Kn(t.length),i=Kn(e.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+i+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Iz(n,t){var e=Gi();return Pj(n,t,e.version+`
    precision highp float;
    `+e.attribute+` vec3 clipSpacePos;
    `+e.attribute+` vec2 uv;
    `+e.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function Sz(n,t){return Rj(n,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Tz(n,t){return Nj(n,t,new Uint16Array([0,1,2,2,1,3]))}function __(n,t,e,r,i,o,s){Lj(e,r);var a=Fj(n,t),u=n.TEXTURE_2D;return Xe(n,t,function(){return n.bindTexture(u,a)}),Xe(n,t,function(){return n.texParameteri(u,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)}),Xe(n,t,function(){return n.texParameteri(u,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)}),Xe(n,t,function(){return n.texParameteri(u,n.TEXTURE_MIN_FILTER,n.NEAREST)}),Xe(n,t,function(){return n.texParameteri(u,n.TEXTURE_MAG_FILTER,n.NEAREST)}),Xe(n,t,function(){return n.texImage2D(u,0,i,e,r,0,o,s,null)}),Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)}),a}function Az(n,t,e,r,i){var o=ix(e,r);return __(n,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,n.FLOAT)}function Dz(n,t,e,r,i){var o=ix(e,r);return __(n,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function Pz(n,t,e,r,i){var o=ix(e,r);return __(n,t,o[0],o[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function Mz(n,t,e,r,i){var o=v_(e,r);return __(n,t,o[0],o[1],i.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function kz(n,t,e,r,i){var o=v_(e,r);return __(n,t,o[0],o[1],i.internalFormatPackedHalfFloat,n.RGBA,i.textureTypeHalfFloat)}function Oz(n,t,e,r){return Xe(n,t,function(){return n.bindBuffer(n.ARRAY_BUFFER,r)}),fM(n,t,e,"clipSpacePos",r,3,20,0)&&fM(n,t,e,"uv",r,2,20,12)}function Rz(n,t,e,r,i,o,s){var a,u,c;Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)}),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=n.UNSIGNED_BYTE,c=n.RGBA):(a=new Float32Array(r*i*4),u=n.FLOAT,c=s.internalFormatPackedFloat),a.set(o),Xe(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,c,r,i,0,n.RGBA,u,a)}),Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function Nz(n,t,e,r){Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,e)}),r.data instanceof Uint8Array?Xe(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)}):Xe(n,t,function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)}),Xe(n,t,function(){return n.bindTexture(n.TEXTURE_2D,null)})}function Fz(n,t,e,r,i){var o=n.createBuffer();Xe(n,t,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,o)});var s=16*e*r;return Xe(n,t,function(){return n.bufferData(n.PIXEL_PACK_BUFFER,s,n.STREAM_READ)}),Xe(n,t,function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,0)}),Xe(n,t,function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}),o}function Lz(n,t,e){var r=n,i=new Float32Array(e);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function Vz(n,t,e,r,i){var o=ix(e,r),s=o[0],a=o[1],u=new Uint8Array(e*r*4);return Xe(n,t,function(){return n.readPixels(0,0,s,a,i.downloadTextureFormat,n.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function Bz(n,t,e,r,i,o,s,a){var u=n,c=new Float32Array(function(d,h){var p=v_(d,h);return p[0]*p[1]*4}(o,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function Uz(n,t,e,r){var i=new Float32Array(e*r*4);return Xe(n,t,function(){return n.readPixels(0,0,r,e,n.RGBA,n.FLOAT,i)}),i}var ule=Object.freeze({createVertexShader:Iz,createVertexBuffer:Sz,createIndexBuffer:Tz,createFloat32MatrixTexture:Az,createFloat16MatrixTexture:Dz,createUnsignedBytesMatrixTexture:Pz,createPackedMatrixTexture:Mz,createFloat16PackedMatrixTexture:kz,bindVertexProgramAttributeStreams:Oz,uploadDenseMatrixToTexture:Rz,uploadPixelDataToTexture:Nz,createBufferFromOutputTexture:Fz,downloadFloat32MatrixFromBuffer:Lz,downloadByteEncodedFloatMatrixFromOutputTexture:Vz,downloadPackedMatrixFromBuffer:Bz,downloadMatrixFromPackedOutputTexture:Uz}),jz=function(){function n(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var e=_e().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,Tj(e,t)):this.gl=Nu(e);var r="WEBGL_color_buffer_float";if(_e().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=n_(this.gl,this.debug,"OES_texture_float"),vs(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=n_(this.gl,this.debug,"OES_texture_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),vs(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=n_(this.gl,this.debug,"EXT_color_buffer_half_float");else if(_e().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",vs(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!vs(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Sz(this.gl,this.debug),this.indexBuffer=Tz(this.gl,this.debug),this.framebuffer=Vj(this.gl,this.debug),this.textureConfig=kM(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return _e().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;Xe(e,this.debug,function(){return e.finish()}),Xe(e,this.debug,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Xe(e,this.debug,function(){return e.deleteFramebuffer(t.framebuffer)}),Xe(e,this.debug,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),Xe(e,this.debug,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),Xe(e,this.debug,function(){return e.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),Az(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),Dz(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),Pz(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),Nz(this.gl,this.debug,t,e)},n.prototype.uploadDenseMatrixToTexture=function(t,e,r,i){this.throwIfDisposed(),Rz(this.gl,this.debug,t,e,r,i,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(t,e){return this.throwIfDisposed(),kz(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),Mz(this.gl,this.debug,t,e,this.textureConfig)},n.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(pM(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Xe(this.gl,this.debug,function(){return e.gl.deleteTexture(t)})},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,function(){return Vz(i.gl,i.debug,e,r,i.textureConfig)})},n.prototype.downloadPackedMatrixFromBuffer=function(t,e,r,i,o,s){return Bz(this.gl,t,0,0,0,o,s,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(t,e){return Lz(this.gl,t,e)},n.prototype.createBufferFromTexture=function(t,e,r){this.bindTextureToFrameBuffer(t);var i=Fz(this.gl,this.debug,e,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},n.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},n.prototype.createFence=function(t){var e,r,i=this;if(_e().getBool("WEBGL_FENCE_API_ENABLED")){var o=t,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},e=s}else _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(e,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:e,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(t,e,r){var i=this;return this.downloadMatrixDriver(t,function(){return Uz(i.gl,i.debug,e,r)})},n.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,r=Mj(e,this.debug,t),i=Iz(e,this.debug),o=kj(e,this.debug);return Xe(e,this.debug,function(){return e.attachShader(o,i)}),Xe(e,this.debug,function(){return e.attachShader(o,r)}),Oj(e,this.debug,o),this.debug&&L1(e,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=Oz(e,this.debug,this.program,this.vertexBuffer)),o},n.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Xe(this.gl,this.debug,function(){return e.gl.deleteProgram(t)})},n.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&L1(this.gl,this.debug,this.program),Xe(this.gl,this.debug,function(){return e.gl.useProgram(t)})},n.prototype.getUniformLocation=function(t,e,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Uj(this.gl,this.debug,t,e):jj(this.gl,t,e)},n.prototype.getAttributeLocation=function(t,e){var r=this;return this.throwIfDisposed(),Xe(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,e)})},n.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},n.prototype.setInputMatrixTexture=function(t,e,r){this.throwIfDisposed(),this.throwIfNoProgram(),zj(this.gl,this.debug,this.program,t,e,r)},n.prototype.setOutputMatrixTexture=function(t,e,r){this.setOutputMatrixTextureDriver(t,r,e)},n.prototype.setOutputPackedMatrixTexture=function(t,e,r){this.throwIfDisposed();var i=v_(e,r),o=i[0],s=i[1];this.setOutputMatrixTextureDriver(t,o,s)},n.prototype.setOutputMatrixWriteRegion=function(t,e,r,i){this.setOutputMatrixWriteRegionDriver(r,t,i,e)},n.prototype.setOutputPackedMatrixWriteRegion=function(t,e,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&L1(this.gl,this.debug,this.program),r_(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Xe(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},n.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Xe(this.gl,this.debug,function(){return t.gl.finish()})},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=n_(this.gl,this.debug,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},n.prototype.endQuery=function(){if(_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,r=this.getQueryTimerExtensionWebGL2();e.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(t){return tt(this,void 0,void 0,function(){var e=this;return nt(this,function(r){switch(r.label){case 0:return[4,sM(function(){return e.disposed||e.isQueryAvailable(t,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},n.prototype.getQueryTime=function(t,e){if(e===0)return null;if(e===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(t,i.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(t,e){if(e===0)return!0;if(e===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},n.prototype.pollFence=function(t){var e=this;return new Promise(function(r){e.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},n.prototype.pollItems=function(){for(var t=function(r){for(var i=0;i<r.length&&r[i]();++i);return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},n.prototype.addItemToPoll=function(t,e){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||sM(function(){return r.pollItems(),r.itemsToPoll.length===0})},n.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),V1(this.gl,this.debug,t,this.framebuffer),this.debug&&r_(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(V1(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&r_(this.gl)):pM(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var r=e();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(t,e,r){this.throwIfDisposed();var i=this.gl;V1(i,this.debug,t,this.framebuffer),this.debug&&r_(i),this.outputTexture=t,Xe(i,this.debug,function(){return i.viewport(0,0,e,r)}),Xe(i,this.debug,function(){return i.scissor(0,0,e,r)})},n.prototype.setOutputMatrixWriteRegionDriver=function(t,e,r,i){var o=this;this.throwIfDisposed(),Xe(this.gl,this.debug,function(){return o.gl.scissor(t,e,r,i)})},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n}();function BU(n,t){if(n.length!==t.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+t.length+" inputs");n.forEach(function(e,r){var i=e.logicalShape,o=t[r],s=o.shape;if(!Ur(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!Ur(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var cle=function(n,t,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=e.filterWidth,i=e.inChannels,o=e.strideWidth,s=e.strideHeight,a=e.padInfo,u=e.outWidth,c=e.dilationWidth,d=e.dilationHeight,h=e.dataFormat,p=a.left,m=a.top,_=i*r,C=Gi(),x=h==="channelsLast",S=x?0:1,N=x?1:2,F="",R=0;R<=1;R++)for(var j=0;j<=1;j++)F+=`
          blockIndex = rc.y + `+j+`;
          pos = rc.x + `+R+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+s+" - "+m+`;
            d0 = offsetY + `+d+" * (pos / "+_+`);

            if(d0 < `+t[S]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+o+". - "+p+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+_+".) / "+i+`.));

              if(d1 < `+t[N]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+i+`.));

                if (`+x+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*R+j)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*R+j)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+F+`

        `+C.output+` = result;
      }
    `},lle=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[];var o,s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+s+"; j <= "+s+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+a+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},dle=function(n,t,e,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=t,this.bias=e,this.alpha=r,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+e+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+i+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+i+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},hle=function(n,t,e,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=t,a=n[3]-1;this.outputShape=n;var u="float("+e+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+s+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+s+"; j <= "+s+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+a+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},fle=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var t=n.strideHeight,e=n.strideWidth,r=n.dilationHeight,i=n.effectiveFilterHeight,o=n.effectiveFilterWidth,s=i-1-n.padInfo.top,a=o-1-n.padInfo.left,u=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+s+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+i+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+e+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},ple=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var t=n.strideDepth,e=n.strideHeight,r=n.strideWidth,i=n.dilationDepth,o=n.dilationHeight,s=n.dilationWidth,a=n.effectiveFilterDepth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=a-1-n.padInfo.front,h=u-1-n.padInfo.top,p=c-1-n.padInfo.left,m=a*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+h+", "+p+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+a+`;
           wD += `+i+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+e+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+m+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},HP=function(n,t,e,r,i,o,s){e===void 0&&(e=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var a=e?n[1]:n[2],u=Math.ceil(a/2),c=e?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",h=e?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",_="";o&&(m=s?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,_="result = activation(result);");var C=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+p[0]+`);
          result += (`+h[1]+" * "+p[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+C+`

        `+_+`

        setOutput(result);
      }
    `},mle=function(){function n(t,e,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(e-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(e-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;return function(r,i){e.seedLoc==null&&(e.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(e.seedLoc,t)}},n}(),gle=function(n,t,e,r){this.variableNames=["indices"],this.outputShape=[n,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+e+`),
                      float(index == coords.y)));
      }
    `},vle=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var t=n.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var e=Lo("rc",t),r=Kn(t),i=function(a,u,c){if(a===1)return"rc > "+u[0];for(var d="",h=a-2;h<a;h++)d+=c[h]+" >= "+u[h],h<a-1&&(d+="||");return d}(t,n,e),o=function(a,u,c,d){if(a===1)return"";var h=d.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+c+`;
  `}(t,n[n.length-1],n[n.length-2],e),s=function(a,u){var c=a.length,d=function(h,p){for(var m=[],_=0;_<=1;_++)for(var C=0;C<=1;C++){for(var x=(_===0?"r":"rp1")+", "+(C===0?"c":"cp1"),S=2;S<h;S++)x=p[p.length-1-S]+","+x;m.push(x)}return m}(c,u);return c===1?`getA(rc),
            rc + 1 >= `+a[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"}(n,e);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+i+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+s+`));
          }
        }
      `}},_le=function(n,t,e){this.variableNames=["x"],this.outputShape=t.map(function(u,c){return u[0]+n[c]+u[1]});var r=n.length,i=Kn(r),o=t.map(function(u){return u[0]}).join(","),s=t.map(function(u,c){return u[0]+n[c]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+i+" start = "+i+"("+o+`);
      `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+e+`));
        } else {
          `+i+` coords = outC - start;
          setOutput(getX(`+a+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+s+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+e+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},yle=function(n,t,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(x,S){return x[0]+n[S]+x[1]});for(var r=n.length,i=Kn(r),o=t.map(function(x){return x[0]}).join(","),s=t.map(function(x,S){return x[0]+n[S]}).join(","),a=Lo("rc",r),u=Lo("source",r),c=a[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+u.slice(-2).join()+")",h=[i+" rc = outputLoc;",a[r-1]+` += 1;
       if(`+c+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+a[r-2]+` += 1;
       if(`+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+` += 1;
         if(`+c+") {"],p=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="",_=0,C=r===1?2:4;_<C;_++)m+=`
        `+h[_]+`
        if (`+p+`) {
          result[`+_+"] = float("+e+`);
        } else {
          `+i+` source = rc - start;
          result[`+_+"] = getChannel(getX("+u.join()+"), "+d+`);
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const `+i+" start = "+i+"("+o+`);
      const `+i+" end = "+i+"("+s+`);

      void main() {
        `+i+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+m+`
        setOutput(result);
      }
    `},$P=function(n,t,e){if(this.variableNames=["x"],t==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=n.padInfo.top,h=n.padInfo.left;this.outputShape=n.outShape;var p=t==="avg",m="0.0";if(p||(m="-1.0 / 1e-20"),e)this.userCode=`
        const ivec2 strides = ivec2(`+i+", "+o+`);
        const ivec2 pads = ivec2(`+d+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+s+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+a+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var _=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(_="avgValue / count");var C=4*Math.floor(r/4),x=r%4,S=`
      if (`+p+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+i+", "+o+`);
      const ivec2 pads = ivec2(`+d+", "+h+`);
      const float initializationValue = `+m+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+m+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+s+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+C+`; wC += 4) {
            int xC = xCCorner + wC * `+a+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              getValue(batch, xR, xC + 3 * `+a+`, d)
            );

            `+S+`
          }

          int xC = xCCorner + `+C+`;
          if (`+(x===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(x===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              initializationValue,
              initializationValue
            );

            `+S+`
          } else if (`+(x===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+a+`, d),
              getValue(batch, xR, xC + 2 * `+a+`, d),
              initializationValue
            );

            `+S+`
          }
        }
        setOutput(`+_+`);
      }
    `}},qP=function(n,t,e){if(this.variableNames=["x"],t==="avg"&&e)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterDepth,h=n.effectiveFilterHeight,p=n.effectiveFilterWidth,m=n.padInfo.front,_=n.padInfo.top,C=n.padInfo.left;this.outputShape=n.outShape;var x=t==="avg",S="0.0";if(x||(S="-1.0 / 1e-20"),e)this.userCode=`
        const ivec3 strides =
            ivec3(`+i+", "+o+", "+s+`);
        const ivec3 pads = ivec3(`+m+", "+_+", "+C+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+a+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+p+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+p+` +
                      wR * `+p+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var N=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(N="avgValue / count");var F=4*Math.floor(r/4),R=r%4,j=`
      if (`+x+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+i+", "+o+", "+s+`);
      const ivec3 pads = ivec3(`+m+", "+_+", "+C+`);
      const float initializationValue = `+S+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+S+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+a+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+F+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+j+`
            }

            int xC = xCCorner + `+F+`;
            if (`+(R===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+j+`
            } else if (`+(R===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+j+`
            } else if (`+(R===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+j+`
            }
          }
          setOutput(`+N+`);
        }
      }
    `}},ble=function(n,t){this.variableNames=["x"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=Math.ceil(i/e);this.outputShape=[r,o];var s="0.0",a="";t==="prod"?s="1.0":t==="min"?(s="1.0 / 1e-20",a="min"):t==="max"&&(s="-1.0 / 1e-20",a="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var c=4*Math.floor(e/4),d=e%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+a+`(values, minMaxValue);
      }
    `,p="vec4";t==="all"?(s="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,p="bvec4"):t==="any"&&(s="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,p="bvec4");var m="";i%e>0&&(m=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+s+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+m+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+e+`;

        vec4 minMaxValue = vec4(`+s+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(d===1)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(d===2)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(d===3)+`) {
          `+p+" values = "+p+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+u+`);
      }
    `},wle=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var e="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),e+=`
        `+i+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+rf(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+qM(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+e+`

        setOutput(result);
      }
    `},Cle=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],d=[e&&a>1?a-1:a,e&&u>1?u-1:u],h=c[0]/d[0],p=c[1]/d[1],m=1/h,_=1/p,C=2*Math.ceil(m)+2,x=2*Math.ceil(_)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+_+`);

        const int winHeight = int(`+C+`);
        const int winWidth = int(`+x+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(i-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},xle=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},Ele=function(n,t,e,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`,
          `+u[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+s+`.0,
                                     `+s+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(a-1)+`;
        bool hasNextRow = coords.z < `+(e-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},Ile=function(n,t,e){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],s=n.shape,a=s[1],u=s[2],c=[e&&a>1?i-1:i,e&&u>1?o-1:o],d=[e&&a>1?a-1:a,e&&u>1?u-1:u],h=c[0]/d[0],p=c[1]/d[1],m=1/h,_=1/p,C=2*Math.ceil(m)+2,x=2*Math.ceil(_)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+p+`);

        const float invHeightScale = float(`+m+`);
        const float invWidthScale = float(`+_+`);

        const int winHeight = int(`+C+`);
        const int winWidth = int(`+x+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+a+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+i+`) - 1),
                `+e+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+e+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},Sle=function(n,t,e,r){this.variableNames=["A"],this.outputShape=[];var i=n[0],o=n[1],s=n[2],a=n[3];this.outputShape=[i,t,e,a];var u=[r&&t>1?o-1:o,r&&e>1?s-1:s],c=[r&&t>1?t-1:t,r&&e>1?e-1:e],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+s+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},Tle=function(n,t){this.variableNames=["x"];var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");if(this.outputShape=n,e!==1){var r=n.map(function(o,s){return function(a){return t.indexOf(a)!==-1&&n[a]!==1?n[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(s)}).join(","),i=Kn(e);this.userCode=`
      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},Ale=function(n,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var e=n.length;if(e>4)throw new Error("WebGL backend: Reverse of rank-"+e+" tensor is not yet supported");this.outputShape=n;var r=Lo("rc",e),i=r[e-1]+" + 1 < "+this.outputShape[e-1],o=r[e-2]+" + 1 < "+this.outputShape[e-2],s=Kn(e);function a(u){var c=n.map(function(d,h){return function(p,m){return t.indexOf(p)!==-1&&n[p]!==1?n[p]+" - "+m[p]+" - 1":""+m[p]}(h,u)});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=e===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+i+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+s+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return a(u)}(r.slice())+`;
          if(`+i+`){
            result.g = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",a(u)}(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+function(u){return u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+`;
            if(`+i+`) {
              result.a = `+function(u){return u[e-1]="("+u[e-1]+" + 1)",u[e-2]="("+u[e-2]+" + 1)",a(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},UU=function(n,t,e,r,i,o,s){s===void 0&&(s=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=Kn(i.length),u=Kn(o.length),c="";e===1?c="i":e===2&&(c="i, j");var d="getIndices("+c+")",h="";r===1?h="i":r===2&&(h="i, coords[1]");var p="getUpdates("+h+")",m=t>1?"strides[j]":"strides";this.userCode=`
        `+a+" strides = "+a+"("+i+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+m+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+p+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},Dle=function(n,t){this.variableNames=["x","segmentIds"];var e=n.windowSize,r=n.batchSize,i=n.inSize,o=n.numSegments,s=o*Math.ceil(i/e);this.outputShape=[r,s];var a=4*Math.floor(e/4),u=e%4,c=`
        sumValue += dot(values, segFilter);
    `,d="";i%e>0&&(d=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return initializationValue;
        }
      `);var h="";i%e>0&&(h=`
        if (inIdx < 0 || inIdx >= `+i+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+e+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+a+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+a+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},Ple=function(n,t,e){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,e>4)throw Error("Where for rank "+e+" is not yet supported");if(e===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<t.length;u++)a.push(""+o[u]),u<n&&s.push(""+o[u]);r=s.join(),i=a.join()}var c=Kn(e);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+i+`));
        } else {
          setOutput(getB(`+i+`));
        }
      }
    `},Mle=function(){function n(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e,r=Kn(this.rank),i="uniform int start["+this.rank+"];",o=function(s){if(s===1)return"sourceLoc";if(s<=6)return GP.slice(0,s).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);e=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(s,a){return"sourceLoc."+GP[a]+" = start["+a+"] + coords."+GP[a]+";"}).join(`
`)+`
      `,this.userCode=`
      `+i+`
      void main() {
        `+e+`
        setOutput(getSource(`+o+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,t)}},n}(),GP=["x","y","z","w","u","v"],kle=function(){function n(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var e=Kn(this.rank),r=Lo("coords",this.rank),i=Lo("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a=`
      result.x = `+s+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+i[this.rank-1]+`;
        result.y = `+s+`;
        --`+i[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+i[this.rank-2]+`;
        result.z = `+s+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+i[this.rank-1]+`;
          result.w = `+s+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+e+"("+t.map(function(d,h){return"start["+h+"]"}).join()+");":t.map(function(d,h){return i[h]+" = "+r[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+e+` coords = getOutputCoords();
        `+e+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+a+`
        `+u+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,i){e.startLoc==null&&(e.startLoc=r.getUniformLocationNoThrow(i,"start"),e.startLoc==null)||r.gl.uniform1iv(e.startLoc,t)}},n}(),Ole=function(n,t,e){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=Kn(e.length),o=Kn(e.length),s="";if(r===1)s="coords * strides + begin";else{var a=0;s=e.map(function(u,c){return a++,e.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(a-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode=`
      `+i+" begin = "+i+"("+n+`);
      `+i+" strides = "+i+"("+t+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+s+`));
      }
    `},Rle=function(){function n(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(t,e,r){var i,o=jU(e,r),s=zU(t,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===ms.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===ms.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===ms.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===ms.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===ms.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[s].push(i),i},n.prototype.releaseTexture=function(t,e,r,i){if(this.freeTextures!=null){var o=zU(e,jU(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(t),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(i){t.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n}();function jU(n,t){if(n===gs.UPLOAD)return ms.PACKED_2X2_FLOAT32;if(n===gs.RENDER||n==null)return function(e){return _e().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ms.PACKED_2X2_FLOAT32:ms.UNPACKED_FLOAT32:e?ms.PACKED_2X2_FLOAT16:ms.UNPACKED_FLOAT16}(t);if(n===gs.DOWNLOAD||n===gs.PIXELS)return ms.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function zU(n,t,e){return n[0]+"_"+n[1]+"_"+t+"_"+e}var Nle=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[r]*t[r];this.outputShape=e,this.rank=e.length;var i=Kn(this.rank),o=function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+s[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],d=0;d<s.length;d++)c.push("imod("+u[d]+", "+s[d]+")");return c.join()}(n);this.userCode=`
      void main() {
        `+i+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},Fle=function(n,t){this.variableNames=["A"];for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];this.outputShape=e,this.rank=e.length;var i=Kn(this.rank),o=function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(a),d=0;d<s.length;d++)c[s[d]]=u[d];return c.join()}(t);this.userCode=`
    void main() {
      `+i+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},Lle=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var e=new Array(n.length),r=0;r<e.length;r++)e[r]=n[t[r]];if(this.outputShape=e,this.rank=e.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=Kn(this.rank),o=bz("rc",this.rank),s=new Array(this.rank);for(r=0;r<t.length;r++)s[t[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+e[this.rank-1],c="getChannel(getA("+s.join()+"), "+a+")";this.userCode=`
    void main() {
      `+i+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+u+`) {
        result[1] = `+c+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+e[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+u+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},GM=1.7580993408473768,KM=1.0507009873554805,zt=function(n,t){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Va="if (isnan(x)) return x;",Vle="return x;",WU="return abs(x);",zz=Va+`
  return (x < 0.0) ? 0.0 : x;
`,Wz=Va+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Hz="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ble=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+GM+`;
  float scale = `+KM+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,HU="return -x;",$U="return ceil(x);",qU="return floor(x);",GU="return exp(x);",KU="return exp(x) - 1.0;",Ule=Va+`
  return sin(x);
`,jle=Va+`
  return cos(x);
`,zle=Va+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Wle=Va+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Hle=Va+`
  return atan(x);
`,$le=Va+"return log(x + sqrt(x * x + 1.0));",qle=Va+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,Gle=Va+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,A1="return x;",Kle="return x;",$z=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,qz=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Gz=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,t_=function(n,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Yle=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var t=n.length,e=Lo("rc",t),r=Kn(t),i=function(a,u){if(a===1)return"rc";for(var c="",d=0;d<a;d++)c+=u[d],d<a-1&&(c+=",");return c}(t,e),o=e.slice(-2),s=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+i+`);

        setOutput(getChannel(packedInput, `+s+`));
      }
    `},D1={};function P1(n,t){if(t===void 0&&(t=!1),n==="linear")return t?Kle:Vle;if(n==="relu")return t?$z:zz;if(n==="elu")return t?Gz:Hz;if(n==="relu6")return t?qz:Wz;if(n==="prelu")return t?Ez:xz;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var Zle=600,Kz=function(n){function t(e){var r,i=n.call(this)||this;if(i.pendingRead=new WeakMap,i.pendingDisposal=new WeakSet,i.dataRefCount=new WeakMap,i.numBytesInGPU=0,i.uploadWaitMs=0,i.downloadWaitMs=0,i.warnedAboutMemory=!1,i.pendingDeletes=0,i.disposed=!1,!_e().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var o=Nu(_e().getNumber("WEBGL_VERSION"));i.binaryCache=((r=_e().getNumber("WEBGL_VERSION"))in D1||(D1[r]={}),D1[r]),i.gpgpu=new jz(o),i.canvas=o.canvas,i.gpgpuCreatedLocally=!0}else i.gpgpu=e,i.binaryCache={},i.gpgpuCreatedLocally=!1,i.canvas=e.gl.canvas;return i.textureManager=new Rle(i.gpgpu),i.numMBBeforeWarning=_e().global.screen==null?1024:_e().global.screen.height*_e().global.screen.width*window.devicePixelRatio*Zle/1024/1024,i.texData=new pz(i,ne),i}return Na(t,n),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,r,i){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(e),i==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:i,values:e,usage:gs.UPLOAD}),o},t.prototype.move=function(e,r,i,o){if(_e().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:i,dtype:o,values:r,usage:gs.UPLOAD})},t.prototype.readSync=function(e){var r=this.texData.get(e),i=r.values,o=r.dtype,s=r.complexTensors,a=r.slice,u=r.shape,c=r.isPacked;if(a!=null){var d=void 0;d=c?new t_(u,A1):new zt(u,A1);var h=this.runWebGLProgram(d,[{dataId:e,shape:u,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeData(h.dataId),p}if(i!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return i;var m,_,C=this.activeTimers!=null;return C&&(m=ka()),o==="complex64"?_=bM(s.real.dataSync(),s.imag.dataSync()):_=this.getValuesFromTexture(e),C&&(this.downloadWaitMs+=ka()-m),this.convertAndCacheOnCPU(e,_)},t.prototype.read=function(e){return tt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R,j,H,B,k;return nt(this,function(D){switch(D.label){case 0:if(this.pendingRead.has(e))return r=this.pendingRead.get(e),[2,new Promise(function(P){return r.push(P)})];if(i=this.texData.get(e),o=i.values,s=i.shape,a=i.slice,u=i.dtype,c=i.complexTensors,d=i.isPacked,a!=null)return h=void 0,h=d?new t_(s,A1):new zt(s,A1),p=this.runWebGLProgram(h,[{dataId:e,shape:s,dtype:u}],u),m=this.read(p.dataId),this.disposeData(p.dataId),[2,m];if(o!=null)return[2,this.convertAndCacheOnCPU(e)];if(!_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&_e().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return _=null,u!=="complex64"&&_e().get("WEBGL_BUFFER_SUPPORTED")&&(C=this.decode(e),x=this.texData.get(C.dataId),_=(k=this.gpgpu).createBufferFromTexture.apply(k,[x.texture].concat(o_(s)))),this.pendingRead.set(e,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:D.sent(),D.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return N=D.sent(),F=N[0],R=N[1],S=bM(F,R),[3,5];case 4:_==null?S=this.getValuesFromTexture(e):(j=ot(s),S=this.gpgpu.downloadFloat32MatrixFromBuffer(_,j)),D.label=5;case 5:return C!=null&&this.disposeData(C.dataId),H=this.convertAndCacheOnCPU(e,S),B=this.pendingRead.get(e),this.pendingRead.delete(e),B.forEach(function(P){return P(H)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,H]}})})},t.prototype.checkNumericalProblems=function(e){if(e!=null)for(var r=0;r<e.length;r++){var i=e[r];if(!Aj(i))throw _e().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.isPacked,u=ot(o);if(_e().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(e),d=this.texData.get(c.dataId),h=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(o_(o))).subarray(0,u);return this.disposeData(c.dataId),h}var p=_e().getBool("WEBGL_PACK")&&a===!0,m=p?B1(o):o,_=p?new ele(m):new Jce(m),C=this.runWebGLProgram(_,[{shape:m,dtype:s,dataId:e}],"float32"),x=this.texData.get(C.dataId),S=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(x.texture,x.texShape[0],x.texShape[1]).subarray(0,u);return this.disposeData(C.dataId),S},t.prototype.time=function(e){return tt(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return nt(this,function(d){switch(d.label){case 0:return r=this.activeTimers,i=[],o=!1,this.programTimersStack==null?(this.programTimersStack=i,o=!0):this.activeTimers.push(i),this.activeTimers=i,e(),s=Uc(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),a=Uc(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=r,o&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},_e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(s)]:[3,2];case 1:return c=d.sent(),u.kernelMs=hj(c),u.getExtraProfileInfo=function(){return c.map(function(h,p){return{name:a[p],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ka(),endMs:null}},t.prototype.endTimer=function(e){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ka(),e)},t.prototype.getQueryTime=function(e){return tt(this,void 0,void 0,function(){var r;return nt(this,function(i){return _e().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(r=e).endMs-r.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var r=this.texData.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var r=this.texData.get(e),i=r.texture,o=r.dtype,s=r.texShape,a=r.usage,u=r.isPacked,c=r.slice,d=c&&c.origDataId||e,h=this.dataRefCount.get(d);h>1?this.dataRefCount.set(d,h-1):(this.dataRefCount.delete(d),i!=null&&(this.numBytesInGPU-=this.computeBytes(s,o),this.textureManager.releaseTexture(i,s,a,u)));var p=this.texData.get(e);p.texture=null,p.texShape=null,p.isPacked=!1,p.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return _e().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ne.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,r){var i=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&e.every(function(o){return i.texData.get(o.dataId).texture==null&&o.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,r){var i=this.makeOutput(e.shape,"complex64");return this.texData.get(i.dataId).complexTensors={real:ne.keep(e.clone()),imag:ne.keep(r.clone())},i},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,r,i);if(ot(i)===0)return ci([],i,e.dtype);var o=this.texData.get(e.dataId).isPacked,s=VM(e.shape,r,i);if(o||!s){var a=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kle(i):new Mle(i),u=a.getCustomSetupFunc(r);return this.compileAndRun(a,[e],null,u)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,r,i)},t.prototype.shallowSlice=function(e,r,i){var o=this.texData.get(e.dataId),s=this.makeOutput(i,e.dtype),a=this.texData.get(s.dataId);Object.assign(a,o),a.shape=i,a.dtype=e.dtype;var u=BM(r,e.strides);o.slice&&(u+=o.slice.flatOffset),a.slice={flatOffset:u,origDataId:o.slice&&o.slice.origDataId||e.dataId};var c=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,c+1),s},t.prototype.stridedSlice=function(e,r,i,o){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,r,i,o);var s=ux(r,i,o);if(s.some(function(u){return u===0}))return ci([],s);var a=new Ole(r,o,s);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,r){var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ale(e.shape,r):new Tle(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.concat=function(e,r){if(e[0].dtype==="complex64"){var i=e.map(function(m){return Ys(m)}),o=e.map(function(m){return ku(m)});return Ei(this.concat(i,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,r);if(e.length===1)return e[0];if(e.length>_e().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var s=Math.floor(e.length/2),a=this.concat(e.slice(0,s),r),u=this.concat(e.slice(s),r);return this.concat([a,u],r)}if(_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var c=new Bce(e.map(function(m){return m.shape}),r);return this.compileAndRun(c,e)}var d=cf(e.map(function(m){return m.shape}),r),h=e.map(function(m){return m.as2D(-1,ot(m.shape.slice(r)))}),p=new Vce(h.map(function(m){return m.shape}));return this.compileAndRun(p,h).reshape(d)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,HU,e.dtype);var r=new zt(e.shape,HU);return this.compileAndRun(r,[e])},t.prototype.batchMatMul=function(e,r,i,o){var s=i?e.shape[2]:e.shape[1],a=o?r.shape[1]:r.shape[2],u=i?e.shape[1]:e.shape[2],c=e.shape[0];if((s===1||a===1)&&u>1e3){i&&(e=e.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var d=a===1?e:e.as3D(c,u,1),h=a===1?2:1,p=a===1?r.as3D(c,1,u):r;return this.multiply(d,p).sum(h,!0)}var m=ui(e.dtype,r.dtype),_=new HP(e.shape,[c,s,a],i,o);return this.compileAndRun(_,[e,r],m)},t.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,d=o?r.shape[2]:r.shape[1],h=s?i.shape[1]:i.shape[2],p=r.shape[0],m=ui(r.dtype,i.dtype),_=a!=null,C=c!=null,x=u?P1(u,!0):null,S=new HP(r.shape,[p,d,h],o,s,_,x,C),N=[r,i];return a&&N.push(a),c&&N.push(c),this.compileAndRun(S,N,m)},t.prototype.multiply=function(e,r){if(e.dtype==="complex64"){var i=this.texData.get(e.dataId),o=this.texData.get(r.dataId),s=new kU(Oce,e.shape,r.shape),a=new kU(Rce,e.shape,r.shape),u=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],c=this.compileAndRun(s,u),d=this.compileAndRun(a,u),h=this.complex(c,d);return c.dispose(),d.dispose(),h}if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.multiply(e,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,OU,e.dtype);var p=new wr(OU,e.shape,r.shape);return this.compileAndRun(p,[e,r],e.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){var u=[e,r,i],c=null;a!=null&&(c=a.shape,u.push(a));var d=null;if(s!=null&&(d=s.shape,u.push(s)),_e().getBool("WEBGL_PACK_NORMALIZATION")){var h=new kce(e.shape,r.shape,i.shape,c,d,o);return this.compileAndRun(h,u)}var p=new Mce(e.shape,r.shape,i.shape,c,d,o);return this.compileAndRun(p,u)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){var a=_e().getBool("WEBGL_PACK_NORMALIZATION")?new hle(e.shape,r,i,o,s):new lle(e.shape,r,i,o,s);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){var c=new dle(r.shape,o,s,a,u);return this.compileAndRun(c,[r,i,e])},t.prototype.tile=function(e,r){if(e.dtype==="string"){var i=this.readSync(e.dataId).map(function(s){return u_(s)});return _z(Mt(e.shape,e.dtype,i),r)}var o=new Nle(e.shape,r);return this.compileAndRun(o,[e])},t.prototype.pad=function(e,r,i){var o=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new yle(e.shape,r,i):new _le(e.shape,r,i);return this.compileAndRun(o,[e])},t.prototype.transpose=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,r);var i=_e().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lle(e.shape,r):new Fle(e.shape,r);return this.compileAndRun(i,[e])},t.prototype.gather=function(e,r,i){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.gather(e,r,i);var o=new sle(e.shape,r.size,i);return this.compileAndRun(o,[e,r])},t.prototype.batchToSpaceND=function(e,r,i){Q(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(h,p){return h*p}),s=Z1(e.shape,r,o),a=Q1(s.length,r.length),u=X1(e.shape,r,o),c=az(i,r.length),d=uz(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,d)},t.prototype.spaceToBatchND=function(e,r,i){Q(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var o=r.reduce(function(p,m){return p*m}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=Z1(u.shape,r,o,!1),d=Q1(c.length,r.length,!1),h=X1(u.shape,r,o,!1);return u.reshape(c).transpose(d).reshape(h)},t.prototype.reduce=function(e,r,i){var o=e.shape[0],s=e.shape[1],a=U1(s),u=new ble({windowSize:a,inSize:s,batchSize:o},r),c=this.compileAndRun(u,[e],i);return c.shape[1]===1?c:this.reduce(c,r,i)},t.prototype.argReduce=function(e,r,i){i===void 0&&(i=null);var o=e.shape[0],s=e.shape[1];i!=null&&(o=i.shape[0],s=i.shape[1]);var a=U1(s),u=new Cce({windowSize:a,inSize:s,batchSize:o},r,i==null),c=[e];i!=null&&c.push(i);var d=this.compileAndRun(u,c,"int32");return d.shape[1]===1?d:this.argReduce(e,r,d)},t.prototype.argReducePacked=function(e,r,i){i===void 0&&(i=null);var o=i!=null?i.shape:e.shape,s=U1(o[o.length-1]),a=new Ace(o,s,r,i==null),u=i==null?[e]:[e,i],c=this.compileAndRun(a,u,"int32");return c.rank===e.rank?this.argReducePacked(e,r,c):c},t.prototype.sum=function(e,r){Fo("sum",r,e.rank);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s),u=BP(e.dtype);return this.reduce(a,"sum",u).reshape(o)},t.prototype.prod=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,r);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s),u=BP(e.dtype);return this.reduce(a,"prod",u).reshape(o)},t.prototype.unsortedSegmentSum=function(e,r,i){var o=0,s=Fa([o],e.rank),a=e;s!=null&&(a=e.transpose(s),o=La(1,e.rank)[0]);var u=function(m,_,C){for(var x=[],S=m.length,N=0;N<S;N++)N!==_?x.push(m[N]):x.push(C);return x}(a.shape,o,i),c=ot([a.shape[o]]),d=a.as2D(-1,c),h=BP(e.dtype),p=this.segOpCompute(d,"unsortedSegmentSum",r,h,i).reshape(u);return s!=null&&(p=p.transpose(ox(s))),p},t.prototype.segOpCompute=function(e,r,i,o,s){var a=e.shape[0],u=e.shape[1],c=function(p,m){var _,C=!1;for(p<=LM?(_=p,C=!0):_=q1(p,Math.floor(Math.sqrt(p)));!C;)_>m||_===p?C=!0:_=q1(p,_+1);return _}(u,s),d=new Dle({windowSize:c,inSize:u,batchSize:a,numSegments:s},r),h=this.compileAndRun(d,[e,i],o);return h.shape[1]===s?h:(i=Y1(0,s).tile([u/c]),this.segOpCompute(h,r,i,o,s))},t.prototype.argMinMaxReduce=function(e,r,i){var o=[r];if(Fo("arg"+i.charAt(0).toUpperCase()+i.slice(1),o,e.rank),!_e().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var s=Ii(e.shape,o),a=s[0],u=ot(s[1]),c=e.as2D(-1,u);return this.argReduce(c,i).reshape(a)}return this.argReducePacked(e,i)},t.prototype.argMin=function(e,r){return this.argMinMaxReduce(e,r,"min")},t.prototype.argMax=function(e,r){return this.argMinMaxReduce(e,r,"max")},t.prototype.cumsum=function(e,r,i,o){if(r!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+r);var s=new Kce(e.shape,i,o);return this.compileAndRun(s,[e])},t.prototype.equal=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(equal(a, b));
`,"bool");var i=new wr("return float(a == b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.notEqual=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(notEqual(a, b));
`,"bool");var i=new wr("return float(a != b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.less=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.less(e,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThan(a, b));
`,"bool");var i=new wr("return float(a < b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.lessEqual=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var i=new wr("return float(a <= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greater=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.greater(e,r);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThan(a, b));
`,"bool");var i=new wr("return float(a > b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.greaterEqual=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var i=new wr("return float(a >= b);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalNot=function(e){var r=new zt(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[e])},t.prototype.logicalAnd=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var i=new wr("return float(a >= 1.0 && b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.logicalOr=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var i=new wr("return float(a >= 1.0 || b >= 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r],"bool")},t.prototype.select=function(e,r,i){var o=new Ple(e.rank,r.shape,r.rank);return this.compileAndRun(o,[e,r,i],ui(r.dtype,i.dtype))},t.prototype.where=function(e){G1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=e.dataSync();return $M(e.shape,r)},t.prototype.topk=function(e,r,i){return yz(e.dataSync(),e.shape,e.dtype,r)},t.prototype.min=function(e,r){Fo("min",r,e.rank);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s);return this.reduce(a,"min",a.dtype).reshape(o)},t.prototype.minimum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.minimum(e,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new wr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.mod=function(e,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new wr(`if (b == 0.0) return NAN;
  return mod(a, b);`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.max=function(e,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,r);Fo("max",r,e.rank);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s);return this.reduce(a,"max",a.dtype).reshape(o)},t.prototype.maximum=function(e,r){if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.maximum(e,r);var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new wr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.all=function(e,r){Fo("all",r,e.rank);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s);return this.reduce(a,"all",a.dtype).reshape(o)},t.prototype.any=function(e,r){Fo("any",r,e.rank);var i=Ii(e.shape,r),o=i[0],s=ot(i[1]),a=e.as2D(-1,s);return this.reduce(a,"any",a.dtype).reshape(o)},t.prototype.realDivide=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var i=new wr(`
if (a == b) {
  return 1.0;
};
return a / b;`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"float32")},t.prototype.floorDiv=function(e,r){if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var i=new wr(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,e.shape,r.shape);return this.compileAndRun(i,[e,r],"int32")},t.prototype.add=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,zP);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.add(e,r);var i=ui(e.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,zP,i);var o=new wr(zP,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.packedUnaryOp=function(e,r,i){var o=new t_(e.shape,r);return this.compileAndRun(o,[e],i)},t.prototype.packedBinaryOp=function(e,r,i,o,s){s===void 0&&(s=!1);var a=new Lc(i,e.shape,r.shape,s);return this.compileAndRun(a,[e,r],o)},t.prototype.complexSeparableBinaryOp=function(e,r,i){var o=this,s=this.texData.get(e.dataId),a=this.texData.get(r.dataId),u=[[s.complexTensors.real,a.complexTensors.real],[s.complexTensors.imag,a.complexTensors.imag]].map(function(p){var m=p[0],_=p[1],C=o.makeComplexComponentTensorInfo(e,m),x=o.makeComplexComponentTensorInfo(r,_),S=new wr(i,e.shape,r.shape);return o.compileAndRun(S,[C,x],ui(m.dtype,_.dtype))}),c=u[0],d=u[1],h=this.complex(c,d);return c.dispose(),d.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(e,r){return{dataId:r.dataId,dtype:r.dtype,shape:e.shape}},t.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>_e().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(e.length/2),i=this.addN(e.slice(0,r)),o=this.addN(e.slice(r));return this.addN([i,o])}var s=e.map(function(c){return c.dtype}).reduce(function(c,d){return ui(c,d)}),a=e.map(function(c){return c.shape}),u=_e().getBool("WEBGL_PACK")?new wce(e[0].shape,a):new bce(e[0].shape,a);return this.compileAndRun(u,e,s)},t.prototype.subtract=function(e,r){if(e.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(e,r,WP);if(this.shouldExecuteOnCPU([e,r]))return this.cpuBackend.subtract(e,r);var i=ui(e.dtype,r.dtype);if(_e().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,r,WP,e.dtype);var o=new wr(WP,e.shape,r.shape);return this.compileAndRun(o,[e,r],i)},t.prototype.pow=function(e,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new wr(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,e.shape,r.shape),o=ui(e.dtype,r.dtype);return this.compileAndRun(i,[e,r],o)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,$U,e.dtype);var r=new zt(e.shape,$U);return this.compileAndRun(r,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qU,e.dtype);var r=new zt(e.shape,qU);return this.compileAndRun(r,[e])},t.prototype.sign=function(e){var r=new zt(e.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[e])},t.prototype.isNaN=function(e){var r=new zt(e.shape,"return float(isnan(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isInf=function(e){var r=new zt(e.shape,"return float(isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.isFinite=function(e){var r=new zt(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[e],"bool")},t.prototype.round=function(e){var r=new zt(e.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,GU,e.dtype);var r=new zt(e.shape,GU);return this.compileAndRun(r,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,KU,e.dtype);var r=new zt(e.shape,KU);return this.compileAndRun(r,[e])},t.prototype.softmax=function(e,r){var i=zr([r],e.shape),o=this.max(e,i),s=ho(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,e.dtype);var r=new zt(e.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[e])},t.prototype.log1p=function(e){var r=new zt(e.shape,"return log(1.0 + x);");return this.compileAndRun(r,[e])},t.prototype.sqrt=function(e){var r=new zt(e.shape,"return sqrt(x);");return this.compileAndRun(r,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var r=new zt(e.shape,"return inversesqrt(x);");return this.compileAndRun(r,[e])},t.prototype.reciprocal=function(e){var r=new zt(e.shape,"return 1.0 / x;");return this.compileAndRun(r,[e])},t.prototype.relu=function(e){var r;return r=_e().getBool("WEBGL_PACK")?new t_(e.shape,$z):new zt(e.shape,zz),this.compileAndRun(r,[e])},t.prototype.relu6=function(e){var r;return r=_e().getBool("WEBGL_PACK")?new t_(e.shape,qz):new zt(e.shape,Wz),this.compileAndRun(r,[e])},t.prototype.prelu=function(e,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(Ez,e.shape,r.shape):new wr(xz,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.elu=function(e){if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Gz,e.dtype);var r=new zt(e.shape,Hz);return this.compileAndRun(r,[e])},t.prototype.eluDer=function(e,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,e.shape,r.shape):new wr("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.selu=function(e){var r=new zt(e.shape,Ble);return this.compileAndRun(r,[e])},t.prototype.int=function(e){var r=new zt(e.shape,"return float(int(x));");return this.compileAndRun(r,[e],"int32")},t.prototype.clip=function(e,r,i){var o,s=(o=_e().getBool("WEBGL_PACK_CLIP")?new Fce(e.shape):new Nce(e.shape)).getCustomSetupFunc(r,i);return this.compileAndRun(o,[e],null,s)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(_e().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,WU,e.dtype);var r=new zt(e.shape,WU);return this.compileAndRun(r,[e])},t.prototype.complexAbs=function(e){var r=this.texData.get(e.dataId),i=new Lce(e.shape),o=[this.makeComplexComponentTensorInfo(e,r.complexTensors.real),this.makeComplexComponentTensorInfo(e,r.complexTensors.imag)];return this.compileAndRun(i,o)},t.prototype.sigmoid=function(e){var r=new zt(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[e])},t.prototype.softplus=function(e){var r=new zt(e.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[e])},t.prototype.sin=function(e){var r=new zt(e.shape,Ule);return this.compileAndRun(r,[e])},t.prototype.cos=function(e){var r=new zt(e.shape,jle);return this.compileAndRun(r,[e])},t.prototype.tan=function(e){var r=new zt(e.shape,"return tan(x);");return this.compileAndRun(r,[e])},t.prototype.asin=function(e){var r=new zt(e.shape,zle);return this.compileAndRun(r,[e])},t.prototype.acos=function(e){var r=new zt(e.shape,Wle);return this.compileAndRun(r,[e])},t.prototype.atan=function(e){var r=new zt(e.shape,Hle);return this.compileAndRun(r,[e])},t.prototype.atan2=function(e,r){var i=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,e.shape,r.shape):new wr(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,e.shape,r.shape);return this.compileAndRun(i,[e,r])},t.prototype.sinh=function(e){var r=new zt(e.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},t.prototype.cosh=function(e){var r=new zt(e.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[e])},t.prototype.tanh=function(e){var r=new zt(e.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[e])},t.prototype.asinh=function(e){var r=new zt(e.shape,$le);return this.compileAndRun(r,[e])},t.prototype.acosh=function(e){var r=new zt(e.shape,qle);return this.compileAndRun(r,[e])},t.prototype.atanh=function(e){var r=new zt(e.shape,Gle);return this.compileAndRun(r,[e])},t.prototype.erf=function(e){var r=new zt(e.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[e])},t.prototype.step=function(e,r){var i=new zt(e.shape,function(o){return o===void 0&&(o=0),Va+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `}(r));return this.compileAndRun(i,[e])},t.prototype.conv2dByMatMul=function(e,r,i,o,s,a){var u=e.shape,c=this.texData.get(e.dataId),d=i.inChannels,h=u[0]*u[1]*u[2],p=i.outChannels,m=i.dataFormat==="channelsLast",_=(h===1||p===1)&&d>1e3,C=u[2]%2!=0&&!!c.isPacked;if(_||!_e().getBool("WEBGL_LAZILY_UNPACK")||!_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!C){var x=m?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],S=this.reshape(e,[1,x,i.inChannels]),N=this.reshape(r,[1,i.inChannels,i.outChannels]);return this.reshape(this.fusedBatchMatMul({a:S,b:N,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),i.outShape)}var F=m?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),R={dataId:e.dataId,shape:[1,F,i.inChannels],dtype:e.dtype},j=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Q(i_(c.shape,R.shape),function(){return"packed reshape "+c.shape+" to "+R.shape+" isn't free"});var H=this.reshape(r,[1,i.inChannels,i.outChannels]),B=this.fusedBatchMatMul({a:R,b:H,transposeA:!1,transposeB:!1,bias:o,activation:s,preluActivationWeights:a}),k=this.texData.get(B.dataId);return Q(k.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=j,k.shape=i.outShape,ne.makeTensorFromDataId(B.dataId,i.outShape,B.dtype)},t.prototype.conv2dWithIm2Row=function(e,r,i,o,s,a){var u=i.filterWidth,c=i.filterHeight,d=i.inChannels,h=i.outWidth,p=i.outHeight,m=i.dataFormat==="channelsLast",_=u*c*d,C=p*h,x=[_,C],S=e.squeeze([0]),N=r.reshape([1,_,-1]),F=new cle(x,S.shape,i),R=this.compileAndRun(F,[S]).reshape([1,x[0],x[1]]),j=o!=null,H=a!=null,B=s?P1(s,!0):null,k=new HP(R.shape,[1,C,i.outChannels],!0,!1,j,B,H),D=[R,N];o&&D.push(o),H&&D.push(a);var P=this.compileAndRun(k,D);return m?P.reshape([1,p,h,i.outChannels]):P.reshape([1,i.outChannels,p,h])},t.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,i,o,s,a,u);if(_e().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,i,o,s,a,u);var c=s!=null,d=u!=null,h=a?P1(a,!1):null,p=new RU(o,c,h,d),m=[r,i];return s&&m.push(s),u&&m.push(u),this.compileAndRun(p,m)},t.prototype.conv2d=function(e,r,i){if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(e,r,i);if(_e().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,r,i);var o=new RU(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerInput=function(e,r,i){var o=new jce(i);return this.compileAndRun(o,[e,r])},t.prototype.conv2dDerFilter=function(e,r,i){var o=new Uce(i);return this.compileAndRun(o,[e,r])},t.prototype.fusedDepthwiseConv2D=function(e){var r,i=e.input,o=e.filter,s=e.convInfo,a=e.bias,u=e.activation,c=e.preluActivationWeights,d=_e().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1,h=u?P1(u,d):null,p=[i,o],m=a!=null,_=c!=null;return m&&p.push(a),_&&p.push(c),d?(r=new FU(s,m,h,_),this.compileAndRun(r,p)):(r=new NU(s,m,h,_),this.compileAndRun(r,p))},t.prototype.depthwiseConv2D=function(e,r,i){var o;return _e().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1?(o=new FU(i),this.compileAndRun(o,[e,r])):(o=new NU(i),this.compileAndRun(o,[e,r]))},t.prototype.depthwiseConv2DDerInput=function(e,r,i){var o=new $ce(i);return this.compileAndRun(o,[e,r])},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){var o=new Hce(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3d=function(e,r,i){var o=new qce(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerInput=function(e,r,i){var o=new Wce(i);return this.compileAndRun(o,[e,r])},t.prototype.conv3dDerFilter=function(e,r,i){var o=new zce(i);return this.compileAndRun(o,[e,r])},t.prototype.maxPool=function(e,r){var i=new $P(r,"max",!1);return this.compileAndRun(i,[e])},t.prototype.avgPool=function(e,r){var i=new $P(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPoolBackprop=function(e,r,i,o){var s=new $P(o,"max",!0),a=this.compileAndRun(s,[r]),u=new fle(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.avgPoolBackprop=function(e,r,i){var o=new Dce(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.cast=function(e,r){return jM(e,r,this)},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var d=new Array(i);for(a=0;a<d.length;a++)u[r]=a,d[a]=this.slice(e,u,c).reshape(o);return d},t.prototype.avgPool3d=function(e,r){var i=new qP(r,"avg",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,r,i){var o=new Pce(i);return this.compileAndRun(o,[e],r.dtype)},t.prototype.maxPool3d=function(e,r){var i=new qP(r,"max",!1);return this.compileAndRun(i,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,r,i,o){var s=new qP(o,"max",!0),a=this.compileAndRun(s,[r]),u=new ple(o),c=this.compileAndRun(u,[e,a],r.dtype);return a.dispose(),c},t.prototype.reshape=function(e,r){var i=this.texData.get(e.dataId);if(i.isPacked&&!i_(e.shape,r)&&(i.texture===null||!i_(i.shape,r))){var o=this.packedReshape(e,r);return ne.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return ex(e,r)},t.prototype.resizeBilinear=function(e,r,i,o){var s=_e().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ele(e.shape,r,i,o):new xle(e.shape,r,i,o);return this.compileAndRun(s,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,r,i){var o=new Cle(e,r,i);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighbor=function(e,r,i,o){var s=new Sle(e.shape,r,i,o);return this.compileAndRun(s,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){var o=new Ile(e,r,i);return this.compileAndRun(o,[e])},t.prototype.multinomial=function(e,r,i,o){var s=r?e:mo(e),a=s.shape[0],u=s.shape[1],c=new mle(a,u,i),d=c.getCustomSetupFunc(o);return this.compileAndRun(c,[s],"int32",d)},t.prototype.oneHot=function(e,r,i,o){var s=new gle(e.size,r,i,o);return this.compileAndRun(s,[e])},t.prototype.diag=function(e){var r=new Xce(e.size);return this.compileAndRun(r,[e])},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return G1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),WM(e.dataSync(),r.dataSync(),i,o,s)},t.prototype.cropAndResize=function(e,r,i,o,s,a){var u=new Gce(e.shape,r.shape,o,s,a);return this.compileAndRun(u,[e,r,i],"float32")},t.prototype.depthToSpace=function(e,r,i){Q(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var o=e.shape[0],s=i==="NHWC"?e.shape[1]:e.shape[2],a=i==="NHWC"?e.shape[2]:e.shape[3],u=i==="NHWC"?e.shape[3]:e.shape[1],c=s*r,d=a*r,h=u/(r*r),p=new Qce(i==="NHWC"?[o,c,d,h]:[o,h,c,d],r,i);return this.compileAndRun(p,[e])},t.prototype.split=function(e,r,i){return vz(e,r,i)},t.prototype.scatterND=function(e,r,i){var o=f_(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,d=o.outputSize,h=[d/u,u],p=e.reshape([a,s]),m=r.reshape([a,u]);if(d===0)return ex(ci([]),i);var _=Ue(0),C=new UU(a,s,p.rank,m.rank,c,h);return this.compileAndRun(C,[m,p,_]).reshape(i)},t.prototype.sparseToDense=function(e,r,i,o){var s=f_(0,e,i),a=s.sliceRank,u=s.numUpdates,c=s.strides,d=s.outputSize,h=new UU(u,a,e.rank,r.rank,c,[d,1],!1);return this.compileAndRun(h,[r,e,o]).reshape(i)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,r){var i=this.texData.get(e.dataId),o=new VU(rle,e.shape,r),s=new VU(ile,e.shape,r),a=[this.makeComplexComponentTensorInfo(e,i.complexTensors.real),this.makeComplexComponentTensorInfo(e,i.complexTensors.imag)],u=this.compileAndRun(o,a),c=this.compileAndRun(s,a),d=this.complex(u,c).as2D(e.shape[0],e.shape[1]);return u.dispose(),c.dispose(),d},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=FM(e,r),a=s[0],u=s[1],c=s[2],d=s[3],h=r.reshape([u,o]),p=e.reshape([e.size/c,c]),m=new ale(o,d,[u,c]);return this.compileAndRun(m,[p,h]).reshape(a)},t.prototype.fill=function(e,r,i){if((i=i||Gm(r))==="string"){var o=a_(i,ot(e));return o.fill(r),ne.makeTensor(o,e,i,this)}var s=new ole(e,r),a=s.getCustomSetupFunc(r);return this.compileAndRun(s,[],i,a)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},t.prototype.linspace=function(e,r,i){return zM(e,r,i)},t.prototype.makeTensorInfo=function(e,r){var i=this.write(null,e,r);return this.texData.get(i).usage=null,{dataId:i,shape:e,dtype:r}},t.prototype.makeOutput=function(e,r){var i=this.makeTensorInfo(e,r).dataId;return ne.makeTensorFromDataId(i,e,r,this)},t.prototype.unpackTensor=function(e){var r=new Yle(e.shape);return this.runWebGLProgram(r,[e],e.dtype)},t.prototype.packTensor=function(e){var r=new vle(e.shape);return this.runWebGLProgram(r,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,r){var i=[d_(e.shape)].concat(h_(e.shape)),o={dtype:e.dtype,shape:i,dataId:e.dataId},s=[d_(r)].concat(h_(r)),a=new wle(s,i),u=this.runWebGLProgram(a,[o],e.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(e){var r,i=this.texData.get(e),o=i.isPacked,s=i.shape,a=i.dtype,u=B1(s);return r=o?new Zce(u):new Yce(u),{dtype:a,shape:s,dataId:this.runWebGLProgram(r,[{shape:u,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,r,i,o,s){var a=this;s===void 0&&(s=!1);var u=this.makeTensorInfo(e.outputShape,i),c=this.texData.get(u.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===l_.DENSE){var d=o_(e.outputShape);c.texShape=d.map(function(F){return 2*F})}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),ot(u.shape)===0)return c.values=$m(u.dtype,0),u;var h=[],p=r.map(function(F){if(F.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var R=a.texData.get(F.dataId);if(R.texture==null){if(!e.packedInputs&&ot(F.shape)<=_e().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:F.shape,texData:null,isUniform:!0,uniformValues:R.values};e.packedInputs&&(R.isPacked=!0,R.shape=F.shape)}else if(!!R.isPacked!=!!e.packedInputs)F=R.isPacked?a.unpackTensor(F):a.packTensor(F),h.push(F),R=a.texData.get(F.dataId);else if(R.isPacked&&!i_(R.shape,F.shape)){var j=F,H=F.shape;F.shape=R.shape,F=a.packedReshape(F,H),h.push(F),R=a.texData.get(F.dataId),j.shape=H}return a.uploadToGPU(F.dataId),{shape:F.shape,texData:R,isUniform:!1}});this.uploadToGPU(u.dataId);var m,_={shape:u.shape,texData:c,isUniform:!1},C=function(F,R,j){var H="";R.concat(j).forEach(function(D){var P=D.texData!=null&&D.texData.slice!=null&&D.texData.slice.flatOffset>0,z=D.isUniform?"uniform":D.texData.texShape;H+=D.shape+"_"+z+"_"+P});var B=F.userCode,k=F.constructor.name;return k+="_"+H+"_"+B}(e,p,_),x=this.getAndSaveBinary(C,function(){return function(F,R,j,H){var B=R.userCode,k=j.map(function(J,ie){var le={logicalShape:J.shape,texShape:J.isUniform?null:J.texData.texShape,isUniform:J.isUniform,isPacked:!J.isUniform&&J.texData.isPacked,flatOffset:null};return J.texData!=null&&J.texData.slice!=null&&J.texData.slice.flatOffset>0&&(le.flatOffset=J.texData.slice.flatOffset),{name:R.variableNames[ie],shapeInfo:le}}),D=k.map(function(J){return J.shapeInfo}),P={logicalShape:H.shape,texShape:H.texData.texShape,isUniform:!1,isPacked:H.texData.isPacked,flatOffset:null},z=xce(k,P,B,R.packedInputs),U=F.createProgram(z),$=null,ae=F.getUniformLocation(U,"NAN",!1);_e().getNumber("WEBGL_VERSION")===1&&($=F.getUniformLocation(U,"INFINITY",!1));for(var de={},X=0;X<R.variableNames.length;X++){var re=R.variableNames[X];de[re]=F.getUniformLocation(U,re,!1),de["offset"+re]=F.getUniformLocation(U,"offset"+re,!1)}return{program:R,source:z,webGLProgram:U,uniformLocations:de,inShapeInfos:D,outShapeInfo:P,infLoc:$,nanLoc:ae}}(a.gpgpu,e,p,_)}),S=this.activeTimers!=null;if(S&&(m=this.startTimer()),function(F,R,j,H,B){BU(R.inShapeInfos,j),BU([R.outShapeInfo],[H]);var k=H.texData.texture,D=H.texData.texShape;H.texData.isPacked?F.setOutputPackedMatrixTexture(k,D[0],D[1]):F.setOutputMatrixTexture(k,D[0],D[1]),F.setProgram(R.webGLProgram),_e().getNumber("WEBGL_VERSION")===1&&R.infLoc!==null&&F.gl.uniform1f(R.infLoc,1/0),R.nanLoc!==null&&F.gl.uniform1f(R.nanLoc,NaN),j.forEach(function(P,z){var U=R.program.variableNames[z],$=R.uniformLocations[U],ae=R.uniformLocations["offset"+U];if($!=null)if(P.isUniform)if(ot(P.shape)<2)F.gl.uniform1f($,P.uniformValues[0]);else{var de=P.uniformValues;de instanceof Float32Array||(de=new Float32Array(de)),F.gl.uniform1fv($,de)}else P.texData.slice!=null&&ae!=null&&F.gl.uniform1i(ae,P.texData.slice.flatOffset),F.setInputMatrixTexture(P.texData.texture,$,z)}),B?.(F,R.webGLProgram),F.executeProgram()}(this.gpgpu,x,p,_,o),h.forEach(function(F){return a.disposeData(F.dataId)}),S&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)})),!_e().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){var N=this.unpackTensor(u);return this.disposeData(u.dataId),N}return u},t.prototype.compileAndRun=function(e,r,i,o,s){s===void 0&&(s=!1),i=i||r[0].dtype;var a=this.runWebGLProgram(e,r,i,o,s);return ne.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,r){return e in this.binaryCache||(this.binaryCache[e]=r()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(_e().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){e.gpgpu.deleteProgram(e.binaryCache[r].webGLProgram),delete e.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=ke(function(){if(!_e().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=_e().getBool("DEBUG");_e().set("DEBUG",!1);var i=e.abs(Ue(1e-8)).dataSync()[0];if(_e().set("DEBUG",r),i>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var r,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.values,u=i.texture,c=i.usage,d=i.isPacked;if(u==null){var h,p=this.activeTimers!=null;p&&(h=ka());var m=i.texShape;if(m==null&&(m=$j(o,d),i.texShape=m),a!=null){var _=B1(o),C=void 0,x=m[1],S=m[0],N=a instanceof Uint8Array;d?(x=(r=v_(m[0],m[1]))[0],S=r[1],C=new nle(_,[S,x],N)):C=new tle(_,[S,x],N);var F=this.makeTensorInfo([S,x],s);this.texData.get(F.dataId).usage=N?gs.PIXELS:gs.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(F.dataId),x,S,a);var R=this.runWebGLProgram(C,[F],s,null,!0),j=this.texData.get(R.dataId);i.texture=j.texture,i.texShape=j.texShape,i.isPacked=j.isPacked,i.usage=j.usage,this.disposeData(F.dataId),this.texData.delete(R.dataId),i.values=null,p&&(this.uploadWaitMs+=ka()-h)}else{var H=this.acquireTexture(m,c,s,d);i.texture=H}}},t.prototype.convertAndCacheOnCPU=function(e,r){var i=this.texData.get(e),o=i.dtype;return this.releaseGPUData(e),r!=null&&(i.values=function(s,a){if(a==="float32"||a==="complex64")return s;if(a==="int32"||a==="bool"){for(var u=a==="int32"?new Int32Array(s.length):new Uint8Array(s.length),c=0;c<u.length;++c)u[c]=Math.round(s[c]);return u}throw new Error("Unknown dtype "+a)}(r,o)),i.values},t.prototype.acquireTexture=function(e,r,i,o){if(this.numBytesInGPU+=this.computeBytes(e,i),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+s+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,r,o)},t.prototype.computeBytes=function(e,r){return e[0]*e[1]*TM(r)},t}(mz);Sj()&&ne.registerBackend("webgl",function(){return new Kz},2);var Qle=te({square_:function(n){var t=Y(n,"x","square"),e=[t];return ne.runKernelFunc(function(r,i){return i([t]),r.square(t)},{x:t},null,"Square",{},e,[])}}),g_="SquaredDifference",Yz=te({squaredDifference_:function(n,t){var e,r=Y(n,"a","squaredDifference"),i=Y(t,"b","squaredDifference");e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape);var o={a:r,b:i},s=[r,i];return ne.runKernelFunc(function(a,u){var c=a.squaredDifference(r,i);return u([r,i]),c},o,function(a,u){var c=u[0],d=u[1],h=Ue(2);return{a:function(){return a.mul(c.sub(d).mul(h))},b:function(){return a.mul(d.sub(c).mul(h))}}},g_,{},s,[])}}),Xle=te({abs_:function(n){var t=Y(n,"x","abs");return t.dtype==="complex64"?ne.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):ne.runKernelFunc(function(e,r){var i=e.abs(t);return r([t]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mul(i.toFloat().step(-1))}}},"Abs")}}),Jle=te({acos_:function(n){var t=Y(n,"x","acos");return ne.runKernelFunc(function(e,r){var i=e.acos(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ue(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),ede=te({acosh_:function(n){var t=Y(n,"x","acosh");return ne.runKernelFunc(function(e,r){var i=e.acosh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),tde=te({asin_:function(n){var t=Y(n,"x","asin");return ne.runKernelFunc(function(e,r){var i=e.asin(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ue(1).sub(i.toFloat().square()).sqrt())}}})}}),nde=te({asinh_:function(n){var t=Y(n,"x","asinh");return ne.runKernelFunc(function(e,r){var i=e.asinh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.divStrict(Ue(1).add(i.toFloat().square()).sqrt())}}})}}),rde=te({atan_:function(n){var t=Y(n,"x","atan");return ne.runKernelFunc(function(e,r){var i=e.atan(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().square().add(1))}}})}}),ide=te({atanh_:function(n){var t=Y(n,"x","atanh");return ne.runKernelFunc(function(e,r){var i=e.atanh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(Ue(1).sub(i.toFloat().square()))}}})}}),ode=te({ceil_:function(n){var t=Y(n,"x","ceil");return ne.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),y_=te({clipByValue_:function(n,t,e){var r=Y(n,"x","clipByValue");Q(t<=e,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+e+")."});var i=[r],o={min:t,max:e};return ne.runKernelFunc(function(s,a){var u=s.clip(r,t,e);return a([r]),u},{x:r},function(s,a){var u=a[0];return{x:function(){return s.where(u.greaterEqual(t).logicalAnd(u.lessEqual(e)),an(s))}}},"ClipByValue",o,i)}}),sde=te({cos_:function(n){var t=Y(n,"x","cos"),e=[t];return ne.runKernelFunc(function(r,i){var o=r.cos(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}},"Cos",{},e)}}),ade=te({cosh_:function(n){var t=Y(n,"x","cosh");return ne.runKernelFunc(function(e,r){var i=e.cosh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(e)}}})}}),ude=te({erf_:function(n){var t=Y(n,"x","erf");return Q(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),ne.runKernelFunc(function(e,r){var i=e.erf(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),dx=te({exp_:function(n){var t=Y(n,"x","exp");return ne.runKernelFunc(function(e,r){var i=e.exp(t);return r([i]),i},{x:t},function(e,r){return{x:function(){return e.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),cde=te({expm1_:function(n){var t=Y(n,"x","expm1");return ne.runKernelFunc(function(e,r){var i=e.expm1(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.exp())}}})}}),lde=te({floor_:function(n){var t=Y(n,"x","floor");return ne.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),dde=te({log_:function(n){var t=Y(n,"x","log"),e=[t];return ne.runKernelFunc(function(r,i){var o=r.log(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return r.div(o.toFloat())}}},"Log",{},e)}}),hde=te({log1p_:function(n){var t=Y(n,"x","log1p");return ne.runKernelFunc(function(e,r){var i=e.log1p(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.add(1))}}})}}),fde=te({logSigmoid_:function(n){var t=Y(n,"x","logSigmoid");return ne.runKernelFunc(function(e,r){var i=e.softplus(t.neg()).neg();return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.neg().sigmoid())}}})}}),b_=te({neg_:function(n){var t=Y(n,"x","neg"),e=[t];return ne.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},e)}}),pde=te({reciprocal_:function(n){var t=Y(n,"x","reciprocal");return ne.runKernelFunc(function(e,r){var i=e.reciprocal(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.square().neg())}}})}}),mde=te({round_:function(n){var t=Y(n,"x","round");return ne.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),Zz=te({rsqrt_:function(n){var t=Y(n,"x","rsqrt"),e=[t];return ne.runKernelFunc(function(r,i){var o=r.rsqrt(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},e)}}),YM=te({sigmoid_:function(n){var t=Y(n,"x","sigmoid");return ne.runKernelFunc(function(e,r){var i=e.sigmoid(t);return r([i]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mul(i.mul(Ue(1).sub(i)))}}},"Sigmoid")}}),gde=te({sign_:function(n){var t=Y(n,"x","sign");return ne.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),vde=te({isNaN_:function(n){var t=Y(n,"x","isNaN");return ne.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),_de=te({isInf_:function(n){var t=Y(n,"x","isInf");return ne.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),yde=te({isFinite_:function(n){var t=Y(n,"x","isFinite");return ne.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return an(e)}}})}}),bde=te({sin_:function(n){var t=Y(n,"x","sin"),e=[t];return ne.runKernelFunc(function(r,i){var o=r.sin(t);return i([t]),o},{x:t},function(r,i){var o=i[0];return{x:function(){return o.toFloat().cos().mul(r)}}},"Sin",{},e)}}),wde=te({sinh_:function(n){var t=Y(n,"x","sinh");return ne.runKernelFunc(function(e,r){var i=e.sinh(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(e)}}})}}),Cde=te({softplus_:function(n){var t=Y(n,"x","softplus");return ne.runKernelFunc(function(e,r){var i=e.softplus(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.mul(i.sigmoid())}}})}}),xde=te({sqrt_:function(n){var t=Y(n,"x","sqrt");return ne.runKernelFunc(function(e,r){var i=e.sqrt(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.toFloat().sqrt().mul(2))}}})}}),Ede=te({step_:function(n,t){t===void 0&&(t=0);var e=Y(n,"x","step");return ne.runKernelFunc(function(r){return r.step(e,t)},{$x:e},function(r){return{$x:function(){return an(r)}}})}}),Ide=te({tan_:function(n){var t=Y(n,"x","tan");return ne.runKernelFunc(function(e,r){var i=e.tan(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return e.div(i.cos().square())}}})}}),Sde=te({tanh_:function(n){var t=Y(n,"x","tanh");return ne.runKernelFunc(function(e,r){var i=e.tanh(t);return r([i]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return Ue(1).sub(i.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function Qz(n,t,e,r,i,o){var s,a,u=Y(n,"x","batchNorm"),c=Y(t,"mean","batchNorm"),d=Y(e,"variance","batchNorm");return i!=null&&(s=Y(i,"scale","batchNorm")),r!=null&&(a=Y(r,"offset","batchNorm")),Q(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Q(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),Q(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."}),s!=null&&Q(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),a!=null&&Q(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),w_(u,c,d,a,s,o)}function Xz(n,t,e,r,i,o){var s,a,u=Y(n,"x","batchNorm"),c=Y(t,"mean","batchNorm"),d=Y(e,"variance","batchNorm");return i!=null&&(s=Y(i,"scale","batchNorm")),r!=null&&(a=Y(r,"offset","batchNorm")),Q(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),Q(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),Q(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."}),s!=null&&Q(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),a!=null&&Q(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),w_(u,c,d,a,s,o)}function Jz(n,t,e,r,i,o){var s,a,u=Y(n,"x","batchNorm"),c=Y(t,"mean","batchNorm"),d=Y(e,"variance","batchNorm");return i!=null&&(s=Y(i,"scale","batchNorm")),r!=null&&(a=Y(r,"offset","batchNorm")),Q(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),Q(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),Q(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."}),s!=null&&Q(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),a!=null&&Q(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),w_(u,c,d,a,s,o)}function w_(n,t,e,r,i,o){o==null&&(o=.001);var s,a,u,c=Y(n,"x","batchNorm"),d=Y(t,"mean","batchNorm"),h=Y(e,"variance","batchNorm");i!=null&&(s=Y(i,"scale","batchNorm")),r!=null&&(a=Y(r,"offset","batchNorm")),Q(d.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),Q(a==null||d.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),Q(s==null||d.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var p=[c,d,h,s];return ne.runKernelFunc(function(m,_){var C=m.batchNormalization(u,M1(d),M1(h),o,M1(s),M1(a));return _([c,d,h,s]),C},{x:c,mean:d,variance:h,scale:s,offset:a},function(m,_){var C=_,x=C[0],S=C[1],N=C[2],F=C[3],R=F??Ue(1),j=jr(S.shape,u.shape),H=[];if(S.rank===1){for(var B=0;B<u.shape.length-1;++B)H.push(u.shape[B]);H.push(1)}var k=x.sub(S),D=m.mul(R),P=Zz(N.add(Ue(o))),z=P.mul(P).mul(P).mul(Ue(-.5));return{x:function(){return S.rank===1?m.mul(af(P.as4D(1,1,1,S.shape[0]),H)).mul(R).reshape(x.shape):m.mul(P).mul(R).reshape(x.shape)},mean:function(){var U=P.mul(Ue(-1)).mul(D);return S.rank===1&&(U=U.sum(j)),U.reshape(S.shape)},variance:function(){var U=z.mul(k).mul(D);return S.rank===1&&(U=U.sum(j)),U.reshape(S.shape)},scale:function(){var U=k.mul(P),$=m.mul(U);return S.rank===1&&($=$.sum(j)),$.reshape(S.shape)},offset:function(){var U=m;return S.rank===1&&(U=U.sum(j)),U.reshape(S.shape)}}},"BatchNormalization",{varianceEpsilon:o},p).reshape(c.shape)}function M1(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function hx(){Xj("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Tde=te({batchNormalization2d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),hx(),Qz(n,t,e,o,i,r)}}),Ade=te({batchNormalization3d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),hx(),Xz(n,t,e,o,i,r)}}),Dde=te({batchNormalization4d_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),hx(),Jz(n,t,e,o,i,r)}}),Pde=te({batchNormalization_:function(n,t,e,r,i,o){return r===void 0&&(r=.001),hx(),w_(n,t,e,o,i,r)}}),ZM=te({batchNorm_:w_}),Mde=te({batchNorm2d_:Qz}),kde=te({batchNorm3d_:Xz}),Ode=te({batchNorm4d_:Jz}),fx=te({logicalAnd_:function(n,t){var e=Y(n,"a","logicalAnd","bool"),r=Y(t,"b","logicalAnd","bool");return Xt(e.shape,r.shape),ne.runKernelFunc(function(i){return i.logicalAnd(e,r)},{a:e,b:r},null,"LogicalAnd")}}),Rde=te({logicalNot_:function(n){var t=Y(n,"x","logicalNot","bool");return ne.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),e8=te({logicalOr_:function(n,t){var e=Y(n,"a","logicalOr","bool"),r=Y(t,"b","logicalOr","bool");return Xt(e.shape,r.shape),ne.runKernelFunc(function(i){return i.logicalOr(e,r)},{$a:e,$b:r})}}),Nde=te({logicalXor_:function(n,t){var e=Y(n,"a","logicalXor","bool"),r=Y(t,"b","logicalXor","bool");return Xt(e.shape,r.shape),e8(n,t).logicalAnd(fx(n,t).logicalNot())}}),df=te({where_:function(n,t,e){var r=Y(t,"a","where"),i=Y(e,"b","where"),o=Y(n,"condition","where","bool");return xn(r.shape,i.shape,"Error in where: "),o.rank===1?Q(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):xn(o.shape,i.shape,"Error in where: "),ne.runKernelFunc(function(s,a){var u=s.select(o,r,i);return a([o]),u},{$condition:o,$a:r,$b:i},function(s,a){var u=a[0];return{$condition:function(){return an(u).toFloat()},$a:function(){return s.mul(u.cast(s.dtype))},$b:function(){return s.mul(u.logicalNot().cast(s.dtype))}}})}}),t8=function(n){return tt(this,void 0,void 0,function(){var t,e,r;return nt(this,function(i){switch(i.label){case 0:return[4,(t=Y(n,"condition","whereAsync","bool")).data()];case 1:return e=i.sent(),r=$M(t.shape,e),n!==t&&t.dispose(),[2,r]}})})},gt=te({add_:function(n,t){var e,r=Y(n,"a","add"),i=Y(t,"b","add");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s){return s.add(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=jr(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=jr(i.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(i.shape)}}},"Add")}}),Fde=te({addN_:function(n){Q(Array.isArray(n),function(){return"The argument passed to tf.addN() must be a list of tensors"}),Q(n.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length});var t=n.map(function(i,o){return Y(i,"tensors"+o,"addN")}),e=t[0];t.forEach(function(i){if(i.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(i){if(!Ur(i.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return ne.runKernelFunc(function(i){return i.addN(t)},r,function(i){var o={};return t.forEach(function(s,a){o[a]=function(){return i.clone()}}),o},"AddN")}}),Lde=te({addStrict_:function(n,t){var e=Y(n,"a","addStrict"),r=Y(t,"b","addStrict");return xn(e.shape,r.shape,"Error in addStrict: "),e.add(r)}}),Vde=te({atan2_:function(n,t){var e,r=Y(n,"a","atan2"),i=Y(t,"b","atan2");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s,a){var u=s.atan2(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var d=gt(u.square(),c.square()),h=s.mul(c.div(d)),p=jr(u.shape,o);return p.length>0&&(h=h.sum(p)),h.reshape(u.shape)},$b:function(){var d=gt(u.square(),c.square()),h=b_(s.mul(u.div(d))),p=jr(c.shape,o);return p.length>0&&(h=h.sum(p)),h.reshape(c.shape)}}})}}),Zs=te({div_:function(n,t){var e,r=Y(n,"a","div"),i=Y(t,"b","div");if(e=er(r,i),r=e[0],i=e[1],r.dtype==="int32"&&i.dtype==="int32")return n8(r,i);var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s,a){var u=s.realDivide(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.div(c.toFloat()),h=jr(u.shape,o);return h.length>0?d.sum(h).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),h=jr(c.shape,o);h.length>0&&(d=d.sum(h).reshape(c.shape));var p=c.square();return d.div(p.toFloat()).neg()}}},"Div")}}),Bde=te({divNoNan_:function(n,t){var e,r=Y(n,"a","div"),i=Y(t,"b","div");r=(e=er(r,i))[0],i=e[1];var o=Zs(r,i),s=an(o),a=i.equal(s);return df(a,s,o)}}),Ude=te({divStrict_:function(n,t){var e=Y(n,"a","div"),r=Y(t,"b","div");return xn(e.shape,r.shape,"Error in divideStrict: "),e.div(r)}}),n8=te({floorDiv_:function(n,t){var e,r=Y(n,"a","floorDiv"),i=Y(t,"b","floorDiv");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s,a){var u=s.floorDiv(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.div(c.toFloat()),h=jr(u.shape,o);return h.length>0?d.sum(h).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),h=jr(c.shape,o);h.length>0&&(d=d.sum(h).reshape(c.shape));var p=c.square();return d.div(p.toFloat()).neg()}}},"FloorDiv")}}),QM=te({maximum_:function(n,t){var e,r=Y(n,"a","maximum"),i=Y(t,"b","maximum");return e=er(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Xt(r.shape,i.shape),ne.runKernelFunc(function(o,s){var a=o.maximum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.greaterEqual(u).toFloat())},b:function(){return o.mul(a.less(u).toFloat())}}},"Maximum")}}),jde=te({maximumStrict_:function(n,t){var e=Y(n,"a","maximumStrict"),r=Y(t,"b","maximumStrict");return xn(e.shape,r.shape,"Error in maximumStrict: "),e.maximum(r)}}),r8=te({minimum_:function(n,t){var e,r=Y(n,"a","minimum"),i=Y(t,"b","minimum");return e=er(r,i),r=e[0],i=e[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),Xt(r.shape,i.shape),ne.runKernelFunc(function(o,s){var a=o.minimum(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return o.mul(a.lessEqual(u).toFloat())},b:function(){return o.mul(a.greater(u).toFloat())}}},"Minimum")}}),zde=te({minimumStrict_:function(n,t){var e=Y(n,"a","minimumStrict"),r=Y(t,"b","minimumStrict");return xn(e.shape,r.shape,"Error in minimumStrict: "),e.minimum(r)}}),Wde=te({mod_:function(n,t){var e,r=Y(n,"a","mod"),i=Y(t,"b","mod");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s,a){var u=s.mod(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],c=a[1];return{$a:function(){var d=jr(u.shape,o);return d.length>0?s.sum(d).reshape(u.shape):s},$b:function(){var d=s.mul(u.div(c).floor().neg()),h=jr(c.shape,o);return h.length>0?d.sum(h).reshape(c.shape):d}}})}}),Hde=te({modStrict_:function(n,t){var e=Y(n,"a","modStrict"),r=Y(t,"b","modStrict");return xn(e.shape,r.shape,"Error in modStrict: "),e.mod(r)}}),ur=te({mul_:function(n,t){var e,r=Y(n,"a","mul"),i=Y(t,"b","mul");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s,a){var u=s.multiply(r,i);return a([r,i]),u},{a:r,b:i},function(s,a){var u=a[0],c=a[1];return{a:function(){var d=s.mul(c.toFloat()),h=jr(u.shape,o);return h.length>0?d.sum(h).reshape(u.shape):d},b:function(){var d=s.mul(u.toFloat()),h=jr(c.shape,o);return h.length>0?d.sum(h).reshape(c.shape):d}}},"Mul")}}),$de=te({mulStrict_:function(n,t){var e=Y(n,"a","mul"),r=Y(t,"b","mul");return xn(e.shape,r.shape,"Error in multiplyStrict: "),e.mul(r)}}),tx=te({pow_:function(n,t){var e,r=Y(n,"base","pow"),i=Y(t,"exp","pow");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape),s=[r,i];return ne.runKernelFunc(function(a,u){var c=a.pow(r,i);return u([r,i,c]),c},{a:r,b:i},function(a,u){var c=u[0],d=u[1],h=u[2];return{a:function(){var p=d.toFloat(),m=a.mul(p.mul(c.pow(p.sub(Ue(1))))),_=jr(c.shape,o);return _.length>0&&(m=m.sum(_)),m.reshape(c.shape)},b:function(){var p=c.greater(0),m=c.log().where(p,an(c)),_=a.mul(h.mul(m)),C=jr(d.shape,o);return C.length>0&&(_=_.sum(C)),_.reshape(d.shape)}}},"Pow",{},s,[!0])}}),qde=te({powStrict_:function(n,t){return xn(n.shape,t.shape,"Error in powStrict: "),n.pow(t)}}),Gde=te({squaredDifferenceStrict_:function(n,t){var e=Y(n,"a","squaredDifferenceStrict"),r=Y(t,"b","squaredDifferenceStrict");return xn(e.shape,r.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(r)}}),Fn=te({sub_:function(n,t){var e,r=Y(n,"a","sub"),i=Y(t,"b","sub");e=er(r,i),r=e[0],i=e[1];var o=Xt(r.shape,i.shape);return ne.runKernelFunc(function(s){return s.subtract(r,i)},{a:r,b:i},function(s){return{a:function(){var a=s,u=jr(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},b:function(){var a=s,u=jr(i.shape,o);return u.length>0&&(a=a.sum(u)),a.neg().reshape(i.shape)}}},"Sub")}}),Kde=te({subStrict_:function(n,t){var e=Y(n,"a","subStrict"),r=Y(t,"b","subStrict");return xn(e.shape,r.shape,"Error in subStrict: "),e.sub(r)}}),i8=te({equal_:function(n,t){var e,r=Y(n,"a","equal"),i=Y(t,"b","equal");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),Yde=te({equalStrict_:function(n,t){var e=Y(n,"a","equalStrict"),r=Y(t,"b","equalStrict");return xn(e.shape,r.shape,"Error in equalStrict: "),e.equal(r)}}),Zde=te({greater_:function(n,t){var e,r=Y(n,"a","greater"),i=Y(t,"b","greater");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o){return o.greater(r,i)},{a:r,b:i},null,"Greater")}}),o8=te({greaterEqual_:function(n,t){var e,r=Y(n,"a","greaterEqual"),i=Y(t,"b","greaterEqual");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a},{a:r,b:i},function(o,s){var a=s[0],u=s[1];return{a:function(){return an(a)},b:function(){return an(u)}}},"GreaterEqual")}}),Qde=te({greaterEqualStrict_:function(n,t){var e=Y(n,"a","greaterEqualStrict"),r=Y(t,"b","greaterEqualStrict");return xn(e.shape,r.shape,"Error in greaterEqualStrict: "),e.greaterEqual(r)}}),Xde=te({greaterStrict_:function(n,t){var e=Y(n,"a","greaterStrict"),r=Y(t,"b","greaterStrict");return xn(e.shape,r.shape,"Error in greaterStrict: "),e.greater(r)}}),Jde=te({less_:function(n,t){var e,r=Y(n,"a","less"),i=Y(t,"b","less");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o){return o.less(r,i)},{a:r,b:i},null,"Less")}}),ehe=te({lessEqual_:function(n,t){var e,r=Y(n,"a","lessEqual"),i=Y(t,"b","lessEqual");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o,s){var a=o.lessEqual(r,i);return s([r,i]),a},{a:r,b:i},null,"LessEqual")}}),the=te({lessEqualStrict_:function(n,t){var e=Y(n,"a","lessEqualStrict"),r=Y(t,"b","lessEqualStrict");return xn(e.shape,r.shape,"Error in lessEqualStrict: "),e.lessEqual(r)}}),nhe=te({lessStrict_:function(n,t){var e=Y(n,"a","lessStrict"),r=Y(t,"b","lessStrict");return xn(e.shape,r.shape,"Error in lessStrict: "),e.less(r)}}),rhe=te({notEqual_:function(n,t){var e,r=Y(n,"a","notEqual"),i=Y(t,"b","notEqual");return e=er(r,i),r=e[0],i=e[1],Xt(r.shape,i.shape),ne.runKernelFunc(function(o){return o.notEqual(r,i)},{a:r,b:i},null,"NotEqual")}}),ihe=te({notEqualStrict_:function(n,t){var e=Y(n,"a","notEqualStrict"),r=Y(t,"b","notEqualStrict");return xn(e.shape,r.shape,"Error in notEqualStrict: "),e.notEqual(r)}});function YU(n,t){for(var e=[],r=n;r<t;++r)e.push(r);return e}function ZU(n){for(var t=[],e=0;e<n.length;++e)for(var r=0;r<n[e].length;++r)t.push(n[e][r]);return t}var XM=te({gather_:function(n,t,e){e===void 0&&(e=0);var r=Y(n,"x","gather"),i=Y(t,"indices","gather","int32");e=zr(e,r.shape)[0];var o=function(s,a,u){for(var c=s.shape[u],d=[],h=1,p=1,m=0;m<u;m++)d.push(s.shape[m]),h*=s.shape[m];for(m=0;m<a.rank;m++)d.push(a.shape[m]);for(m=u+1;m<s.rank;m++)d.push(s.shape[m]),p*=s.shape[m];return{batchSize:h,sliceSize:p,dimSize:c,outputShape:d}}(r,i,e);return ne.runKernelFunc(function(s,a){var u=s.gather(r,i.flatten(),e);return a([i]),u},{x:r,indices:i},function(s,a){var u=a[0];return{x:function(){var c=r.shape,d=u.size,h=c.slice(0,e),p=h.length,m=c.slice(e,c.length).slice(1),_=m.length,C=YU(0,p),x=YU(p+1,p+1+_),S=ZU([h,[d],m]),N=s.reshape(S),F=u.reshape([d]),R=ZU([[p],C,x]),j=N.transpose(R),H=s8(j,F,r.shape[e]),B=ox(R);return H=H.transpose(B)},indices:function(){return u}}},"Gather",{axis:e}).reshape(o.outputShape)}}),s8=te({unsortedSegmentSum_:function(n,t,e){var r=Y(n,"x","unsortedSegmentSum"),i=Y(t,"segmentIds","unsortedSegmentSum","int32");return Q(cr(e),function(){return"numSegments must be of dtype int"}),ne.runKernelFunc(function(o,s){var a=o.unsortedSegmentSum(r,i,e);return s([i]),a},{$x:r},function(o,s){var a=s[0];return{$x:function(){return function(u,c){for(var d=QM(c,an(c)),h=XM(u,d),p=o8(c,Ue(0,"int32")),m=h.rank-p.rank,_=0;_<m;++_)p=qi(p,_+1);p=fx(p,Ym(h.shape,"bool"));var C=an(h);return df(p,h,C)}(o,a)}}})}}),ohe=function(n,t,e){return tt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,h,p,m,_,C;return nt(this,function(x){switch(x.label){case 0:for(r=Y(n,"tensor","boolMask"),i=Y(t,"mask","boolMask","bool"),o=e??0,s=i.rank,a=r.shape,Q(s>0,function(){return"mask cannot be scalar"}),xn(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=o;c<o+s;c++)u*=a[c];return d=a.slice(0,o).concat([u],a.slice(o+s)),h=r.reshape(d),p=i.reshape([-1]),[4,t8(p)];case 1:return m=x.sent(),_=m.squeeze([1]),C=XM(h,_,o),n!==r&&r.dispose(),t!==i&&i.dispose(),_.dispose(),h.dispose(),p.dispose(),m.dispose(),[2,C]}})})};function a8(n,t,e,r,i,o,s){o===void 0&&(o="NHWC"),Q(n.length===t.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"});var a=n,u=t,c=!1;t.rank===3&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),a=[1,n[0],n[1],n[2]]),Q(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),Q(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),Q(e.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+e.rank});var d=o==="NHWC"?a[3]:a[1],h=o==="NHWC"?u.shape[3]:u.shape[1];Q(d===e.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+e.shape[2]+"."}),Q(h===e.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+e.shape[3]+"."}),s!=null&&Q(cr(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var p=lx(o),m=ud(a,e.shape,r,1,i,s,!1,p),_=ne.runKernelFunc(function(C,x){var S=C.conv2dDerInput(u,e,m);return x([e,u]),S},{dy4D:u,filter:e},function(C,x){var S=x[0],N=x[1];return{dy4D:function(){return li(C,S,r,i,o,1,s)},filter:function(){return JM(C,N,S.shape,r,i,o,s)}}});return c?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}function KP(n){var t=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(n),e=t[0],r=t[1],i=t[2];return e===1&&r===1&&i===1}function u8(n,t,e,r,i){Q(n.length===t.rank,function(){return"Length of inShape ("+n.length+") and rank of dy ("+t.rank+") must match"});var o=n,s=t,a=!1;t.rank===4&&(a=!0,s=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,n[0],n[1],n[2],n[3]]);var u=o[4],c=s.shape[4];Q(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),Q(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),Q(e.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+e.rank}),Q(u===e.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+e.shape[3]+"."}),Q(c===e.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+e.shape[4]+"."});var d=m_(o,e.shape,r,1,i),h=ne.runKernelFunc(function(p){return p.conv3dDerInput(s,e,d)},{dy5D:s});return a?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var she=te({conv1d_:function(n,t,e,r,i,o,s){i===void 0&&(i="NWC"),o===void 0&&(o=1);var a=Y(n,"x","conv1d"),u=Y(t,"filter","conv1d"),c=a,d=!1;a.rank===2&&(d=!0,c=a.as3D(1,a.shape[0],a.shape[1])),Q(c.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),Q(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),s!=null&&Q(cr(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),Q(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),Q(fo(e,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+e+" and dilation '"+o+"'"}),Q(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var h=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),m=li(p,h,[1,e],r,"NHWC",[1,o],s);return d?m.as2D(m.shape[2],m.shape[3]):m.as3D(m.shape[0],m.shape[2],m.shape[3])}}),li=te({conv2d_:function(n,t,e,r,i,o,s){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var a=Y(n,"x","conv2d"),u=Y(t,"filter","conv2d"),c=a,d=!1;a.rank===3&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Q(c.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),Q(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),s!=null&&Q(cr(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var h=i==="NHWC"?c.shape[3]:c.shape[1];Q(h===u.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+u.shape[2]+"."}),Q(fo(e,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"});var p=lx(i),m=ud(c.shape,u.shape,e,o,r,s,!1,p),_=[u,c],C=ne.runKernelFunc(function(x,S){var N=x.conv2d(c,u,m);return S([u,c]),N},{x:c,filter:u},function(x,S){var N=S,F=N[0],R=N[1];return Q(lf(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return c8(R.shape,x,F,e,r,i)},filter:function(){return JM(R,x,F.shape,e,r,i)}}},"Conv2D",m,_);return d?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),ahe=te({conv3d_:function(n,t,e,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var s=Y(n,"x","conv3d"),a=Y(t,"filter","conv3d"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),Q(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),Q(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),Q(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),Q(function(p,m){return KP(p)||KP(m)}(e,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),Q(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var d=m_(u.shape,a.shape,e,o,r),h=ne.runKernelFunc(function(p,m){var _=p.conv3d(u,a,d);return m([u,a]),_},{x:u,$filter:a},function(p,m){Q(KP(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var _=m[0],C=m[1];return{x:function(){return u8(_.shape,p,C,e,r)},$filter:function(){return function(x,S,N,F,R){var j=x;x.rank===4&&(j=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]));var H=S;H.rank===4&&(H=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),Q(j.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+j.shape+"."}),Q(H.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+H.shape+"."}),Q(N.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+N+"."}),Q(j.shape[4]===N[3],function(){return"Error in conv3dDerFilter: depth of input "+j.shape[4]+") must match input depth in filter ("+N[3]+"."}),Q(H.shape[4]===N[4],function(){return"Error in conv3dDerFilter: depth of dy ("+H.shape[4]+") must match output depth for filter ("+N[4]+")."});var B=m_(j.shape,N,F,1,R);return ne.runKernelFunc(function(k){return k.conv3dDerFilter(j,H,B)},{x5D:j,dy5D:H})}(_,p,C.shape,e,r)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),JM=te({conv2dDerFilter_:function(n,t,e,r,i,o,s){o===void 0&&(o="NHWC");var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Q(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),Q(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),Q(e.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+e+"."});var c=o==="NHWC"?a.shape[3]:a.shape[1],d=o==="NHWC"?u.shape[3]:u.shape[1];Q(c===e[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+e[2]+"."}),Q(d===e[3],function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+e[3]+")."}),s!=null&&Q(cr(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var h=lx(o),p=ud(a.shape,e,r,1,i,s,!1,h);return ne.runKernelFunc(function(m){return m.conv2dDerFilter(a,u,p)},{x4D:a,dy4D:u})}}),c8=te({conv2dDerInput_:a8}),C_=te({depthwiseConv2d_:function(n,t,e,r,i,o,s){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var a=Y(n,"x","depthwiseConv2d"),u=Y(t,"filter","depthwiseConv2d"),c=a,d=!1;a.rank===3&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Q(c.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),Q(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),Q(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),Q(fo(e,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+o+"'"}),s!=null&&Q(cr(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var h=ud(c.shape,u.shape,e,o,r,s,!0),p=[c,u],m=ne.runKernelFunc(function(_,C){var x=_.depthwiseConv2D(c,u,h);return C([c,u]),x},{x:c,filter:u},function(_,C){Q(lf(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var x=C[0],S=C[1];return{x:function(){return l8(x.shape,_,S,h)},filter:function(){return d8(x,_,S.shape,h)}}},"DepthwiseConv2dNative",h,p);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),l8=te({depthwiseConv2dDerInput_:function(n,t,e,r){var i=t,o=!1;t.rank===3&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=ne.runKernelFunc(function(a){return a.depthwiseConv2DDerInput(i,e,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),d8=te({depthwiseConv2dDerFilter_:function(n,t,e,r){var i=n;n.rank===3&&(i=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t;return o.rank===3&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ne.runKernelFunc(function(s){return s.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),x_=te({separableConv2d_:function(n,t,e,r,i,o,s){o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC");var a=Y(n,"x","separableConv2d"),u=Y(t,"depthwiseFilter","separableConv2d"),c=Y(e,"pointwiseFilter","separableConv2d"),d=a,h=!1;if(a.rank===3&&(h=!0,d=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Q(d.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."}),Q(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),Q(c.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),Q(c.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),Q(c.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var p=u.shape[2],m=u.shape[3];Q(c.shape[2]===p*m,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*m+", but got "+c.shape[2]+"."});var _=C_(d,u,r,i,s,o),C=li(_,c,1,"valid",s);return h?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}}),uhe=te({conv2dTranspose_:function(n,t,e,r,i,o){return a8(e,Y(n,"x","conv2dTranspose"),Y(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),che=te({conv3dTranspose_:function(n,t,e,r,i){return u8(e,Y(n,"x","conv3dTranspose"),Y(t,"filter","conv3dTranspose"),r,i)}}),Zm=te({matMul_:function(n,t,e,r){var i;e===void 0&&(e=!1),r===void 0&&(r=!1);var o=Y(n,"a","matMul"),s=Y(t,"b","matMul");i=er(o,s),o=i[0],s=i[1];var a=e?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],c=e?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?s.shape[s.rank-2]:s.shape[s.rank-1],h=o.shape.slice(0,-2),p=s.shape.slice(0,-2),m=ot(h),_=ot(p);Q(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),Q(Ur(h,p),function(){return"Error in matMul: outer dimensions ("+h+") and ("+p+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),Q(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+e+" and transposeB="+r+" must match."});var C=o.shape.slice(0,-2).concat([c,d]),x=e?o.as3D(m,a,c):o.as3D(m,c,a),S=r?s.as3D(_,d,u):s.as3D(_,u,d),N={transposeA:e,transposeB:r};return ne.runKernelFunc(function(F,R){var j=F.batchMatMul(x,S,e,r);return R([x,S]),j},{a:x,b:S},function(F,R){var j=R,H=j[0],B=j[1];return e||r?!e&&r?{a:function(){return F.matMul(B,!1,!1)},b:function(){return F.matMul(H,!0,!1)}}:e&&!r?{a:function(){return B.matMul(F,!1,!0)},b:function(){return H.matMul(F,!1,!1)}}:{a:function(){return B.matMul(F,!0,!0)},b:function(){return F.matMul(H,!0,!0)}}:{a:function(){return F.matMul(B,!1,!0)},b:function(){return H.matMul(F,!0,!1)}}},"BatchMatMul",N).reshape(C)}}),lhe=te({dot_:function(n,t){var e=Y(n,"t1","dot"),r=Y(t,"t2","dot");Q(!(e.rank!==1&&e.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+e.rank+" and "+r.rank+"."});var i=e.rank===1?e.size:e.shape[1],o=r.rank===1?r.size:r.shape[0];return Q(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),e.rank===1&&r.rank===1?e.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():e.rank===1&&r.rank===2?e.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():e.rank===2&&r.rank===1?e.matMul(r.as2D(-1,1)).as1D():e.matMul(r.as2D(r.shape[0],r.shape[1]))}}),dhe=te({outerProduct_:function(n,t){var e=Y(n,"v1","outerProduct"),r=Y(t,"v2","outerProduct");return Q(e.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+e.rank+" and "+r.rank+"."}),e.as2D(-1,1).matMul(r.as2D(1,-1))}}),E_=te({reverse_:function(n,t){var e=Y(n,"x","reverse");if(e.rank===0)return e.clone();var r=zr(t,e.shape);return ne.runKernelFunc(function(i){return i.reverse(e,r)},{$x:e},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(e)}}),hhe=te({reverse1d_:function(n){var t=Y(n,"x","reverse");return Q(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),E_(t,0)}}),fhe=te({reverse2d_:function(n,t){var e=Y(n,"x","reverse");return Q(e.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+e.rank+"."}),E_(e,t)}}),phe=te({reverse3d_:function(n,t){var e=Y(n,"x","reverse");return Q(e.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+e.rank+"."}),E_(e,t)}}),mhe=te({reverse4d_:function(n,t){var e=Y(n,"x","reverse");return Q(e.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+e.rank+"."}),E_(e,t)}});function h8(n,t,e,r,i,o){var s=Y(n,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),r==null&&(r=[1,1]),Q(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),Q(fo(e,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"}),o!=null&&Q(cr(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=qm(a.shape,t,e,r,i,o);if(c.filterWidth===1&&c.filterHeight===1&&Ur(c.inShape,c.outShape))return s.clone();var d=[a],h=ne.runKernelFunc(function(p,m){var _=p.maxPool(a,c);return m([a,_]),_},{x:a},function(p,m){var _=m[0],C=m[1];return{x:function(){return function(x,S,N,F,R,j,H,B){var k=Y(x,"dy","maxPoolBackprop"),D=Y(S,"input","maxPoolBackprop"),P=Y(N,"output","maxPoolBackprop");Q(D.rank===k.rank,function(){return"Rank of input ("+D.rank+") does not match rank of dy ("+k.rank+")"}),j==null&&(j=[1,1]),Q(fo(R,j),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+j+"'"}),Q(k.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."}),Q(D.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+D.rank+"."}),B!=null&&Q(cr(H),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+B+" but got pad "+H+"."});var z=qm(D.shape,F,R,j,H,B);return ne.runKernelFunc(function(U){return U.maxPoolBackprop(k,D,P,z)},{$dy:k,$input:D})}(p,_,C,t,e,r,i)}}},"MaxPool",c,d);return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function f8(n,t,e,r,i,o){var s=Y(n,"x","avgPool","float32");r==null&&(r=[1,1]),Q(fo(e,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+r+"'"});var a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Q(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),o!=null&&Q(cr(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var c=qm(a.shape,t,e,r,i,o);if(c.filterWidth===1&&c.filterHeight===1&&Ur(c.inShape,c.outShape))return s.clone();var d=ne.runKernelFunc(function(h){return h.avgPool(a,c)},{x:a},function(h){return{x:function(){return function(p,m,_,C,x,S){var N=Y(p,"dy","avgPoolBackprop"),F=Y(m,"input","avgPoolBackprop");Q(F.rank===N.rank,function(){return"Rank of input ("+F.rank+") does not match rank of dy ("+N.rank+")"}),x==null&&(x=[1,1]),Q(fo(C,x),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+C+" and dilations '"+x+"'"});var R=F,j=N,H=!1;F.rank===3&&(H=!0,R=F.as4D(1,F.shape[0],F.shape[1],F.shape[2]),j=N.as4D(1,N.shape[0],N.shape[1],N.shape[2])),Q(j.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+j.rank+"."}),Q(R.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+R.rank+"."});var B=qm(R.shape,_,C,x,S),k=ne.runKernelFunc(function(D){return D.avgPoolBackprop(j,R,B)},{dy4D:j,input4D:R});return H?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}(h,a,t,e,r,i)}}},"AvgPool",c);return d=d.cast(s.dtype),u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var lr=te({maxPool_:function(n,t,e,r,i){return h8(n,t,e,1,r,i)}}),Wc=te({avgPool_:function(n,t,e,r,i){return f8(n,t,e,1,r,i)}}),ghe=te({pool_:function(n,t,e,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var s=Y(n,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),Q(fo(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var c,d=qm(a.shape,t,o,i,r),h=[d.dilationHeight,d.dilationWidth];c=r==="same"?function(R,j){var H=R.map(function(D,P){return D+(D-1)*(j[P]-1)}).map(function(D){return D-1}),B=H.map(function(D){return Math.floor(D/2)}),k=H.map(function(D,P){return D-B[P]});return H.map(function(D,P){return[B[P],k[P]]})}([d.filterHeight,d.filterWidth],h):[[0,0],[0,0]];var p=h[0]===1&&h[1]===1,m=function(R,j,H){var B=H.map(function(ae){return ae[0]}),k=H.map(function(ae){return ae[1]}),D=R.concat(B,k),P=j.map(function(ae,de){return(ae-D[de]%ae)%ae}),z=k.map(function(ae,de){return ae+P[de]}),U=j.map(function(ae,de){return[B[de],z[de]]}),$=j.map(function(ae,de){return[0,P[de]]});return[U,$]}([d.inHeight,d.inWidth],h,c),_=m[0],C=m[1],x=p?r:"valid",S=p?a:oz(a,h,_),N=(e==="avg"?function(){return f8(S,t,o,1,x)}:function(){return h8(S,t,o,1,x)})(),F=p?N:nz(N,h,C);return u?F.as3D(F.shape[1],F.shape[2],F.shape[3]):F}}),vhe=te({maxPool3d_:function(n,t,e,r,i,o,s){o===void 0&&(o="NDHWC");var a=Y(n,"x","maxPool3d"),u=a,c=!1;a.rank===4&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),Q(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),Q(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),Q(fo(e,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),i!=null&&Q(cr(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=p_(u.shape,t,e,s,r,i,o),h=ne.runKernelFunc(function(p,m){var _=p.maxPool3d(u,d);return m([u,_]),_},{x:u},function(p,m){var _=m[0],C=m[1];return{x:function(){return function(x,S,N,F,R,j,H,B){var k=Y(x,"dy","maxPool3dBackprop"),D=Y(S,"input","maxPool3dBackprop"),P=Y(N,"output","maxPool3dBackprop"),z=k,U=D,$=P,ae=!1;D.rank===4&&(ae=!0,z=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),U=D.as5D(1,D.shape[0],D.shape[1],D.shape[2],D.shape[3]),$=P.as5D(1,P.shape[0],P.shape[1],P.shape[2],P.shape[3])),Q(z.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+z.rank+"."}),Q(U.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+U.rank+"."}),Q($.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+$.rank+"."}),j==null&&(j=[1,1,1]),Q(fo(R,j),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+R+" and dilations '"+j+"'"}),B!=null&&Q(cr(H),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+B+" but got pad "+H+"."});var de=p_(U.shape,F,R,j,H,B),X=ne.runKernelFunc(function(re){return re.maxPool3dBackprop(z,U,$,de)},{dy5D:z,input5D:U});return ae?X.as4D(X.shape[1],X.shape[2],X.shape[3],X.shape[4]):X}(p,_,C,t,e,s,r,i)}}});return c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),_he=te({avgPool3d_:function(n,t,e,r,i,o,s){o===void 0&&(o="NDHWC");var a=Y(n,"x","avgPool3d","float32"),u=a,c=!1;a.rank===4&&(c=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),Q(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),Q(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),Q(fo(e,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+e+" and dilations '"+s+"'"}),i!=null&&Q(cr(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var d=p_(u.shape,t,e,s,r,i,o),h=ne.runKernelFunc(function(p){return p.avgPool3d(u,d)},{x:u},function(p){return{x:function(){return function(m,_,C,x,S,N,F){var R=Y(m,"dy","avgPool3dBackprop"),j=Y(_,"input","avgPool3dBackprop"),H=R,B=j,k=!1;j.rank===4&&(k=!0,H=R.as5D(1,R.shape[0],R.shape[1],R.shape[2],R.shape[3]),B=j.as5D(1,j.shape[0],j.shape[1],j.shape[2],j.shape[3])),Q(H.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+H.rank+"."}),Q(B.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+B.rank+"."}),S==null&&(S=[1,1,1]),Q(fo(x,S),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+S+"'"}),F!=null&&Q(cr(N),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+F+" but got pad "+N+"."});var D=p_(B.shape,C,x,S,N,F),P=ne.runKernelFunc(function(z){return z.avgPool3dBackprop(H,B,D)},{dy5D:H,input5D:B});return k?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P}(p,u,t,e,s,r,i)}}});return h=h.cast(u.dtype),c?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Ra=te({slice_:function(n,t,e){var r,i,o=Y(n,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach(function(u){Q(u!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=e==null?new Array(o.rank).fill(-1):typeof e=="number"?[e].concat(new Array(o.rank-1).fill(-1)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(-1)):e).map(function(u,c){return u>=0?u:(Q(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."}),o.shape[c]-r[c])}),dz(o,r,i);var s=o.shape,a={begin:r,size:i};return ne.runKernelFunc(function(u){return u.slice(o,r,i)},{x:o},function(u){for(var c=[],d=0;d<u.rank;d++)c.push([r[d],s[d]-r[d]-i[d]]);return{x:function(){return u.pad(c)}}},"Slice",a)}}),yhe=te({slice1d_:function(n,t,e){var r=Y(n,"x","slice1d");return Q(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ra(r,[t],[e])}}),bhe=te({slice2d_:function(n,t,e){var r=Y(n,"x","slice2d");return Q(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ra(r,t,e)}}),ek=te({slice3d_:function(n,t,e){var r=Y(n,"x","slice3d");return Q(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ra(r,t,e)}}),whe=te({slice4d_:function(n,t,e){var r=Y(n,"x","slice4d");return Q(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ra(r,t,e)}});function p8(n,t,e,r,i){return t.rank<e.rank&&(t=t.reshape(ho(t.shape,r))),n.rank<e.rank&&(n=n.reshape(ho(n.shape,r))),{x:function(){var o=n.mul(e.equal(t).cast(n.dtype));return i==null?o:o.transpose(i)}}}var Che=te({all_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","all","bool"),i=zr(t,r.shape),o=i,s=Fa(o,r.rank);s!=null&&(r=r.transpose(s),o=La(o.length,r.rank));var a=ne.runKernelFunc(function(c){return c.all(r,o)},{$x:r});if(e){var u=ho(a.shape,i);return a.reshape(u)}return a}}),xhe=te({any_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","any","bool"),i=zr(t,r.shape),o=i,s=Fa(o,r.rank);s!=null&&(r=r.transpose(s),o=La(o.length,r.rank));var a=ne.runKernelFunc(function(c){return c.any(r,o)},{$x:r});if(e){var u=ho(a.shape,i);return a.reshape(u)}return a}}),Ehe=te({argMax_:function(n,t){t===void 0&&(t=0);var e=Y(n,"x","argMax");t==null&&(t=0);var r=zr(t,e.shape),i=Fa(r,e.rank);i!=null&&(e=e.transpose(i),r=La(r.length,e.rank));var o={axis:r[0]},s=[e];return ne.runKernelFunc(function(a,u){var c=a.argMax(e,r[0]);return u([e]),c},{x:e},function(a,u){var c=u[0];return{x:function(){return an(c)}}},"ArgMax",o,s)}}),Ihe=te({argMin_:function(n,t){t===void 0&&(t=0);var e=Y(n,"x","argMin");t==null&&(t=0);var r=zr(t,e.shape),i=Fa(r,e.rank);return i!=null&&(e=e.transpose(i),r=La(r.length,e.rank)),ne.runKernelFunc(function(o,s){var a=o.argMin(e,r[0]);return s([e]),a},{$x:e},function(o,s){var a=s[0];return{$x:function(){return an(a)}}})}}),She=te({logSumExp_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","logSumExp"),i=zr(t,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(e){var u=ho(a.shape,i);return a.reshape(u)}return a}}),pf=te({max_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","max"),i=r,o=zr(t,r.shape),s=o,a=Fa(s,r.rank);a!=null&&(r=r.transpose(a),s=La(s.length,r.rank));var u=[r],c=ne.runKernelFunc(function(h,p){var m=h.max(r,s);return p([i,m]),m},{x:r},function(h,p){return p8(h,p[1],p[0],o,a)},"Max",{axes:s},u,[!0]);if(e){var d=ho(c.shape,o);c=c.reshape(d)}return c}}),The=te({mean_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","mean"),i=zr(t,r.shape),o=ot(Ii(r.shape,i)[1]);return cx(function(s){var a=Ue(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(t,e),gradFunc:function(u){var c=s.shape.slice();return i.forEach(function(d){c[d]=1}),u.reshape(c).mul(Ym(s.shape,"float32")).div(o)}}})(r)}}),Ahe=te({min_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","min"),i=r,o=zr(t,r.shape),s=o,a=Fa(s,r.rank);a!=null&&(r=r.transpose(a),s=La(s.length,r.rank));var u=[r],c=ne.runKernelFunc(function(h,p){var m=h.min(r,s);return p([i,m]),m},{x:r},function(h,p){return p8(h,p[1],p[0],o,a)},"Min",{axes:s},u,[!0]);if(e){var d=ho(c.shape,o);c=c.reshape(d)}return c}}),Dhe=te({moments_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=zr(t,(n=Y(n,"x","moments")).shape),i=n.mean(r,e),o=i.shape;e||(o=ho(i.shape,r));var s=n.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,e)}}}),m8=te({sum_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=zr(t,r.shape);return cx(function(o){var s=Fa(i,o.rank),a=i,u=o;s!=null&&(u=o.transpose(s),a=La(a.length,o.rank));var c=function(m){var _=o.shape.slice();return i.forEach(function(C){_[C]=1}),m.reshape(_).mul(Ym(o.shape,"float32"))},d={axes:a},h=ne.runKernelFunc(function(m){return m.sum(u,a)},{x:u},function(m){return{x:function(){return c(m)}}},"Sum",d);if(e){var p=ho(h.shape,i);h=h.reshape(p)}return{value:h,gradFunc:c}})(r)}}),Phe=te({prod_:function(n,t,e){t===void 0&&(t=null),e===void 0&&(e=!1);var r=Y(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=zr(t,r.shape),o=Fa(i,r.rank),s=i,a=r;o!=null&&(a=r.transpose(o),s=La(s.length,r.rank));var u=ne.runKernelFunc(function(d){return d.prod(a,s)},{permutedX:a});if(e){var c=ho(u.shape,i);u=u.reshape(c)}return u}}),g8=te({elu_:function(n){var t=Y(n,"x","elu");return ne.runKernelFunc(function(e,r){var i=e.elu(t);return r([i]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){return ne.runKernelFunc(function(o){return o.eluDer(e,i)},{dy:e,y:i})}}})}}),Mhe=te({leakyRelu_:function(n,t){t===void 0&&(t=.2);var e=Y(n,"x","leakyRelu");return QM(Ue(t).mul(e),e)}}),v8=te({prelu_:function(n,t){var e=Y(n,"x","prelu"),r=Y(t,"alpha","prelu");return ne.runKernelFunc(function(i,o){var s=i.prelu(e,r);return o([e,r]),s},{x:e,alpha:r},function(i,o){var s=o[0],a=o[1],u=s.greater(0);return{x:function(){return df(u,i,i.mul(a))},alpha:function(){var c=df(u,an(i),i.mul(s)),d=jr(a.shape,i.shape);return d.length>0&&(c=c.sum(d)),c.reshape(a.shape)}}},"Prelu")}}),Sn=te({relu_:function(n){var t=Y(n,"x","relu");return t.dtype==="bool"?t.toInt():ne.runKernelFunc(function(e,r){var i=e.relu(t);return r([t]),i},{x:t},function(e,r){var i=r[0];return{x:function(){return e.mulStrict(i.step().toFloat())}}},"Relu")}}),_8=te({relu6_:function(n){var t=Y(n,"x","relu6");return t.dtype==="bool"?t.toInt():ne.runKernelFunc(function(e,r){var i=e.relu6(t);return r([t]),i},{x:t},function(e,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{x:function(){return e.mulStrict(o.toFloat())}}},"Relu6")}}),khe=te({selu_:function(n){var t=Y(n,"x","selu");return ne.runKernelFunc(function(e,r){var i=e.selu(t);return r([t]),i},{$x:t},function(e,r){var i=r[0];return{$x:function(){var o=i.greater(Ue(0)),s=Ue(GM),a=Ue(KM),u=e.mul(a),c=e.mul(s).mul(i.toFloat().exp());return df(o,u,c)}}})}}),Qs=te({transpose_:function(n,t){var e=Y(n,"x","transpose");if(t==null&&(t=e.shape.map(function(i,o){return o}).reverse()),Q(e.rank===t.length,function(){return"Error in transpose: rank of input "+e.rank+" must match length of perm "+t+"."}),t.forEach(function(i){Q(i>=0&&i<e.rank,function(){return"All entries in 'perm' must be between 0 and "+(e.rank-1)+" but got "+t})}),e.rank<=1)return e.clone();var r={perm:t};return ne.runKernelFunc(function(i){return i.transpose(e,t)},{x:e},function(i){var o=ox(t);return{x:function(){return i.transpose(o)}}},"Transpose",r)}}),Ohe=te({localResponseNormalization_:function(n,t,e,r,i){t===void 0&&(t=5),e===void 0&&(e=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=Y(n,"x","localResponseNormalization");Q(o.rank===4||o.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."}),Q(cr(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var s=o,a=!1;o.rank===3&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=ne.runKernelFunc(function(c,d){var h=c.localResponseNormalization4D(s,t,e,r,i);return d([s,h]),h},{x4D:s},function(c,d){var h=d[0],p=d[1];return{x4D:function(){return ne.runKernelFunc(function(m){return m.LRNGrad(c,h,p,t,e,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),y8=te({norm_:function(n,t,e,r){t===void 0&&(t="euclidean"),e===void 0&&(e=null),r===void 0&&(r=!1);var i=function a(u,c,d){if(d===void 0&&(d=null),u.rank===0)return u.abs();if(u.rank!==1&&d===null)return a(u.reshape([-1]),c,d);if(u.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(c===1)return u.abs().sum(d);if(c===1/0)return u.abs().max(d);if(c===-1/0)return u.abs().min(d);if(c==="euclidean"||c===2)return u.abs().pow(Ue(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(d)&&d.length===2){if(c===1)return u.abs().sum(d[0]).max(d[1]-1);if(c===1/0)return u.abs().sum(d[1]).max(d[0]);if(c===-1/0)return u.abs().sum(d[1]).min(d[0]);if(c==="fro"||c==="euclidean")return u.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+d)}(n=Y(n,"x","norm"),t,e),o=i.shape;if(r){var s=zr(e,n.shape);o=ho(i.shape,s)}return i.reshape(o)}}),Rhe=te({basicLSTMCell_:function(n,t,e,r,i,o){var s=Y(n,"forgetBias","basicLSTMCell"),a=Y(t,"lstmKernel","basicLSTMCell"),u=Y(e,"lstmBias","basicLSTMCell"),c=Y(r,"data","basicLSTMCell"),d=Y(i,"c","basicLSTMCell"),h=Y(o,"h","basicLSTMCell"),p=c.concat(h,1).matMul(a).add(u),m=p.shape[0],_=p.shape[1]/4,C=[m,_],x=p.slice([0,0],C),S=p.slice([0,_],C),N=p.slice([0,2*_],C),F=p.slice([0,3*_],C),R=x.sigmoid().mulStrict(S.tanh()).addStrict(d.mulStrict(s.add(N).sigmoid())),j=R.tanh().mulStrict(F.sigmoid());return[R,j]}}),Nhe=te({multiRNNCell_:function(n,t,e,r){for(var i=Y(t,"data","multiRNNCell"),o=K1(e,"c","multiRNNCell"),s=K1(r,"h","multiRNNCell"),a=i,u=[],c=0;c<n.length;c++){var d=n[c](a,o[c],s[c]);u.push(d[0]),u.push(d[1]),a=d[1]}var h=[],p=[];for(c=0;c<u.length;c+=2)h.push(u[c]),p.push(u[c+1]);return[h,p]}}),Fhe=te({movingAverage_:function(n,t,e,r,i){i===void 0&&(i=!0);var o=Y(n,"v","movingAverage"),s=Y(t,"x","movingAverage"),a=Y(e,"decay","movingAverage");Ij(o,s),Q(Ur(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var u=Ue(1),c=u.sub(a),d=s.sub(o).mul(c);if(i){Q(r!=null,function(){return"When using zeroDebias: true, step is required."});var h=Y(r,"step","movingAverage");d=d.div(u.sub(tx(a,h)))}return o.add(d)}}),Lhe=te({stridedSlice_:function(n,t,e,r,i,o,s,a,u){if(i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var c=Y(n,"x","stridedSlice"),d=_M(a),h=c.shape.slice();d.forEach(function(x){t[x]=0,e[x]=1,h.splice(x,0,1)}),c=c.reshape(h);for(var p=0;p<c.rank;p++)t[p]=hz(i,t,r,c.shape,p),e[p]=fz(o,e,r,c.shape,p),r[p]=r[p]||1;var m=_M(u);m.forEach(function(x){e[x]=t[x]+1,r[x]=1});var _=ux(t,e,r),C=_.filter(function(x,S){return m.indexOf(S)===-1});return r.every(function(x){return x===1})?Ra(c,t,_).reshape(C):ne.runKernelFunc(function(x){return x.stridedSlice(c,t,e,r)},{$x:c}).reshape(C)}}),Vhe=te({topk_:function(n,t,e){t===void 0&&(t=1),e===void 0&&(e=!0);var r=Y(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var o=ne.runKernelFunc(function(s){return s.topk(r,t,e)},{$x:r});return{values:o[0],indices:o[1]}}}),Bhe=te({scatterND_:function(n,t,e){var r=Y(n,"indices","scatterND","int32"),i=Y(t,"updates","scatterND");return lz(i,r,e),ne.runKernelFunc(function(o){return o.scatterND(r,i,e)},{indices:r,updates:i},null,"ScatterNd",{shape:e})}}),tk=te({fft_:function(n){Q(n.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."});var t=n.shape[n.shape.length-1],e=n.size/t,r=n.as2D(e,t);return ne.runKernelFunc(function(i){return i.fft(r)},{input:n}).reshape(n.shape)}}),nx=te({ifft_:function(n){Q(n.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."});var t=n.shape[n.shape.length-1],e=n.size/t,r=n.as2D(e,t);return ne.runKernelFunc(function(i){return i.ifft(r)},{input:n}).reshape(n.shape)}}),nk=te({rfft_:function(n,t){Q(n.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+n.dtype});var e,r=n.shape[n.shape.length-1],i=n.size/r;if(t!=null&&t<r){var o=n.shape.map(function(S){return 0}),s=n.shape.map(function(S){return S});s[n.shape.length-1]=t,e=n.slice(o,s),r=t}else if(t!=null&&t>r){var a=n.shape.map(function(S){return S});a[n.shape.length-1]=t-r,e=n.concat(Gn(a),n.shape.length-1),r=t}else e=n;var u=e.zerosLike(),c=Ei(e,u).as2D(i,r),d=tk(c),h=Math.floor(r/2)+1,p=Ys(d),m=ku(d),_=p.split([h,r-h],p.shape.length-1),C=m.split([h,r-h],m.shape.length-1),x=e.shape.slice();return x[e.shape.length-1]=h,Ei(_[0],C[0]).reshape(x)}}),b8=te({irfft_:function(n){var t=n.shape[n.shape.length-1],e=n.size/t;if(t<=2){var r=n.as2D(e,t),i=nx(r);return Ys(i)}var o=[e,2*(t-1)],s=Ys(n).as2D(e,t),a=ku(n).as2D(e,t),u=s.slice([0,1],[e,t-2]).reverse(1),c=a.slice([0,1],[e,t-2]).reverse(1).mul(Ue(-1)),d=s.concat(u,1),h=a.concat(c,1);return r=Ei(d,h).as2D(o[0],o[1]),i=nx(r),Ys(i)}}),Uhe=Object.freeze({fft:tk,ifft:nx,rfft:nk,irfft:b8}),jhe=te({sparseToDense_:function(n,t,e,r){r===void 0&&(r=0);var i=Y(n,"sparseIndices","sparseToDense","int32"),o=Y(t,"sparseValues","sparseToDense"),s=Y(r,"defaultValue","sparseToDense",o.dtype);return function(a,u,c,d){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var h=a.rank>0?a.shape[0]:1,p=a.rank>1?a.shape[1]:1;if(c.length!==p)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+p+".");var m=u.size;if(u.rank!==0&&(u.rank!==1||m!==h))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+h+"]");if(u.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,e,s),ne.runKernelFunc(function(a){return a.sparseToDense(i,o,e,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),zhe=te({gatherND_:function(n,t){var e=Y(t,"indices","gatherND","int32"),r=Y(n,"x","gatherND");return ne.runKernelFunc(function(i){return i.gatherND(r,e)},{x:r,indices:e},null,"GatherNd")}}),Whe=te({diag_:function(n){var t=Y(n,"x","diag").flatten(),e=n.shape.concat(n.shape);return ne.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(e)}}),Hhe=te({dropout_:function(n,t,e,r){var i=Y(n,"x","dropout");if(Q(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),Q(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return n instanceof Nn?i.clone():i;var o=function(u,c){if(c==null)return u.shape.slice();if(Ur(u.shape,c))return c;if(u.shape.length===c.length){for(var d=[],h=0;h<u.shape.length;h++)c[h]==null&&u.shape[h]!=null?d.push(u.shape[h]):d.push(c[h]);return d}return c}(i,e),s=1-t,a=iz(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function w8(n,t,e){for(var r=1-n%2,i=new Float32Array(n),o=0;o<n;++o){var s=2*Math.PI*o/(n+r-1);i[o]=t-e*Math.cos(s)}return jn(i,"float32")}var rk=te({hannWindow_:function(n){return w8(n,.5,.5)}}),C8=te({hammingWindow_:function(n){return w8(n,.54,.46)}}),ik=te({frame_:function(n,t,e,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,s=[];o+t<=n.size;)s.push(Ra(n,o,t)),o+=e;if(r)for(;o<n.size;){var a=o+t-n.size,u=Xn([Ra(n,o,t-a),ys([a],i)]);s.push(u),o+=e}return s.length===0?Ou([],[0,t]):Xn(s).as2D(s.length,t)}}),x8=te({stft_:function(n,t,e,r,i){var o;i===void 0&&(i=rk),r==null&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var s=ik(n,t,e),a=ur(s,i(t)),u=[],c=0;c<s.shape[0];c++)u.push(nk(a.slice([c,0],[1,t]),r));return Xn(u)}}),$he=Object.freeze({hannWindow:rk,hammingWindow:C8,frame:ik,stft:x8}),Ki,qhe=function(n,t,e){return e===void 0&&(e=1),tt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,h,p,m,_,C,x;return nt(this,function(S){switch(S.label){case 0:return r=Y(n,"predictions","inTopK"),i=Y(t,"targets","inTopK"),Q(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),Q(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),xn(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],Q(e>0&&e<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+e}),[4,r.data()];case 1:return s=S.sent(),[4,i.data()];case 2:for(a=S.sent(),u=[s.length/o,o],d=u[1],h=$m("bool",c=u[0]),p=0;p<c;p++){for(m=p*d,_=s.subarray(m,m+d),C=[],x=0;x<_.length;x++)C.push({value:_[x],index:x});for(C.sort(function(N,F){return F.value-N.value}),h[p]=0,x=0;x<e;x++)if(C[x].index===a[p]){h[p]=1;break}}return n!==r&&r.dispose(),t!==i&&i.dispose(),[2,ci(h,i.shape,"bool")]}})})};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Ki||(Ki={}));var Ghe=te({absoluteDifference_:function(n,t,e,r){r===void 0&&(r=Ki.SUM_BY_NONZERO_WEIGHTS);var i=Y(n,"labels","absoluteDifference"),o=Y(t,"predictions","absoluteDifference"),s=null;e!=null&&(s=Y(e,"weights","absoluteDifference")),xn(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return Hc(a,s,r)}}),Hc=te({computeWeightedLoss_:function(n,t,e){e===void 0&&(e=Ki.SUM_BY_NONZERO_WEIGHTS);var r=Y(n,"losses","computeWeightedLoss"),i=null;t!=null&&(i=Y(t,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(e===Ki.NONE)return o;if(e===Ki.SUM)return o.sum();if(e===Ki.MEAN){if(i==null)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(Ue(s)):a}if(e===Ki.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(Ue(r.size));var u=i.mul(Ym(r.shape)).notEqual(Ue(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+e)}}),Khe=te({cosineDistance_:function(n,t,e,r,i){i===void 0&&(i=Ki.SUM_BY_NONZERO_WEIGHTS);var o=Y(n,"labels","cosineDistance"),s=Y(t,"predictions","cosineDistance"),a=null;r!=null&&(a=Y(r,"weights","cosineDistance")),xn(o.shape,s.shape,"Error in cosineDistance: ");var u=Ue(1).sub(o.mul(s).sum(e,!0));return Hc(u,a,i)}}),Yhe=te({hingeLoss_:function(n,t,e,r){r===void 0&&(r=Ki.SUM_BY_NONZERO_WEIGHTS);var i=Y(n,"labels","hingeLoss"),o=Y(t,"predictions","hingeLoss"),s=null;e!=null&&(s=Y(e,"weights","hingeLoss")),xn(i.shape,o.shape,"Error in hingeLoss: ");var a=Ue(1);i=Ue(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return Hc(u,s,r)}}),Zhe=te({huberLoss_:function(n,t,e,r,i){r===void 0&&(r=1),i===void 0&&(i=Ki.SUM_BY_NONZERO_WEIGHTS);var o=Y(n,"labels","huberLoss"),s=Y(t,"predictions","huberLoss"),a=null;e!=null&&(a=Y(e,"weights","huberLoss")),xn(o.shape,s.shape,"Error in huberLoss: ");var u=Ue(r),c=s.sub(o).abs(),d=r8(c,u),h=c.sub(d),p=Ue(.5).mul(d.square()).add(u.mul(h));return Hc(p,a,i)}}),Qhe=te({logLoss_:function(n,t,e,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=Ki.SUM_BY_NONZERO_WEIGHTS);var o=Y(n,"labels","logLoss"),s=Y(t,"predictions","logLoss"),a=null;e!=null&&(a=Y(e,"weights","logLoss")),xn(o.shape,s.shape,"Error in logLoss: ");var u=Ue(1),c=Ue(r),d=o.mul(s.add(c).log()).neg().sub(u.sub(o).mul(u.sub(s).add(c).log()));return Hc(d,a,i)}}),Xhe=te({meanSquaredError_:function(n,t,e,r){r===void 0&&(r=Ki.SUM_BY_NONZERO_WEIGHTS);var i=Y(n,"labels","meanSquaredError"),o=Y(t,"predictions","meanSquaredError"),s=null;e!=null&&(s=Y(e,"weights","meanSquaredError")),xn(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return Hc(a,s,r)}}),Jhe=te({sigmoidCrossEntropy_:function(n,t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Ki.SUM_BY_NONZERO_WEIGHTS);var o=Y(n,"multiClassLabels","sigmoidCrossEntropy"),s=Y(t,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=Y(e,"weights","sigmoidCrossEntropy")),xn(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ue(r),c=Ue(1),d=Ue(.5);o=o.mul(c.sub(u)).add(d.mul(u))}var h=function(p,m){var _=Y(p,"labels","sigmoidCrossEntropyWithLogits"),C=Y(m,"logits","sigmoidCrossEntropyWithLogits");xn(_.shape,C.shape,"Error in sigmoidCrossEntropyWithLogits: ");var x=C.relu(),S=C.mul(_),N=C.abs().neg().exp().log1p();return x.sub(S).add(N)}(o,s);return Hc(h,a,i)}}),efe=te({softmaxCrossEntropy_:function(n,t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=Ki.SUM_BY_NONZERO_WEIGHTS);var o=Y(n,"onehotLabels","softmaxCrossEntropy"),s=Y(t,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=Y(e,"weights","softmaxCrossEntropy")),xn(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ue(r),c=Ue(1),d=Ue(o.shape[1]);o=o.mul(c.sub(u)).add(u.div(d))}var h=function(p,m,_){if(_===void 0&&(_=-1),_===-1&&(_=m.rank-1),_!==m.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+m.rank+" and dim was "+_);return cx(function(C,x,S){var N=x.logSumExp([_],!0),F=x.toFloat().sub(N);return S([C,F]),{value:F.mul(C).neg().sum([_]),gradFunc:function(R,j){var H=j[0],B=j[1],k=ho(R.shape,[_]);return[R.reshape(k).mul(H.toFloat().sub(B.exp())),R.reshape(k).mul(B.exp().sub(H.toFloat()))]}}})(p,m)}(o,s);return Hc(h,a,i)}}),tfe=Object.freeze({get Reduction(){return Ki},absoluteDifference:Ghe,computeWeightedLoss:Hc,cosineDistance:Khe,hingeLoss:Yhe,huberLoss:Zhe,logLoss:Qhe,meanSquaredError:Xhe,sigmoidCrossEntropy:Jhe,softmaxCrossEntropy:efe});function QU(n,t){return t===void 0&&(t=!1),ne.tidy(function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var e=n.shape[0],r=n.shape[1],i=rz(e),o=n.clone(),s=Ou([[1]],[1,1]),a=s.clone(),u=e>=r?r:e,c=function(h){var p,m=o,_=a,C=i;p=ne.tidy(function(){var x=o.slice([h,h],[e-h,1]),S=x.norm(),N=o.slice([h,h],[1,1]),F=Ou([[-1]]).where(N.greater(0),Ou([[1]])),R=N.sub(F.mul(S)),j=x.div(R);a=j.shape[0]===1?s.clone():s.concat(j.slice([1,0],[j.shape[0]-1,j.shape[1]]),0);var H=F.matMul(R).div(S).neg(),B=o.slice([h,0],[e-h,r]),k=H.mul(a);if(h===0)o=B.sub(k.matMul(a.transpose().matMul(B)));else{var D=B.sub(k.matMul(a.transpose().matMul(B)));o=o.slice([0,0],[h,r]).concat(D,0)}var P=i.slice([0,h],[e,i.shape[1]-h]);if(h===0)i=P.sub(P.matMul(a).matMul(k.transpose()));else{var z=P.sub(P.matMul(a).matMul(k.transpose()));i=i.slice([0,0],[e,h]).concat(z,1)}return[a,o,i]}),a=p[0],o=p[1],i=p[2],Vo([m,_,C])},d=0;d<u;++d)c(d);return!t&&e>r&&(i=i.slice([0,0],[e,r]),o=o.slice([0,0],[r,r])),[i,o]})}var nfe=te({bandPart_:function(n,t,e){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(e%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+e+".");var r=Y(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var i=r.shape,o=r.shape.slice(-2),s=o[0],a=o[1];if(!(t<=s))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+s+").");if(!(e<=a))throw new Error("bandPart(): numUpper ("+e+") must not be greater than the number of columns ("+a+").");t<0&&(t=s),e<0&&(e=a);var u=Y1(0,s,1,"int32").reshape([-1,1]),c=Y1(0,a,1,"int32"),d=Fn(u,c),h=fx(d.lessEqual(Ue(+t,"int32")),d.greaterEqual(Ue(-e,"int32"))),p=Gn([s,a],r.dtype);return Ti(Dn(r.reshape([-1,s,a])).map(function(m){return df(h,m,p)})).reshape(i)}}),rfe=te({gramSchmidt_:function(n){var t;if(Array.isArray(n)){t=!1,Q(n!=null&&n.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var e=n[0].shape[0],r=function(u){Q(n[u].shape[0]===e,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[u].shape[0]+" vs. "+e+")"})},i=1;i<n.length;++i)r(i)}else t=!0,n=RM(n,n.shape[0],0).map(function(u){return sz(u,[0])});Q(n.length<=n[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."});var o=[],s=n,a=function(u){o.push(ne.tidy(function(){var c=s[u];if(u>0)for(var d=0;d<u;++d){var h=m8(o[d].mulStrict(c)).mul(o[d]);c=c.sub(h)}return c.div(y8(c,"euclidean"))}))};for(i=0;i<n.length;++i)a(i);return t?Ti(o,0):o}}),ife=te({qr_:function(n,t){if(t===void 0&&(t=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return QU(n,t);var e=n.shape.slice(0,n.shape.length-2).reduce(function(s,a){return s*a}),r=Dn(n.reshape([e,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),i=[],o=[];return r.forEach(function(s){var a=QU(s,t),u=a[0],c=a[1];i.push(u),o.push(c)}),[Ti(i,0).reshape(n.shape),Ti(o,0).reshape(n.shape)]}}),ofe=Object.freeze({bandPart:nfe,gramSchmidt:rfe,qr:ife});function px(n,t,e,r,i,o){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY),o==null&&(o=0);var s=n.shape[0];return e=Math.min(e,s),Q(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),Q(n.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"}),Q(n.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]}),Q(t.rank===1,function(){return"scores must be a 1D tensor"}),Q(t.shape[0]===s,function(){return"scores has incompatible shape with boxes. Expected "+s+", but was "+t.shape[0]}),Q(0<=o&&o<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"}),{maxOutputSize:e,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var sfe=te({resizeBilinear_:function(n,t,e){e===void 0&&(e=!1);var r=Y(n,"images","resizeBilinear");Q(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),Q(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=ne.runKernelFunc(function(c,d){return d([i]),c.resizeBilinear(i,s,a,e)},{x:i},function(c,d){return{x:function(){return ne.runKernelFunc(function(h){return h.resizeBilinearBackprop(c,d[0],e)},{})}}},"ResizeBilinear",{alignCorners:e,newHeight:s,newWidth:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),afe=te({resizeNearestNeighbor_:function(n,t,e){e===void 0&&(e=!1);var r=Y(n,"images","resizeNearestNeighbor");Q(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),Q(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),Q(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=t[0],a=t[1],u=ne.runKernelFunc(function(c,d){return d([i]),c.resizeNearestNeighbor(i,s,a,e)},{batchImages:i},function(c,d){return{batchImages:function(){return ne.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(c,d[0],e)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),ufe=te({nonMaxSuppression_:function(n,t,e,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=Y(n,"boxes","nonMaxSuppression"),s=Y(t,"scores","nonMaxSuppression"),a=px(o,s,e,r,i);e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold;var u={maxOutputSize:e,iouThreshold:r,scoreThreshold:i};return ne.runKernelFunc(function(c){return c.nonMaxSuppression(o,s,e,r,i)},{boxes:o,scores:s},null,"NonMaxSuppressionV3",u)}}),cfe=function(n,t,e,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),tt(this,void 0,void 0,function(){var o,s,a,u,c,d,h;return nt(this,function(p){switch(p.label){case 0:return o=Y(n,"boxes","nonMaxSuppressionAsync"),s=Y(t,"scores","nonMaxSuppressionAsync"),a=px(o,s,e,r,i),e=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return u=p.sent(),c=u[0],d=u[1],h=WM(c,d,e,r,i),o!==n&&o.dispose(),s!==t&&s.dispose(),[2,h]}})})},lfe=te({nonMaxSuppressionWithScore_:function(n,t,e,r,i,o){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var s=Y(n,"boxes","nonMaxSuppression"),a=Y(t,"scores","nonMaxSuppression"),u=px(s,a,e,r,i,o),c={maxOutputSize:e=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:i=u.scoreThreshold,softNmsSigma:o=u.softNmsSigma},d=ne.runKernel("NonMaxSuppressionV5",{boxes:s,scores:a},c);return{selectedIndices:d[0],selectedScores:d[1]}}}),dfe=function(n,t,e,r,i,o){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),tt(this,void 0,void 0,function(){var s,a,u,c,d,h,p;return nt(this,function(m){switch(m.label){case 0:return s=Y(n,"boxes","nonMaxSuppressionAsync"),a=Y(t,"scores","nonMaxSuppressionAsync"),u=px(s,a,e,r,i,o),e=u.maxOutputSize,r=u.iouThreshold,i=u.scoreThreshold,o=u.softNmsSigma,[4,Promise.all([s.data(),a.data()])];case 1:return c=m.sent(),d=c[0],h=c[1],p=HM(d,h,e,r,i,o),s!==n&&s.dispose(),a!==t&&a.dispose(),[2,p]}})})},hfe=te({cropAndResize_:function(n,t,e,r,i,o){var s=Y(n,"image","cropAndResize"),a=Y(t,"boxes","cropAndResize","float32"),u=Y(e,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var c=a.shape[0];return Q(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),Q(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+a.shape+"."}),Q(u.rank===1&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+a.shape+"."}),Q(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),Q(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),Q(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),ne.runKernelFunc(function(d,h){return d.cropAndResize(s,a,u,r,i,o)},{images:s,boxes:a,boxInd:u},null,"CropAndResize",{method:i,extrapolationValue:o,cropSize:r})}}),I_=Object.freeze({resizeBilinear:sfe,resizeNearestNeighbor:afe,nonMaxSuppression:ufe,nonMaxSuppressionAsync:cfe,nonMaxSuppressionWithScore:lfe,nonMaxSuppressionWithScoreAsync:dfe,cropAndResize:hfe}),ok=function(n,t){return!(n>0)||t==="linear"},sk=function(n,t,e){if(e==null||e==="linear")return n;if(e==="relu")return n.mul(t.step());throw new Error("Gradient for activation "+e+" has not been implemented yet.")},ak=function(n,t){var e=t,r=jr(n.shape,t.shape);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},uk=function(n,t,e){if(t==="linear")return n;if(t==="relu")return Sn(n);if(t==="elu")return g8(n);if(t==="relu6")return _8(n);if(t==="prelu")return v8(n,e);throw new Error("Unknown fused activation "+t+".")},ffe=te({fusedMatMul_:function(n){var t,e=n.a,r=n.b,i=n.transposeA,o=i!==void 0&&i,s=n.transposeB,a=s!==void 0&&s,u=n.bias,c=n.activation,d=c===void 0?"linear":c,h=n.preluActivationWeights;if(ok(ne.state.gradientDepth,d)===!1){var p=Zm(e,r,o,a);return u!=null&&(p=gt(p,u)),uk(p,d,h)}var m=Y(e,"a","fused matMul"),_=Y(r,"b","fused matMul");t=er(m,_),m=t[0],_=t[1];var C=o?m.shape[m.rank-2]:m.shape[m.rank-1],x=a?_.shape[_.rank-1]:_.shape[_.rank-2],S=o?m.shape[m.rank-1]:m.shape[m.rank-2],N=a?_.shape[_.rank-2]:_.shape[_.rank-1],F=m.shape.slice(0,-2),R=_.shape.slice(0,-2),j=ot(F),H=ot(R);Q(m.rank>=2&&_.rank>=2&&m.rank===_.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+m.rank+" and "+_.rank+"."}),Q(Ur(F,R),function(){return"Error in fused matMul: outer dimensions ("+F+") and ("+R+") of Tensors with shapes "+m.shape+" and "+_.shape+" must match."}),Q(C===x,function(){return"Error in fused matMul: inner shapes ("+C+") and ("+x+") of Tensors with shapes "+m.shape+" and "+_.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var B,k,D=m.shape.slice(0,-2).concat([S,N]),P=o?m.as3D(j,C,S):m.as3D(j,S,C),z=a?_.as3D(H,N,x):_.as3D(H,x,N);u!=null&&Xt(D,(B=er(B=Y(u,"bias","fused matMul"),m)[0]).shape),h!=null&&(k=Y(h,"prelu weights","fused matMul"));var U={a:P,b:z};u!=null&&(U.bias=B),h!=null&&(U.preluActivationWeights=k);var $=[P,z];return ne.runKernelFunc(function(ae,de){var X=ae.fusedBatchMatMul({a:P,b:z,transposeA:o,transposeB:a,bias:B,activation:d,preluActivationWeights:k});return de([P,z,X]),X},U,function(ae,de){var X=de[0],re=de[1],J=de[2],ie=sk(ae,J,d),le={};return u!=null&&(le={bias:function(){return ak(B,ie)}}),Object.assign(o||a?!o&&a?{a:function(){return ie.matMul(re,!1,!1)},b:function(){return ie.matMul(X,!0,!1)}}:o&&!a?{a:function(){return re.matMul(ie,!1,!0)},b:function(){return X.matMul(ie,!1,!1)}}:{a:function(){return re.matMul(ie,!0,!0)},b:function(){return ie.matMul(X,!0,!0)}}:{a:function(){return ie.matMul(re,!1,!0)},b:function(){return X.matMul(ie,!0,!1)}},le)},"_FusedMatMul",{transposeA:o,transposeB:a,activation:d},$,[!0]).reshape(D)}}),pfe=te({fusedConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,u=a===void 0?[1,1]:a,c=n.dimRoundingMode,d=n.bias,h=n.activation,p=h===void 0?"linear":h,m=n.preluActivationWeights;if(p=p||"linear",ok(ne.state.gradientDepth,p)===!1){var _=li(t,e,r,i,s,u,c);return d!=null&&(_=gt(_,d)),uk(_,p,m)}var C=Y(t,"x","conv2d"),x=Y(e,"filter","conv2d"),S=C,N=!1;C.rank===3&&(N=!0,S=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),Q(S.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+S.rank+"."}),Q(x.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+x.rank+"."}),c!=null&&Q(cr(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+i+"."}),Q(S.shape[3]===x.shape[2],function(){return"Error in conv2d: depth of input ("+S.shape[3]+") must match input depth for filter "+x.shape[2]+"."}),Q(fo(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),Q(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var F,R,j=ud(S.shape,x.shape,r,u,i,c);d!=null&&(F=er(F=Y(d,"bias","fused conv2d"),C)[0],Xt(j.outShape,F.shape)),m!=null&&(R=Y(m,"prelu weights","fused conv2d"));var H={x:S,filter:x};d!=null&&(H.bias=F),m!=null&&(H.preluActivationWeights=R);var B=[x,S],k=ne.runKernelFunc(function(D,P){var z=D.fusedConv2d({input:S,filter:x,convInfo:j,bias:F,activation:p,preluActivationWeights:R});return P([x,S,z]),z},H,function(D,P){var z=P,U=z[0],$=z[1],ae=z[2],de=sk(D,ae,p);Q(lf(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var X={};return d!=null&&(X={bias:function(){return ak(F,de)}}),Object.assign({x:function(){return c8($.shape,de,U,r,i)},filter:function(){return JM($,de,U.shape,r,i)}},X)},"FusedConv2D",{convInfo:j,activation:p},B,[!0]);return N?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),mfe=te({fusedDepthwiseConv2d_:function(n){var t=n.x,e=n.filter,r=n.strides,i=n.pad,o=n.dataFormat,s=o===void 0?"NHWC":o,a=n.dilations,u=a===void 0?[1,1]:a,c=n.dimRoundingMode,d=n.bias,h=n.activation,p=h===void 0?"linear":h,m=n.preluActivationWeights;if(ok(ne.state.gradientDepth,p)===!1){var _=C_(t,e,r,i,s,u,c);return d!=null&&(_=gt(_,d)),uk(_,p,m)}var C=Y(t,"x","depthwiseConv2d"),x=Y(e,"filter","depthwiseConv2d"),S=C,N=!1;C.rank===3&&(N=!0,S=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),Q(S.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+S.rank+"."}),Q(x.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+x.rank+"."}),Q(S.shape[3]===x.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+S.shape[3]+") must match the inChannels dimension in filter "+x.shape[2]+"."}),u==null&&(u=[1,1]),Q(fo(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),c!=null&&Q(cr(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+i+"."});var F,R,j=ud(S.shape,x.shape,r,u,i,c,!0);d!=null&&(F=er(F=Y(d,"bias","fused conv2d"),C)[0],Xt(j.outShape,F.shape)),m!=null&&(R=Y(m,"prelu weights","fused depthwiseConv2d"));var H={x:S,filter:x};d!=null&&(H.bias=F),m!=null&&(H.preluActivationWeights=R);var B=[x,S],k=ne.runKernelFunc(function(D,P){var z=D.fusedDepthwiseConv2D({input:S,filter:x,convInfo:j,bias:F,activation:p,preluActivationWeights:R});return P([x,S,z]),z},H,function(D,P){Q(lf(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var z=P[0],U=P[1],$=P[2],ae=sk(D,$,p),de={};return d!=null&&(de={bias:function(){return ak(F,ae)}}),Object.assign({x:function(){return l8(U.shape,ae,z,j)},filter:function(){return d8(U,ae,z.shape,j)}},de)},"FusedDepthwiseConv2D",{convInfo:j,activation:p},B,[!0]);return N?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),gfe=Object.freeze({matMul:ffe,conv2d:pfe,depthwiseConv2d:mfe}),vfe=Object.freeze({image:I_,linalg:ofe,losses:tfe,spectral:Uhe,fused:gfe,signal:$he,square:Qle,squaredDifference:Yz,conv1d:she,conv2d:li,conv3d:ahe,depthwiseConv2d:C_,separableConv2d:x_,conv2dTranspose:uhe,conv3dTranspose:che,op:te,batchNormalization2d:Tde,batchNormalization3d:Ade,batchNormalization4d:Dde,batchNormalization:Pde,batchNorm:ZM,batchNorm2d:Mde,batchNorm3d:kde,batchNorm4d:Ode,booleanMaskAsync:ohe,complex:Ei,real:Ys,imag:ku,concat:Xn,concat1d:Vue,concat2d:Bue,concat3d:Uue,concat4d:jue,split:RM,matMul:Zm,dot:lhe,outerProduct:dhe,reverse:E_,reverse1d:hhe,reverse2d:fhe,reverse3d:phe,reverse4d:mhe,maxPool:lr,avgPool:Wc,pool:ghe,maxPool3d:vhe,avgPool3d:_he,slice:Ra,slice1d:yhe,slice2d:bhe,slice3d:ek,slice4d:whe,abs:Xle,acos:Jle,acosh:ede,asin:tde,asinh:nde,atan:rde,atanh:ide,ceil:ode,clipByValue:y_,cos:sde,cosh:ade,erf:ude,exp:dx,expm1:cde,floor:lde,log:dde,log1p:hde,logSigmoid:fde,neg:b_,reciprocal:pde,round:mde,rsqrt:Zz,sigmoid:YM,sign:gde,isNaN:vde,isInf:_de,isFinite:yde,sin:bde,sinh:wde,softplus:Cde,sqrt:xde,step:Ede,tan:Ide,tanh:Sde,all:Che,any:xhe,argMax:Ehe,argMin:Ihe,logSumExp:She,max:pf,mean:The,min:Ahe,moments:Dhe,sum:m8,prod:Phe,equal:i8,equalStrict:Yde,greater:Zde,greaterEqual:o8,greaterEqualStrict:Qde,greaterStrict:Xde,less:Jde,lessEqual:ehe,lessEqualStrict:the,lessStrict:nhe,notEqual:rhe,notEqualStrict:ihe,add:gt,addN:Fde,addStrict:Lde,atan2:Vde,div:Zs,divNoNan:Bde,divStrict:Ude,floorDiv:n8,maximum:QM,maximumStrict:jde,minimum:r8,minimumStrict:zde,mod:Wde,modStrict:Hde,mul:ur,mulStrict:$de,pow:tx,powStrict:qde,squaredDifferenceStrict:Gde,sub:Fn,subStrict:Kde,elu:g8,leakyRelu:Mhe,prelu:v8,relu:Sn,relu6:_8,selu:khe,logicalAnd:fx,logicalNot:Rde,logicalOr:e8,logicalXor:Nde,where:df,whereAsync:t8,buffer:Mt,print:Zue,batchToSpaceND:nz,broadcastTo:Que,cast:Xue,clone:Jue,cumsum:ece,depthToSpace:tce,expandDims:qi,eye:rz,multinomial:nce,oneHot:vM,pad:zc,pad1d:rce,pad2d:ice,pad3d:oce,pad4d:sce,rand:ace,randomNormal:uce,randomGamma:cce,randomUniform:iz,reshape:po,spaceToBatchND:oz,squeeze:sz,stack:Ti,tile:af,truncatedNormal:lce,unstack:Dn,setdiff1dAsync:dce,fill:ys,linspace:Lue,ones:Ym,range:Y1,scalar:Ue,tensor:ci,tensor1d:jn,tensor2d:Ou,tensor3d:sx,tensor4d:Xr,tensor5d:Rue,tensor6d:Nue,variable:Fue,zeros:Gn,onesLike:tz,zerosLike:an,transpose:Qs,softmax:mo,logSoftmax:fce,localResponseNormalization:Ohe,norm:y8,gather:XM,unsortedSegmentSum:s8,basicLSTMCell:Rhe,multiRNNCell:Nhe,movingAverage:Fhe,stridedSlice:Lhe,topk:Vhe,scatterND:Bhe,fft:tk,ifft:nx,rfft:nk,irfft:b8,sparseToDense:jhe,gatherND:zhe,diag:Whe,dropout:Hhe,hannWindow:rk,hammingWindow:C8,frame:ik,stft:x8,inTopKAsync:qhe});function Me(n,t){Array.isArray(n)||(n=[n]),n.forEach(function(e){e!=null&&Q(e.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function YP(n,t,e,r){if(e==="linear")return n.linear(t);if(e==="relu")return n.relu(t);if(e==="elu")return n.elu(t);if(e==="relu6")return n.relu6(t);if(e==="prelu")return n.prelu(t,r);throw new Error("Activation "+e+" has not been implemented for the CPU backend.")}var _fe=function(n){function t(){var e=n.call(this)||this;return e.blockSize=48,e.firstUse=!0,e.data=new pz(e,ne),e}return Na(t,n),t.prototype.write=function(e,r,i){this.firstUse&&(this.firstUse=!1,_e().get("IS_NODE")&&G1(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:e,dtype:i}),o},t.prototype.move=function(e,r,i,o){this.data.set(e,{values:r,dtype:o})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var r=this.data.get(e),i=r.dtype,o=r.complexTensors;return i==="complex64"?bM(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var r=this.readSync(e.dataId),i=r;if(e.dtype==="string")try{i=r.map(function(o){return u_(o)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Mt(e.shape,e.dtype,i)},t.prototype.makeOutput=function(e,r,i){var o=this.write(e,r,i);return ne.makeTensorFromDataId(o,r,i,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var r=this.data.get(e).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return tt(this,void 0,void 0,function(){var r;return nt(this,function(i){return r=ka(),e(),[2,{kernelMs:ka()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,r){var i=this.makeOutput(null,e.shape,"complex64");return this.data.get(i.dataId).complexTensors={real:ne.keep(e.clone()),imag:ne.keep(r.clone())},i},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,r,i){if(Me(e,"slice"),VM(e.shape,r,i)){var o=BM(r,e.strides),s=ot(i);return ci(this.readSync(e.dataId).subarray(o,o+s),i,e.dtype)}for(var a=Mt(i,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var d=a.indexToLoc(c).map(function(h,p){return h+r[p]});a.values[c]=u.get.apply(u,d)}return a.toTensor()},t.prototype.stridedSlice=function(e,r,i,o){Me(e,"stridedSlice");var s=ux(r,i,o);if(s.some(function(m){return m===0}))return ci([],s);for(var a=Mt(s,e.dtype),u=this.bufferSync(e),c=0;c<a.size;c++){for(var d=a.indexToLoc(c),h=new Array(d.length),p=0;p<h.length;p++)h[p]=d[p]*o[p]+r[p];a.set.apply(a,[u.get.apply(u,h)].concat(d))}return a.toTensor()},t.prototype.diag=function(e){for(var r=this.readSync(e.dataId),i=Mt([e.size,e.size],e.dtype),o=i.values,s=0;s<r.length;s++)o[s*e.size+s]=r[s];return i.toTensor()},t.prototype.unstack=function(e,r){for(var i=e.shape[r],o=new Array(e.rank-1),s=0,a=0;a<e.rank;a++)a!==r&&(o[s++]=e.shape[a]);var u=new Array(e.rank).fill(0),c=e.shape.slice();c[r]=1;var d=new Array(i);for(a=0;a<d.length;a++)u[r]=a,d[a]=this.slice(e,u,c).reshape(o);return d},t.prototype.reverse=function(e,r){Me(e,"reverse");for(var i=Mt(e.shape,e.dtype),o=this.bufferSync(e),s=function(u){var c=i.indexToLoc(u),d=c.slice();r.forEach(function(h){return d[h]=e.shape[h]-1-d[h]}),i.set.apply(i,[o.get.apply(o,d)].concat(c))},a=0;a<i.size;a++)s(a);return i.toTensor()},t.prototype.concat=function(e,r){var i=this;if(e[0].dtype==="complex64"){var o=e.map(function(m){return Ys(m)}),s=e.map(function(m){return ku(m)});return Ei(this.concat(o,r),this.concat(s,r))}var a=e.map(function(m){var _=ot(m.shape.slice(r));return m.as2D(-1,_)}),u=cf(a.map(function(m){return m.shape}),1),c=Mt(u,e[0].dtype).values;if(a[0].shape[0]===1){var d=0;a.forEach(function(m){c.set(i.readSync(m.dataId),d),d+=m.size})}else{var h=0;a.forEach(function(m){for(var _=i.readSync(m.dataId),C=0,x=0;x<m.shape[0];++x)for(var S=x*u[1]+h,N=0;N<m.shape[1];++N)c[S+N]=_[C++];h+=m.shape[1]})}var p=cf(e.map(function(m){return m.shape}),r);return ci(c,p,e[0].dtype)},t.prototype.neg=function(e){return Me(e,"neg"),this.multiply(Ue(-1),e)},t.prototype.add=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i+s,imag:o+a}}):this.broadcastedBinaryOp(e,r,ui(e.dtype,r.dtype),function(i,o){return i+o})},t.prototype.addN=function(e){var r=this;Me(e,"addN");for(var i=e.map(function(d){return r.readSync(d.dataId)}),o=Mt(e[0].shape,e[0].dtype),s=o.values,a=0;a<e.length;a++)for(var u=i[a],c=0;c<s.length;c++)s[c]+=u[c];return o.toTensor()},t.prototype.softmax=function(e,r){var i=zr([r],e.shape),o=this.max(e,i),s=ho(o.shape,i),a=this.subtract(e,o.reshape(s)),u=this.exp(a),c=this.sum(u,i).reshape(s);return this.realDivide(u,c)},t.prototype.subtract=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i-s,imag:o-a}}):this.broadcastedBinaryOp(e,r,ui(e.dtype,r.dtype),function(i,o){return i-o})},t.prototype.pow=function(e,r){return Me([e,r],"pow"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.pow(i,o)})},t.prototype.batchMatMul=function(e,r,i,o){Me([e,r],"matMul");for(var s=i?e.shape[1]:e.shape[2],a=i?e.shape[2]:e.shape[1],u=o?r.shape[1]:r.shape[2],c=e.shape[0],d=this.readSync(e.dataId),h=this.readSync(r.dataId),p=i?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],m=p[0],_=p[1],C=p[2],x=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],S=x[0],N=x[1],F=x[2],R=a*u,j=Mt([c,a,u],e.dtype),H=j.values,B=this.blockSize,k=0;k<c;k++)for(var D=0;D<a;D+=B)for(var P=0;P<u;P+=B)for(var z=0;z<s;z+=B)for(var U=Math.min(D+B,a),$=Math.min(P+B,u),ae=Math.min(z+B,s),de=D;de<U;de++)for(var X=P;X<$;X++){for(var re=0,J=z;J<ae;J++)re+=d[k*m+de*_+J*C]*h[J*S+X*N+k*F];H[k*R+(de*u+X)]+=re}return j.toTensor()},t.prototype.fusedBatchMatMul=function(e){var r=e.a,i=e.b,o=e.transposeA,s=e.transposeB,a=e.bias,u=e.activation,c=e.preluActivationWeights,d=this.batchMatMul(r,i,o,s);return a&&(d=this.add(d,a)),u&&(d=YP(this,d,u,c)),d},t.prototype.multiply=function(e,r){return e.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),r.cast("complex64"),function(i,o,s,a){return{real:i*s-o*a,imag:i*a+o*s}}):this.broadcastedBinaryOp(e,r,ui(e.dtype,r.dtype),function(i,o){return i*o})},t.prototype.realDivide=function(e,r){return Me([e,r],"realDivide"),this.broadcastedBinaryOp(e,r,"float32",function(i,o){return i/o})},t.prototype.floorDiv=function(e,r){return Me([e,r],"floorDiv"),this.broadcastedBinaryOp(e,r,"int32",function(i,o){return Math.floor(i/o)})},t.prototype.sum=function(e,r){Me(e,"sum"),Fo("sum",r,e.rank);for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,ui(e.dtype,"int32")),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=0,_=0;_<u;++_)m+=d[p+_];c[h]=m}return a},t.prototype.prod=function(e,r){Me(e,"sum");for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,ui(e.dtype,"int32")),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=1,_=0;_<u;++_)m*=d[p+_];c[h]=m}return a},t.prototype.unsortedSegmentSum=function(e,r,i){Me(e,"unsortedSegmentSum");for(var o=[],s=e.rank-r.rank,a=0;a<s;++a)r=r.expandDims(a+1);for(a=0;a<i;++a){var u=Ue(a,"int32"),c=i8(u,r).asType("float32").mul(e).sum(0);o.push(c)}return Ti(o)},t.prototype.argMin=function(e,r){Me(e,"argMin");var i=[r];Fo("argMin",i,e.rank);for(var o=Ii(e.shape,i),s=o[0],a=o[1],u=Gn(s,"int32"),c=ot(a),d=this.readSync(u.dataId),h=this.readSync(e.dataId),p=0;p<d.length;++p){for(var m=p*c,_=h[m],C=0,x=0;x<c;++x){var S=h[m+x];S<_&&(_=S,C=x)}d[p]=C}return u},t.prototype.argMax=function(e,r){Me(e,"argMax");var i=[r];Fo("argMax",i,e.rank);for(var o=Ii(e.shape,i),s=o[0],a=o[1],u=Gn(s,"int32"),c=ot(a),d=this.readSync(u.dataId),h=this.readSync(e.dataId),p=0;p<d.length;++p){for(var m=p*c,_=h[m],C=0,x=0;x<c;++x){var S=h[m+x];S>_&&(_=S,C=x)}d[p]=C}return u},t.prototype.cumsum=function(e,r,i,o){if(Me(e,"cumsum"),r!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+r);for(var s=ui(e.dtype,"int32"),a=Gn(e.shape,s),u=this.readSync(a.dataId),c=this.readSync(e.dataId),d=e.shape[e.rank-1],h=o?function(x,S){return x+d-S-1}:function(x,S){return x+S},p=0;p<c.length;p+=d)for(var m=0;m<d;m++){var _=h(p,m);if(m===0)u[_]=i?0:c[_];else{var C=h(p,m-1);u[_]=i?c[C]+u[C]:c[_]+u[C]}}return a},t.prototype.equal=function(e,r){return Me([e,r],"equal"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i===o?1:0})},t.prototype.notEqual=function(e,r){return Me([e,r],"notEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i!==o?1:0})},t.prototype.less=function(e,r){return Me([e,r],"less"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<o?1:0})},t.prototype.lessEqual=function(e,r){return Me([e,r],"lessEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i<=o?1:0})},t.prototype.greater=function(e,r){return Me([e,r],"greater"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>o?1:0})},t.prototype.greaterEqual=function(e,r){return Me([e,r],"greaterEqual"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i>=o?1:0})},t.prototype.logicalNot=function(e){Me(e,"logicalNot");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r[o]?0:1;return this.makeOutput(i,e.shape,"bool")},t.prototype.logicalAnd=function(e,r){return Me([e,r],"logicalAnd"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i&&o})},t.prototype.logicalOr=function(e,r){return Me([e,r],"logicalOr"),this.broadcastedBinaryOp(e,r,"bool",function(i,o){return i||o})},t.prototype.select=function(e,r,i){Me([e,r,i],"select");for(var o=this.readSync(e.dataId),s=this.readSync(r.dataId),a=this.readSync(i.dataId),u=Gn(r.shape,ui(r.dtype,i.dtype)),c=this.readSync(u.dataId),d=0,h=e.rank===0||e.rank>1||r.rank===1?1:ot(r.shape.slice(1)),p=0;p<o.length;p++)for(var m=0;m<h;m++)o[p]===1?c[d++]=s[p]:c[d++]=a[p];return u},t.prototype.where=function(e){Me([e],"where");var r=this.readSync(e.dataId);return $M(e.shape,r)},t.prototype.topk=function(e,r,i){return Me(e,"topk"),yz(this.readSync(e.dataId),e.shape,e.dtype,r)},t.prototype.min=function(e,r){Me(e,"min"),Fo("min",r,e.rank);for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,e.dtype),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=d[p],_=0;_<u;++_){var C=d[p+_];C<m&&(m=C)}c[h]=m}return a},t.prototype.minimum=function(e,r){return Me([e,r],"minimum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.min(i,o)})},t.prototype.mod=function(e,r){return Me([e,r],"mod"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i%o;return i<0&&o<0||i>=0&&o>=0?s:(s+o)%o})},t.prototype.max=function(e,r){Me(e,"max"),Fo("max",r,e.rank);for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,e.dtype),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=d[p],_=0;_<u;++_){var C=d[p+_];C>m&&(m=C)}c[h]=m}return a},t.prototype.maximum=function(e,r){return Me([e,r],"maximum"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.max(i,o)})},t.prototype.all=function(e,r){Me(e,"all"),Fo("all",r,e.rank);for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,e.dtype),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=d[p],_=0;_<u;++_){var C=d[p+_];m=m&&C}c[h]=m}return a},t.prototype.any=function(e,r){Me(e,"any"),Fo("any",r,e.rank);for(var i=Ii(e.shape,r),o=i[0],s=i[1],a=Gn(o,e.dtype),u=ot(s),c=this.readSync(a.dataId),d=this.readSync(e.dataId),h=0;h<c.length;++h){for(var p=h*u,m=d[p],_=0;_<u;++_){var C=d[p+_];m=m||C}c[h]=m}return a},t.prototype.squaredDifference=function(e,r){return Me([e,r],"squaredDifference"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){var s=i-o;return s*s})},t.prototype.ceil=function(e){Me(e,"ceil");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.ceil(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.floor=function(e){Me(e,"floor");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.floor(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.sign=function(e){Me(e,"x");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?i[o]=-1:r[o]>0?i[o]=1:i[o]=0;return this.makeOutput(i,e.shape,"float32")},t.prototype.isNaN=function(e){Me(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isInf=function(e){Me(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.isFinite=function(e){Me(e,"x");for(var r=this.readSync(e.dataId),i=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(i[o]=1);return this.makeOutput(i,e.shape,"bool")},t.prototype.round=function(e){Me(e,"round");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=Math.floor(r[o]);r[o]-s<.5?i[o]=Math.floor(r[o]):r[o]-s>.5?i[o]=Math.ceil(r[o]):i[o]=s%2==0?s:s+1}return this.makeOutput(i,e.shape,"float32")},t.prototype.exp=function(e){Me(e,"exp");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.exp(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.expm1=function(e){Me(e,"expm1");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=Math.expm1(r[o]);return this.makeOutput(i,e.shape,"float32")},t.prototype.log=function(e){Me(e,"log");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.log1p=function(e){Me(e,"log1p");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.log1p(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.sqrt=function(e){Me(e,"sqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=Math.sqrt(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.rsqrt=function(e){Me(e,"rsqrt");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o){var s=r[o];i[o]=1/Math.sqrt(s)}return this.makeOutput(i,e.shape,"float32")},t.prototype.reciprocal=function(e){Me(e,"reciprocal");for(var r=this.readSync(e.dataId),i=new Float32Array(r.length),o=0;o<r.length;++o)i[o]=1/r[o];return this.makeOutput(i,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Me(e,"relu");for(var r=Gn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.max(0,o[s]);return r},t.prototype.relu6=function(e){Me(e,"relu");for(var r=Gn(e.shape,e.dtype),i=this.readSync(r.dataId),o=this.readSync(e.dataId),s=0;s<o.length;++s)i[s]=Math.min(Math.max(0,o[s]),6);return r},t.prototype.prelu=function(e,r){return Me([e,r],"prelu"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return i<0?o*i:i})},t.prototype.elu=function(e){Me(e,"elu");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o];r[o]=s>=0?s:Math.exp(s)-1}return this.makeOutput(r,e.shape,"float32")},t.prototype.eluDer=function(e,r){Me([e,r],"eluDer");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),s=this.readSync(e.dataId),a=0;a<o.length;++a){var u=o[a];i[a]=u>=1?s[a]:s[a]*(u+1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.selu=function(e){Me(e,"selu");for(var r=GM,i=KM,o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>=0?i*u:r*(Math.exp(u)-1)}return this.makeOutput(o,e.shape,"float32")},t.prototype.clip=function(e,r,i){Me(e,"clip");for(var o=new Float32Array(e.size),s=this.readSync(e.dataId),a=0;a<s.length;++a){var u=s[a];o[a]=u>i?i:u<r?r:u}return this.makeOutput(o,e.shape,"float32")},t.prototype.abs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.abs(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<e.size;++o){var s=i[2*o],a=i[2*o+1];r[o]=Math.hypot(s,a)}return this.makeOutput(r,e.shape,"float32")},t.prototype.int=function(e){Me(e,"int");for(var r=new Int32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=i[o];return this.makeOutput(r,e.shape,"int32")},t.prototype.sigmoid=function(e){Me(e,"sigmoid");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=1/(1+Math.exp(-i[o]));return this.makeOutput(r,e.shape,"float32")},t.prototype.softplus=function(e){Me(e,"softplus");for(var r=Math.log(11920928955078125e-23)+2,i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s]>-r,u=o[s]<r,c=Math.exp(o[s]),d=void 0;d=u?c:a?o[s]:Math.log(1+c),i[s]=d}return this.makeOutput(i,e.shape,"float32")},t.prototype.sin=function(e){Me(e,"sin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cos=function(e){Me(e,"cos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tan=function(e){Me(e,"tan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.tan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asin=function(e){Me(e,"asin");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asin(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acos=function(e){Me(e,"acos");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acos(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan=function(e){Me(e,"atan");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atan(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atan2=function(e,r){return Me([e,r],"atan2"),this.broadcastedBinaryOp(e,r,e.dtype,function(i,o){return Math.atan2(i,o)})},t.prototype.sinh=function(e){Me(e,"sinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.sinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.cosh=function(e){Me(e,"cosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.cosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.tanh=function(e){Me(e,"tanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=fj(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.asinh=function(e){Me(e,"asinh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.asinh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.acosh=function(e){Me(e,"acosh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.acosh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.atanh=function(e){Me(e,"atanh");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.atanh(i[o]);return this.makeOutput(r,e.shape,"float32")},t.prototype.erf=function(e){Me(e,"erf");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=Math.sign(i[o]),a=Math.abs(i[o]),u=1/(1+.3275911*a);r[o]=s*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-a*a))}return this.makeOutput(r,e.shape,"float32")},t.prototype.step=function(e,r){r===void 0&&(r=0),Me(e,"step");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];isNaN(a)?i[s]=NaN:i[s]=a>0?1:r}return this.makeOutput(i,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.conv2d(r,i,o);return s&&(c=this.add(c,s)),a&&(c=YP(this,c,a,u)),c},t.prototype.conv2d=function(e,r,i){Me([e,r],"conv2d");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,d=i.padInfo.top,h=i.dataFormat==="channelsLast",p=Mt(i.outShape,e.dtype),m=e.strides[0],_=h?e.strides[1]:e.strides[2],C=h?e.strides[2]:1,x=h?1:e.strides[1],S=p.strides[0],N=h?p.strides[1]:p.strides[2],F=h?p.strides[2]:1,R=h?1:p.strides[1],j=this.readSync(e.dataId),H=this.readSync(r.dataId),B=p.values,k=0;k<i.batchSize;++k)for(var D=k*m,P=k*S,z=0;z<i.outHeight;++z)for(var U=P+z*N,$=z*i.strideHeight-d,ae=0;ae<o;ae++){var de=$+ae*a;if(!(de<0||de>=i.inHeight))for(var X=ae*r.strides[0],re=D+de*_,J=0;J<i.outWidth;++J)for(var ie=U+J*F,le=J*i.strideWidth-c,Ee=0;Ee<s;Ee++){var ye=le+Ee*u;if(!(ye<0||ye>=i.inWidth))for(var we=re+ye*C,Ce=X+Ee*r.strides[1],ze=0;ze<i.inChannels;++ze){for(var Ye=j[we+ze*x],He=0;He<i.outChannels;++He)B[ie+He*R]+=Ye*H[Ce+He];Ce+=i.outChannels}}}return p.toTensor()},t.prototype.conv3d=function(e,r,i){for(var o=i.filterDepth,s=i.filterHeight,a=i.filterWidth,u=i.dilationDepth,c=i.dilationHeight,d=i.dilationWidth,h=i.padInfo.front,p=i.padInfo.left,m=i.padInfo.top,_=Mt(i.outShape,e.dtype),C=this.readSync(e.dataId),x=this.readSync(r.dataId),S=_.values,N=0;N<i.batchSize;++N)for(var F=N*e.strides[0],R=N*_.strides[0],j=0;j<i.outDepth;++j)for(var H=R+j*_.strides[1],B=j*i.strideDepth-h,k=0;k<o;k++){var D=B+k*u;if(!(D<0||D>=i.inDepth))for(var P=k*r.strides[0],z=F+D*e.strides[1],U=0;U<i.outHeight;++U)for(var $=H+U*_.strides[2],ae=U*i.strideHeight-m,de=0;de<s;de++){var X=ae+de*c;if(!(X<0||X>=i.inHeight))for(var re=P+de*r.strides[1],J=z+X*e.strides[2],ie=0;ie<i.outWidth;++ie)for(var le=$+ie*i.outChannels,Ee=ie*i.strideWidth-p,ye=0;ye<a;ye++){var we=Ee+ye*d;if(!(we<0||we>=i.inWidth))for(var Ce=re+ye*r.strides[2],ze=J+we*i.inChannels,Ye=Ce,He=0;He<i.inChannels;++He){for(var it=C[ze+He],Je=0;Je<i.outChannels;++Je)S[le+Je]+=it*x[Ye+Je];Ye+=i.outChannels}}}}return _.toTensor()},t.prototype.conv2dDerInput=function(e,r,i){Me([e,r],"conv2dDerInput");for(var o=Mt(i.inShape,"float32"),s=o.values,a=this.readSync(e.dataId),u=this.readSync(r.dataId),c=r.strides,d=c[0],h=c[1],p=c[2],m=i.batchSize,_=i.filterHeight,C=i.filterWidth,x=i.inChannels,S=i.inHeight,N=i.inWidth,F=i.outChannels,R=i.outHeight,j=i.outWidth,H=i.strideHeight,B=i.strideWidth,k=i.dataFormat,D=_-1-i.padInfo.top,P=C-1-i.padInfo.left,z=k==="channelsLast",U=o.strides[0],$=z?o.strides[1]:o.strides[2],ae=z?o.strides[2]:1,de=z?1:o.strides[1],X=e.strides[0],re=z?e.strides[1]:e.strides[2],J=z?e.strides[2]:1,ie=z?1:e.strides[1],le=0;le<m;++le)for(var Ee=0;Ee<x;++Ee)for(var ye=0;ye<S;++ye)for(var we=ye-D,Ce=Math.max(0,Math.ceil(we/H)),ze=Math.min(R,(_+we)/H),Ye=0;Ye<N;++Ye){for(var He=Ye-P,it=Math.max(0,Math.ceil(He/B)),Je=Math.min(j,(C+He)/B),vt=0,Ge=Ce;Ge<ze;++Ge)for(var Qe=Ge*H-we,at=it;at<Je;++at)for(var ft=X*le+re*Ge+J*at,At=d*(_-1-Qe)+h*(C-1-(at*B-He))+p*Ee,cn=0;cn<F;++cn)vt+=a[ft+ie*cn]*u[At+cn];s[U*le+$*ye+ae*Ye+de*Ee]=vt}return o.toTensor()},t.prototype.conv3dDerInput=function(e,r,i){for(var o=Mt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],d=a[2],h=a[3],p=this.readSync(e.dataId),m=e.strides,_=m[0],C=m[1],x=m[2],S=m[3],N=this.readSync(r.dataId),F=r.strides,R=F[0],j=F[1],H=F[2],B=F[3],k=i.batchSize,D=i.filterDepth,P=i.filterHeight,z=i.filterWidth,U=i.inChannels,$=i.inDepth,ae=i.inHeight,de=i.inWidth,X=i.outChannels,re=i.outDepth,J=i.outHeight,ie=i.outWidth,le=i.strideDepth,Ee=i.strideHeight,ye=i.strideWidth,we=D-1-i.padInfo.front,Ce=P-1-i.padInfo.top,ze=z-1-i.padInfo.left,Ye=0;Ye<k;++Ye)for(var He=0;He<U;++He)for(var it=0;it<$;++it)for(var Je=it-we,vt=Math.max(0,Math.ceil(Je/le)),Ge=Math.min(re,(D+Je)/le),Qe=0;Qe<ae;++Qe)for(var at=Qe-Ce,ft=Math.max(0,Math.ceil(at/Ee)),At=Math.min(J,(P+at)/Ee),cn=0;cn<de;++cn){for(var Tn=cn-ze,Mr=Math.max(0,Math.ceil(Tn/ye)),tr=Math.min(ie,(z+Tn)/ye),Xi=0,yt=vt;yt<Ge;++yt)for(var zn=yt*le-Je,dr=ft;dr<At;++dr)for(var hr=dr*Ee-at,rn=Mr;rn<tr;++rn)for(var Ln=_*Ye+C*yt+x*dr+S*rn,An=R*(D-1-zn)+j*(P-1-hr)+H*(z-1-(rn*ye-Tn))+B*He,hn=0;hn<X;++hn)Xi+=p[Ln+hn]*N[An+hn];s[u*Ye+c*it+d*Qe+h*cn+He]=Xi}return o.toTensor()},t.prototype.conv2dDerFilter=function(e,r,i){Me([e,r],"conv2dDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dataFormat==="channelsLast",d=Mt(i.filterShape,"float32"),h=i.padInfo.left,p=i.padInfo.top,m=this.bufferSync(e),_=this.bufferSync(r),C=0;C<a;++C)for(var x=Math.max(0,Math.ceil((p-C)/o)),S=Math.min(i.outHeight,(i.inHeight+p-C)/o),N=0;N<u;++N)for(var F=Math.max(0,Math.ceil((h-N)/s)),R=Math.min(i.outWidth,(i.inWidth+h-N)/s),j=0;j<i.inChannels;++j)for(var H=0;H<i.outChannels;++H){for(var B=0,k=0;k<i.batchSize;++k)for(var D=x;D<S;++D)for(var P=C+D*o-p,z=F;z<R;++z){var U=N+z*s-h;B+=c?m.get(k,P,U,j)*_.get(k,D,z,H):m.get(k,j,P,U)*_.get(k,H,D,z)}d.set(B,C,N,j,H)}return d.toTensor()},t.prototype.conv3dDerFilter=function(e,r,i){for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,d=i.filterWidth,h=Mt(i.filterShape,"float32"),p=h.values,m=h.strides,_=m[0],C=m[1],x=m[2],S=m[3],N=this.readSync(r.dataId),F=r.strides,R=F[0],j=F[1],H=F[2],B=F[3],k=this.readSync(e.dataId),D=e.strides,P=D[0],z=D[1],U=D[2],$=D[3],ae=i.padInfo.front,de=i.padInfo.left,X=i.padInfo.top,re=0;re<u;++re)for(var J=Math.max(0,Math.ceil((ae-re)/o)),ie=Math.min(i.outDepth,(i.inDepth+ae-re)/o),le=re*_,Ee=0;Ee<c;++Ee)for(var ye=Math.max(0,Math.ceil((X-Ee)/s)),we=Math.min(i.outHeight,(i.inHeight+X-Ee)/s),Ce=Ee*C+le,ze=0;ze<d;++ze)for(var Ye=Math.max(0,Math.ceil((de-ze)/a)),He=Math.min(i.outWidth,(i.inWidth+de-ze)/a),it=ze*x+Ce,Je=0;Je<i.inChannels;++Je)for(var vt=Je*S+it,Ge=0;Ge<i.outChannels;++Ge){for(var Qe=0,at=0;at<i.batchSize;++at)for(var ft=at*P,At=at*R,cn=J;cn<ie;++cn)for(var Tn=(re+cn*o-ae)*z+ft,Mr=cn*j+At,tr=ye;tr<we;++tr)for(var Xi=(Ee+tr*s-X)*U+Tn,yt=tr*H+Mr,zn=Ye;zn<He;++zn){var dr=zn*B+yt;Qe+=k[(ze+zn*a-de)*$+Xi+Je]*N[dr+Ge]}p[vt+Ge]=Qe}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights,c=this.depthwiseConv2D(r,i,o);return s&&(c=this.add(c,s)),a&&(c=YP(this,c,a,u)),c},t.prototype.depthwiseConv2D=function(e,r,i){Me([e,r],"depthwiseConv2D");for(var o=i.filterHeight,s=i.filterWidth,a=i.dilationHeight,u=i.dilationWidth,c=i.padInfo.left,d=i.padInfo.top,h=i.outChannels/i.inChannels,p=Mt(i.outShape,e.dtype),m=this.readSync(e.dataId),_=this.readSync(r.dataId),C=p.values,x=0;x<i.batchSize;++x)for(var S=x*e.strides[0],N=x*p.strides[0],F=0;F<i.outHeight;++F)for(var R=N+F*p.strides[1],j=F*i.strideHeight-c,H=0;H<o;++H){var B=j+H*a;if(!(B<0||B>=i.inHeight))for(var k=H*r.strides[0],D=S+B*e.strides[1],P=0;P<i.outWidth;++P)for(var z=R+P*p.strides[2],U=P*i.strideWidth-d,$=0;$<s;++$){var ae=U+$*u;if(!(ae<0||ae>=i.inWidth))for(var de=k+$*r.strides[1],X=D+ae*i.inChannels,re=z,J=de,ie=0;ie<i.inChannels;++ie){for(var le=m[X+ie],Ee=0;Ee<h;++Ee)C[re+Ee]+=le*_[J+Ee];re+=h,J+=h}}}return p.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,r,i){Me([e,r],"depthwiseConv2DDerInput");for(var o=Mt(i.inShape,"float32"),s=o.values,a=o.strides,u=a[0],c=a[1],d=a[2],h=this.readSync(e.dataId),p=e.strides,m=p[0],_=p[1],C=p[2],x=this.readSync(r.dataId),S=r.strides,N=S[0],F=S[1],R=S[2],j=i.batchSize,H=i.filterHeight,B=i.filterWidth,k=i.inChannels,D=i.inHeight,P=i.inWidth,z=i.outChannels,U=i.outHeight,$=i.outWidth,ae=i.strideHeight,de=i.strideWidth,X=H-1-i.padInfo.top,re=B-1-i.padInfo.left,J=z/k,ie=0;ie<j;++ie)for(var le=0;le<k;++le)for(var Ee=0;Ee<D;++Ee)for(var ye=Ee-X,we=Math.max(0,Math.ceil(ye/ae)),Ce=Math.min(U,(H+ye)/ae),ze=0;ze<P;++ze){for(var Ye=ze-re,He=Math.max(0,Math.ceil(Ye/de)),it=Math.min($,(B+Ye)/de),Je=0,vt=we;vt<Ce;++vt)for(var Ge=vt*ae-ye,Qe=He;Qe<it;++Qe)for(var at=m*ie+_*vt+C*Qe,ft=N*(H-1-Ge)+F*(B-1-(Qe*de-Ye))+R*le,At=0;At<J;++At)Je+=h[at+(le*J+At)]*x[ft+At];s[u*ie+c*Ee+d*ze+le]=Je}return o.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,r,i){Me([e,r],"depthwiseConv2DDerFilter");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=Mt(i.filterShape,"float32"),d=i.padInfo.left,h=i.padInfo.top,p=i.outChannels/i.inChannels,m=this.bufferSync(e),_=this.bufferSync(r),C=0;C<a;++C)for(var x=Math.max(0,Math.ceil((h-C)/o)),S=Math.min(i.outHeight,(i.inHeight+h-C)/o),N=0;N<u;++N)for(var F=Math.max(0,Math.ceil((d-N)/s)),R=Math.min(i.outWidth,(i.inWidth+d-N)/s),j=0;j<i.outChannels;++j){for(var H=Math.trunc(j/p),B=j%p,k=0,D=0;D<i.batchSize;++D)for(var P=x;P<S;++P)for(var z=C+P*o-h,U=F;U<R;++U){var $=N+U*s-d;k+=m.get(D,z,$,H)*_.get(D,P,U,j)}c.set(k,C,N,H,B)}return c.toTensor()},t.prototype.tile=function(e,r){return Me(e,"tile"),_z(this.bufferSync(e),r)},t.prototype.pad=function(e,r,i){Me(e,"pad");var o=r.map(function(p,m){return p[0]+e.shape[m]+p[1]}),s=r.map(function(p){return p[0]}),a=this.bufferSync(e),u=Mt(o,e.dtype);i!==0&&u.values.fill(i);for(var c=0;c<e.size;c++){var d=a.indexToLoc(c),h=d.map(function(p,m){return p+s[m]});u.set.apply(u,[a.get.apply(a,d)].concat(h))}return u.toTensor()},t.prototype.transpose=function(e,r){Me(e,"transpose");for(var i=new Array(e.rank),o=0;o<i.length;o++)i[o]=e.shape[r[o]];var s=this.readSync(e.dataId),a=Mt(i,e.dtype),u=this.bufferSync(e);for(o=0;o<e.size;++o){for(var c=u.indexToLoc(o),d=new Array(c.length),h=0;h<d.length;h++)d[h]=c[r[h]];var p=a.locToIndex(d);a.values[p]=s[o]}return a.toTensor()},t.prototype.gather=function(e,r,i){Me([e,r],"gather");var o=e.shape.slice(),s=this.readSync(r.dataId);o[i]=s.length;for(var a=Mt(o,e.dtype),u=this.bufferSync(e),c=0;c<a.size;++c){var d=a.indexToLoc(c),h=d.slice();h[i]=s[d[i]];var p=u.locToIndex(h);a.values[c]=u.values[p]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,r,i){Me([e],"batchToSpaceND");var o=r.reduce(function(h,p){return h*p}),s=Z1(e.shape,r,o),a=Q1(s.length,r.length),u=X1(e.shape,r,o),c=az(i,r.length),d=uz(u,i,r.length);return e.reshape(s).transpose(a).reshape(u).slice(c,d)},t.prototype.spaceToBatchND=function(e,r,i){Me([e],"spaceToBatchND");var o=r.reduce(function(p,m){return p*m}),s=[[0,0]];s.push.apply(s,i);for(var a=1+r.length;a<e.shape.length;++a)s.push([0,0]);var u=e.pad(s),c=Z1(u.shape,r,o,!1),d=Q1(c.length,r.length,!1),h=X1(u.shape,r,o,!1);return u.reshape(c).transpose(d).reshape(h)},t.prototype.pool=function(e,r,i){Me(e,"pool");for(var o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,_=this.readSync(e.dataId),C=Mt(r.outShape,e.dtype),x=C.values,S=r.outShape[1]*r.outShape[2]*r.outShape[3],N=r.outShape[2]*r.outShape[3],F=r.outShape[3],R=0;R<r.batchSize;++R)for(var j=R*S,H=R*e.strides[0],B=0;B<r.inChannels;++B)for(var k=0;k<r.outHeight;++k)for(var D=k*o-h,P=Math.max(0,D),z=Math.min(r.inHeight,c+D),U=j+k*N,$=0;$<r.outWidth;++$){for(var ae=$*s-p,de=Math.max(0,ae),X=Math.min(r.inWidth,d+ae),re=m,J=0,ie=0,le=P;le<z;le+=a){for(var Ee=H+le*e.strides[1],ye=de;ye<X;ye+=u){var we=_[Ee+ye*e.strides[2]+B];i==="max"&&we>re?re=we:i==="avg"&&(J+=we,ie++)}if(isNaN(re))break}x[U+$*F+B]=i==="avg"?J/ie:re}return C.toTensor()},t.prototype.maxPool=function(e,r){return this.pool(e,r,"max")},t.prototype.maxPoolPositions=function(e,r){for(var i=Mt(r.outShape,"int32"),o=r.strideHeight,s=r.strideWidth,a=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,p=r.padInfo.left,m=this.bufferSync(e),_=0;_<r.batchSize;++_)for(var C=0;C<r.inChannels;++C)for(var x=0;x<r.outHeight;++x){for(var S=x*o-h,N=S;N<0;)N+=a;for(var F=Math.min(r.inHeight,c+S),R=0;R<r.outWidth;++R){for(var j=R*s-p,H=j;H<0;)H+=u;for(var B=Math.min(r.inWidth,d+j),k=Number.NEGATIVE_INFINITY,D=-1,P=N;P<F;P+=a)for(var z=P-S,U=H;U<B;U+=u){var $=U-j,ae=m.get(_,P,U,C);ae>k&&(k=ae,D=z*d+$)}i.set(D,_,x,R,C)}}return i.toTensor()},t.prototype.maxPoolBackprop=function(e,r,i,o){Me([r,i],"maxPoolBackprop");for(var s=this.maxPoolPositions(r,o),a=o.strideHeight,u=o.strideWidth,c=o.dilationHeight,d=o.dilationWidth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,m=p-1-o.padInfo.left,_=h-1-o.padInfo.top,C=Mt(r.shape,"float32"),x=this.bufferSync(s),S=this.bufferSync(e),N=0;N<o.batchSize;++N)for(var F=0;F<o.inChannels;++F)for(var R=0;R<o.inHeight;++R)for(var j=0;j<o.inWidth;++j){for(var H=R-_,B=j-m,k=0,D=0;D<h;D+=c){var P=(H+D)/a;if(!(P<0||P>=o.outHeight||Math.floor(P)!==P))for(var z=0;z<p;z+=d){var U=(B+z)/u;if(!(U<0||U>=o.outWidth||Math.floor(U)!==U)){var $=h*p-1-x.get(N,P,U,F)===D*p+z?1:0;$!==0&&(k+=S.get(N,P,U,F)*$)}}}C.set(k,N,R,j,F)}return C.toTensor()},t.prototype.avgPoolBackprop=function(e,r,i){Me([e,r],"avgPoolBackprop");for(var o=i.strideHeight,s=i.strideWidth,a=i.filterHeight,u=i.filterWidth,c=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterHeight,p=i.effectiveFilterWidth,m=p-1-i.padInfo.left,_=h-1-i.padInfo.top,C=Mt(r.shape,"float32"),x=1/(a*u),S=this.bufferSync(e),N=0;N<i.batchSize;++N)for(var F=0;F<i.inChannels;++F)for(var R=0;R<i.inHeight;++R)for(var j=0;j<i.inWidth;++j){for(var H=R-_,B=j-m,k=0,D=0;D<h;D+=c){var P=(H+D)/o;if(!(P<0||P>=i.outHeight||Math.floor(P)!==P))for(var z=0;z<p;z+=d){var U=(B+z)/s;U<0||U>=i.outWidth||Math.floor(U)!==U||(k+=S.get(N,P,U,F))}}C.set(k*x,N,R,j,F)}return C.toTensor()},t.prototype.pool3d=function(e,r,i){Me(e,"pool3d");for(var o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,_=r.padInfo.front,C=r.padInfo.top,x=r.padInfo.left,S=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,N=this.readSync(e.dataId),F=Mt(r.outShape,e.dtype),R=F.values,j=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],H=r.outShape[2]*r.outShape[3]*r.outShape[4],B=r.outShape[3]*r.outShape[4],k=r.outShape[4],D=0;D<r.batchSize;++D)for(var P=D*j,z=D*e.strides[0],U=0;U<r.inChannels;++U)for(var $=0;$<r.outDepth;++$){for(var ae=$*o-_,de=ae;de<0;)de+=u;for(var X=Math.min(r.inDepth,h+ae),re=P+$*H,J=0;J<r.outHeight;++J){for(var ie=J*s-C,le=ie;le<0;)le+=c;for(var Ee=Math.min(r.inHeight,p+ie),ye=re+J*B,we=0;we<r.outWidth;++we){for(var Ce=we*a-x,ze=Ce;ze<0;)ze+=d;for(var Ye=Math.min(r.inWidth,m+Ce),He=ye+we*k,it=S,Je=0,vt=0,Ge=de;Ge<X;Ge+=u){for(var Qe=z+Ge*e.strides[1],at=le;at<Ee;at+=c){for(var ft=Qe+at*e.strides[2],At=ze;At<Ye;At+=d){var cn=N[ft+At*e.strides[3]+U];if(i==="max"&&cn>it?it=cn:i==="avg"&&(Je+=cn,vt++),isNaN(it))break}if(isNaN(it))break}if(isNaN(it))break}R[He+U]=i==="avg"?Je/vt:it}}}return F.toTensor()},t.prototype.avgPool3d=function(e,r){return Me(e,"avgPool3d"),this.pool3d(e,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,r,i){Me([e,r],"avgPool3dBackprop");for(var o=i.strideDepth,s=i.strideHeight,a=i.strideWidth,u=i.filterDepth,c=i.filterHeight,d=i.filterWidth,h=i.dilationDepth,p=i.dilationHeight,m=i.dilationWidth,_=i.effectiveFilterDepth,C=i.effectiveFilterHeight,x=i.effectiveFilterWidth,S=_-1-i.padInfo.front,N=x-1-i.padInfo.left,F=C-1-i.padInfo.top,R=Mt(r.shape,"float32"),j=1/(u*c*d),H=this.bufferSync(e),B=0;B<i.batchSize;++B)for(var k=0;k<i.inChannels;++k)for(var D=0;D<i.inDepth;++D)for(var P=0;P<i.inHeight;++P)for(var z=0;z<i.inWidth;++z){for(var U=D-S,$=P-F,ae=z-N,de=0,X=0;X<_;X+=h){var re=(U+X)/o;if(!(re<0||re>=i.outDepth||Math.floor(re)!==re))for(var J=0;J<C;J+=p){var ie=($+J)/s;if(!(ie<0||ie>=i.outHeight||Math.floor(ie)!==ie))for(var le=0;le<x;le+=m){var Ee=(ae+le)/a;Ee<0||Ee>=i.outWidth||Math.floor(Ee)!==Ee||(de+=H.get(B,re,ie,Ee,k))}}}R.set(de*j,B,D,P,z,k)}return R.toTensor()},t.prototype.maxPool3d=function(e,r){return Me(e,"maxPool3d"),this.pool3d(e,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,r){for(var i=Mt(r.outShape,"int32"),o=r.strideDepth,s=r.strideHeight,a=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,d=r.dilationWidth,h=r.effectiveFilterDepth,p=r.effectiveFilterHeight,m=r.effectiveFilterWidth,_=r.padInfo.front,C=r.padInfo.top,x=r.padInfo.left,S=this.bufferSync(e),N=0;N<r.batchSize;++N)for(var F=0;F<r.inChannels;++F)for(var R=0;R<r.outDepth;++R){for(var j=R*o-_,H=j;H<0;)H+=u;for(var B=Math.min(r.inDepth,h+j),k=0;k<r.outHeight;++k){for(var D=k*s-C,P=D;P<0;)P+=c;for(var z=Math.min(r.inHeight,p+D),U=0;U<r.outWidth;++U){for(var $=U*a-x,ae=$;ae<0;)ae+=d;for(var de=Math.min(r.inWidth,m+$),X=Number.NEGATIVE_INFINITY,re=-1,J=H;J<B;J+=u)for(var ie=J-j,le=P;le<z;le+=c)for(var Ee=le-D,ye=ae;ye<de;ye+=d){var we=ye-$,Ce=S.get(N,J,le,ye,F);Ce>=X&&(X=Ce,re=ie*p*m+Ee*p+we)}i.set(re,N,R,k,U,F)}}}return i.toTensor()},t.prototype.maxPool3dBackprop=function(e,r,i,o){Me([r,i],"maxPool3dBackprop");for(var s=this.maxPool3dPositions(r,o),a=o.strideDepth,u=o.strideHeight,c=o.strideWidth,d=o.dilationDepth,h=o.dilationHeight,p=o.dilationWidth,m=o.effectiveFilterDepth,_=o.effectiveFilterHeight,C=o.effectiveFilterWidth,x=m-1-o.padInfo.front,S=C-1-o.padInfo.left,N=_-1-o.padInfo.top,F=Mt(r.shape,"float32"),R=this.bufferSync(s),j=this.bufferSync(e),H=0;H<o.batchSize;++H)for(var B=0;B<o.inChannels;++B)for(var k=0;k<o.inDepth;++k)for(var D=0;D<o.inHeight;++D)for(var P=0;P<o.inWidth;++P){for(var z=k-x,U=D-N,$=P-S,ae=0,de=0;de<m;de+=d){var X=(z+de)/a;if(!(X<0||X>=o.outDepth||Math.floor(X)!==X))for(var re=0;re<_;re+=h){var J=(U+re)/u;if(!(J<0||J>=o.outHeight||Math.floor(J)!==J))for(var ie=0;ie<C;ie+=p){var le=($+ie)/c;if(!(le<0||le>=o.outWidth||Math.floor(le)!==le)){var Ee=m*_*C-1-R.get(H,X,J,le,B)===de*_*C+re*C+ie?1:0;Ee!==0&&(ae+=j.get(H,X,J,le,B)*Ee)}}}}F.set(ae,H,k,D,P,B)}return F.toTensor()},t.prototype.cast=function(e,r){return jM(e,r,this)},t.prototype.reshape=function(e,r){return ex(e,r)},t.prototype.avgPool=function(e,r){return Me(e,"avgPool"),this.pool(e,r,"avg").toFloat()},t.prototype.resizeBilinear=function(e,r,i,o){Me(e,"resizeBilinear");for(var s=e.shape,a=s[0],u=s[1],c=s[2],d=s[3],h=this.readSync(e.dataId),p=new Float32Array(ot([a,r,i,d])),m=[o&&r>1?u-1:u,o&&i>1?c-1:c],_=[o&&r>1?r-1:r,o&&i>1?i-1:i],C=0,x=m[0]/_[0],S=m[1]/_[1],N=0;N<a;N++)for(var F=0;F<r;F++)for(var R=x*F,j=Math.floor(R),H=R-j,B=Math.min(u-1,Math.ceil(R)),k=N*e.strides[0]+j*e.strides[1],D=N*e.strides[0]+B*e.strides[1],P=0;P<i;P++)for(var z=S*P,U=Math.floor(z),$=z-U,ae=Math.min(c-1,Math.ceil(z)),de=k+U*e.strides[2],X=D+U*e.strides[2],re=k+ae*e.strides[2],J=D+ae*e.strides[2],ie=0;ie<d;ie++){var le=h[de+ie],Ee=h[X+ie],ye=le+(h[re+ie]-le)*$,we=ye+(Ee+(h[J+ie]-Ee)*$-ye)*H;p[C++]=we}return ci(p,[a,r,i,d])},t.prototype.resizeBilinearBackprop=function(e,r,i){Me([e,r],"resizeBilinearBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],d=e.shape,h=d[1],p=d[2],m=new Float32Array(s*a*u*c),_=[i&&h>1?a-1:a,i&&p>1?u-1:u],C=[i&&h>1?h-1:h,i&&p>1?p-1:p],x=_[0]/C[0],S=_[1]/C[1],N=this.readSync(e.dataId),F=0,R=0;R<s;R++)for(var j=R*r.strides[0],H=0;H<h;H++)for(var B=H*x,k=Math.floor(B),D=Math.min(Math.ceil(B),a-1),P=j+k*r.strides[1],z=j+D*r.strides[1],U=B-k,$=1-U,ae=0;ae<p;ae++)for(var de=ae*S,X=Math.floor(de),re=Math.min(Math.ceil(de),u-1),J=de-X,ie=1-J,le=P+X*r.strides[2],Ee=P+re*r.strides[2],ye=z+X*r.strides[2],we=z+re*r.strides[2],Ce=$*ie,ze=$*J,Ye=U*ie,He=U*J,it=0;it<c;it++){var Je=N[F++];m[le+it]+=Je*Ce,m[Ee+it]+=Je*ze,m[ye+it]+=Je*Ye,m[we+it]+=Je*He}return Xr(m,[s,u,a,c],r.dtype)},t.prototype.resizeNearestNeighbor=function(e,r,i,o){Me(e,"resizeNearestNeighbor");for(var s=e.shape,a=s[0],u=s[1],c=s[2],d=s[3],h=this.readSync(e.dataId),p=new Float32Array(a*r*i*d),m=[o&&r>1?u-1:u,o&&i>1?c-1:c],_=[o&&r>1?r-1:r,o&&i>1?i-1:i],C=m[0]/_[0],x=m[1]/_[1],S=0,N=0;N<a;N++)for(var F=N*e.strides[0],R=0;R<r;R++)for(var j=C*R,H=F+Math.min(u-1,o?Math.round(j):Math.floor(j))*e.strides[1],B=0;B<i;B++)for(var k=x*B,D=H+Math.min(c-1,o?Math.round(k):Math.floor(k))*e.strides[2],P=0;P<d;P++){var z=h[D+P];p[S++]=z}return ci(p,[a,r,i,d],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,r,i){Me([e,r],"resizeNearestNeighborBackprop");for(var o=r.shape,s=o[0],a=o[1],u=o[2],c=o[3],d=e.shape,h=d[1],p=d[2],m=new Float32Array(s*a*u*c),_=this.readSync(e.dataId),C=[i&&h>1?a-1:a,i&&p>1?u-1:u],x=[i&&h>1?h-1:h,i&&p>1?p-1:p],S=C[0]/x[0],N=C[1]/x[1],F=1/S,R=1/N,j=2*Math.ceil(F)+2,H=2*Math.ceil(R)+2,B=0;B<s;B++)for(var k=B*r.strides[0],D=0;D<a;D++)for(var P=k+D*r.strides[1],z=Math.floor(D*F),U=Math.floor(z-j/2),$=0;$<u;$++)for(var ae=P+$*r.strides[2],de=Math.floor($*R),X=Math.floor(de-H/2),re=0;re<c;re++){for(var J=0,ie=0;ie<j;ie++){var le=ie+U;if(!(le<0||le>=h)){var Ee=k+le*e.strides[1],ye=le*S;if(D===Math.min(a-1,i?Math.round(ye):Math.floor(ye)))for(var we=0;we<H;we++){var Ce=we+X;if(!(Ce<0||Ce>=p)){var ze=Ee+Ce*e.strides[2],Ye=Ce*N;$===Math.min(u-1,i?Math.round(Ye):Math.floor(Ye))&&(J+=_[ze+re])}}}}m[ae+re]=J}return Xr(m,r.shape,r.dtype)},t.prototype.batchNormalization=function(e,r,i,o,s,a){Me([e,r,i,s,a],"batchNorm");for(var u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=this.readSync(i.dataId),h=s?this.readSync(s.dataId):new Float32Array([1]),p=a?this.readSync(a.dataId):new Float32Array([0]),m=new Float32Array(u.length),_=p.length,C=h.length,x=d.length,S=c.length,N=0,F=0,R=0,j=0,H=0;H<u.length;++H)m[H]=p[N++]+(u[H]-c[F++])*h[R++]/Math.sqrt(d[j++]+o),N>=_&&(N=0),F>=S&&(F=0),R>=C&&(R=0),j>=x&&(j=0);return Xr(m,e.shape)},t.prototype.localResponseNormalization4D=function(e,r,i,o,s){Me(e,"localResponseNormalization4D");var a=e.shape[3],u=a-1,c=this.readSync(e.dataId),d=e.size,h=new Float32Array(d);function p(x){for(var S=x%a,N=x-S+Math.max(0,S-r),F=x-S+Math.min(S+r,u),R=0;N<=F;N++){var j=c[N];R+=j*j}return R}for(var m=0;m<d;m++){var _=p(m),C=c[m]*Math.pow(i+o*_,-s);h[m]=C}return Xr(h,e.shape)},t.prototype.LRNGrad=function(e,r,i,o,s,a,u){Me(e,"LRNGrad");for(var c=e.shape[3],d=this.readSync(e.dataId),h=this.readSync(r.dataId),p=this.readSync(i.dataId),m=new Float32Array(e.size),_=e.size,C=0;C<_;C++){for(var x=C%c,S=C-x+Math.max(0,x-o),N=C-x+Math.min(c,x+o+1),F=0,R=S;R<N;R++)F+=Math.pow(h[R],2);for(F=a*F+s,R=S;R<N;R++){var j=-2*a*u*h[R]*p[C]/F;C===R&&(j+=Math.pow(F,-u)),j*=d[C],m[R]+=j}}return Xr(m,e.shape)},t.prototype.multinomial=function(e,r,i,o){Me(e,"multinomial");for(var s=r?e:mo(e),a=s.shape[0],u=s.shape[1],c=Gn([a,i],"int32"),d=this.readSync(c.dataId),h=this.readSync(s.dataId),p=0;p<a;++p){var m=p*u,_=new Float32Array(u-1);_[0]=h[m];for(var C=1;C<_.length;++C)_[C]=_[C-1]+h[m+C];for(var x=ax(o.toString()),S=p*i,N=0;N<i;++N){var F=x();d[S+N]=_.length;for(var R=0;R<_.length;R++)if(F<_[R]){d[S+N]=R;break}}}return c},t.prototype.oneHot=function(e,r,i,o){Me(e,"oneHot");var s=new Float32Array(e.size*r);s.fill(o);for(var a=this.readSync(e.dataId),u=0;u<e.size;++u)a[u]>=0&&a[u]<r&&(s[u*r+a[u]]=i);return Ou(s,[e.size,r],"int32")},t.prototype.nonMaxSuppression=function(e,r,i,o,s){return Me(e,"nonMaxSuppression"),WM(this.readSync(e.dataId),this.readSync(r.dataId),i,o,s)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,r){for(var i=e.shape[0],o=e.shape[1],s=Mt(e.shape,"float32"),a=Mt(e.shape,"float32"),u=Ys(e).as2D(i,o),c=ku(e).as2D(i,o),d=0;d<i;d++)for(var h=u.slice([d,0],[1,o]),p=c.slice([d,0],[1,o]),m=Ei(h,p),_=this.readSync(this.fftImpl(m,r).dataId),C=0;C<o;C++){var x=PU(_,C);s.values[d*o+C]=x.real,a.values[d*o+C]=x.imag}return Ei(s.toTensor(),a.toTensor()).as2D(i,o)},t.prototype.fftImpl=function(e,r){var i=e.as1D(),o=i.size;if(this.isExponentOf2(o)){var s=this.fftRadix2(i,o,r).as2D(e.shape[0],e.shape[1]);return r&&(s=Ei(Ys(s).div(Ue(o)),ku(s).div(Ue(o)))),s}var a=this.readSync(e.dataId),u=function(c){for(var d=new Float32Array(c.length/2),h=new Float32Array(c.length/2),p=0;p<c.length;p+=2)d[p/2]=c[p],h[p/2]=c[p+1];return{real:d,imag:h}}(this.fourierTransformByMatmul(a,o,r));return Ei(u.real,u.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return(e&e-1)==0},t.prototype.fftRadix2=function(e,r,i){if(r===1)return e;var o=this.readSync(e.dataId),s=r/2,a=function(S){for(var N=Math.ceil(S.length/4),F=new Float32Array(N),R=new Float32Array(N),j=0;j<S.length;j+=4)F[Math.floor(j/4)]=S[j],R[Math.floor(j/4)]=S[j+1];return{real:F,imag:R}}(o),u=Ei(a.real,a.imag).as1D(),c=function(S){for(var N=Math.floor(S.length/4),F=new Float32Array(N),R=new Float32Array(N),j=2;j<S.length;j+=4)F[Math.floor(j/4)]=S[j],R[Math.floor(j/4)]=S[j+1];return{real:F,imag:R}}(o),d=Ei(c.real,c.imag).as1D();u=this.fftRadix2(u,s,i),d=this.fftRadix2(d,s,i);var h=function(S,N){for(var F=new Float32Array(S/2),R=new Float32Array(S/2),j=0;j<Math.ceil(S/2);j++){var H=(N?2:-2)*Math.PI*(j/S);F[j]=Math.cos(H),R[j]=Math.sin(H)}return{real:F,imag:R}}(r,i),p=Ei(h.real,h.imag).mul(d),m=u.add(p),_=u.sub(p),C=Ys(m).concat(Ys(_)),x=ku(m).concat(ku(_));return Ei(C,x).as1D()},t.prototype.fourierTransformByMatmul=function(e,r,i){for(var o=new Float32Array(2*r),s=0;s<r;s++){for(var a=0,u=0,c=0;c<r;c++){var d=mce(s*c,r,i),h=PU(e,c);a+=h.real*d.real-h.imag*d.imag,u+=h.real*d.imag+h.imag*d.real}i&&(a/=r,u/=r),pce(o,a,u,s)}return o},t.prototype.depthToSpace=function(e,r,i){Q(i==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+i}),Q(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var o=e.shape[0],s=e.shape[1],a=e.shape[2],u=e.shape[3],c=s*r,d=a*r,h=u/(r*r),p=this.readSync(e.dataId),m=new Float32Array(o*c*d*h),_=0,C=0;C<o;++C)for(var x=0;x<c;++x)for(var S=Math.floor(x/r),N=x%r,F=0;F<d;++F)for(var R=Math.floor(F/r),j=(N*r+F%r)*h,H=0;H<h;++H){var B=H+j+u*(R+a*(S+s*C));m[_++]=p[B]}return Xr(m,[o,c,d,h])},t.prototype.broadcastedBinaryOp=function(e,r,i,o){var s=Xt(e.shape,r.shape),a=Mt(s,i),u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=Bc(e.shape,s),h=Bc(r.shape,s),p=a.values;if(d.length+h.length===0)for(var m=0;m<p.length;++m)p[m]=o(u[m%u.length],c[m%c.length]);else{var _=this.bufferSync(e),C=this.bufferSync(r),x=function(S){var N=a.indexToLoc(S),F=N.slice(-e.rank);d.forEach(function(B){return F[B]=0});var R=_.locToIndex(F),j=N.slice(-r.rank);h.forEach(function(B){return j[B]=0});var H=C.locToIndex(j);p[S]=o(u[R],c[H])};for(m=0;m<p.length;++m)x(m)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,r,i){var o=Xt(e.shape,r.shape),s=Mt(o,"float32"),a=Mt(o,"float32"),u=this.readSync(e.dataId),c=this.readSync(r.dataId),d=Bc(e.shape,o),h=Bc(r.shape,o),p=s.values,m=a.values;if(d.length+h.length===0)for(var _=0;_<p.length;_++){var C=_%u.length,x=_%c.length,S=i(u[2*C],u[2*C+1],c[2*x],c[2*x+1]);p[_]=S.real,m[_]=S.imag}else{var N=this.bufferSync(this.data.get(e.dataId).complexTensors.real),F=this.bufferSync(this.data.get(r.dataId).complexTensors.real),R=function(j){var H=s.indexToLoc(j),B=H.slice(-e.rank);d.forEach(function(U){return B[U]=0});var k=N.locToIndex(B),D=H.slice(-r.rank);h.forEach(function(U){return D[U]=0});var P=F.locToIndex(D),z=i(u[2*k],u[2*k+1],c[2*P],c[2*P+1]);p[j]=z.real,m[j]=z.imag};for(_=0;_<p.length;_++)R(_)}return this.complex(s.toTensor(),a.toTensor())},t.prototype.split=function(e,r,i){return vz(e,r,i)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,r,i,o,s,a){for(var u=e.shape,c=u[0],d=u[1],h=u[2],p=u[3],m=r.shape[0],_=o[0],C=o[1],x=Mt([m,_,C,p],"float32"),S=this.readSync(r.dataId),N=this.readSync(i.dataId),F=this.readSync(e.dataId),R=e.strides,j=x.strides,H=0;H<m;H++){var B=4*H,k=S[B],D=S[B+1],P=S[B+2],z=S[B+3],U=N[H];if(!(U>=c))for(var $=_>1?(P-k)*(d-1)/(_-1):0,ae=C>1?(z-D)*(h-1)/(C-1):0,de=0;de<_;de++){var X=_>1?k*(d-1)+de*$:.5*(k+P)*(d-1);if(X<0||X>d-1)for(var re=0;re<C;re++)for(var J=0;J<p;J++){var ie=J+re*j[2]+de*j[1]+H*j[0];x.values[ie]=a}else if(s==="bilinear"){var le=Math.floor(X),Ee=Math.ceil(X),ye=X-le;for(re=0;re<C;re++)if((Ge=C>1?D*(h-1)+re*ae:.5*(D+z)*(h-1))<0||Ge>h-1)for(J=0;J<p;J++)ie=J+re*j[2]+de*j[1]+H*j[0],x.values[ie]=a;else{var we=Math.floor(Ge),Ce=Math.ceil(Ge),ze=Ge-we;for(J=0;J<p;J++){var Ye=F[ie=J+we*R[2]+le*R[1]+U*R[0]],He=F[ie=J+Ce*R[2]+le*R[1]+U*R[0]],it=F[ie=J+we*R[2]+Ee*R[1]+U*R[0]],Je=Ye+(He-Ye)*ze,vt=it+(F[ie=J+Ce*R[2]+Ee*R[1]+U*R[0]]-it)*ze;ie=J+re*j[2]+de*j[1]+H*j[0],x.values[ie]=Je+(vt-Je)*ye}}}else for(re=0;re<C;++re){var Ge;if((Ge=C>1?D*(h-1)+re*ae:.5*(D+z)*(h-1))<0||Ge>h-1)for(J=0;J<p;J++)ie=J+re*j[2]+de*j[1]+H*j[0],x.values[ie]=a;else{var Qe=Math.round(Ge),at=Math.round(X);for(J=0;J<p;J++){var ft=J+Qe*R[2]+at*R[1]+U*R[0],At=J+re*j[2]+de*j[1]+H*j[0];x.values[At]=F[ft]}}}}}return x.toTensor()},t.prototype.sparseToDense=function(e,r,i,o){var s=f_(0,e,i),a=s.sliceRank,u=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize;return this.scatter(e,r,i,h,c,u,a,d,o,!1)},t.prototype.gatherND=function(e,r){var i=r.shape,o=i[i.length-1],s=FM(e,r),a=s[0],u=s[1],c=s[2],d=s[3];if(u===0)return ci([],a,e.dtype);for(var h=new c_([u,c],e.dtype),p=this.readSync(r.dataId),m=this.readSync(e.dataId),_=0;_<u;_++){for(var C=[],x=0,S=0;S<o;S++){var N=p[_*o+S];x+=N*d[S],C.push(N)}if(x<0||x>=e.size/c)throw new Error("Invalid indices: "+C+" does not index into "+e.shape);for(var F=0;F<c;F++)h.values[_*c+F]=m[x*c+F]}return h.toTensor().reshape(a)},t.prototype.scatterND=function(e,r,i){var o=f_(0,e,i),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,c=o.strides,d=o.outputSize,h=Ue(0);return this.scatter(e,r,i,d,u,a,s,c,h,!0)},t.prototype.fill=function(e,r,i){var o=a_(i=i||Gm(r),ot(e));return o.fill(r),ne.makeTensor(o,e,i,this)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var r=a_(e.dtype,ot(e.shape));return this.makeOutput(r,e.shape,e.dtype)},t.prototype.linspace=function(e,r,i){return zM(e,r,i)},t.prototype.scatter=function(e,r,i,o,s,a,u,c,d,h){var p=[o/s,s],m=this.readSync(e.dataId),_=this.readSync(r.dataId);if(o===0)return ci([],i,r.dtype);var C=new c_(p,r.dtype);C.values.fill(this.readSync(d.dataId)[0]);for(var x=0;x<a;x++){for(var S=[],N=0,F=0;F<u;F++){var R=m[x*u+F];S.push(R),N+=R*c[F]}if(N<0||N>=o/s)throw new Error("Invalid indices: "+S+" does not index into "+i);for(var j=0;j<s;j++)h?C.values[N*s+j]+=_[x*s+j]:C.values[N*s+j]=r.rank===0?_[0]:_[x*s+j]}return C.toTensor().reshape(i)},t}(mz);ne.registerBackend("cpu",function(){return new _fe},1);for(k1=0,ZP=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs,i=t,o=i.boxes,s=i.scores,a=r,u=a.maxOutputSize,c=a.iouThreshold,d=a.scoreThreshold,h=a.softNmsSigma,p=e;Me(o,"NonMaxSuppressionWithScore");var m=HM(p.data.get(o.dataId).values,p.data.get(s.dataId).values,u,c,d,h);return[m.selectedIndices,m.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t.x,i=e;Me(r,"square");for(var o=i.data.get(r.dataId).values,s=new Float32Array(o.length),a=0;a<o.length;++a){var u=o[a];s[a]=u*u}return{dataId:i.write(s,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:g_,backendName:"cpu",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t,i=r.a,o=r.b,s=e;Me([i,o],g_);var a=s.data.get(i.dataId).values,u=s.data.get(o.dataId).values,c=function(p,m,_,C,x,S){var N=Xt(p,m),F=N.length,R=Oa(N),j=$m(x,ot(N)),H=p.length,B=m.length,k=Oa(p),D=Oa(m),P=Bc(p,N),z=Bc(m,N);if(P.length+z.length===0)for(var U=0;U<j.length;++U)j[U]=S(_[U%_.length],C[U%C.length]);else{var $=function(ae){var de=Cj(ae,F,R),X=de.slice(-H);P.forEach(function(le){return X[le]=0});var re=uM(X,H,k),J=de.slice(-B);z.forEach(function(le){return J[le]=0});var ie=uM(J,B,D);j[ae]=S(_[re],C[ie])};for(U=0;U<j.length;++U)$(U)}return[j,N]}(i.shape,o.shape,a,u,i.dtype,function(p,m){var _=p-m;return _*_}),d=c[0],h=c[1];return{dataId:s.write(d,h,i.dtype),shape:h,dtype:i.dtype}}}];k1<ZP.length;k1++)lj(ZP[k1]);var k1,ZP,Nm,yfe=function(n){this.variableNames=["A"];var t=Gi(),e=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+e+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},bfe=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Gi(),e=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+e+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(O1=0,QP=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs,i=t.pixels,o=r.numChannels,s=typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement,u=s?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=u[0],d=u[1],h=[d,c],p=[d,c,o];(a||s)&&(Nm==null&&(Nm=document.createElement("canvas").getContext("2d")),Nm.canvas.width=c,Nm.canvas.height=d,Nm.drawImage(i,0,0,c,d),i=Nm.canvas);var m=e.makeTensorInfo(h,"int32");e.texData.get(m.dataId).usage=gs.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(m.dataId),i);var _=_e().getBool("WEBGL_PACK")?new bfe(p):new yfe(p),C=e.runWebGLProgram(_,[m],"int32");return e.disposeData(m.dataId),C}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=n.attrs;G1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var i=t,o=i.boxes,s=i.scores,a=r,u=a.maxOutputSize,c=a.iouThreshold,d=a.scoreThreshold,h=a.softNmsSigma,p=e,m=HM(p.readSync(o.dataId),p.readSync(s.dataId),u,c,d,h);return[m.selectedIndices,m.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t.x,i=e,o=new zt(r.shape,"return x * x;");return i.runWebGLProgram(o,[r],r.dtype)}},{kernelName:g_,backendName:"webgl",kernelFunc:function(n){var t=n.inputs,e=n.backend,r=t,i=r.a,o=r.b,s=e,a=_e().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Lc("return (a - b) * (a - b);",i.shape,o.shape):new wr("return (a - b) * (a - b);",i.shape,o.shape);return s.compileAndRun(a,[i,o])}}];O1<QP.length;O1++)lj(QP[O1]);var O1,QP;for(R1=0,XP=[{kernelName:"Square",gradFunc:function(n,t){var e=t[0];return{x:function(){return n.mul(e.toFloat().mul(2))}}}},{kernelName:g_,gradFunc:function(n,t){var e=t[0],r=t[1],i=Ue(2);return{a:function(){return ur(n,ur(i,Fn(e,r)))},b:function(){return ur(n,ur(i,Fn(r,e)))}}}}];R1<XP.length;R1++)xue(XP[R1]);var R1,XP,wfe=function(){function n(){}return n.prototype.fetch=function(t,e){return fetch(t,e)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+e);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return new TextDecoder(e).decode(t)},n}();_e().get("IS_BROWSER")&&_e().setPlatform("browser",new wfe);var JP,Cfe=function(){return CU()},xfe=function(){function n(){this.util=xU(),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(t,e){return _e().global.fetch!=null?_e().global.fetch(t,e):(JP==null&&(JP=Cfe()),JP(t,e))},n.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},n.prototype.encode=function(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+e);return this.textEncoder.encode(t)},n.prototype.decode=function(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)},n}();_e().get("IS_NODE")&&_e().setPlatform("node",new xfe);var wM={float32:4,int32:4,uint16:2,uint8:1,bool:1},rx=4;function E8(n,t){for(var e={},r=0,i=function(a){var u=a.name,c=a.dtype,d=a.shape,h=ot(d),p=void 0;if("quantization"in a){var m=a.quantization;if(m.dtype!=="uint8"&&m.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+m.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var _=wM[m.dtype],C=n.slice(r,r+h*_),x=m.dtype==="uint8"?new Uint8Array(C):new Uint16Array(C);if(c==="float32")p=Float32Array.from(x,function(H){return H*m.scale+m.min});else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=Int32Array.from(x,function(H){return Math.round(H*m.scale+m.min)})}r+=h*_}else if(c==="string"){var S=ot(a.shape);p=[];for(var N=0;N<S;N++){var F=new Uint32Array(n.slice(r,r+rx))[0];r+=rx;var R=new Uint8Array(n.slice(r,r+F));p.push(R),r+=F}}else{var j=wM[c];if(C=n.slice(r,r+h*j),c==="float32")p=new Float32Array(C);else if(c==="int32")p=new Int32Array(C);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+c);p=new Uint8Array(C)}r+=h*j}e[u]=ci(p,d,c)},o=0,s=t;o<s.length;o++)i(s[o]);return e}function Efe(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var t=0,e=[];n.forEach(function(o){if(t+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(t),i=0;return e.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var CM=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function XU(n){return CM?Buffer.byteLength(n):new Blob([n]).size}function ck(n){var t=0;n.forEach(function(i){t+=i.byteLength});var e=new Uint8Array(t),r=0;return n.forEach(function(i){e.set(new Uint8Array(i),r),r+=i.byteLength}),e.buffer}function JU(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var t=n.split("/");return t[t.length-1]}function S_(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:XU(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:XU(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var _s=function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(t){n.getInstance().saveRouters.push(t)},n.registerLoadRouter=function(t){n.getInstance().loadRouters.push(t)},n.getSaveHandlers=function(t){return n.getHandlers(t,"save")},n.getLoadHandlers=function(t,e){return n.getHandlers(t,"load",e)},n.getHandlers=function(t,e,r){var i=[];return(e==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach(function(o){var s=o(t,r);s!==null&&i.push(s)}),i},n}(),zm="://",sd=function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(t,e){Q(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(zm)&&(t=t.slice(0,t.indexOf(zm))),Q(t.length>0,function(){return"scheme must not be an empty string."});var r=n.getInstance();Q(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=e},n.getManager=function(t){var e=this.getInstance().managers[t];if(e==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n}();function j1(n){if(n.indexOf(zm)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+sd.getSchemes().join(","));return{scheme:n.split(zm)[0],path:n.split(zm)[1]}}function ej(n,t,e){return e===void 0&&(e=!1),tt(this,void 0,void 0,function(){var r,i,o,s,a,u,c,d,h;return nt(this,function(p){switch(p.label){case 0:return Q(n!==t,function(){return"Old path and new path are the same: '"+n+"'"}),Q((r=_s.getLoadHandlers(n)).length>0,function(){return"Copying failed because no load handler is found for source URL "+n+"."}),Q(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."}),i=r[0],Q((o=_s.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),Q(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),s=o[0],a=j1(n).scheme,u=j1(n).path,c=a===j1(n).scheme,[4,i.load()];case 1:return d=p.sent(),e&&c?[4,sd.getManager(a).removeModel(u)]:[3,3];case 2:p.sent(),p.label=3;case 3:return[4,s.save(d)];case 4:return h=p.sent(),!e||c?[3,6]:[4,sd.getManager(a).removeModel(u)];case 5:p.sent(),p.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var of="models_store",od="model_info_store";function I8(){if(!_e().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,t=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function xM(n){var t=n.result;t.createObjectStore(of,{keyPath:"modelPath"}),t.createObjectStore(od,{keyPath:"modelPath"})}var Wm=function(){function n(t){if(this.indexedDB=I8(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return n.prototype.save=function(t){return tt(this,void 0,void 0,function(){return nt(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},n.prototype.load=function(){return tt(this,void 0,void 0,function(){return nt(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},n.prototype.databaseAction=function(t,e){var r=this;return new Promise(function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return xM(s)},s.onsuccess=function(){var a=s.result;if(e==null){var u=a.transaction(of,"readonly"),c=u.objectStore(of).get(r.modelPath);c.onsuccess=function(){if(c.result==null)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(c.result.modelArtifacts)},c.onerror=function(C){return a.close(),o(c.error)},u.oncomplete=function(){return a.close()}}else{var d,h=S_(e),p=a.transaction(od,"readwrite"),m=p.objectStore(od),_=m.put({modelPath:r.modelPath,modelArtifactsInfo:h});_.onsuccess=function(){var C=(d=a.transaction(of,"readwrite")).objectStore(of).put({modelPath:r.modelPath,modelArtifacts:e,modelArtifactsInfo:h});C.onsuccess=function(){return i({modelArtifactsInfo:h})},C.onerror=function(x){var S=(m=p.objectStore(od)).delete(r.modelPath);S.onsuccess=function(){return a.close(),o(C.error)},S.onerror=function(N){return a.close(),o(C.error)}}},_.onerror=function(C){return a.close(),o(_.error)},p.oncomplete=function(){d==null?a.close():d.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}})},n.URL_SCHEME="indexeddb://",n}(),tj=function(n){return _e().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Wm.URL_SCHEME)?(t=n.slice(Wm.URL_SCHEME.length),new Wm(t)):null;var t};_s.registerSaveRouter(tj),_s.registerLoadRouter(tj);var Ife=function(){function n(){this.indexedDB=I8()}return n.prototype.listModels=function(){return tt(this,void 0,void 0,function(){var t=this;return nt(this,function(e){return[2,new Promise(function(r,i){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return xM(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(od,"readonly"),u=a.objectStore(od).getAll();u.onsuccess=function(){for(var c={},d=0,h=u.result;d<h.length;d++){var p=h[d];c[p.modelPath]=p.modelArtifactsInfo}r(c)},u.onerror=function(c){return s.close(),i(u.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}})]})})},n.prototype.removeModel=function(t){return tt(this,void 0,void 0,function(){var e=this;return nt(this,function(r){var i;return t=(i=t).startsWith(Wm.URL_SCHEME)?i.slice(Wm.URL_SCHEME.length):i,[2,new Promise(function(o,s){var a=e.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return xM(a)},a.onsuccess=function(){var u,c=a.result,d=c.transaction(od,"readwrite"),h=d.objectStore(od),p=h.get(t);p.onsuccess=function(){if(p.result==null)return c.close(),s(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var m=h.delete(t),_=function(){var C=(u=c.transaction(of,"readwrite")).objectStore(of).delete(t);C.onsuccess=function(){return o(p.result.modelArtifactsInfo)},C.onerror=function(x){return s(p.error)}};m.onsuccess=_,m.onerror=function(C){return _(),c.close(),s(p.error)}},p.onerror=function(m){return c.close(),s(p.error)},d.oncomplete=function(){u==null?c.close():u.oncomplete=function(){return c.close()}}},a.onerror=function(u){return s(a.error)}})]})})},n}();if(_e().getBool("IS_BROWSER"))try{sd.registerManager(Wm.URL_SCHEME,new Ife)}catch{}var Vc="/",Um="tensorflowjs_models",S8="info",Sfe="model_topology",Tfe="weight_specs",Afe="weight_data",Dfe="model_metadata";function T8(n){return{info:[Um,n,S8].join(Vc),topology:[Um,n,Sfe].join(Vc),weightSpecs:[Um,n,Tfe].join(Vc),weightData:[Um,n,Afe].join(Vc),modelMetadata:[Um,n,Dfe].join(Vc)}}function Pfe(n){var t=n.split(Vc);if(t.length<3)throw new Error("Invalid key format: "+n);return t.slice(1,t.length-1).join(Vc)}var Hm=function(){function n(t){if(!_e().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=T8(this.modelPath)}return n.prototype.save=function(t){return tt(this,void 0,void 0,function(){var e,r,i;return nt(this,function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),i=S_(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(s){if(CM)return Buffer.from(s).toString("base64");for(var a=new Uint8Array(s),u="",c=0,d=a.length;c<d;c++)u+=String.fromCharCode(a[c]);return btoa(u)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:i}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}return[2]})})},n.prototype.load=function(){return tt(this,void 0,void 0,function(){var t,e,r,i,o,s,a;return nt(this,function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(o),e.format=s.format,e.generatedBy=s.generatedBy,e.convertedBy=s.convertedBy,e.userDefinedMetadata=s.userDefinedMetadata),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(c){if(CM){var d=Buffer.from(c,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var h=atob(c),p=new Uint8Array(h.length),m=0;m<h.length;++m)p.set([h.charCodeAt(m)],m);return p.buffer}(a),[2,e]})})},n.URL_SCHEME="localstorage://",n}(),nj=function(n){return _e().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(Hm.URL_SCHEME)?(t=n.slice(Hm.URL_SCHEME.length),new Hm(t)):null;var t};_s.registerSaveRouter(nj),_s.registerLoadRouter(nj);var Mfe=function(){function n(){Q(_e().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),Q(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return n.prototype.listModels=function(){return tt(this,void 0,void 0,function(){var t,e,r,i,o,s;return nt(this,function(a){for(t={},e=Um+Vc,r=Vc+S8,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(e)&&o.endsWith(r)&&(s=Pfe(o),t[s]=JSON.parse(this.LS.getItem(o)));return[2,t]})})},n.prototype.removeModel=function(t){return tt(this,void 0,void 0,function(){var e,r;return nt(this,function(i){var o;if(t=(o=t).startsWith(Hm.URL_SCHEME)?o.slice(Hm.URL_SCHEME.length):o,e=T8(t),this.LS.getItem(e.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,r]})})},n}();if(_e().getBool("IS_BROWSER"))try{sd.registerManager(Hm.URL_SCHEME,new Mfe)}catch{}var kfe="model",Ofe=".json",Rfe=".weights.bin";function rj(n){return new Promise(function(t){return setTimeout(t)}).then(n)}var eM=function(){function n(t){if(!_e().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(n.URL_SCHEME)&&(t=t.slice(n.URL_SCHEME.length)),t!=null&&t.length!==0||(t=kfe),this.modelTopologyFileName=t+Ofe,this.weightDataFileName=t+Rfe}return n.prototype.save=function(t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a;return nt(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,rj(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),t.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=e,[4,rj(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:S_(t)}]}})})},n.URL_SCHEME="downloads://",n}(),Nfe=function(){function n(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return n.prototype.load=function(){return tt(this,void 0,void 0,function(){var t,e,r=this;return nt(this,function(i){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(o,s){var a=new FileReader;a.onload=function(u){var c=JSON.parse(u.target.result),d=c.modelTopology;if(d!=null){e.length===0&&o({modelTopology:d});var h=c.weightsManifest;if(h!=null){var p;try{p=r.checkManifestAndWeightFiles(h,e)}catch(x){return void s(x)}var m=[],_=[],C=[];h.forEach(function(x){x.paths.forEach(function(S){_.push(S),C.push(null)}),m.push.apply(m,x.weights)}),h.forEach(function(x){x.paths.forEach(function(S){var N=new FileReader;N.onload=function(F){var R=F.target.result,j=_.indexOf(S);C[j]=R,C.indexOf(null)===-1&&o({modelTopology:d,weightSpecs:m,weightData:ck(C),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},N.onerror=function(F){return s("Failed to weights data from file of path '"+S+"'.")},N.readAsArrayBuffer(p[S])})})}else s(new Error("weightManifest field is missing from file "+t.name))}else s(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(u){return s("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},n.prototype.checkManifestAndWeightFiles=function(t,e){for(var r=[],i=e.map(function(u){return JU(u.name)}),o={},s=0,a=t;s<a.length;s++)a[s].paths.forEach(function(u){var c=JU(u);if(r.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),i.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");o[u]=e[i.indexOf(c)]});if(r.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+e.length+").");return o},n}();function ij(n,t,e,r){(function(o){Q(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(n),function(o,s){Q(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),Q(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),Q(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(e=e??0,r=r??1);var i=0;return Promise.all(n.map(function(o){return o.then(function(s){var a=e+ ++i/n.length*(r-e);return t(a),s}),o}))}function A8(n,t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d;return nt(this,function(h){switch(h.label){case 0:return t==null&&(t={}),e=t.fetchFunc==null?_e().platform.fetch:t.fetchFunc,r=n.map(function(p){return e(p,t.requestInit,{isBinary:!0})}),i=0,o=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=h.sent(),[3,4];case 2:return[4,ij(r,t.onProgress,i,o)];case 3:s=h.sent(),h.label=4;case 4:return a=s.map(function(p){return p.arrayBuffer()}),u=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return d=h.sent(),[3,8];case 6:return[4,ij(a,t.onProgress,u,c)];case 7:d=h.sent(),h.label=8;case 8:return[2,d]}})})}function oj(n){var t=this;return function(e,r,i){return r===void 0&&(r=""),tt(t,void 0,void 0,function(){var o,s,a,u,c,d,h,p,m,_;return nt(this,function(C){switch(C.label){case 0:if(o=e.map(function(){return!1}),s={},a=i!=null?i.map(function(){return!1}):[],u=[],e.forEach(function(x,S){var N=0;x.weights.forEach(function(F){var R="quantization"in F?F.quantization.dtype:F.dtype,j=wM[R]*ot(F.shape),H=function(){o[S]=!0,s[S]==null&&(s[S]=[]),s[S].push({manifestEntry:F,groupOffset:N,sizeBytes:j})};i!=null?i.forEach(function(B,k){B===F.name&&(H(),a[k]=!0)}):H(),u.push(F.name),N+=j})}),!a.every(function(x){return x}))throw c=i.filter(function(x,S){return!a[S]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return d=o.reduce(function(x,S,N){return S&&x.push(N),x},[]),h=[],d.forEach(function(x){e[x].paths.forEach(function(S){var N=r+(r.endsWith("/")?"":"/")+S;h.push(N)})}),[4,n(h)];case 1:return p=C.sent(),m={},_=0,d.forEach(function(x){for(var S=e[x].paths.length,N=0,F=0;F<S;F++)N+=p[_+F].byteLength;for(var R=new ArrayBuffer(N),j=new Uint8Array(R),H=0,B=0;B<S;B++){var k=new Uint8Array(p[_+B]);j.set(k,H),H+=k.byteLength}s[x].forEach(function(D){var P=E8(R.slice(D.groupOffset,D.groupOffset+D.sizeBytes),[D.manifestEntry]);for(var z in P)m[z]=P[z]}),_+=S}),[2,m]}})})}}_s.registerSaveRouter(function(n){return _e().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(eM.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new eM(t)}(n.slice(eM.URL_SCHEME.length)):null});var D8=function(){function n(t,e){if(this.DEFAULT_METHOD="POST",e==null&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,e.fetchFunc!=null?(Q(typeof e.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=e.fetchFunc):this.fetch=_e().platform.fetch,Q(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&Q(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,e.requestInit!=null&&e.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}return n.prototype.save=function(t){return tt(this,void 0,void 0,function(){var e,r,i,o;return nt(this,function(s){switch(s.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},e.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),t.weightData!=null&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,e)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:S_(t),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},n.prototype.load=function(){return tt(this,void 0,void 0,function(){var t,e,r,i,o,s,a,u,c,d,h,p;return nt(this,function(m){switch(m.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=m.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");m.label=2;case 2:return m.trys.push([2,4,,5]),[4,t.json()];case 3:return e=m.sent(),[3,5];case 4:throw m.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=e.modelTopology,o=e.weightsManifest,s=e.generatedBy,a=e.convertedBy,u=e.format,c=e.userDefinedMetadata,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:p=m.sent(),d=p[0],h=p[1],m.label=7;case 7:return[2,{modelTopology:i,weightSpecs:d,weightData:h,userDefinedMetadata:c,generatedBy:s,convertedBy:a,format:u}]}})})},n.prototype.loadWeights=function(t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,h,p;return nt(this,function(m){switch(m.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,r=function(_){var C=_.lastIndexOf("/"),x=_.lastIndexOf("?"),S=_.substring(0,C),N=x>C?_.substring(x):"";return[S+"/",N]}(e),i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],u=0,c=t;u<c.length;u++)d=c[u],a.push.apply(a,d.weights);return h=[],t.forEach(function(_){_.paths.forEach(function(C){h.push(s+C+o)})}),[4,A8(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=m.sent(),[2,[a,ck(p)]]}})})},n.URL_SCHEME_REGEX=/^https?:\/\//,n}();function EM(n){return n.match(D8.URL_SCHEME_REGEX)!=null}var sj=function(n,t){return typeof fetch>"u"?null:(Array.isArray(n)?n.every(function(e){return EM(e)}):EM(n))?IM(n,{onProgress:t}):null};function IM(n,t){return new D8(n,t)}_s.registerSaveRouter(sj),_s.registerLoadRouter(sj);var tM=function(){function n(t){this.modelArtifacts=t}return n.prototype.load=function(){return tt(this,void 0,void 0,function(){return nt(this,function(t){return[2,this.modelArtifacts]})})},n}(),Ffe=function(){function n(t){this.saveHandler=t}return n.prototype.save=function(t){return tt(this,void 0,void 0,function(){return nt(this,function(e){return[2,this.saveHandler(t)]})})},n}(),mx=Object.freeze({browserFiles:function(n){return new Nfe(n)},browserHTTPRequest:function(n,t){return IM(n,t)},concatenateArrayBuffers:ck,decodeWeights:E8,encodeWeights:function(n,t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return nt(this,function(u){switch(u.label){case 0:for(e=[],r=[],i=Array.isArray(n)?n.map(function(c){return c.name}):Object.keys(n),o=function(c){var d=i[c],h=Array.isArray(n)?n[c].tensor:n[d];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+h.dtype);var p={name:d,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var m=new Promise(function(_){return tt(a,void 0,void 0,function(){var C,x,S,N,F,R,j;return nt(this,function(H){switch(H.label){case 0:return[4,h.bytes()];case 1:for(C=H.sent(),x=C.reduce(function(B,k){return B+k.length},0)+rx*C.length,S=new Uint8Array(x),N=0,F=0;F<C.length;F++)R=C[F],j=new Uint8Array(new Uint32Array([R.length]).buffer),S.set(j,N),N+=rx,S.set(R,N),N+=R.length;return _(S),[2]}})})});r.push(m)}else r.push(h.data());t!=null&&(p.group=t),e.push(p)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:Efe(u.sent()),specs:e}]}})})},fromMemory:function(n,t,e,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new tM(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new tM({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new tM({modelTopology:n,weightSpecs:t,weightData:e,trainingConfig:r}))},getLoadHandlers:function(n,t){return _s.getLoadHandlers(n,t)},getModelArtifactsInfoForJSON:S_,getSaveHandlers:function(n){return _s.getSaveHandlers(n)},http:IM,isHTTPScheme:EM,loadWeights:function(n,t,e,r){return t===void 0&&(t=""),tt(this,void 0,void 0,function(){return nt(this,function(i){return[2,oj(function(o){return A8(o,{requestInit:r})})(n,t,e)]})})},registerLoadRouter:function(n){return _s.registerLoadRouter(n)},registerSaveRouter:function(n){return _s.registerSaveRouter(n)},weightsLoaderFactory:oj,withSaveHandler:function(n){return new Ffe(n)},copyModel:function(n,t){return tt(this,void 0,void 0,function(){return nt(this,function(e){return[2,ej(n,t,!1)]})})},listModels:function(){return tt(this,void 0,void 0,function(){var n,t,e,r,i,o,s;return nt(this,function(a){switch(a.label){case 0:n=sd.getSchemes(),t={},e=0,r=n,a.label=1;case 1:return e<r.length?(i=r[e],[4,sd.getManager(i).listModels()]):[3,4];case 2:for(s in o=a.sent())t[i+zm+s]=o[s];a.label=3;case 3:return e++,[3,1];case 4:return[2,t]}})})},moveModel:function(n,t){return tt(this,void 0,void 0,function(){return nt(this,function(e){return[2,ej(n,t,!0)]})})},removeModel:function(n){return tt(this,void 0,void 0,function(){var t;return nt(this,function(e){return t=j1(n),[2,sd.getManager(t.scheme).removeModel(t.path)]})})}}),Fm,Lfe=te({confusionMatrix_:function(n,t,e){var r=Y(n,"labels","confusionMatrix"),i=Y(t,"predictions","confusionMatrix");Q(e==null||e>0&&Number.isInteger(e),function(){return"If provided, numClasses must be a positive integer, but got "+e}),Q(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),Q(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),Q(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),Q(e>0&&Number.isInteger(e),function(){return"numClasses is required to be a positive integer, but got "+e});var o=vM(r.asType("int32"),e),s=vM(i.asType("int32"),e);return o.transpose().matMul(s).asType("int32")}}),TDe=Object.freeze({confusionMatrix:Lfe}),Vfe=te({fromPixels_:function(n,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var e=!1,r=!1,i=!1,o=!1,s=!1;if(n.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)i=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)o=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);s=!0}if(i&&i&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(cj("FromPixels",ne.backendName)!=null)return ne.runKernel("FromPixels",{pixels:n},{numChannels:t});var a,u,c=i?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=c[0],h=c[1];if(s?a=n.getContext("2d").getImageData(0,0,d,h).data:r||e?a=n.data:(o||i)&&(Fm==null&&(Fm=document.createElement("canvas").getContext("2d")),Fm.canvas.width=d,Fm.canvas.height=h,Fm.drawImage(n,0,0,d,h),a=Fm.getImageData(0,0,d,h).data),t===4)u=new Int32Array(a);else{var p=d*h;u=new Int32Array(p*t);for(var m=0;m<p;m++)for(var _=0;_<t;++_)u[m*t+_]=a[4*m+_]}return sx(u,[h,d,t],"int32")}}),Qm=Object.freeze({toPixels:function(n,t){return tt(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R,j,H,B,k;return nt(this,function(D){switch(D.label){case 0:if(e=Y(n,"img","toPixels"),n instanceof Nn||(e=e.toInt()),e.rank!==2&&e.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+e.rank+".");if(r=e.shape.slice(0,2),i=r[0],o=r[1],(s=e.rank===2?1:e.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,e.data()];case 1:return a=D.sent(),u=e.min(),c=e.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(d=D.sent(),h=d[0],p=d[1],m=h[0],_=p[0],u.dispose(),c.dispose(),e.dtype==="float32"){if(m<0||_>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+m+" - "+_+"].")}else{if(e.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+e.dtype+". Please use float32 or int32 tensors.");if(m<0||_>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+m+" - "+_+"].")}for(C=e.dtype==="float32"?255:1,x=new Uint8ClampedArray(o*i*4),S=0;S<i*o;++S)N=void 0,F=void 0,R=void 0,j=void 0,s===1?(N=a[S]*C,F=a[S]*C,R=a[S]*C,j=255):s===3?(N=a[3*S]*C,F=a[3*S+1]*C,R=a[3*S+2]*C,j=255):s===4&&(N=a[4*S]*C,F=a[4*S+1]*C,R=a[4*S+2]*C,j=a[4*S+3]*C),x[(H=4*S)+0]=Math.round(N),x[H+1]=Math.round(F),x[H+2]=Math.round(R),x[H+3]=Math.round(j);return t!=null&&(t.width=o,t.height=i,B=t.getContext("2d"),k=new ImageData(x,o,i),B.putImageData(k,0,0)),e!==n&&e.dispose(),[2,x]}})})},fromPixels:Vfe}),P8=function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(t,e){return new t(e)},n}(),M8=function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(t){n.getMap().classNameMap[t.className]=[t,t.fromConfig]},n}();function cd(n){Q(n.className!=null,function(){return"Class being registered does not have the static className property defined."}),Q(typeof n.className=="string",function(){return"className is required to be a string, but got type "+typeof n.className}),Q(n.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),M8.register(n)}var ADe=Object.freeze({Serializable:P8,SerializationMap:M8,registerClass:cd}),Bfe=.001,k8=.1;function nM(){return ne.backend.floatPrecision()===32?Bfe:k8}function rM(n,t,e){var r=!0;if((Si(n)||Si(t))&&(r=!1),Si(n)&&Si(t)&&(r=!0),r){var i=n.constructor.name,o=t.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(n)&&Array.isArray(t)){var s=Ru(n),a=Ru(t);if(!Ur(s,a))throw new Error("Arrays have different shapes. Actual: ["+s+"]. Expected: ["+a+"]")}var u=Si(n)?n:Uc(n),c=Si(t)?t:Uc(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+`.
Actual:   `+u+`.
Expected: `+c+".");for(var d=0;d<c.length;++d){var h=u[d],p=c[d];if(!e(h,p))throw new Error("Arrays differ: actual["+d+"] = "+h+", expected["+d+"] = "+p+`.
Actual:   `+u+`.
Expected: `+c+".")}}function iM(n,t,e){return!isFinite(n)&&!isFinite(t)||!(isNaN(n)||isNaN(t)||Math.abs(n-t)>e)}var DDe=Object.freeze({TEST_EPSILON_FLOAT16:k8,expectArraysClose:function(n,t,e){return e==null&&(e=nM()),rM(n,t,function(r,i){return iM(r,i,e)})},testEpsilon:nM,expectPromiseToFail:function(n,t){n().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(n,t){var e=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return id(n)||id(n[0])||id(t)||id(t[0])?rM(n,e,function(r,i){return r==i}):rM(n,t,function(r,i){return iM(r,i,0)})},expectNumbersClose:function(n,t,e){if(e==null&&(e=nM()),!iM(n,t,e))throw new Error("Numbers differ: actual === "+n+", expected === "+t)},expectValuesInRange:function(n,t,e){for(var r=0;r<n.length;r++)if(n[r]<t||n[r]>e)throw new Error("Value out of range:"+n[r]+" low: "+t+", high: "+e)},expectArrayBuffersEqual:function(n,t){expect(new Float32Array(n)).toEqual(new Float32Array(t))}});var PDe=Object.freeze({gpgpu_util:ule,webgl_util:kue,forceHalfFloat:function(){_e().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Kz,setWebGLContext:Tj,GPGPUContext:jz}),mf=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return Na(t,n),t.prototype.minimize=function(e,r,i){r===void 0&&(r=!1);var o=this.computeGradients(e,i),s=o.value,a=o.grads;if(i!=null){var u=i.map(function(c){return{name:c.name,tensor:a[c.name]}});this.applyGradients(u)}else this.applyGradients(a);return Vo(a),r?s:(s.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,r){return hce(e,r)},t.prototype.dispose=function(){this.iterations_!=null&&Vo(this.iterations_)},t.prototype.saveIterations=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Ue(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return tt(this,void 0,void 0,function(){var r;return nt(this,function(i){switch(i.label){case 0:return r=this,[4,e[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,e.slice(1)]}})})},t}(P8);Object.defineProperty(mf,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var O8=function(n){function t(e,r,i){i===void 0&&(i=null);var o=n.call(this)||this;return o.learningRate=e,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=ne.backend.epsilon()),o}return Na(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=ne.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:ke(function(){return an(s).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:ke(function(){return an(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedGrads[o].variable,c=r.accumulatedUpdates[o].variable;ke(function(){var d=u.mul(r.rho).add(a.square().mul(1-r.rho)),h=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),p=c.mul(r.rho).add(h.square().mul(1-r.rho));u.assign(d),c.assign(p);var m=h.mul(-r.learningRate).add(s);s.assign(m)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Vo(this.accumulatedGrads.map(function(e){return e.variable})),Vo(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var e;return nt(this,function(r){switch(r.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){var r;return nt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=e.length/2,this.accumulatedGrads=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(mf);cd(O8);var R8=function(n){function t(e,r){r===void 0&&(r=.1);var i=n.call(this)||this;return i.learningRate=e,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Na(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=ne.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:ke(function(){return ys(s.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedGrads[o].variable;ke(function(){var c=u.add(a.square());u.assign(c);var d=a.div(c.add(ne.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(d)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Vo(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulatedGrads=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,r){return new e(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(mf);cd(R8);var N8=function(n){function t(e,r,i,o){o===void 0&&(o=null);var s=n.call(this)||this;return s.learningRate=e,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],ke(function(){s.accBeta1=Ue(r).variable(),s.accBeta2=Ue(i).variable()}),o==null&&(s.epsilon=ne.backend.epsilon()),s}return Na(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);ke(function(){var o=Fn(1,r.accBeta1),s=Fn(1,r.accBeta2);i.forEach(function(a,u){var c=ne.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:ke(function(){return an(c).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:ke(function(){return an(c).variable(!1)})});var d=Array.isArray(e)?e[u].tensor:e[a];if(d!=null){var h=r.accumulatedFirstMoment[u].variable,p=r.accumulatedSecondMoment[u].variable,m=h.mul(r.beta1).add(d.mul(1-r.beta1)),_=p.mul(r.beta2).add(d.square().mul(1-r.beta2)),C=m.div(o),x=_.div(s);h.assign(m),p.assign(_);var S=C.div(x.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(S)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Vo(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedSecondMoment!=null&&Vo(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var e;return nt(this,function(r){switch(r.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){var r,i=this;return nt(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(e)];case 1:return e=o.sent(),ke(function(){i.accBeta1.assign(tx(i.beta1,i.iterations_+1)),i.accBeta2.assign(tx(i.beta2,i.iterations_+1))}),r=e.length/2,this.accumulatedFirstMoment=e.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(mf);cd(N8);var F8=function(n){function t(e,r,i,o,s){o===void 0&&(o=null),s===void 0&&(s=0);var a=n.call(this)||this;return a.learningRate=e,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],ke(function(){a.iteration=Ue(0).variable(),a.accBeta1=Ue(r).variable()}),o==null&&(a.epsilon=ne.backend.epsilon()),a}return Na(t,n),t.prototype.applyGradients=function(e){var r=this,i=Array.isArray(e)?e.map(function(o){return o.name}):Object.keys(e);ke(function(){var o=Fn(1,r.accBeta1),s=Zs(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(a,u){var c=ne.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:an(c).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:an(c).variable(!1)});var d=Array.isArray(e)?e[u].tensor:e[a];if(d!=null){var h=r.accumulatedFirstMoment[u].variable,p=r.accumulatedWeightedInfNorm[u].variable,m=h.mul(r.beta1).add(d.mul(1-r.beta1)),_=p.mul(r.beta2),C=d.abs(),x=_.maximum(C);h.assign(m),p.assign(x);var S=s.div(o).mul(m.div(x.add(r.epsilon))).add(c);c.assign(S)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Vo(this.accumulatedFirstMoment.map(function(e){return e.variable})),this.accumulatedWeightedInfNorm!=null&&Vo(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,r){return new e(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(mf);cd(F8);var lk=function(n){function t(e){var r=n.call(this)||this;return r.learningRate=e,r.setLearningRate(e),r}return Na(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=Array.isArray(e)?e[o].tensor:e[i];if(s!=null){var a=ne.registeredVariables[i];ke(function(){var u=r.c.mul(s).add(a);a.assign(u)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=Oue(Ue(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:if((e=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,r){return new e(r.learningRate)},t.className="SGD",t}(mf);cd(lk);var L8=function(n){function t(e,r,i){i===void 0&&(i=!1);var o=n.call(this,e)||this;return o.learningRate=e,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=Ue(o.momentum),o}return Na(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=ne.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:ke(function(){return an(s).variable(!1)})});var a=r.accumulations[o].variable,u=Array.isArray(e)?e[o].tensor:e[i];u!=null&&ke(function(){var c,d=r.m.mul(a).add(u);c=r.useNesterov?r.c.mul(u.add(d.mul(r.m))).add(s):r.c.mul(d).add(s),a.assign(d),s.assign(c)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Vo(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),this.accumulations=e.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,r){return new e(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(lk);cd(L8);var V8=function(n){function t(e,r,i,o,s){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),s===void 0&&(s=!1);var a=n.call(this)||this;if(a.learningRate=e,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,o==null&&(a.epsilon=ne.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return Na(t,n),t.prototype.applyGradients=function(e){var r=this;(Array.isArray(e)?e.map(function(i){return i.name}):Object.keys(e)).forEach(function(i,o){var s=ne.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:ke(function(){return an(s).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:ke(function(){return an(s).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:ke(function(){return an(s).variable(!1)})});var a=Array.isArray(e)?e[o].tensor:e[i];if(a!=null){var u=r.accumulatedMeanSquares[o].variable,c=r.accumulatedMoments[o].variable;ke(function(){var d=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var h=r.accumulatedMeanGrads[o].variable,p=h.mul(r.decay).add(a.mul(1-r.decay)),m=c.mul(r.momentum).add(a.mul(r.learningRate).div(d.sub(p.square().add(r.epsilon)).sqrt()));u.assign(d),h.assign(p),c.assign(m);var _=s.sub(m);s.assign(_)}else{var C=u.mul(r.decay).add(a.square().mul(1-r.decay));m=c.mul(r.momentum).add(a.mul(r.learningRate).div(C.add(r.epsilon).sqrt())),u.assign(C),c.assign(m),_=s.sub(m),s.assign(_)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Vo(this.accumulatedMeanSquares.map(function(e){return e.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Vo(this.accumulatedMeanGrads.map(function(e){return e.variable})),this.accumulatedMoments!=null&&Vo(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return tt(this,void 0,void 0,function(){var e;return nt(this,function(r){switch(r.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(e.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},t.prototype.setWeights=function(e){return tt(this,void 0,void 0,function(){var r;return nt(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(e)];case 1:return e=i.sent(),r=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,r){return new e(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(mf);cd(V8);var ef=function(){function n(){}return n.sgd=function(t){return new lk(t)},n.momentum=function(t,e,r){return r===void 0&&(r=!1),new L8(t,e,r)},n.rmsprop=function(t,e,r,i,o){return e===void 0&&(e=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new V8(t,e,r,i,o)},n.adam=function(t,e,r,i){return t===void 0&&(t=.001),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new N8(t,e,r,i)},n.adadelta=function(t,e,r){return t===void 0&&(t=.001),e===void 0&&(e=.95),r===void 0&&(r=null),new O8(t,e,r)},n.adamax=function(t,e,r,i,o){return t===void 0&&(t=.002),e===void 0&&(e=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new F8(t,e,r,i,o)},n.adagrad=function(t,e){return e===void 0&&(e=.1),new R8(t,e)},n}(),MDe={sgd:ef.sgd,momentum:ef.momentum,adadelta:ef.adadelta,adagrad:ef.adagrad,rmsprop:ef.rmsprop,adamax:ef.adamax,adam:ef.adam};Nn.prototype.squaredDifference=function(n){return Yz(this,n)},ge=vfe;function ld(n,t,e){if(e===void 0&&(e=!1),n.beginPath(),t.slice(1).forEach(function(o,s){var a=o.x,u=o.y,c=t[s];n.moveTo(c.x,c.y),n.lineTo(a,u)}),e){var r=t[t.length-1],i=t[0];if(!r||!i)return;n.moveTo(r.x,r.y),n.lineTo(i.x,i.y)}n.stroke()}var dk=function(n,t){return dk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])},dk(n,t)};function Ke(n,t){dk(n,t);function e(){this.constructor=n}n.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Wr=function(){return Wr=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Wr.apply(this,arguments)};function Fe(n,t,e,r){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{c(r.next(d))}catch(h){s(h)}}function u(d){try{c(r.throw(d))}catch(h){s(h)}}function c(d){d.done?o(d.value):i(d.value).then(a,u)}c((r=r.apply(n,t||[])).next())})}function Le(n,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(d){return u([c,d])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;e;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){e.label=c[1];break}if(c[0]===6&&e.label<o[1]){e.label=o[1],o=c;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(c);break}o[2]&&e.ops.pop(),e.trys.pop();continue}c=t.call(n,e)}catch(d){c=[6,d],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function gf(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ba=function(){function n(t,e){if(!Fu(t)||!Fu(e))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:e}));this._width=t,this._height=e}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n}();function T_(n,t){return n instanceof Nn&&n.shape.length===t}function B8(n){return T_(n,2)}function dd(n){return T_(n,3)}function Xs(n){return T_(n,4)}function U8(n){return n%1!==0}function hk(n){return n%2===0}function gx(n,t){t===void 0&&(t=2);var e=Math.pow(10,t);return Math.floor(n*e)/e}function fk(n){return n&&n.width&&n.height}function j8(n,t){var e=n.width,r=n.height,i=t/Math.max(r,e);return new Ba(Math.round(e*i),Math.round(r*i))}function Xm(n){return n.reduce(function(t,e){return t.add(e)},new Wt(0,0)).div(new Wt(n.length,n.length))}function $c(n,t,e){return Array(n).fill(0).map(function(r,i){return t+i*e})}function Fu(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function vx(n){return Fu(n)&&0<=n&&n<=1}var Wt=function(){function n(t,e){this._x=t,this._y=e}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y)},n.prototype.sub=function(t){return new n(this.x-t.x,this.y-t.y)},n.prototype.mul=function(t){return new n(this.x*t.x,this.y*t.y)},n.prototype.div=function(t){return new n(this.x/t.x,this.y/t.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n}();var Ai=function(){function n(t,e){e===void 0&&(e=!0);var r=t||{},i=[r.left,r.top,r.right,r.bottom].every(Fu),o=[r.x,r.y,r.width,r.height].every(Fu);if(!o&&!i)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var s=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],a=s[0],u=s[1],c=s[2],d=s[3];n.assertIsValidBox({x:a,y:u,width:c,height:d},"Box.constructor",e),this._x=a,this._y=u,this._width=c,this._height=d}return n.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(Fu)},n.assertIsValidBox=function(t,e,r){if(r===void 0&&(r=!1),!n.isRect(t))throw new Error(e+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(e+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new Wt(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new Wt(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new Wt(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new Wt(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.round(s)}),e=t[0],r=t[1],i=t[2],o=t[3];return new n({x:e,y:r,width:i,height:o})},n.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(s){return Math.floor(s)}),e=t[0],r=t[1],i=t[2],o=t[3];return new n({x:e,y:r,width:i,height:o})},n.prototype.toSquare=function(){var t=this,e=t.x,r=t.y,i=t.width,o=t.height,s=Math.abs(i-o);return i<o&&(e-=s/2,i+=s),o<i&&(r-=s/2,o+=s),new n({x:e,y:r,width:i,height:o})},n.prototype.rescale=function(t){var e=fk(t)?t.width:t,r=fk(t)?t.height:t;return new n({x:this.x*e,y:this.y*r,width:this.width*e,height:this.height*r})},n.prototype.pad=function(t,e){var r=[this.x-t/2,this.y-e/2,this.width+t,this.height+e],i=r[0],o=r[1],s=r[2],a=r[3];return new n({x:i,y:o,width:s,height:a})},n.prototype.clipAtImageBorders=function(t,e){var r=this,i=r.x,o=r.y,s=r.right,a=r.bottom,u=Math.max(i,0),c=Math.max(o,0),d=s-u,h=a-c,p=Math.min(d,t-u),m=Math.min(h,e-c);return new n({x:u,y:c,width:p,height:m}).floor()},n.prototype.shift=function(t,e){var r=this,i=r.width,o=r.height,s=this.x+t,a=this.y+e;return new n({x:s,y:a,width:i,height:o})},n.prototype.padAtBorders=function(t,e){var r=this.width+1,i=this.height+1,o=1,s=1,a=r,u=i,c=this.left,d=this.top,h=this.right,p=this.bottom;return h>e&&(a=-h+e+r,h=e),p>t&&(u=-p+t+i,p=t),c<1&&(u=2-c,c=1),d<1&&(u=2-d,d=1),{dy:s,edy:u,dx:o,edx:a,y:d,ey:p,x:c,ex:h,w:r,h:i}},n.prototype.calibrate=function(t){return new n({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},n}();var vf=function(n){Ke(t,n);function t(e,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{left:e,top:r,right:i,bottom:o},s)||this}return t}(Ai);var _x=function(){function n(t,e,r,i,o){this._imageDims=new Ba(o.width,o.height),this._score=t,this._classScore=e,this._className=r,this._box=new Ai(i).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new Ai(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:e})},n}();var Pr=function(n){Ke(t,n);function t(e,r,i){return n.call(this,e,e,"",r,i)||this}return t.prototype.forSize=function(e,r){var i=n.prototype.forSize.call(this,e,r),o=i.score,s=i.relativeBox,a=i.imageDims;return new t(o,s,a)},t}(_x);function z8(n,t,e){e===void 0&&(e=!0);var r=Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left)),i=Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top)),o=r*i;return e?o/(n.area+t.area-o):o/Math.min(n.area,t.area)}function W8(n){var t=n.map(function(a){return a.x}),e=n.map(function(a){return a.y}),r=t.reduce(function(a,u){return u<a?u:a},1/0),i=e.reduce(function(a,u){return u<a?u:a},1/0),o=t.reduce(function(a,u){return a<u?u:a},0),s=e.reduce(function(a,u){return a<u?u:a},0);return new vf(r,i,o,s)}function qc(n,t,e,r){r===void 0&&(r=!0);for(var i=t.map(function(a,u){return{score:a,boxIndex:u}}).sort(function(a,u){return a.score-u.score}).map(function(a){return a.boxIndex}),o=[],s=function(){var a=i.pop();o.push(a);for(var u=i,c=[],d=0;d<u.length;d++){var h=u[d],p=n[a],m=n[h];c.push(z8(p,m,r))}i=i.filter(function(_,C){return c[C]<=e})};i.length>0;)s();return o}function Lu(n,t){return ke(function(){var e=t[0],r=t[1],i=t[2],o=ys(gf(n.shape.slice(0,3),[1]),e),s=ys(gf(n.shape.slice(0,3),[1]),r),a=ys(gf(n.shape.slice(0,3),[1]),i),u=Xn([o,s,a],3);return Fn(n,u)})}function H8(n,t){return t===void 0&&(t=!1),ke(function(){var e=n.shape.slice(1),r=e[0],i=e[1];if(r===i)return n;var o=Math.abs(r-i),s=Math.round(o*(t?.5:1)),a=r>i?2:1,u=function(m){var _=n.shape.slice();return _[a]=m,ys(_,0)},c=u(s),d=o-c.shape[a],h=t&&d?u(d):null,p=[h,n,c].filter(function(m){return!!m}).map(function(m){return m.toFloat()});return Xn(p,a)})}function yx(n){return 1/(1+Math.exp(-n))}var Jm=function(n){Ke(t,n);function t(e,r,i,o,s){return s===void 0&&(s=!1),n.call(this,{x:e,y:r,width:i,height:o},s)||this}return t}(Ai);var jfe=.5,zfe=.43,Wfe=.45,Gc=function(){function n(t,e,r){r===void 0&&(r=new Wt(0,0));var i=e.width,o=e.height;this._imgDims=new Ba(i,o),this._shift=r,this._positions=t.map(function(s){return s.mul(new Wt(i,o)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new Wt(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(e){return e.sub(t._shift).div(new Wt(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(t,e){return new this.constructor(this.relativePositions,{width:t,height:e})},n.prototype.shiftBy=function(t,e){return new this.constructor(this.relativePositions,this._imgDims,new Wt(t,e))},n.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},n.prototype.align=function(t,e){if(e===void 0&&(e={}),t){var r=t instanceof Pr?t.box.floor():new Ai(t);return this.shiftBy(r.x,r.y).align(null,e)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},e),o=i.useDlibAlignment,s=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(s)},n.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),e=t[0],r=t[1],i=t[2],o=function(h){return i.sub(h).magnitude()},s=(o(e)+o(r))/2,a=Math.floor(s/Wfe),u=Xm(t),c=Math.floor(Math.max(0,u.x-jfe*a)),d=Math.floor(Math.max(0,u.y-zfe*a));return new Jm(c,d,Math.min(a,this.imageWidth+c),Math.min(a,this.imageHeight+d))},n.prototype.alignMinBbox=function(t){var e=W8(this.positions);return e.pad(e.width*t,e.height*t)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n}();var $8=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],Xm([e[3],e[4]])]},t}(Gc);var bx=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Xm)},t}(Gc);var pk=function(){function n(t,e){this._label=t,this._distance=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+gx(this.distance)+")":"")},n}();var mk=function(n){Ke(t,n);function t(e,r){var i=n.call(this,e)||this;return i._label=r,i}return t.assertIsValidLabeledBox=function(e,r){if(Ai.assertIsValidBox(e,r),!Fu(e.label))throw new Error(r+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Ai);var A_=function(){function n(t,e){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(e)||e.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=e}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},n.fromJSON=function(t){var e=t.descriptors.map(function(r){return new Float32Array(r)});return new n(t.label,e)},n}();var zPe=function(n){Ke(t,n);function t(e,r,i,o){var s=n.call(this,e,r)||this;return s._score=i,s._classScore=o,s}return t.assertIsValidPredictedBox=function(e,r){if(mk.assertIsValidLabeledBox(e,r),!vx(e.score)||!vx(e.classScore))throw new Error(r+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t}(mk);function D_(n){return n.detection instanceof Pr}function eg(n,t){var e={detection:t};return Object.assign({},n,e)}function gk(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:t}}function wx(n){var t="";if(!n)try{n=o2("fs")}catch(r){t=r.toString()}var e=n?function(r){return new Promise(function(i,o){n.readFile(r,function(s,a){return s?o(s):i(a)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:e}}function vk(){var n=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,e=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},i=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=wx();return Wr({Canvas:n||function(){function s(){}return s}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function s(){}return s}(),Image:t||function(){function s(){}return s}(),ImageData:global.ImageData||function(){function s(){}return s}(),Video:global.HTMLVideoElement||function(){function s(){}return s}(),createCanvasElement:e,createImageElement:r,fetch:i},o)}function _k(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function yk(){return typeof global=="object"&&typeof o2=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var Jr;function Hfe(){if(!Jr)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Jr}function bk(n){Jr=n}function wk(){_k()&&bk(gk()),yk()&&bk(vk())}function $fe(n){if(Jr||wk(),!Jr)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=n.Canvas,e=t===void 0?Jr.Canvas:t,r=n.Image,i=r===void 0?Jr.Image:r;Jr.Canvas=e,Jr.Image=i,Jr.createCanvasElement=n.createCanvasElement||function(){return new e},Jr.createImageElement=n.createImageElement||function(){return new i},Jr.ImageData=n.ImageData||Jr.ImageData,Jr.Video=n.Video||Jr.Video,Jr.fetch=n.fetch||Jr.fetch,Jr.readFile=n.readFile||Jr.readFile}var En={getEnv:Hfe,setEnv:bk,initialize:wk,createBrowserEnv:gk,createFileSystem:wx,createNodejsEnv:vk,monkeyPatch:$fe,isBrowser:_k,isNodejs:yk};wk();function tg(n){return!En.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Di(n){var t=En.getEnv(),e=t.Canvas,r=t.CanvasRenderingContext2D;if(n instanceof r)return n;var i=tg(n);if(!(i instanceof e))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var hd=function(n){return n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT",n}(hd||{}),Ck=function(){function n(t){t===void 0&&(t={});var e=t.anchorPosition,r=t.backgroundColor,i=t.fontColor,o=t.fontSize,s=t.fontStyle,a=t.padding;this.anchorPosition=e||hd.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=s||"Georgia",this.padding=a||4}return n}();var xk=function(){function n(t,e,r){r===void 0&&(r={}),this.text=typeof t=="string"?[t]:t instanceof n?t.text:t,this.anchor=e,this.options=new Ck(r)}return n.prototype.measureWidth=function(t){var e=this.options.padding;return this.text.map(function(r){return t.measureText(r).width}).reduce(function(r,i){return r<i?i:r},0)+2*e},n.prototype.measureHeight=function(){var t=this.options,e=t.fontSize,r=t.padding;return this.text.length*e+2*r},n.prototype.getUpperLeft=function(t,e){var r=this.options.anchorPosition,i=r===hd.BOTTOM_RIGHT||r===hd.TOP_RIGHT,o=r===hd.BOTTOM_LEFT||r===hd.BOTTOM_RIGHT,s=this.measureWidth(t),a=this.measureHeight(),u=i?this.anchor.x-s:this.anchor.x,c=o?this.anchor.y-a:this.anchor.y;if(e){var d=e.width,h=e.height,p=Math.max(Math.min(u,d-s),0),m=Math.max(Math.min(c,h-a),0);return{x:p,y:m}}return{x:u,y:c}},n.prototype.draw=function(t){var e=tg(t),r=Di(e),i=this.options,o=i.backgroundColor,s=i.fontColor,a=i.fontSize,u=i.fontStyle,c=i.padding;r.font=a+"px "+u;var d=this.measureWidth(r),h=this.measureHeight();r.fillStyle=o;var p=this.getUpperLeft(r,e);r.fillRect(p.x,p.y,d,h),r.fillStyle=s,this.text.forEach(function(m,_){var C=c+p.x,x=c+p.y+(_+1)*a;r.fillText(m,C,x)})},n}();var qfe=function(){function n(t){t===void 0&&(t={});var e=t.boxColor,r=t.lineWidth,i=t.label,o=t.drawLabelOptions;this.boxColor=e||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=i;var s={anchorPosition:hd.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Ck(Object.assign({},s,o))}return n}();var Gfe=function(){function n(t,e){e===void 0&&(e={}),this.box=new Ai(t),this.options=new qfe(e)}return n.prototype.draw=function(t){var e=Di(t),r=this.options,i=r.boxColor,o=r.lineWidth,s=this.box,a=s.x,u=s.y,c=s.width,d=s.height;e.strokeStyle=i,e.lineWidth=o,e.strokeRect(a,u,c,d);var h=this.options.label;h&&new xk([h],{x:a-o/2,y:u},this.options.drawLabelOptions).draw(t)},n}();function Cx(n){var t=En.getEnv(),e=t.Image,r=t.Video;return n instanceof e&&n.complete||n instanceof r&&n.readyState>=3}function q8(n){return new Promise(function(t,e){if(n instanceof En.getEnv().Canvas||Cx(n))return t();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),t(o))}function i(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",i),e(o))}n.addEventListener("load",r),n.addEventListener("error",i)})}function P_(n){var t=En.getEnv(),e=t.Image,r=t.Video;return n instanceof e?new Ba(n.naturalWidth,n.naturalHeight):n instanceof r?new Ba(n.videoWidth,n.videoHeight):new Ba(n.width,n.height)}function _f(n){var t=n.width,e=n.height,r=En.getEnv().createCanvasElement,i=r();return i.width=t,i.height=e,i}function ng(n,t){var e=En.getEnv().ImageData;if(!(n instanceof e)&&!Cx(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||P_(n),i=r.width,o=r.height,s=_f({width:i,height:o});return n instanceof e?Di(s).putImageData(n,0,0):Di(s).drawImage(n,0,0,i,o),s}function G8(n,t){return Fe(this,void 0,void 0,function(){var e,r,i,o,s,a;return Le(this,function(u){switch(u.label){case 0:return e=t||En.getEnv().createCanvasElement(),r=n.shape.slice(Xs(n)?1:0),i=r[0],o=r[1],s=r[2],a=ke(function(){return n.as3D(i,o,s).toInt()}),[4,Qm.toPixels(a,e)];case 1:return u.sent(),a.dispose(),[2,e]}})})}function Ek(n){var t=En.getEnv(),e=t.Image,r=t.Canvas,i=t.Video;return n instanceof e||n instanceof r||n instanceof i}function K8(n,t,e){e===void 0&&(e=!1);var r=En.getEnv(),i=r.Image,o=r.Canvas;if(!(n instanceof i||n instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=P_(n),a=t/Math.max(s.height,s.width),u=a*s.width,c=a*s.height,d=_f({width:t,height:t}),h=n instanceof o?n:ng(n),p=Math.abs(u-c)/2,m=e&&u<c?p:0,_=e&&c<u?p:0;return Di(d).drawImage(h,m,_,u,c),d}var yf=function(){function n(t,e){var r=this;if(e===void 0&&(e=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=e,this._batchSize=t.length,t.forEach(function(i,o){if(dd(i)){r._imageTensors[o]=i,r._inputDimensions[o]=i.shape;return}if(Xs(i)){var s=i.shape[0];if(s!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+s+" passed, but not supported in input array");r._imageTensors[o]=i,r._inputDimensions[o]=i.shape.slice(1);return}var a=i instanceof En.getEnv().Canvas?i:ng(i);r._canvases[o]=a,r._inputDimensions[o]=[a.height,a.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var t=this;return $c(this.batchSize,0,1).map(function(e,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},n.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},n.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},n.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},n.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var e=this.getInputWidth(t),r=this.getInputHeight(t);return j8({width:e,height:r},this.inputSize)},n.prototype.toBatchTensor=function(t,e){var r=this;return e===void 0&&(e=!0),this._inputSize=t,ke(function(){var i=$c(r.batchSize,0,1).map(function(s){var a=r.getInput(s);if(a instanceof Nn){var u=Xs(a)?a:a.expandDims();return u=H8(u,e),(u.shape[1]!==t||u.shape[2]!==t)&&(u=I_.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(a instanceof En.getEnv().Canvas)return Qm.fromPixels(K8(a,t,e));throw new Error("toBatchTensor - at batchIdx "+s+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+a)}),o=Ti(i.map(function(s){return s.toFloat()})).as4D(r.batchSize,t,t,3);return o})},n}();function Pn(n){return Fe(this,void 0,void 0,function(){var t,e,r;return Le(this,function(i){switch(i.label){case 0:if(n instanceof yf)return[2,n];if(t=Array.isArray(n)?n:[n],!t.length)throw new Error("toNetInput - empty array passed as input");return e=function(o){return Array.isArray(n)?" at input index "+o+":":""},r=t.map(tg),r.forEach(function(o,s){if(!Ek(o)&&!dd(o)&&!Xs(o))throw typeof t[s]=="string"?new Error("toNetInput -"+e(s)+" string passed, but could not resolve HTMLElement for element id "+t[s]):new Error("toNetInput -"+e(s)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Xs(o)){var a=o.shape[0];if(a!==1)throw new Error("toNetInput -"+e(s)+" tf.Tensor4D with batchSize "+a+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return Ek(o)&&q8(o)}))];case 1:return i.sent(),[2,new yf(r,Array.isArray(n))]}})})}function M_(n,t){return Fe(this,void 0,void 0,function(){var e,r,i,o,s,a,u;return Le(this,function(c){switch(c.label){case 0:return e=En.getEnv().Canvas,r=n,n instanceof e?[3,5]:[4,Pn(n)];case 1:if(i=c.sent(),i.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=i.getInput(0),o instanceof e?(s=o,[3,4]):[3,2];case 2:return[4,G8(o)];case 3:s=c.sent(),c.label=4;case 4:r=s,c.label=5;case 5:return a=Di(r),u=t.map(function(d){return d instanceof Pr?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(d){var h=d.x,p=d.y,m=d.width,_=d.height,C=_f({width:m,height:_});return Di(C).putImageData(a.getImageData(h,p,m,_),0,0),C})]}})})}function k_(n,t){return Fe(this,void 0,void 0,function(){return Le(this,function(e){if(!dd(n)&&!Xs(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Xs(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,ke(function(){var r=n.shape.slice(Xs(n)?1:0),i=r[0],o=r[1],s=r[2],a=t.map(function(c){return c instanceof Pr?c.forSize(o,i).box:c}).map(function(c){return c.clipAtImageBorders(o,i)}),u=a.map(function(c){var d=c.x,h=c.y,p=c.width,m=c.height;return ek(n.as3D(i,o,s),[h,d,0],[m,p,s])});return u})]})})}function xx(n,t){return Fe(this,void 0,void 0,function(){var e,r;return Le(this,function(i){switch(i.label){case 0:return e=En.getEnv().fetch,[4,e(n,t)];case 1:if(r=i.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function Y8(n){return Fe(this,void 0,void 0,function(){return Le(this,function(t){switch(t.label){case 0:return[4,xx(n)];case 1:return[2,t.sent().json()]}})})}function Ex(n,t){var e=t+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:e};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+e};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var i=n.split("/").filter(function(a){return a}),o=n.endsWith(".json")?i[i.length-1]:e,s=r+(n.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return s=n.startsWith("/")?"/"+s:s,{modelBaseUri:s,manifestUri:s==="/"?"/"+o:s+"/"+o}}function Z8(n,t){return Fe(this,void 0,void 0,function(){var e,r,i,o;return Le(this,function(s){switch(s.label){case 0:return e=Ex(n,t),r=e.manifestUri,i=e.modelBaseUri,[4,Y8(r)];case 1:return o=s.sent(),[2,mx.loadWeights(o,i)]}})})}var di=function(){function n(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(t){var e=this.traversePropertyPath(t),r=e.obj,i=e.objProp;return r[i]},n.prototype.reassignParamFromPath=function(t,e){var r=this.traversePropertyPath(t),i=r.obj,o=r.objProp;i[o].dispose(),i[o]=e},n.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(e){var r=e.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof uf})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof uf)})},n.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(e){var r=e.path,i=e.tensor;t.reassignParamFromPath(r,i.variable())})},n.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(e){var r=e.path,i=e.tensor,o=ci(i.dataSync());i.dispose(),t.reassignParamFromPath(r,o)})},n.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(e){if(t&&e.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+e.path);e.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var e=t.tensor;return Array.from(e.dataSync())}).reduce(function(t,e){return t.concat(e)}))},n.prototype.load=function(t){return Fe(this,void 0,void 0,function(){return Le(this,function(e){switch(e.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return e.sent(),[2]}})})},n.prototype.loadFromUri=function(t){return Fe(this,void 0,void 0,function(){var e;return Le(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Z8(t,this.getDefaultModelName())];case 1:return e=r.sent(),this.loadFromWeightMap(e),[2]}})})},n.prototype.loadFromDisk=function(t){return Fe(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c,d,h;return Le(this,function(p){switch(p.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return e=En.getEnv().readFile,r=Ex(t,this.getDefaultModelName()),i=r.manifestUri,o=r.modelBaseUri,s=function(m){return Promise.all(m.map(function(_){return e(_).then(function(C){return C.buffer})}))},a=mx.weightsLoaderFactory(s),d=(c=JSON).parse,[4,e(i)];case 1:return u=d.apply(c,[p.sent().toString()]),[4,a(u,o)];case 2:return h=p.sent(),this.loadFromWeightMap(h),[2]}})})},n.prototype.loadFromWeightMap=function(t){var e=this.extractParamsFromWeigthMap(t),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},n.prototype.extractWeights=function(t){var e=this.extractParams(t),r=e.paramMappings,i=e.params;this._paramMappings=r,this._params=i},n.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var e=t.split("/").reduce(function(o,s){if(!o.nextObj.hasOwnProperty(s))throw new Error("traversePropertyPath - object does not have property "+s+", for path "+t);return{obj:o.nextObj,objProp:s,nextObj:o.nextObj[s]}},{nextObj:this.params}),r=e.obj,i=e.objProp;if(!r||!i||!(r[i]instanceof Nn))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:i}},n}();function go(n,t,e){return ke(function(){var r=x_(n,t.depthwise_filter,t.pointwise_filter,e,"same");return r=gt(r,t.bias),r})}function Ix(n,t,e){return e===void 0&&(e=!1),ke(function(){var r=Sn(e?gt(li(n,t.conv0.filters,[2,2],"same"),t.conv0.bias):go(n,t.conv0,[2,2])),i=go(r,t.conv1,[1,1]),o=Sn(gt(r,i)),s=go(o,t.conv2,[1,1]);return Sn(gt(r,gt(i,s)))})}function O_(n,t,e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),ke(function(){var i=Sn(e?gt(li(n,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):go(n,t.conv0,r?[2,2]:[1,1])),o=go(i,t.conv1,[1,1]),s=Sn(gt(i,o)),a=go(s,t.conv2,[1,1]),u=Sn(gt(i,gt(o,a))),c=go(u,t.conv3,[1,1]);return Sn(gt(i,gt(o,gt(a,c))))})}function Yi(n,t,e,r){return e===void 0&&(e="same"),r===void 0&&(r=!1),ke(function(){var i=gt(li(n,t.filters,[1,1],e),t.bias);return r?Sn(i):i})}function hi(n,t){Object.keys(n).forEach(function(e){t.some(function(r){return r.originalPath===e})||n[e].dispose()})}function fd(n,t){return function(e,r,i,o){var s=Xr(n(e*r*i*i),[i,i,e,r]),a=jn(n(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:s,bias:a}}}function rg(n,t){return function(e,r,i){var o=Ou(n(e*r),[e,r]),s=jn(n(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:s}}}var Ik=function(){function n(t,e,r){this.depthwise_filter=t,this.pointwise_filter=e,this.bias=r}return n}();function ig(n,t){return function(e,r,i){var o=Xr(n(9*e),[3,3,e,1]),s=Xr(n(e*r),[1,1,e,r]),a=jn(n(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new Ik(o,s,a)}}function og(n){return function(t){var e=n(t+"/depthwise_filter",4),r=n(t+"/pointwise_filter",4),i=n(t+"/bias",1);return new Ik(e,r,i)}}function Zi(n,t){return function(e,r,i){var o=n[e];if(!T_(o,r))throw new Error("expected weightMap["+e+"] to be a Tensor"+r+"D, instead have "+o);return t.push({originalPath:e,paramPath:i||e}),o}}function fi(n){var t=n;function e(i){var o=t.slice(0,i);return t=t.slice(i),o}function r(){return t}return{extractWeights:e,getRemainingWeights:r}}function Sx(n,t){var e=fd(n,t),r=ig(n,t);function i(s,a,u,c){c===void 0&&(c=!1);var d=c?e(s,a,3,u+"/conv0"):r(s,a,u+"/conv0"),h=r(a,a,u+"/conv1"),p=r(a,a,u+"/conv2");return{conv0:d,conv1:h,conv2:p}}function o(s,a,u,c){c===void 0&&(c=!1);var d=i(s,a,u,c),h=d.conv0,p=d.conv1,m=d.conv2,_=r(a,a,u+"/conv3");return{conv0:h,conv1:p,conv2:m,conv3:_}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function Q8(n){var t=[],e=fi(n),r=e.extractWeights,i=e.getRemainingWeights,o=Sx(r,t).extractDenseBlock4Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2"),c=o(128,256,"dense3");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u,dense3:c}}}function Tx(n){return function(t){var e=n(t+"/filters",4),r=n(t+"/bias",1);return{filters:e,bias:r}}}function Ax(n,t){var e=Zi(n,t),r=Tx(e),i=og(e);function o(a,u){u===void 0&&(u=!1);var c=u?r(a+"/conv0"):i(a+"/conv0"),d=i(a+"/conv1"),h=i(a+"/conv2");return{conv0:c,conv1:d,conv2:h}}function s(a,u){u===void 0&&(u=!1);var c=u?r(a+"/conv0"):i(a+"/conv0"),d=i(a+"/conv1"),h=i(a+"/conv2"),p=i(a+"/conv3");return{conv0:c,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:s}}function X8(n){var t=[],e=Ax(n,t).extractDenseBlock4Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2"),dense3:e("dense3")};return hi(n,t),{params:r,paramMappings:t}}var Dx=function(n){Ke(t,n);function t(){return n.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return ke(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Lu(i,o).div(Ue(255)),a=O_(s,r.dense0,!0);return a=O_(a,r.dense1),a=O_(a,r.dense2),a=O_(a,r.dense3),a=Wc(a,[7,7],[2,2],"valid"),a})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return X8(e)},t.prototype.extractParams=function(e){return Q8(e)},t}(di);function Bo(n,t){return ke(function(){return gt(Zm(n,t.weights),t.bias)})}function J8(n,t,e){var r=[],i=fi(n),o=i.extractWeights,s=i.getRemainingWeights,a=rg(o,r),u=a(t,e,"fc");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:r,params:{fc:u}}}function eW(n){var t=[],e=Zi(n,t);function r(o){var s=e(o+"/weights",2),a=e(o+"/bias",1);return{weights:s,bias:a}}var i={fc:r("fc")};return hi(n,t),{params:i,paramMappings:t}}function Px(n){var t={},e={};return Object.keys(n).forEach(function(r){var i=r.startsWith("fc")?e:t;i[r]=n[r]}),{featureExtractorMap:t,classifierMap:e}}var Mx=function(n){Ke(t,n);function t(e,r){var i=n.call(this,e)||this;return i._faceFeatureExtractor=r,i}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return ke(function(){var o=e instanceof yf?r.faceFeatureExtractor.forwardInput(e):e;return Bo(o.as2D(o.shape[0],-1),i.fc)})},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return J8(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var r=Px(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),eW(o)},t.prototype.extractParams=function(e){var r=this.getClassifierChannelsIn(),i=this.getClassifierChannelsOut(),o=i*r+i,s=e.slice(0,e.length-o),a=e.slice(e.length-o);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(a)},t}(di);var tW=["neutral","happy","sad","angry","fearful","disgusted","surprised"],kx=function(){function n(t){var e=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);tW.forEach(function(r,i){e[r]=t[i]})}return n.prototype.asSortedArray=function(){var t=this;return tW.map(function(e){return{expression:e,probability:t[e]}}).sort(function(e,r){return r.probability-e.probability})},n}();var nW=function(n){Ke(t,n);function t(e){return e===void 0&&(e=new Dx),n.call(this,"FaceExpressionNet",e)||this}return t.prototype.forwardInput=function(e){var r=this;return ke(function(){return mo(r.runNet(e))})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictExpressions=function(e){return Fe(this,void 0,void 0,function(){var r,i,o,s,a=this;return Le(this,function(u){switch(u.label){case 0:return[4,Pn(e)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return i=u.sent(),[4,Promise.all(Dn(i).map(function(c){return Fe(a,void 0,void 0,function(){var d;return Le(this,function(h){switch(h.label){case 0:return[4,c.data()];case 1:return d=h.sent(),c.dispose(),[2,d]}})})}))];case 3:return o=u.sent(),i.dispose(),s=o.map(function(c){return new kx(c)}),[2,r.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Mx);function Sk(n,t){var e={expressions:t};return Object.assign({},n,e)}function Ox(n){return D_(n)&&n.landmarks instanceof Gc&&n.unshiftedLandmarks instanceof Gc&&n.alignedRect instanceof Pr}function sg(n,t){var e=n.detection.box,r=t.shiftBy(e.x,e.y),i=r.align(),o=n.detection.imageDims,s=new Pr(n.detection.score,i.rescale(o.reverse()),o),a={landmarks:r,unshiftedLandmarks:t,alignedRect:s};return Object.assign({},n,a)}var Kfe=function(){function n(t){t===void 0&&(t={});var e=t.drawLines,r=e===void 0?!0:e,i=t.drawPoints,o=i===void 0?!0:i,s=t.lineWidth,a=t.lineColor,u=t.pointSize,c=t.pointColor;this.drawLines=r,this.drawPoints=o,this.lineWidth=s||1,this.pointSize=u||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=c||"rgba(255, 0, 255, 1)"}return n}();var sRe=function(){function n(t,e){e===void 0&&(e={}),this.faceLandmarks=t,this.options=new Kfe(e)}return n.prototype.draw=function(t){var e=Di(t),r=this.options,i=r.drawLines,o=r.drawPoints,s=r.lineWidth,a=r.lineColor,u=r.pointSize,c=r.pointColor;if(i&&this.faceLandmarks instanceof bx&&(e.strokeStyle=a,e.lineWidth=s,ld(e,this.faceLandmarks.getJawOutline()),ld(e,this.faceLandmarks.getLeftEyeBrow()),ld(e,this.faceLandmarks.getRightEyeBrow()),ld(e,this.faceLandmarks.getNose()),ld(e,this.faceLandmarks.getLeftEye(),!0),ld(e,this.faceLandmarks.getRightEye(),!0),ld(e,this.faceLandmarks.getMouth(),!0)),o){e.strokeStyle=c,e.fillStyle=c;var d=function(h){e.beginPath(),e.arc(h.x,h.y,u,0,2*Math.PI),e.fill()};this.faceLandmarks.positions.forEach(d)}},n}();function Zfe(n,t){var e=fd(n,t),r=ig(n,t);function i(s,a,u){var c=r(s,a,u+"/separable_conv0"),d=r(a,a,u+"/separable_conv1"),h=e(s,a,1,u+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:h}}function o(s,a){var u=r(s,s,a+"/separable_conv0"),c=r(s,s,a+"/separable_conv1"),d=r(s,s,a+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:d}}return{extractConvParams:e,extractSeparableConvParams:r,extractReductionBlockParams:i,extractMainBlockParams:o}}function rW(n,t){var e=[],r=fi(n),i=r.extractWeights,o=r.getRemainingWeights,s=Zfe(i,e),a=s.extractConvParams,u=s.extractSeparableConvParams,c=s.extractReductionBlockParams,d=s.extractMainBlockParams,h=a(3,32,3,"entry_flow/conv_in"),p=c(32,64,"entry_flow/reduction_block_0"),m=c(64,128,"entry_flow/reduction_block_1"),_={conv_in:h,reduction_block_0:p,reduction_block_1:m},C={};$c(t,0,1).forEach(function(F){C["main_block_"+F]=d(128,"middle_flow/main_block_"+F)});var x=c(128,256,"exit_flow/reduction_block"),S=u(256,512,"exit_flow/separable_conv"),N={reduction_block:x,separable_conv:S};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:e,params:{entry_flow:_,middle_flow:C,exit_flow:N}}}function Qfe(n,t){var e=Zi(n,t),r=Tx(e),i=og(e);function o(a){var u=i(a+"/separable_conv0"),c=i(a+"/separable_conv1"),d=r(a+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:d}}function s(a){var u=i(a+"/separable_conv0"),c=i(a+"/separable_conv1"),d=i(a+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:s}}function iW(n,t){var e=[],r=Qfe(n,e),i=r.extractConvParams,o=r.extractSeparableConvParams,s=r.extractReductionBlockParams,a=r.extractMainBlockParams,u=i("entry_flow/conv_in"),c=s("entry_flow/reduction_block_0"),d=s("entry_flow/reduction_block_1"),h={conv_in:u,reduction_block_0:c,reduction_block_1:d},p={};$c(t,0,1).forEach(function(x){p["main_block_"+x]=a("middle_flow/main_block_"+x)});var m=s("exit_flow/reduction_block"),_=o("exit_flow/separable_conv"),C={reduction_block:m,separable_conv:_};return hi(n,e),{params:{entry_flow:h,middle_flow:p,exit_flow:C},paramMappings:e}}function oW(n,t,e){return gt(li(n,t.filters,e,"same"),t.bias)}function Tk(n,t,e){e===void 0&&(e=!0);var r=e?Sn(n):n;return r=go(r,t.separable_conv0,[1,1]),r=go(Sn(r),t.separable_conv1,[1,1]),r=lr(r,[3,3],[2,2],"same"),r=gt(r,oW(n,t.expansion_conv,[2,2])),r}function Xfe(n,t){var e=go(Sn(n),t.separable_conv0,[1,1]);return e=go(Sn(e),t.separable_conv1,[1,1]),e=go(Sn(e),t.separable_conv2,[1,1]),e=gt(e,n),e}var sW=function(n){Ke(t,n);function t(e){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=e,r}return t.prototype.forwardInput=function(e){var r=this,i=this.params;if(!i)throw new Error("TinyXception - load model before inference");return ke(function(){var o=e.toBatchTensor(112,!0),s=[122.782,117.001,104.298],a=Lu(o,s).div(Ue(256)),u=Sn(oW(a,i.entry_flow.conv_in,[2,2]));return u=Tk(u,i.entry_flow.reduction_block_0,!1),u=Tk(u,i.entry_flow.reduction_block_1),$c(r._numMainBlocks,0,1).forEach(function(c){u=Xfe(u,i.middle_flow["main_block_"+c])}),u=Tk(u,i.exit_flow.reduction_block),u=Sn(go(u,i.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return iW(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return rW(e,this._numMainBlocks)},t}(di);function aW(n){var t=[],e=fi(n),r=e.extractWeights,i=e.getRemainingWeights,o=rg(r,t),s=o(512,1,"fc/age"),a=o(512,2,"fc/gender");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{fc:{age:s,gender:a}}}}function uW(n){var t=[],e=Zi(n,t);function r(o){var s=e(o+"/weights",2),a=e(o+"/bias",1);return{weights:s,bias:a}}var i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return hi(n,t),{params:i,paramMappings:t}}var R_=function(n){return n.FEMALE="female",n.MALE="male",n}(R_||{});var cW=function(n){Ke(t,n);function t(e){e===void 0&&(e=new sW(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=e,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var r=this,i=this.params;if(!i)throw new Error(this._name+" - load model before inference");return ke(function(){var o=e instanceof yf?r.faceFeatureExtractor.forwardInput(e):e,s=Wc(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),a=Bo(s,i.fc.age).as1D(),u=Bo(s,i.fc.gender);return{age:a,gender:u}})},t.prototype.forwardInput=function(e){var r=this;return ke(function(){var i=r.runNet(e),o=i.age,s=i.gender;return{age:o,gender:mo(s)}})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return Fe(this,void 0,void 0,function(){var r,i,o,s,a,u,c=this;return Le(this,function(d){switch(d.label){case 0:return[4,Pn(e)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return i=d.sent(),o=Dn(i.age),s=Dn(i.gender),a=o.map(function(h,p){return{ageTensor:h,genderTensor:s[p]}}),[4,Promise.all(a.map(function(h){var p=h.ageTensor,m=h.genderTensor;return Fe(c,void 0,void 0,function(){var _,C,x,S,N;return Le(this,function(F){switch(F.label){case 0:return[4,p.data()];case 1:return _=F.sent()[0],[4,m.data()];case 2:return C=F.sent()[0],x=C>.5,S=x?R_.MALE:R_.FEMALE,N=x?C:1-C,p.dispose(),m.dispose(),[2,{age:_,gender:S,genderProbability:N}]}})})}))];case 3:return u=d.sent(),i.age.dispose(),i.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(e){e===void 0&&(e=!0),this.faceFeatureExtractor.dispose(e),n.prototype.dispose.call(this,e)},t.prototype.loadClassifierParams=function(e){var r=this.extractClassifierParams(e),i=r.params,o=r.paramMappings;this._params=i,this._paramMappings=o},t.prototype.extractClassifierParams=function(e){return aW(e)},t.prototype.extractParamsFromWeigthMap=function(e){var r=Px(e),i=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(i),uW(o)},t.prototype.extractParams=function(e){var r=1539,i=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)},t}(di);var Rx=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.postProcess=function(e,r,i){var o=i.map(function(a){var u=a.width,c=a.height,d=r/Math.max(c,u);return{width:u*d,height:c*d}}),s=o.length;return ke(function(){var a=function(p,m){return Ti([ys([68],p),ys([68],m)],1).as2D(1,136).as1D()},u=function(p,m){var _=o[p],C=_.width,x=_.height;return m(C,x)?Math.abs(C-x)/2:0},c=function(p){return u(p,function(m,_){return m<_})},d=function(p){return u(p,function(m,_){return _<m})},h=e.mul(ys([s,136],r)).sub(Ti(Array.from(Array(s),function(p,m){return a(c(m),d(m))}))).div(Ti(Array.from(Array(s),function(p,m){return a(o[m].width,o[m].height)})));return h})},t.prototype.forwardInput=function(e){var r=this;return ke(function(){var i=r.runNet(e);return r.postProcess(i,e.inputSize,e.inputDimensions.map(function(o){var s=o[0],a=o[1];return{height:s,width:a}}))})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.detectLandmarks=function(e){return Fe(this,void 0,void 0,function(){var r,i,o,s=this;return Le(this,function(a){switch(a.label){case 0:return[4,Pn(e)];case 1:return r=a.sent(),i=ke(function(){return Dn(s.forwardInput(r))}),[4,Promise.all(i.map(function(u,c){return Fe(s,void 0,void 0,function(){var d,h,p,m,_;return Le(this,function(C){switch(C.label){case 0:return p=(h=Array).from,[4,u.data()];case 1:return d=p.apply(h,[C.sent()]),m=d.filter(function(x,S){return hk(S)}),_=d.filter(function(x,S){return!hk(S)}),[2,new bx(Array(68).fill(0).map(function(x,S){return new Wt(m[S],_[S])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(Mx);var Nx=function(n){Ke(t,n);function t(e){return e===void 0&&(e=new Dx),n.call(this,"FaceLandmark68Net",e)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Rx);function lW(n){var t=[],e=Ax(n,t).extractDenseBlock3Params,r={dense0:e("dense0",!0),dense1:e("dense1"),dense2:e("dense2")};return hi(n,t),{params:r,paramMappings:t}}function dW(n){var t=[],e=fi(n),r=e.extractWeights,i=e.getRemainingWeights,o=Sx(r,t).extractDenseBlock3Params,s=o(3,32,"dense0",!0),a=o(32,64,"dense1"),u=o(64,128,"dense2");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:t,params:{dense0:s,dense1:a,dense2:u}}}var hW=function(n){Ke(t,n);function t(){return n.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return ke(function(){var i=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],s=Lu(i,o).div(Ue(255)),a=Ix(s,r.dense0,!0);return a=Ix(a,r.dense1),a=Ix(a,r.dense2),a=Wc(a,[14,14],[2,2],"valid"),a})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return lW(e)},t.prototype.extractParams=function(e){return dW(e)},t}(di);var fW=function(n){Ke(t,n);function t(e){return e===void 0&&(e=new hW),n.call(this,"FaceLandmark68TinyNet",e)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Rx);var INe=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Nx);function pW(n,t){return gt(ur(n,t.weights),t.biases)}function Ak(n,t,e,r,i){i===void 0&&(i="same");var o=t.conv,s=o.filters,a=o.bias,u=li(n,s,e,i);return u=gt(u,a),u=pW(u,t.scale),r?Sn(u):u}function mW(n,t){return Ak(n,t,[1,1],!0)}function Dk(n,t){return Ak(n,t,[1,1],!1)}function Fx(n,t){return Ak(n,t,[2,2],!0,"valid")}function Jfe(n,t){function e(a,u,c){var d=n(a),h=d.length/(u*c*c);if(U8(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+d.length+", numFilters: "+u+", filterSize: "+c);return ke(function(){return Qs(Xr(d,[u,h,c,c]),[2,3,1,0])})}function r(a,u,c,d){var h=e(a,u,c),p=jn(n(u));return t.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:h,bias:p}}function i(a,u){var c=jn(n(a)),d=jn(n(a));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:d}}function o(a,u,c,d){var h=r(a,u,c,d+"/conv"),p=i(u,d+"/scale");return{conv:h,scale:p}}function s(a,u,c,d,h){h===void 0&&(h=!1);var p=o((h?.5:1)*a,u,c,d+"/conv1"),m=o(a,u,c,d+"/conv2");return{conv1:p,conv2:m}}return{extractConvLayerParams:o,extractResidualLayerParams:s}}function gW(n){var t=fi(n),e=t.extractWeights,r=t.getRemainingWeights,i=[],o=Jfe(e,i),s=o.extractConvLayerParams,a=o.extractResidualLayerParams,u=s(4704,32,7,"conv32_down"),c=a(9216,32,3,"conv32_1"),d=a(9216,32,3,"conv32_2"),h=a(9216,32,3,"conv32_3"),p=a(36864,64,3,"conv64_down",!0),m=a(36864,64,3,"conv64_1"),_=a(36864,64,3,"conv64_2"),C=a(36864,64,3,"conv64_3"),x=a(147456,128,3,"conv128_down",!0),S=a(147456,128,3,"conv128_1"),N=a(147456,128,3,"conv128_2"),F=a(589824,256,3,"conv256_down",!0),R=a(589824,256,3,"conv256_1"),j=a(589824,256,3,"conv256_2"),H=a(589824,256,3,"conv256_down_out"),B=ke(function(){return Qs(Ou(e(256*128),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:u,conv32_1:c,conv32_2:d,conv32_3:h,conv64_down:p,conv64_1:m,conv64_2:_,conv64_3:C,conv128_down:x,conv128_1:S,conv128_2:N,conv256_down:F,conv256_1:R,conv256_2:j,conv256_down_out:H,fc:B};return{params:k,paramMappings:i}}function epe(n,t){var e=Zi(n,t);function r(s){var a=e(s+"/scale/weights",1),u=e(s+"/scale/biases",1);return{weights:a,biases:u}}function i(s){var a=e(s+"/conv/filters",4),u=e(s+"/conv/bias",1),c=r(s);return{conv:{filters:a,bias:u},scale:c}}function o(s){return{conv1:i(s+"/conv1"),conv2:i(s+"/conv2")}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function vW(n){var t=[],e=epe(n,t),r=e.extractConvLayerParams,i=e.extractResidualLayerParams,o=r("conv32_down"),s=i("conv32_1"),a=i("conv32_2"),u=i("conv32_3"),c=i("conv64_down"),d=i("conv64_1"),h=i("conv64_2"),p=i("conv64_3"),m=i("conv128_down"),_=i("conv128_1"),C=i("conv128_2"),x=i("conv256_down"),S=i("conv256_1"),N=i("conv256_2"),F=i("conv256_down_out"),R=n.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!B8(R))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+R);var j={conv32_down:o,conv32_1:s,conv32_2:a,conv32_3:u,conv64_down:c,conv64_1:d,conv64_2:h,conv64_3:p,conv128_down:m,conv128_1:_,conv128_2:C,conv256_down:x,conv256_1:S,conv256_2:N,conv256_down_out:F,fc:R};return hi(n,t),{params:j,paramMappings:t}}function Ua(n,t){var e=mW(n,t.conv1);return e=Dk(e,t.conv2),e=gt(e,n),e=Sn(e),e}function N_(n,t){var e=Fx(n,t.conv1);e=Dk(e,t.conv2);var r=Wc(n,2,2,"valid"),i=Gn(r.shape),o=r.shape[3]!==e.shape[3],s=r.shape[1]!==e.shape[1]||r.shape[2]!==e.shape[2];if(s){var a=gf(e.shape);a[1]=1;var u=Gn(a);e=Xn([e,u],1);var c=gf(e.shape);c[2]=1;var d=Gn(c);e=Xn([e,d],2)}return r=o?Xn([r,i],3):r,e=gt(r,e),e=Sn(e),e}var Pk=function(n){Ke(t,n);function t(){return n.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return ke(function(){var i=e.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],s=Lu(i,o).div(Ue(256)),a=Fx(s,r.conv32_down);a=lr(a,3,2,"valid"),a=Ua(a,r.conv32_1),a=Ua(a,r.conv32_2),a=Ua(a,r.conv32_3),a=N_(a,r.conv64_down),a=Ua(a,r.conv64_1),a=Ua(a,r.conv64_2),a=Ua(a,r.conv64_3),a=N_(a,r.conv128_down),a=Ua(a,r.conv128_1),a=Ua(a,r.conv128_2),a=N_(a,r.conv256_down),a=Ua(a,r.conv256_1),a=Ua(a,r.conv256_2),a=N_(a,r.conv256_down_out);var u=a.mean([1,2]),c=Zm(u,r.fc);return c})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return Fe(this,void 0,void 0,function(){var r,i,o,s=this;return Le(this,function(a){switch(a.label){case 0:return[4,Pn(e)];case 1:return r=a.sent(),i=ke(function(){return Dn(s.forwardInput(r))}),[4,Promise.all(i.map(function(u){return u.data()}))];case 2:return o=a.sent(),i.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return vW(e)},t.prototype.extractParams=function(e){return gW(e)},t}(di);function Mk(n,t){var e={descriptor:t};return Object.assign({},n,e)}function kk(n,t){var e={age:t};return Object.assign({},n,e)}function Ok(n,t,e){var r={gender:t,genderProbability:e};return Object.assign({},n,r)}var F_=function(){function n(t){var e=t===void 0?{}:t,r=e.minFaceSize,i=e.scaleFactor,o=e.maxNumScales,s=e.scoreThresholds,a=e.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=s||[.6,.7,.7],this._scaleSteps=a,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n}();function tpe(n,t){function e(u,c){var d=Xr(n(9*u),[3,3,u,1]),h=jn(n(u)),p=jn(n(u)),m=jn(n(u)),_=jn(n(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:d,batch_norm_scale:h,batch_norm_offset:p,batch_norm_mean:m,batch_norm_variance:_}}function r(u,c,d,h,p){var m=Xr(n(u*c*d*d),[d,d,u,c]),_=jn(n(c));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(p?"batch_norm_offset":"bias")}),{filters:m,bias:_}}function i(u,c,d,h){var p=r(u,c,d,h,!0),m=p.filters,_=p.bias;return{filters:m,batch_norm_offset:_}}function o(u,c,d){var h=e(u,d+"/depthwise_conv"),p=i(u,c,1,d+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:p}}function s(){var u=i(3,32,3,"mobilenetv1/conv_0"),c=o(32,64,"mobilenetv1/conv_1"),d=o(64,128,"mobilenetv1/conv_2"),h=o(128,128,"mobilenetv1/conv_3"),p=o(128,256,"mobilenetv1/conv_4"),m=o(256,256,"mobilenetv1/conv_5"),_=o(256,512,"mobilenetv1/conv_6"),C=o(512,512,"mobilenetv1/conv_7"),x=o(512,512,"mobilenetv1/conv_8"),S=o(512,512,"mobilenetv1/conv_9"),N=o(512,512,"mobilenetv1/conv_10"),F=o(512,512,"mobilenetv1/conv_11"),R=o(512,1024,"mobilenetv1/conv_12"),j=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:c,conv_2:d,conv_3:h,conv_4:p,conv_5:m,conv_6:_,conv_7:C,conv_8:x,conv_9:S,conv_10:N,conv_11:F,conv_12:R,conv_13:j}}function a(){var u=i(1024,256,1,"prediction_layer/conv_0"),c=i(256,512,3,"prediction_layer/conv_1"),d=i(512,128,1,"prediction_layer/conv_2"),h=i(128,256,3,"prediction_layer/conv_3"),p=i(256,128,1,"prediction_layer/conv_4"),m=i(128,256,3,"prediction_layer/conv_5"),_=i(256,64,1,"prediction_layer/conv_6"),C=i(64,128,3,"prediction_layer/conv_7"),x=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),S=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),N=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),F=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),R=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),j=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),H=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),B=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),D=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),P=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),z=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),U={box_encoding_predictor:x,class_predictor:S},$={box_encoding_predictor:N,class_predictor:F},ae={box_encoding_predictor:R,class_predictor:j},de={box_encoding_predictor:H,class_predictor:B},X={box_encoding_predictor:k,class_predictor:D},re={box_encoding_predictor:P,class_predictor:z};return{conv_0:u,conv_1:c,conv_2:d,conv_3:h,conv_4:p,conv_5:m,conv_6:_,conv_7:C,box_predictor_0:U,box_predictor_1:$,box_predictor_2:ae,box_predictor_3:de,box_predictor_4:X,box_predictor_5:re}}return{extractMobilenetV1Params:s,extractPredictionLayerParams:a}}function _W(n){var t=[],e=fi(n),r=e.extractWeights,i=e.getRemainingWeights,o=tpe(r,t),s=o.extractMobilenetV1Params,a=o.extractPredictionLayerParams,u=s(),c=a(),d=sx(r(5118*4),[1,5118,4]),h={extra_dim:d};if(t.push({paramPath:"output_layer/extra_dim"}),i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:h},paramMappings:t}}function npe(n,t){var e=Zi(n,t);function r(c,d,h){var p=e(c+"/Conv2d_"+d+"_pointwise/weights",4,h+"/filters"),m=e(c+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:p,batch_norm_offset:m}}function i(c){var d="mobilenetv1/conv_"+c,h="MobilenetV1/Conv2d_"+c+"_depthwise",p=d+"/depthwise_conv",m=d+"/pointwise_conv",_=e(h+"/depthwise_weights",4,p+"/filters"),C=e(h+"/BatchNorm/gamma",1,p+"/batch_norm_scale"),x=e(h+"/BatchNorm/beta",1,p+"/batch_norm_offset"),S=e(h+"/BatchNorm/moving_mean",1,p+"/batch_norm_mean"),N=e(h+"/BatchNorm/moving_variance",1,p+"/batch_norm_variance");return{depthwise_conv:{filters:_,batch_norm_scale:C,batch_norm_offset:x,batch_norm_mean:S,batch_norm_variance:N},pointwise_conv:r("MobilenetV1",c,m)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}}function s(c,d){var h=e(c+"/weights",4,d+"/filters"),p=e(c+"/biases",1,d+"/bias");return{filters:h,bias:p}}function a(c){var d=s("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),h=s("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:d,class_predictor:h}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:u}}function yW(n){var t=[],e=npe(n,t),r=e.extractMobilenetV1Params,i=e.extractPredictionLayerParams,o=n["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!dd(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var s={mobilenetv1:r(),prediction_layer:i(),output_layer:{extra_dim:o}};return hi(n,t),{params:s,paramMappings:t}}function Js(n,t,e){return ke(function(){var r=li(n,t.filters,e,"same");return r=gt(r,t.batch_norm_offset),y_(r,0,6)})}var rpe=.0010000000474974513;function ipe(n,t,e){return ke(function(){var r=C_(n,t.filters,e,"same");return r=ZM(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,rpe),y_(r,0,6)})}function ope(n){return[2,4,6,12].some(function(t){return t===n})?[2,2]:[1,1]}function bW(n,t){return ke(function(){var e=null,r=Js(n,t.conv_0,[2,2]),i=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(i.forEach(function(o,s){var a=s+1,u=ope(a);r=ipe(r,o.depthwise_conv,u),r=Js(r,o.pointwise_conv,[1,1]),a===11&&(e=r)}),e===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:e}})}function wW(n,t,e,r,i){var o=n.shape[0],s=Math.min(e,o),a=t.map(function(d,h){return{score:d,boxIndex:h}}).filter(function(d){return d.score>i}).sort(function(d,h){return h.score-d.score}),u=function(d){return d<=r?1:0},c=[];return a.forEach(function(d){if(!(c.length>=s)){for(var h=d.score,p=c.length-1;p>=0;--p){var m=spe(n,d.boxIndex,c[p]);if(m!==0&&(d.score*=u(m),d.score<=i))break}h===d.score&&c.push(d.boxIndex)}}),c}function spe(n,t,e){var r=n.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),s=Math.max(r[t][0],r[t][2]),a=Math.max(r[t][1],r[t][3]),u=Math.min(r[e][0],r[e][2]),c=Math.min(r[e][1],r[e][3]),d=Math.max(r[e][0],r[e][2]),h=Math.max(r[e][1],r[e][3]),p=(s-i)*(a-o),m=(d-u)*(h-c);if(p<=0||m<=0)return 0;var _=Math.max(i,u),C=Math.max(o,c),x=Math.min(s,d),S=Math.min(a,h),N=Math.max(x-_,0)*Math.max(S-C,0);return N/(p+m-N)}function ape(n){var t=Dn(Qs(n,[1,0])),e=[Fn(t[2],t[0]),Fn(t[3],t[1])],r=[gt(t[0],Zs(e[0],Ue(2))),gt(t[1],Zs(e[1],Ue(2)))];return{sizes:e,centers:r}}function upe(n,t){var e=ape(n),r=e.sizes,i=e.centers,o=Dn(Qs(t,[1,0])),s=Zs(ur(dx(Zs(o[2],Ue(5))),r[0]),Ue(2)),a=gt(ur(Zs(o[0],Ue(10)),r[0]),i[0]),u=Zs(ur(dx(Zs(o[3],Ue(5))),r[1]),Ue(2)),c=gt(ur(Zs(o[1],Ue(10)),r[1]),i[1]);return Qs(Ti([Fn(a,s),Fn(c,u),gt(a,s),gt(c,u)]),[1,0])}function CW(n,t,e){return ke(function(){var r=n.shape[0],i=upe(po(af(e.extra_dim,[r,1,1]),[-1,4]),po(n,[-1,4]));i=po(i,[r,i.shape[0]/r,4]);var o=YM(Ra(t,[0,0,1],[-1,-1,-1])),s=Ra(o,[0,0,0],[-1,-1,1]);s=po(s,[r,s.shape[1]]);var a=Dn(i),u=Dn(s);return{boxes:a,scores:u}})}function bf(n,t){return ke(function(){var e=n.shape[0],r=po(Yi(n,t.box_encoding_predictor),[e,-1,1,4]),i=po(Yi(n,t.class_predictor),[e,-1,3]);return{boxPredictionEncoding:r,classPrediction:i}})}function xW(n,t,e){return ke(function(){var r=Js(n,e.conv_0,[1,1]),i=Js(r,e.conv_1,[2,2]),o=Js(i,e.conv_2,[1,1]),s=Js(o,e.conv_3,[2,2]),a=Js(s,e.conv_4,[1,1]),u=Js(a,e.conv_5,[2,2]),c=Js(u,e.conv_6,[1,1]),d=Js(c,e.conv_7,[2,2]),h=bf(t,e.box_predictor_0),p=bf(n,e.box_predictor_1),m=bf(i,e.box_predictor_2),_=bf(s,e.box_predictor_3),C=bf(u,e.box_predictor_4),x=bf(d,e.box_predictor_5),S=Xn([h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,_.boxPredictionEncoding,C.boxPredictionEncoding,x.boxPredictionEncoding],1),N=Xn([h.classPrediction,p.classPrediction,m.classPrediction,_.classPrediction,C.classPrediction,x.classPrediction],1);return{boxPredictions:S,classPredictions:N}})}var pd=function(){function n(t){var e=t===void 0?{}:t,r=e.minConfidence,i=e.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=i||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n}();var Lx=function(n){Ke(t,n);function t(){return n.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(e){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return ke(function(){var i=e.toBatchTensor(512,!1).toFloat(),o=Fn(ur(i,Ue(.007843137718737125)),Ue(1)),s=bW(o,r.mobilenetv1),a=xW(s.out,s.conv11,r.prediction_layer),u=a.boxPredictions,c=a.classPredictions;return CW(u,c,r.output_layer)})},t.prototype.forward=function(e){return Fe(this,void 0,void 0,function(){var r;return Le(this,function(i){switch(i.label){case 0:return r=this.forwardInput,[4,Pn(e)];case 1:return[2,r.apply(this,[i.sent()])]}})})},t.prototype.locateFaces=function(e,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R,j,H,B,k;return Le(this,function(D){switch(D.label){case 0:return i=new pd(r),o=i.maxResults,s=i.minConfidence,[4,Pn(e)];case 1:for(a=D.sent(),u=this.forwardInput(a),c=u.boxes,d=u.scores,h=c[0],p=d[0],m=1;m<c.length;m++)c[m].dispose(),d[m].dispose();return x=(C=Array).from,[4,p.data()];case 2:return _=x.apply(C,[D.sent()]),S=.5,N=wW(h,_,o,S,s),F=a.getReshapedInputDimensions(0),R=a.inputSize,j=R/F.width,H=R/F.height,B=h.arraySync(),k=N.map(function(P){var z=[Math.max(0,B[P][0]),Math.min(1,B[P][2])].map(function(re){return re*H}),U=z[0],$=z[1],ae=[Math.max(0,B[P][1]),Math.min(1,B[P][3])].map(function(re){return re*j}),de=ae[0],X=ae[1];return new Pr(_[P],new Jm(de,U,X-de,$-U),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),h.dispose(),p.dispose(),[2,k]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return yW(e)},t.prototype.extractParams=function(e){return _W(e)},t}(di);var W3e=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t}(Lx);var EW=.4,IW=[new Wt(.738768,.874946),new Wt(2.42204,2.65704),new Wt(4.30971,7.04493),new Wt(10.246,4.59428),new Wt(12.6868,11.8741)],SW=[new Wt(1.603231,2.094468),new Wt(6.041143,7.080126),new Wt(2.882459,3.518061),new Wt(4.266906,5.178857),new Wt(9.041765,10.66308)],TW=[117.001,114.697,97.404],AW="tiny_yolov2_model",DW="tiny_yolov2_separable_conv_model";var Vx=function(n){return typeof n=="number"};function PW(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!Vx(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(t){return t||{}}).every(function(t){return Vx(t.x)&&Vx(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every(Vx)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function ag(n){return ke(function(){var t=ur(n,Ue(.10000000149011612));return gt(Sn(Fn(n,t)),t)})}function Kc(n,t){return ke(function(){var e=zc(n,[[0,0],[1,1],[1,1],[0,0]]);return e=li(e,t.conv.filters,[1,1],"valid"),e=Fn(e,t.bn.sub),e=ur(e,t.bn.truediv),e=gt(e,t.conv.bias),ag(e)})}function Yc(n,t){return ke(function(){var e=zc(n,[[0,0],[1,1],[1,1],[0,0]]);return e=x_(e,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),e=gt(e,t.bias),ag(e)})}function cpe(n,t){var e=fd(n,t);function r(s,a){var u=jn(n(s)),c=jn(n(s));return t.push({paramPath:a+"/sub"},{paramPath:a+"/truediv"}),{sub:u,truediv:c}}function i(s,a,u){var c=e(s,a,3,u+"/conv"),d=r(a,u+"/bn");return{conv:c,bn:d}}var o=ig(n,t);return{extractConvParams:e,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function MW(n,t,e,r){var i=fi(n),o=i.extractWeights,s=i.getRemainingWeights,a=[],u=cpe(o,a),c=u.extractConvParams,d=u.extractConvWithBatchNormParams,h=u.extractSeparableConvParams,p;if(t.withSeparableConvs){var m=r[0],_=r[1],C=r[2],x=r[3],S=r[4],N=r[5],F=r[6],R=r[7],j=r[8],H=t.isFirstLayerConv2d?c(m,_,3,"conv0"):h(m,_,"conv0"),B=h(_,C,"conv1"),k=h(C,x,"conv2"),D=h(x,S,"conv3"),P=h(S,N,"conv4"),z=h(N,F,"conv5"),U=R?h(F,R,"conv6"):void 0,$=j?h(R,j,"conv7"):void 0,ae=c(j||R||F,5*e,1,"conv8");p={conv0:H,conv1:B,conv2:k,conv3:D,conv4:P,conv5:z,conv6:U,conv7:$,conv8:ae}}else{var m=r[0],_=r[1],C=r[2],x=r[3],S=r[4],N=r[5],F=r[6],R=r[7],j=r[8],H=d(m,_,"conv0"),B=d(_,C,"conv1"),k=d(C,x,"conv2"),D=d(x,S,"conv3"),P=d(S,N,"conv4"),z=d(N,F,"conv5"),U=d(F,R,"conv6"),$=d(R,j,"conv7"),ae=c(j,5*e,1,"conv8");p={conv0:H,conv1:B,conv2:k,conv3:D,conv4:P,conv5:z,conv6:U,conv7:$,conv8:ae}}if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:p,paramMappings:a}}function lpe(n,t){var e=Zi(n,t);function r(a){var u=e(a+"/sub",1),c=e(a+"/truediv",1);return{sub:u,truediv:c}}function i(a){var u=e(a+"/filters",4),c=e(a+"/bias",1);return{filters:u,bias:c}}function o(a){var u=i(a+"/conv"),c=r(a+"/bn");return{conv:u,bn:c}}var s=og(e);return{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:s}}function kW(n,t){var e=[],r=lpe(n,e),i=r.extractConvParams,o=r.extractConvWithBatchNormParams,s=r.extractSeparableConvParams,a;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;a={conv0:t.isFirstLayerConv2d?i("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:i("conv8")}}else a={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return hi(n,e),{params:a,paramMappings:e}}var wf=function(){function n(t){var e=t===void 0?{}:t,r=e.inputSize,i=e.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=i||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n}();var Bx=function(n){Ke(t,n);function t(e){var r=n.call(this,"TinyYolov2")||this;return PW(e),r._config=e,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,r){var i=Kc(e,r.conv0);return i=lr(i,[2,2],[2,2],"same"),i=Kc(i,r.conv1),i=lr(i,[2,2],[2,2],"same"),i=Kc(i,r.conv2),i=lr(i,[2,2],[2,2],"same"),i=Kc(i,r.conv3),i=lr(i,[2,2],[2,2],"same"),i=Kc(i,r.conv4),i=lr(i,[2,2],[2,2],"same"),i=Kc(i,r.conv5),i=lr(i,[2,2],[1,1],"same"),i=Kc(i,r.conv6),i=Kc(i,r.conv7),Yi(i,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,r){var i=this.config.isFirstLayerConv2d?ag(Yi(e,r.conv0,"valid",!1)):Yc(e,r.conv0);return i=lr(i,[2,2],[2,2],"same"),i=Yc(i,r.conv1),i=lr(i,[2,2],[2,2],"same"),i=Yc(i,r.conv2),i=lr(i,[2,2],[2,2],"same"),i=Yc(i,r.conv3),i=lr(i,[2,2],[2,2],"same"),i=Yc(i,r.conv4),i=lr(i,[2,2],[2,2],"same"),i=Yc(i,r.conv5),i=lr(i,[2,2],[1,1],"same"),i=r.conv6?Yc(i,r.conv6):i,i=r.conv7?Yc(i,r.conv7):i,Yi(i,r.conv8,"valid",!1)},t.prototype.forwardInput=function(e,r){var i=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return ke(function(){var s=e.toBatchTensor(r,!1).toFloat();return s=i.config.meanRgb?Lu(s,i.config.meanRgb):s,s=s.div(Ue(256)),i.config.withSeparableConvs?i.runMobilenet(s,o):i.runTinyYolov2(s,o)})},t.prototype.forward=function(e,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Pn(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},t.prototype.detect=function(e,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,u,c,d,h,p,m,_,C,x,S,N=this;return Le(this,function(F){switch(F.label){case 0:return i=new wf(r),o=i.inputSize,s=i.scoreThreshold,[4,Pn(e)];case 1:return a=F.sent(),[4,this.forwardInput(a,o)];case 2:return u=F.sent(),c=ke(function(){return Dn(u)[0].expandDims()}),d={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(c,a.getReshapedInputDimensions(0),s)];case 3:return h=F.sent(),u.dispose(),c.dispose(),p=h.map(function(R){return R.box}),m=h.map(function(R){return R.score}),_=h.map(function(R){return R.classScore}),C=h.map(function(R){return N.config.classes[R.label]}),x=qc(p.map(function(R){return R.rescale(o)}),m,this.config.iouThreshold,!0),S=x.map(function(R){return new _x(m[R],_[R],C[R],p[R],d)}),[2,S]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return kW(e,this.config)},t.prototype.extractParams=function(e){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,i=r?r.length:void 0;if(i!==7&&i!==8&&i!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+i+" filterSizes in config");return MW(e,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(e,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R,j,H,B,k,D,P,z,U,$,ae,de,X,re,J=this;return Le(this,function(ie){switch(ie.label){case 0:return o=r.width,s=r.height,a=Math.max(o,s),u=a/o,c=a/s,d=e.shape[1],h=this.config.anchors.length,p=ke(function(){var le=e.reshape([d,d,h,J.boxEncodingSize]),Ee=le.slice([0,0,0,0],[d,d,h,4]),ye=le.slice([0,0,0,4],[d,d,h,1]),we=J.withClassScores?mo(le.slice([0,0,0,5],[d,d,h,J.config.classes.length]),3):Ue(0);return[Ee,ye,we]}),m=p[0],_=p[1],C=p[2],x=[],[4,_.array()];case 1:return S=ie.sent(),[4,m.array()];case 2:N=ie.sent(),F=0,ie.label=3;case 3:if(!(F<d))return[3,12];R=0,ie.label=4;case 4:if(!(R<d))return[3,11];j=0,ie.label=5;case 5:return j<h?(H=yx(S[F][R][j][0]),!i||H>i?(B=(R+yx(N[F][R][j][0]))/d*u,k=(F+yx(N[F][R][j][1]))/d*c,D=Math.exp(N[F][R][j][2])*this.config.anchors[j].x/d*u,P=Math.exp(N[F][R][j][3])*this.config.anchors[j].y/d*c,z=B-D/2,U=k-P/2,$={row:F,col:R,anchor:j},this.withClassScores?[4,this.extractPredictedClass(C,$)]:[3,7]):[3,9]):[3,10];case 6:return re=ie.sent(),[3,8];case 7:re={classScore:1,label:0},ie.label=8;case 8:ae=re,de=ae.classScore,X=ae.label,x.push(Wr({box:new vf(z,U,z+D,U+P),score:H,classScore:H*de,label:X},$)),ie.label=9;case 9:return j++,[3,5];case 10:return R++,[3,4];case 11:return F++,[3,3];case 12:return m.dispose(),_.dispose(),C.dispose(),[2,x]}})})},t.prototype.extractPredictedClass=function(e,r){return Fe(this,void 0,void 0,function(){var i,o,s,a;return Le(this,function(u){switch(u.label){case 0:return i=r.row,o=r.col,s=r.anchor,[4,e.array()];case 1:return a=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,d){return a[i][o][s][d]}).map(function(c,d){return{classScore:c,label:d}}).reduce(function(c,d){return c.classScore>d.classScore?c:d})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(di);var Rk=function(n){Ke(t,n);function t(e){e===void 0&&(e=!0);var r=this,i=Object.assign({},{withSeparableConvs:e,iouThreshold:EW,classes:["face"]},e?{anchors:SW,meanRgb:TW}:{anchors:IW,withClassScores:!0});return r=n.call(this,i)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new Pr(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?DW:AW},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t}(Bx);var Ux=function(n){Ke(t,n);function t(){var e=n!==null&&n.apply(this,arguments)||this;return e._name="TinyFaceDetectorOptions",e}return t}(wf);var Vu=function(){function n(){}return n.prototype.then=function(t){return Fe(this,void 0,void 0,function(){var e;return Le(this,function(r){switch(r.label){case 0:return e=t,[4,this.run()];case 1:return[2,e.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Fe(this,void 0,void 0,function(){return Le(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},n}();function Cf(n,t,e,r,i){return i===void 0&&(i=function(o){var s=o.alignedRect;return s}),Fe(this,void 0,void 0,function(){var o,s,a,u,c;return Le(this,function(d){switch(d.label){case 0:return o=n.map(function(h){return Ox(h)?i(h):h.detection}),a=r,a?[3,5]:t instanceof Nn?[4,k_(t,o)]:[3,2];case 1:return u=d.sent(),[3,4];case 2:return[4,M_(t,o)];case 3:u=d.sent(),d.label=4;case 4:a=u,d.label=5;case 5:return s=a,[4,e(s)];case 6:return c=d.sent(),s.forEach(function(h){return h instanceof Nn&&h.dispose()}),[2,c]}})})}function ug(n,t,e,r,i){return Fe(this,void 0,void 0,function(){var o=this;return Le(this,function(s){return[2,Cf([n],t,function(a){return Fe(o,void 0,void 0,function(){return Le(this,function(u){return[2,e(a[0])]})})},r,i)]})})}function OW(n){return ke(function(){return Ti(Dn(n,3).reverse(),3)})}var L_=2,xf=12;function dpe(n,t){var e=fd(n,t),r=rg(n,t);function i(c,d){var h=jn(n(c));return t.push({paramPath:d}),h}function o(c,d,h){h===void 0&&(h=!1);var p=e(c[0],c[1],3,d+"/conv1"),m=i(c[1],d+"/prelu1_alpha"),_=e(c[1],c[2],3,d+"/conv2"),C=i(c[2],d+"/prelu2_alpha"),x=e(c[2],c[3],h?2:3,d+"/conv3"),S=i(c[3],d+"/prelu3_alpha");return{conv1:p,prelu1_alpha:m,conv2:_,prelu2_alpha:C,conv3:x,prelu3_alpha:S}}function s(){var c=o([3,10,16,32],"pnet"),d=e(32,2,1,"pnet/conv4_1"),h=e(32,4,1,"pnet/conv4_2");return Wr(Wr({},c),{conv4_1:d,conv4_2:h})}function a(){var c=o([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),h=i(128,"rnet/prelu4_alpha"),p=r(128,2,"rnet/fc2_1"),m=r(128,4,"rnet/fc2_2");return Wr(Wr({},c),{fc1:d,prelu4_alpha:h,fc2_1:p,fc2_2:m})}function u(){var c=o([3,32,64,64],"onet"),d=e(64,128,2,"onet/conv4"),h=i(128,"onet/prelu4_alpha"),p=r(1152,256,"onet/fc1"),m=i(256,"onet/prelu5_alpha"),_=r(256,2,"onet/fc2_1"),C=r(256,4,"onet/fc2_2"),x=r(256,10,"onet/fc2_3");return Wr(Wr({},c),{conv4:d,prelu4_alpha:h,fc1:p,prelu5_alpha:m,fc2_1:_,fc2_2:C,fc2_3:x})}return{extractPNetParams:s,extractRNetParams:a,extractONetParams:u}}function RW(n){var t=fi(n),e=t.extractWeights,r=t.getRemainingWeights,i=[],o=dpe(e,i),s=o.extractPNetParams,a=o.extractRNetParams,u=o.extractONetParams,c=s(),d=a(),h=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:d,onet:h},paramMappings:i}}function hpe(n,t){var e=Zi(n,t);function r(d){var h=e(d+"/weights",4,d+"/filters"),p=e(d+"/bias",1);return{filters:h,bias:p}}function i(d){var h=e(d+"/weights",2),p=e(d+"/bias",1);return{weights:h,bias:p}}function o(d){return e(d,1)}function s(d){var h=r(d+"/conv1"),p=o(d+"/prelu1_alpha"),m=r(d+"/conv2"),_=o(d+"/prelu2_alpha"),C=r(d+"/conv3"),x=o(d+"/prelu3_alpha");return{conv1:h,prelu1_alpha:p,conv2:m,prelu2_alpha:_,conv3:C,prelu3_alpha:x}}function a(){var d=s("pnet"),h=r("pnet/conv4_1"),p=r("pnet/conv4_2");return Wr(Wr({},d),{conv4_1:h,conv4_2:p})}function u(){var d=s("rnet"),h=i("rnet/fc1"),p=o("rnet/prelu4_alpha"),m=i("rnet/fc2_1"),_=i("rnet/fc2_2");return Wr(Wr({},d),{fc1:h,prelu4_alpha:p,fc2_1:m,fc2_2:_})}function c(){var d=s("onet"),h=r("onet/conv4"),p=o("onet/prelu4_alpha"),m=i("onet/fc1"),_=o("onet/prelu5_alpha"),C=i("onet/fc2_1"),x=i("onet/fc2_2"),S=i("onet/fc2_3");return Wr(Wr({},d),{conv4:h,prelu4_alpha:p,fc1:m,prelu5_alpha:_,fc2_1:C,fc2_2:x,fc2_3:S})}return{extractPNetParams:a,extractRNetParams:u,extractONetParams:c}}function NW(n){var t=[],e=hpe(n,t),r=e.extractPNetParams,i=e.extractRNetParams,o=e.extractONetParams,s=r(),a=i(),u=o();return hi(n,t),{params:{pnet:s,rnet:a,onet:u},paramMappings:t}}function V_(n,t){var e=t[0],r=t[1];return{height:Math.floor(e*n),width:Math.floor(r*n)}}function FW(n,t,e){for(var r=e[0],i=e[1],o=xf/n,s=[],a=Math.min(r,i)*o,u=0;a>=12;)s.push(o*Math.pow(t,u)),a=a*t,u+=1;return s}var cg=function(n){Ke(t,n);function t(e,r,i,o){return n.call(this,{left:e,top:r,right:i,bottom:o},!0)||this}return t}(Ai);function jx(n){return ke(function(){return ur(Fn(n,Ue(127.5)),Ue(.0078125))})}function Zc(n,t){return ke(function(){return gt(Sn(n),ur(t,b_(Sn(b_(n)))))})}function lg(n,t,e){return e===void 0&&(e=!1),ke(function(){var r=Yi(n,t.conv1,"valid");return r=Zc(r,t.prelu1_alpha),r=lr(r,e?[2,2]:[3,3],[2,2],"same"),r=Yi(r,t.conv2,"valid"),r=Zc(r,t.prelu2_alpha),r=e?r:lr(r,[3,3],[2,2],"valid"),r=Yi(r,t.conv3,"valid"),r=Zc(r,t.prelu3_alpha),r})}function LW(n,t){return ke(function(){var e=lg(n,t,!0),r=Yi(e,t.conv4_1,"valid"),i=qi(pf(r,3),3),o=mo(Fn(r,i),3),s=Yi(e,t.conv4_2,"valid");return{prob:o,regions:s}})}function fpe(n,t){return ke(function(){var e=V_(t,n.shape.slice(1)),r=e.height,i=e.width,o=I_.resizeBilinear(n,[r,i]),s=jx(o);return Qs(s,[0,2,1,3])})}function ppe(n,t,e,r){for(var i=[],o=n.arraySync(),s=0;s<n.shape[0];s++)for(var a=0;a<n.shape[1];a++)o[s][a]>=r&&i.push(new Wt(a,s));var u=i.map(function(c){var d=new vf(Math.round((c.y*L_+1)/e),Math.round((c.x*L_+1)/e),Math.round((c.y*L_+xf)/e),Math.round((c.x*L_+xf)/e)),h=o[c.y][c.x],p=t.arraySync(),m=new cg(p[c.y][c.x][0],p[c.y][c.x][1],p[c.y][c.x][2],p[c.y][c.x][3]);return{cell:d,score:h,region:m}});return u}function VW(n,t,e,r,i){i.stage1=[];var o=t.map(function(p){return ke(function(){var m={scale:p},_=fpe(n,p),C=Date.now(),x=LW(_,r),S=x.prob,N=x.regions;m.pnet=Date.now()-C;var F=Dn(Dn(S,3)[1])[0],R=Dn(N)[0];return{scoresTensor:F,regionsTensor:R,scale:p,statsForScale:m}})}),s=o.map(function(p){var m=p.scoresTensor,_=p.regionsTensor,C=p.scale,x=p.statsForScale,S=ppe(m,_,C,e);if(m.dispose(),_.dispose(),!S.length)return i.stage1.push(x),[];var N=Date.now(),F=qc(S.map(function(R){return R.cell}),S.map(function(R){return R.score}),.5);return x.nms=Date.now()-N,x.numBoxes=F.length,i.stage1.push(x),F.map(function(R){return S[R]})}),a=s.reduce(function(p,m){return p.concat(m)},[]),u=[],c=[];if(a.length>0){var d=Date.now(),h=qc(a.map(function(p){return p.cell}),a.map(function(p){return p.score}),.7);i.stage1_nms=Date.now()-d,c=h.map(function(p){return a[p].score}),u=h.map(function(p){return a[p]}).map(function(p){var m=p.cell,_=p.region;return new vf(m.left+_.left*m.width,m.top+_.top*m.height,m.right+_.right*m.width,m.bottom+_.bottom*m.height).toSquare().round()})}return{boxes:u,scores:c}}function zx(n,t,e){var r=e.width,i=e.height;return Fe(this,void 0,void 0,function(){var o,s,a,u=this;return Le(this,function(c){switch(c.label){case 0:return o=Di(n),[4,Promise.all(t.map(function(d){return Fe(u,void 0,void 0,function(){var h,p,m,_,C,x,S,N;return Le(this,function(F){return h=d.padAtBorders(n.height,n.width),p=h.y,m=h.ey,_=h.x,C=h.ex,x=_-1,S=p-1,N=o.getImageData(x,S,C-x,m-S),[2,En.isNodejs()?ng(N):createImageBitmap(N)]})})}))];case 1:return s=c.sent(),a=[],s.forEach(function(d){var h=_f({width:r,height:i}),p=Di(h);p.drawImage(d,0,0,r,i);for(var m=p.getImageData(0,0,r,i).data,_=[],C=0;C<m.length;C+=4)_.push(m[C+2]),_.push(m[C+1]),_.push(m[C]);a.push(_)}),[2,a.map(function(d){var h=ke(function(){var p=Qs(Xr(d,[1,r,i,3]),[0,2,1,3]).toFloat();return jx(p)});return h})]}})})}function BW(n,t){return ke(function(){var e=lg(n,t),r=po(e,[e.shape[0],t.fc1.weights.shape[0]]),i=Bo(r,t.fc1),o=Zc(i,t.prelu4_alpha),s=Bo(o,t.fc2_1),a=qi(pf(s,1),1),u=mo(Fn(s,a),1),c=Bo(o,t.fc2_2),d=Dn(u,1)[1];return{scores:d,regions:c}})}function UW(n,t,e,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,u,c,d,h,p,m,_,C,x,S,N;return Le(this,function(F){switch(F.label){case 0:return o=Date.now(),[4,zx(n,t,{width:24,height:24})];case 1:return s=F.sent(),i.stage2_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(R){var j=BW(R,r);return R.dispose(),j}),i.stage2_rnet=Date.now()-o,u=a.length>1?Xn(a.map(function(R){return R.scores})):a[0].scores,h=(d=Array).from,[4,u.data()];case 2:return c=h.apply(d,[F.sent()]),u.dispose(),p=c.map(function(R,j){return{score:R,idx:j}}).filter(function(R){return R.score>e}).map(function(R){var j=R.idx;return j}),m=p.map(function(R){return t[R]}),_=p.map(function(R){return c[R]}),C=[],x=[],m.length>0&&(o=Date.now(),S=qc(m,_,.7),i.stage2_nms=Date.now()-o,N=S.map(function(R){var j=a[p[R]].regions.arraySync();return new cg(j[0][0],j[0][1],j[0][2],j[0][3])}),x=S.map(function(R){return _[R]}),C=S.map(function(R,j){return m[R].calibrate(N[j])})),a.forEach(function(R){R.regions.dispose(),R.scores.dispose()}),[2,{boxes:C,scores:x}]}})})}function jW(n,t){return ke(function(){var e=lg(n,t);e=lr(e,[2,2],[2,2],"same"),e=Yi(e,t.conv4,"valid"),e=Zc(e,t.prelu4_alpha);var r=po(e,[e.shape[0],t.fc1.weights.shape[0]]),i=Bo(r,t.fc1),o=Zc(i,t.prelu5_alpha),s=Bo(o,t.fc2_1),a=qi(pf(s,1),1),u=mo(Fn(s,a),1),c=Bo(o,t.fc2_2),d=Bo(o,t.fc2_3),h=Dn(u,1)[1];return{scores:h,regions:c,points:d}})}function zW(n,t,e,r,i){return Fe(this,void 0,void 0,function(){var o,s,a,u,c,d,h,p,m,_,C,x,S,N,F;return Le(this,function(R){switch(R.label){case 0:return o=Date.now(),[4,zx(n,t,{width:48,height:48})];case 1:return s=R.sent(),i.stage3_extractImagePatches=Date.now()-o,o=Date.now(),a=s.map(function(j){var H=jW(j,r);return j.dispose(),H}),i.stage3_onet=Date.now()-o,u=a.length>1?Xn(a.map(function(j){return j.scores})):a[0].scores,h=(d=Array).from,[4,u.data()];case 2:return c=h.apply(d,[R.sent()]),u.dispose(),p=c.map(function(j,H){return{score:j,idx:H}}).filter(function(j){return j.score>e}).map(function(j){var H=j.idx;return H}),m=p.map(function(j){var H=a[j].regions.arraySync();return new cg(H[0][0],H[0][1],H[0][2],H[0][3])}),_=p.map(function(j,H){return t[j].calibrate(m[H])}),C=p.map(function(j){return c[j]}),x=[],S=[],N=[],_.length>0&&(o=Date.now(),F=qc(_,C,.7,!1),i.stage3_nms=Date.now()-o,x=F.map(function(j){return _[j]}),S=F.map(function(j){return C[j]}),N=F.map(function(j,H){return Array(5).fill(0).map(function(B,k){var D=a[j].points.arraySync();return new Wt(D[0][k]*(x[H].width+1)+x[H].left,D[0][k+5]*(x[H].height+1)+x[H].top)})})),a.forEach(function(j){j.regions.dispose(),j.scores.dispose(),j.points.dispose()}),[2,{boxes:x,scores:S,points:N}]}})})}var Nk=function(n){Ke(t,n);function t(){return n.call(this,"Mtcnn")||this}return t.prototype.load=function(e){return Fe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,e)]})})},t.prototype.loadFromDisk=function(e){return Fe(this,void 0,void 0,function(){return Le(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,e)]})})},t.prototype.forwardInput=function(e,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i,o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R,j,H,B,k;return Le(this,function(D){switch(D.label){case 0:if(i=this.params,!i)throw new Error("Mtcnn - load model before inference");if(o=e.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return s={},a=Date.now(),u=ke(function(){return OW(qi(Qm.fromPixels(o)).toFloat())}),c=function(P){return u.dispose(),s.total=Date.now()-a,P},d=u.shape.slice(1),h=d[0],p=d[1],m=new F_(r),_=m.minFaceSize,C=m.scaleFactor,x=m.maxNumScales,S=m.scoreThresholds,N=m.scaleSteps,F=(N||FW(_,C,[h,p])).filter(function(P){var z=V_(P,[h,p]);return Math.min(z.width,z.height)>xf}).slice(0,x),s.scales=F,s.pyramid=F.map(function(P){return V_(P,[h,p])}),R=Date.now(),[4,VW(u,F,S[0],i.pnet,s)];case 1:return j=D.sent(),s.total_stage1=Date.now()-R,j.boxes.length?(s.stage2_numInputBoxes=j.boxes.length,R=Date.now(),[4,UW(o,j.boxes,S[1],i.rnet,s)]):[2,c({results:[],stats:s})];case 2:return H=D.sent(),s.total_stage2=Date.now()-R,H.boxes.length?(s.stage3_numInputBoxes=H.boxes.length,R=Date.now(),[4,zW(o,H.boxes,S[2],i.onet,s)]):[2,c({results:[],stats:s})];case 3:return B=D.sent(),s.total_stage3=Date.now()-R,k=B.boxes.map(function(P,z){return sg(eg({},new Pr(B.scores[z],new Jm(P.left/p,P.top/h,P.width/p,P.height/h),{height:h,width:p})),new $8(B.points[z].map(function(U){return U.sub(new Wt(P.left,P.top)).div(new Wt(P.width,P.height))}),{width:P.width,height:P.height}))}),[2,c({results:k,stats:s})]}})})},t.prototype.forward=function(e,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Pn(e)];case 1:return[4,i.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},t.prototype.forwardWithStats=function(e,r){return r===void 0&&(r={}),Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return i=this.forwardInput,[4,Pn(e)];case 1:return[2,i.apply(this,[o.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return NW(e)},t.prototype.extractParams=function(e){return RW(e)},t}(di);var WW=.4,HW=[new Wt(1.603231,2.094468),new Wt(6.041143,7.080126),new Wt(2.882459,3.518061),new Wt(4.266906,5.178857),new Wt(9.041765,10.66308)],$W=[117.001,114.697,97.404];var Fk=function(n){Ke(t,n);function t(){var e=this,r={withSeparableConvs:!0,iouThreshold:WW,classes:["face"],anchors:HW,meanRgb:$W,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e=n.call(this,r)||this,e}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,r){return Fe(this,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.detect(e,r)];case 1:return i=o.sent(),[2,i.map(function(s){return new Pr(s.score,s.relativeBox,{width:s.imageWidth,height:s.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(e){return n.prototype.extractParamsFromWeigthMap.call(this,e)},t}(Bx);var Hr={ssdMobilenetv1:new Lx,tinyFaceDetector:new Fk,tinyYolov2:new Rk,mtcnn:new Nk,faceLandmark68Net:new Nx,faceLandmark68TinyNet:new fW,faceRecognitionNet:new Pk,faceExpressionNet:new nW,ageGenderNet:new cW};var qW=function(n){Ke(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return t}(Vu);var B_=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i=this;return Le(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Cf(e,this.input,function(s){return Fe(i,void 0,void 0,function(){return Le(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Hr.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){return Sk(s,r[a])})]}})})},t.prototype.withAgeAndGender=function(){return new j_(this,this.input)},t}(qW);var U_=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,ug(e,this.input,function(o){return Hr.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=i.sent(),[2,Sk(e,r)]}})})},t.prototype.withAgeAndGender=function(){return new z_(this,this.input)},t}(qW);var dg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new fg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new mg(this,this.input)},t}(B_);var hg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new pg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gg(this,this.input)},t}(U_);var GW=function(n){Ke(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.extractedFaces=i,o}return t}(Vu);var j_=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i=this;return Le(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return e=o.sent(),[4,Cf(e,this.input,function(s){return Fe(i,void 0,void 0,function(){return Le(this,function(a){switch(a.label){case 0:return[4,Promise.all(s.map(function(u){return Hr.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,a.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,e.map(function(s,a){var u=r[a],c=u.age,d=u.gender,h=u.genderProbability;return kk(Ok(s,d,h),c)})]}})})},t.prototype.withFaceExpressions=function(){return new B_(this,this.input)},t}(GW);var z_=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i,o,s;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,ug(e,this.input,function(u){return Hr.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=a.sent(),i=r.age,o=r.gender,s=r.genderProbability,[2,kk(Ok(e,o,s),i)]}})})},t.prototype.withFaceExpressions=function(){return new U_(this,this.input)},t}(GW);var fg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new mg(this,this.input)},t}(j_);var pg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gg(this,this.input)},t}(z_);var KW=function(n){Ke(t,n);function t(e,r){var i=n.call(this)||this;return i.parentTask=e,i.input=r,i}return t}(Vu);var mg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),[4,Cf(e,this.input,function(o){return Promise.all(o.map(function(s){return Hr.faceRecognitionNet.computeFaceDescriptor(s)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=i.sent(),[2,r.map(function(o,s){return Mk(e[s],o)})]}})})},t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withAgeAndGender=function(){return new fg(this,this.input)},t}(KW);var gg=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r;return Le(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),e?[4,ug(e,this.input,function(o){return Hr.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=i.sent(),[2,Mk(e,r)]}})})},t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withAgeAndGender=function(){return new pg(this,this.input)},t}(KW);var YW=function(n){Ke(t,n);function t(e,r,i){var o=n.call(this)||this;return o.parentTask=e,o.input=r,o.useTinyLandmarkNet=i,o}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Hr.faceLandmark68TinyNet:Hr.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Vu);var ZW=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i,o,s,a=this;return Le(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return e=u.sent(),r=e.map(function(c){return c.detection}),this.input instanceof Nn?[4,k_(this.input,r)]:[3,3];case 2:return o=u.sent(),[3,5];case 3:return[4,M_(this.input,r)];case 4:o=u.sent(),u.label=5;case 5:return i=o,[4,Promise.all(i.map(function(c){return a.landmarkNet.detectLandmarks(c)}))];case 6:return s=u.sent(),i.forEach(function(c){return c instanceof Nn&&c.dispose()}),[2,e.map(function(c,d){return sg(c,s[d])})]}})})},t.prototype.withFaceExpressions=function(){return new dg(this,this.input)},t.prototype.withAgeAndGender=function(){return new fg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new mg(this,this.input)},t}(YW);var QW=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i,o,s;return Le(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?(r=e.detection,this.input instanceof Nn?[4,k_(this.input,[r])]:[3,3]):[2];case 2:return o=a.sent(),[3,5];case 3:return[4,M_(this.input,[r])];case 4:o=a.sent(),a.label=5;case 5:return i=o,[4,this.landmarkNet.detectLandmarks(i[0])];case 6:return s=a.sent(),i.forEach(function(u){return u instanceof Nn&&u.dispose()}),[2,sg(e,s)]}})})},t.prototype.withFaceExpressions=function(){return new hg(this,this.input)},t.prototype.withAgeAndGender=function(){return new pg(this,this.input)},t.prototype.withFaceDescriptor=function(){return new gg(this,this.input)},t}(YW);var XW=function(n){Ke(t,n);function t(e,r){r===void 0&&(r=new pd);var i=n.call(this)||this;return i.input=e,i.options=r,i}return t}(Vu);var JW=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r,i,o;return Le(this,function(s){switch(s.label){case 0:return e=this,r=e.input,i=e.options,i instanceof F_?[4,Hr.mtcnn.forward(r,i)]:[3,2];case 1:return[2,s.sent().map(function(a){return a.detection})];case 2:if(o=i instanceof Ux?function(a){return Hr.tinyFaceDetector.locateFaces(a,i)}:i instanceof pd?function(a){return Hr.ssdMobilenetv1.locateFaces(a,i)}:i instanceof wf?function(a){return Hr.tinyYolov2.locateFaces(a,i)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(r){return Fe(e,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i.map(function(s){return eg({},s)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new ZW(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new B_(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new j_(this.runAndExtendWithFaceDetections(),this.input)},t}(XW);var e9=function(n){Ke(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.run=function(){return Fe(this,void 0,void 0,function(){var e,r;return Le(this,function(i){switch(i.label){case 0:return[4,new JW(this.input,this.options)];case 1:return e=i.sent(),r=e[0],e.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(r){return Fe(e,void 0,void 0,function(){var i;return Le(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return i=o.sent(),[2,r(i?eg({},i):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return e===void 0&&(e=!1),new QW(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new U_(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new z_(this.runAndExtendWithFaceDetection(),this.input)},t}(XW);function t9(n,t){return t===void 0&&(t=new pd),new e9(n,t)}function n9(n,t){if(n.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var e=Array.from(n),r=Array.from(t);return Math.sqrt(e.map(function(i,o){return i-r[o]}).reduce(function(i,o){return i+Math.pow(o,2)},0))}var RBe=function(){function n(t,e){e===void 0&&(e=.6),this._distanceThreshold=e;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var i=1,o=function(){return"person "+i++};this._labeledDescriptors=r.map(function(s){if(s instanceof A_)return s;if(s instanceof Float32Array)return new A_(o(),[s]);if(s.descriptor&&s.descriptor instanceof Float32Array)return new A_(o(),[s.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(t,e){return e.map(function(r){return n9(r,t)}).reduce(function(r,i){return r+i},0)/(e.length||1)},n.prototype.matchDescriptor=function(t){var e=this;return this.labeledDescriptors.map(function(r){var i=r.descriptors,o=r.label;return new pk(o,e.computeMeanDistance(t,i))}).reduce(function(r,i){return r.distance<i.distance?r:i})},n.prototype.findBestMatch=function(t){var e=this.matchDescriptor(t);return e.distance<this.distanceThreshold?e:new pk("unknown",e.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},n.fromJSON=function(t){var e=t.labeledDescriptors.map(function(r){return A_.fromJSON(r)});return new n(e,t.distanceThreshold)},n}();var Wx=class n{modelsLoaded=!1;loadModels(){return se(this,null,function*(){if(this.modelsLoaded)return;let t="/assets/models/face-api";try{yield Promise.all([Hr.tinyFaceDetector.loadFromUri(t),Hr.ageGenderNet.loadFromUri(t)]),this.modelsLoaded=!0,console.log("\u2705 Face-api models loaded")}catch(e){throw console.error("\u274C Failed to load face-api models:",e),new Error("Model loading failed")}})}analyzeImage(t){return se(this,null,function*(){yield this.loadModels();try{let e=yield t9(t,new Ux).withAgeAndGender();return e?{gender:e.gender,probability:+(e.genderProbability*100).toFixed(2)}:(console.warn("\u26A0\uFE0F No face detected"),null)}catch(e){return console.error("\u274C Error analyzing image:",e),null}})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function vpe(n,t){if(n&1&&G(0,"img",22),n&2){let e=ve();xe("src",e.imagePreview,It)}}function _pe(n,t){n&1&&(w(0,"div",23),G(1,"i",52),b())}function ype(n,t){n&1&&(w(0,"div",25),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u062A\u062D\u062F\u064A\u062F \u0635\u0648\u0631\u0629 "),b())}function bpe(n,t){if(n&1&&(w(0,"div",26),G(1,"i",54),A(2),b()),n&2){let e=ve();W(2),Ze(" ",e.genderResult," ")}}function wpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0643\u062B\u0631 \u0645\u0646 3 \u062D\u0631\u0648\u0641 "),b())}function Cpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 50 \u062D\u0631\u0641 "),b())}function xpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u062C\u0646\u0633 "),b())}function Epe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u0627\u0644\u062D "),b())}function Ipe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062F\u062E\u0627\u0644 \u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0635\u0627\u0644\u062D "),b())}function Spe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0643\u062B\u0631 \u0645\u0646 8 \u062D\u0631\u0648\u0641 "),b())}function Tpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 20 \u062D\u0631\u0641 "),b())}function Ape(n,t){if(n&1&&(w(0,"option",57),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function Dpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062E\u062A\u064A\u0627\u0631 \u062A\u062E\u0635\u0635 "),b())}function Ppe(n,t){if(n&1&&(w(0,"option",57),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function Mpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u062F\u064A\u0646\u0629 "),b())}function kpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062F\u062E\u0627\u0644 \u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629 "),b())}function Ope(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062F\u062E\u0627\u0644 \u0631\u0642\u0645 \u0627\u0644\u062A\u062D\u0627\u0642 \u0627\u0644\u0633\u0646\u062F\u064A "),b())}function Rpe(n,t){n&1&&(w(0,"div",26),G(1,"i",53),A(2," \u064A\u062C\u0628 \u0639\u0644\u064A\u0643 \u0627\u062F\u062E\u0627\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u064A\u0627\u062F\u0629 "),b())}function Npe(n,t){if(n&1&&(w(0,"div",45)(1,"div",27)(2,"label",18),A(3,"\u0627\u0644\u062A\u062E\u0635\u0635"),b(),w(4,"select",55)(5,"option",56),A(6,"\u0627\u062E\u062A\u0631 \u062A\u062E\u0635\u0635\u0643"),b(),_n(7,Ape,2,2,"option",57,Lr),b(),Te(9,Dpe,3,0,"div",26),b(),w(10,"div",27)(11,"label",18),A(12,"\u0627\u0644\u0645\u062F\u064A\u0646\u0629"),b(),w(13,"select",58)(14,"option",56),A(15,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u062F\u064A\u0646\u0629"),b(),_n(16,Ppe,2,2,"option",57,Lr),b(),Te(18,Mpe,3,0,"div",26),b(),w(19,"div",27)(20,"label",18),A(21,"\u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629"),b(),w(22,"div",28)(23,"span",29),G(24,"i",59),b(),G(25,"input",60),b(),Te(26,kpe,3,0,"div",26),b(),w(27,"div",27)(28,"label",18),A(29," \u0631\u0642\u0645 \u0627\u0644\u0642\u064A\u062F \u0628\u0627\u0644\u0646\u0642\u0627\u0628\u0629 "),b(),w(30,"div",28)(31,"span",29),G(32,"i",61),b(),G(33,"input",62),b(),Te(34,Ope,3,0,"div",26),b(),w(35,"div",27)(36,"label",18),A(37,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u064A\u0627\u062F\u0629"),b(),w(38,"div",28)(39,"span",29),G(40,"i",63),b(),G(41,"input",64),b(),Te(42,Rpe,3,0,"div",26),b(),w(43,"div",27)(44,"label",18),A(45,"\u0645\u0648\u0642\u0639 \u0627\u0644\u0639\u064A\u0627\u062F\u0629 \u0639\u0644\u0649 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"),b(),G(46,"div",65),b()()),n&2){let e,r,i,o,s,a,u,c,d,h,p,m,_,C,x,S=ve();W(4),Nt("is-invalid",((e=S.form.get("specialization"))==null?null:e.invalid)&&((e=S.form.get("specialization"))==null?null:e.touched))("is-valid",((r=S.form.get("specialization"))==null?null:r.valid)&&((r=S.form.get("specialization"))==null?null:r.touched)),W(3),yn(S.specializations),W(2),be(!((i=S.form.get("specialization"))==null||i.errors==null)&&i.errors.required?9:-1),W(4),Nt("is-invalid",((o=S.form.get("city"))==null?null:o.invalid)&&((o=S.form.get("city"))==null?null:o.touched))("is-valid",((s=S.form.get("city"))==null?null:s.valid)&&((s=S.form.get("city"))==null?null:s.touched)),W(3),yn(S.egyptCities),W(2),be(!((a=S.form.get("city"))==null||a.errors==null)&&a.errors.required?18:-1),W(7),Nt("is-invalid",((u=S.form.get("experience"))==null?null:u.invalid)&&((u=S.form.get("experience"))==null?null:u.touched))("is-valid",((c=S.form.get("experience"))==null?null:c.valid)&&((c=S.form.get("experience"))==null?null:c.touched)),W(),be(!((d=S.form.get("experience"))==null||d.errors==null)&&d.errors.required?26:-1),W(7),Nt("is-invalid",((h=S.form.get("syndicateRegistrationNumber"))==null?null:h.invalid)&&((h=S.form.get("syndicateRegistrationNumber"))==null?null:h.touched))("is-valid",((p=S.form.get("syndicateRegistrationNumber"))==null?null:p.valid)&&((p=S.form.get("syndicateRegistrationNumber"))==null?null:p.touched)),W(),be(!((m=S.form.get("syndicateRegistrationNumber"))==null||m.errors==null)&&m.errors.required?34:-1),W(7),Nt("is-invalid",((_=S.form.get("clinicAddress"))==null?null:_.invalid)&&((_=S.form.get("clinicAddress"))==null?null:_.touched))("is-valid",((C=S.form.get("clinicAddress"))==null?null:C.valid)&&((C=S.form.get("clinicAddress"))==null?null:C.touched)),W(),be(!((x=S.form.get("clinicAddress"))==null||x.errors==null)&&x.errors.required?42:-1)}}function Fpe(n,t){n&1&&(w(0,"div",47),G(1,"span",66),w(2,"span"),A(3,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u0633\u062C\u064A\u0644..."),b()())}function Lpe(n,t){n&1&&(w(0,"span"),A(1,"\u062A\u0633\u062C\u064A\u0644 \u062D\u0633\u0627\u0628 \u062C\u062F\u064A\u062F"),b())}function Vpe(n,t){if(n&1&&(w(0,"div",48),G(1,"i",53),A(2),b()),n&2){let e=ve();W(2),Ze(" ",e.errorMessage," ")}}var $x=class n{constructor(t,e,r,i,o,s){this.fb=t;this.authService=e;this.router=r;this.userService=i;this.settingsService=o;this.genderService=s;this.initializeForm()}map=null;marker=null;CAIRO_COORDINATES={lat:30.033,lng:31.233};PHONE_PATTERN="^[01][0,1,2,5]{1}[0-9]{8}$";errorMessage="";form;selectedFileName="";imagePreview=null;clinicLocation=null;egyptCities=[];specializations=[];isLoading=!1;modelsLoaded=!1;genderResult=null;ngOnInit(){this.egyptCities=this.settingsService.egyptCities,this.specializations=this.settingsService.doctorSpecializations,this.setupRoleChangeListener()}ngOnDestroy(){this.cleanupMap()}initializeForm(){this.form=this.fb.group({displayName:["",[We.required,We.minLength(3),We.maxLength(50)]],email:["",[We.required,We.email,We.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]],phone:["",[We.required,We.pattern(this.PHONE_PATTERN)]],password:["",[We.required,We.minLength(8),We.maxLength(20)]],role:["client",We.required],gender:["male",We.required],image:[null,We.required],specialization:[""],city:[""],experience:[""],syndicateRegistrationNumber:[""],clinicAddress:[""],latitude:[""],longitude:[""]})}setupRoleChangeListener(){this.form.get("role")?.valueChanges.subscribe(t=>{t==="doctor"?(this.addDoctorValidators(),this.initializeClinicMap()):(this.removeDoctorValidators(),this.cleanupMap())})}addDoctorValidators(){let t={specialization:[We.required],city:[We.required],experience:[We.required,We.min(0),We.max(50),We.pattern(/^\d+$/)],syndicateRegistrationNumber:[We.required,We.pattern(/^\d{6}$/)],clinicAddress:[We.required],latitude:[We.required],longitude:[We.required]};Object.entries(t).forEach(([e,r])=>{this.form.get(e)?.setValidators(r),this.form.get(e)?.updateValueAndValidity()})}removeDoctorValidators(){["specialization","city","experience","syndicateRegistrationNumber","clinicAddress","latitude","longitude"].forEach(t=>{let e=this.form.get(t);e&&(e.clearValidators(),e.setValue(""),e.updateValueAndValidity())})}initializeClinicMap(){setTimeout(()=>{this.cleanupMap();let t=document.getElementById("map");if(!t){console.error("Map container not found");return}try{this.setupMap(t)}catch(e){console.error("Error initializing map:",e),this.errorMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u062E\u0631\u064A\u0637\u0629"}},100)}setupMap(t){this.map=md.map(t,{center:[this.CAIRO_COORDINATES.lat,this.CAIRO_COORDINATES.lng],zoom:13,zoomControl:!0,attributionControl:!0,scrollWheelZoom:!0,dragging:!0}),md.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),this.setupMapMarker(),this.setupMapEventListeners(),setTimeout(()=>this.map?.invalidateSize(!0),200)}setupMapMarker(){if(!this.map)return;let t=md.icon({iconUrl:"assets/media/map markers/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});this.marker=md.marker([this.CAIRO_COORDINATES.lat,this.CAIRO_COORDINATES.lng],{icon:t,draggable:!0}).addTo(this.map)}setupMapEventListeners(){this.marker?.on("dragend",t=>{this.updateLocationFromEvent(t.target.getLatLng())}),this.map?.on("click",t=>{this.updateLocationFromEvent(t.latlng)})}updateLocationFromEvent(t){this.clinicLocation={lat:t.lat,lng:t.lng},this.form.patchValue({latitude:t.lat,longitude:t.lng}),this.marker?.setLatLng([t.lat,t.lng])}cleanupMap(){this.map&&(this.map.remove(),this.map=null,this.marker=null)}validateImageFile(t){return t.type.startsWith("image/")?!0:(this.showErrorAlert("\u0646\u0648\u0639 \u0627\u0644\u0645\u0644\u0641 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D","\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0644\u0641 \u0635\u0648\u0631\u0629 \u0641\u0642\u0637"),!1)}showErrorAlert(t,e){Hx.default.fire({icon:"error",title:t,text:e,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#dc3545"})}showSuccessAlert(t){Hx.default.fire({icon:"success",title:t,showConfirmButton:!1,timer:1500})}processImageForGenderDetection(t){return se(this,null,function*(){let e=yield this.genderService.analyzeImage(t);e?(console.log(e),this.form.get("gender")?.setValue(e.gender),this.genderResult=null):this.genderResult="\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0648\u062C\u0647."})}handleFileRead(t){this.imagePreview=t.result,this.form.patchValue({image:t.result}),this.showSuccessAlert("\u062A\u0645 \u0631\u0641\u0639 \u0627\u0644\u0635\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D");let e=new Image;e.src=this.imagePreview,e.onload=()=>this.processImageForGenderDetection(e)}onFileSelected(t){let e=t.target;if(!e.files?.length)return;let r=e.files[0];if(!this.validateImageFile(r))return;let i=new FileReader;i.onload=()=>this.handleFileRead(i),i.onerror=()=>this.showErrorAlert("\u062D\u062F\u062B \u062E\u0637\u0623!","\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0645\u0644\u0641"),i.readAsDataURL(r)}register(){return se(this,null,function*(){if(this.form.invalid||this.isLoading){this.markFormTouched();return}this.isLoading=!0;let t=this.form.value;try{let e=yield this.authService.register(t.email,t.password).toPromise();if(!e?.user)throw new Error("No user created");yield RB(e.user,{displayName:t.displayName});let r=this.prepareUserData(t,e.user.uid);yield this.userService.createUserData(e.user.uid,r).toPromise(),yield this.showSuccessMessage(),this.router.navigate(["/"])}catch(e){console.error("Register Error:",e),this.errorMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0633\u062C\u064A\u0644. \u062C\u0631\u0628 \u0644\u0627\u062D\u0642\u0627\u064B."}finally{this.isLoading=!1}})}prepareUserData(t,e){let r={uid:e,displayName:t.displayName,email:t.email,role:t.role,gender:t.gender,phone:t.phone,image:t.image,isActive:!1};return t.role==="doctor"?bt(Ie({},r),{specialization:t.specialization,city:t.city,experience:Number(t.experience),syndicateRegistrationNumber:t.syndicateRegistrationNumber,clinicAddress:t.clinicAddress,location:this.clinicLocation,isVerified:!1}):r}markFormTouched(){Object.values(this.form.controls).forEach(t=>{t.markAsTouched(),t instanceof Du&&Object.values(t.controls).forEach(e=>e.markAsTouched())})}showSuccessMessage(){return se(this,null,function*(){let t=this.form.get("role")?.value;yield Hx.default.fire({icon:"success",title:"\u062A\u0645 \u0627\u0644\u062A\u0633\u062C\u064A\u0644 \u0628\u0646\u062C\u0627\u062D! \u0641\u064A \u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u062A\u062D\u0642\u0642 \u{1F389}",text:"\u0634\u0643\u0631\u0627\u064B \u0644\u062A\u0633\u062C\u064A\u0644\u0643! \u0633\u064A\u062A\u0645 \u0645\u0631\u0627\u062C\u0639\u0629 \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0648\u062A\u0641\u0639\u064A\u0644 \u062D\u0633\u0627\u0628\u0643 \u0642\u0631\u064A\u0628\u0627\u064B.",confirmButtonText:"\u0627\u0633\u062A\u0645\u0631\u0627\u0631",confirmButtonColor:"#0d6efd"})})}isFieldInvalid(t){let e=this.form.get(t);return e?e.invalid&&(e.dirty||e.touched):!1}getErrorMessage(t){let e=this.form.get(t);if(!e?.errors)return"";let r=e.errors;if(r.required)return"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628";if(r.email)return"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u063A\u064A\u0631 \u0635\u062D\u064A\u062D";if(r.minlength)return`\u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0627\u0644\u062D\u0642\u0644 ${r.minlength.requiredLength} \u062D\u0631\u0648\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644`;if(r.maxlength)return`\u064A\u062C\u0628 \u0623\u0646 \u0644\u0627 \u064A\u0632\u064A\u062F \u0627\u0644\u062D\u0642\u0644 \u0639\u0646 ${r.maxlength.requiredLength} \u062D\u0631\u0641`;if(r.pattern)switch(t){case"phone":return"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D";case"password":return"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064A\u062C\u0628 \u0623\u0646 \u062A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u062D\u0631\u0648\u0641 \u0648\u0623\u0631\u0642\u0627\u0645";case"syndicateRegistrationNumber":return"\u0631\u0642\u0645 \u0627\u0644\u0646\u0642\u0627\u0628\u0629 \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 6 \u0623\u0631\u0642\u0627\u0645";default:return"\u0627\u0644\u0642\u064A\u0645\u0629 \u063A\u064A\u0631 \u0635\u062D\u064A\u062D\u0629"}return"\u062E\u0637\u0623 \u0641\u064A \u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644"}static \u0275fac=function(e){return new(e||n)(me(qs),me(nd),me(Ar),me(Wi),me($s),me(Wx))};static \u0275cmp=_t({type:n,selectors:[["app-register"]],decls:95,vars:31,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-8","col-lg-6"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","py-4"],[1,"mb-0"],[1,"small","mb-0","mt-2"],[1,"card-body","p-4"],[1,"needs-validation",3,"ngSubmit","formGroup"],[1,"mb-4","text-center"],[1,"form-label","d-block"],["role","group",1,"btn-group"],["type","radio","formControlName","role","value","client","id","clientRole",1,"btn-check"],["for","clientRole",1,"btn","btn-outline-primary"],[1,"fas","fa-user","me-2"],["type","radio","formControlName","role","value","doctor","id","doctorRole",1,"btn-check"],["for","doctorRole",1,"btn","btn-outline-primary"],[1,"fas","fa-user-md","me-2"],[1,"form-label"],[1,"d-flex","justify-content-center"],[1,"position-relative"],[1,"avatar-upload"],[1,"rounded-circle",2,"width","150px","height","150px","object-fit","cover",3,"src"],[1,"avatar-placeholder","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","150px","height","150px","background-color","#e9ecef"],["type","file","accept","image/*",1,"position-absolute","top-0","start-0","opacity-0","w-100","h-100",3,"change"],[1,"alert","alert-warning","p-1","mt-2"],[1,"alert","alert-danger","p-1","mt-2"],[1,"mb-4"],[1,"input-group"],[1,"input-group-text"],[1,"fas","fa-user"],["type","text","formControlName","displayName","placeholder","\u0627\u062F\u062E\u0644 \u0627\u0633\u0645\u0643 \u0627\u0644\u0643\u0627\u0645\u0644",1,"form-control"],[1,"fas","fa-venus-mars"],[1,"form-control","d-flex","gap-4"],[1,"form-check"],["type","radio","formControlName","gender","value","male","id","male",1,"form-check-input"],["for","male",1,"form-check-label"],["type","radio","formControlName","gender","value","female","id","female",1,"form-check-input"],["for","female",1,"form-check-label"],[1,"fas","fa-envelope"],["type","email","formControlName","email","placeholder","example@domain.com",1,"form-control"],[1,"fas","fa-phone"],["type","number","formControlName","phone","placeholder","\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",1,"form-control"],[1,"fas","fa-lock"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"form-control"],[1,"doctor-fields"],["type","submit",1,"btn","btn-primary","w-100","py-2",3,"disabled"],[1,"d-flex","align-items-center","justify-content-center"],[1,"alert","alert-danger","mt-3"],[1,"text-center","mt-4"],["routerLink","/login",1,"text-primary","text-decoration-none"],[1,"fas","fa-arrow-right","ms-1"],[1,"fas","fa-camera","fa-2x","text-muted"],[1,"fas","fa-exclamation-circle","me-2"],[1,"fas","fa-info-circle","me-2"],["formControlName","specialization",1,"form-select"],["value","","disabled","","selected",""],[3,"value"],["formControlName","city",1,"form-select"],[1,"fas","fa-briefcase"],["type","number","min","0","formControlName","experience","placeholder","\u0639\u062F\u062F \u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629",1,"form-control"],[1,"fas","fa-id-card"],["type","text","formControlName","syndicateRegistrationNumber","placeholder","\u0631\u0642\u0645 \u0627\u0644\u062A\u062D\u0627\u0642 \u0627\u0644\u0633\u0646\u062F\u064A",1,"form-control"],[1,"fas","fa-location-dot"],["type","text","formControlName","clinicAddress","placeholder","\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u062A\u0641\u0635\u064A\u0644\u064A \u0644\u0644\u0639\u064A\u0627\u062F\u0629",1,"form-control"],["id","map",1,"rounded","shadow-sm",2,"height","300px"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(e,r){if(e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),A(6,"\u0625\u0646\u0634\u0627\u0621 \u062D\u0633\u0627\u0628 \u062C\u062F\u064A\u062F"),b(),w(7,"p",6),A(8,"\u0646\u0631\u062D\u0628 \u0628\u0643 \u0641\u064A \u0645\u0646\u0635\u062A\u0646\u0627 \u0627\u0644\u0637\u0628\u064A\u0629"),b()(),w(9,"div",7)(10,"form",8),je("ngSubmit",function(){return r.register()}),w(11,"div",9)(12,"label",10),A(13,"\u0646\u0648\u0639 \u0627\u0644\u062D\u0633\u0627\u0628"),b(),w(14,"div",11),G(15,"input",12),w(16,"label",13),G(17,"i",14),A(18,"\u0645\u0631\u064A\u0636 "),b(),G(19,"input",15),w(20,"label",16),G(21,"i",17),A(22,"\u0637\u0628\u064A\u0628 "),b()()(),w(23,"div",9)(24,"label",18),A(25,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),b(),w(26,"div",19)(27,"div",20)(28,"div",21),Te(29,vpe,1,1,"img",22)(30,_pe,2,0,"div",23),w(31,"input",24),je("change",function(o){return r.onFileSelected(o)}),b()()()()(),Te(32,ype,3,0,"div",25)(33,bpe,3,1,"div",26),w(34,"div",27)(35,"label",18),A(36,"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"),b(),w(37,"div",28)(38,"span",29),G(39,"i",30),b(),G(40,"input",31),b(),Te(41,wpe,3,0,"div",26)(42,Cpe,3,0,"div",26),b(),w(43,"div",27)(44,"label",18),A(45,"\u0627\u0644\u062C\u0646\u0633"),b(),w(46,"div",28)(47,"span",29),G(48,"i",32),b(),w(49,"div",33)(50,"div",34),G(51,"input",35),w(52,"label",36),A(53,"\u0630\u0643\u0631"),b()(),w(54,"div",34),G(55,"input",37),w(56,"label",38),A(57,"\u0623\u0646\u062B\u064A"),b()()()(),Te(58,xpe,3,0,"div",26),b(),w(59,"div",27)(60,"label",18),A(61,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),b(),w(62,"div",28)(63,"span",29),G(64,"i",39),b(),G(65,"input",40),b(),Te(66,Epe,3,0,"div",26),b(),w(67,"div",27)(68,"label",18),A(69,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),b(),w(70,"div",28)(71,"span",29),G(72,"i",41),b(),G(73,"input",42),b(),Te(74,Ipe,3,0,"div",26),b(),w(75,"div",27)(76,"label",18),A(77,"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"),b(),w(78,"div",28)(79,"span",29),G(80,"i",43),b(),G(81,"input",44),b(),Te(82,Spe,3,0,"div",26)(83,Tpe,3,0,"div",26),b(),Te(84,Npe,47,25,"div",45),w(85,"button",46),Te(86,Fpe,4,0,"div",47)(87,Lpe,2,0,"span"),b(),Te(88,Vpe,3,1,"div",48),w(89,"div",49)(90,"p",5),A(91," \u0644\u062F\u064A\u0643 \u062D\u0633\u0627\u0628 \u0628\u0627\u0644\u0641\u0639\u0644\u061F "),w(92,"a",50),A(93," \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 "),G(94,"i",51),b()()()()()()()()()),e&2){let i,o,s,a,u,c,d,h,p,m,_,C,x,S,N,F,R;W(10),xe("formGroup",r.form),W(19),be(r.imagePreview?29:30),W(3),be((i=r.form.get("image"))!=null&&i.invalid?32:-1),W(),be(r.genderResult?33:-1),W(7),Nt("is-invalid",((o=r.form.get("displayName"))==null?null:o.invalid)&&((o=r.form.get("displayName"))==null?null:o.touched))("is-valid",((s=r.form.get("displayName"))==null?null:s.valid)&&((s=r.form.get("displayName"))==null?null:s.touched)),W(),be(!((a=r.form.get("displayName"))==null||a.errors==null)&&a.errors.minlength?41:-1),W(),be(!((u=r.form.get("displayName"))==null||u.errors==null)&&u.errors.maxlength?42:-1),W(16),be(!((c=r.form.get("gender"))==null||c.errors==null)&&c.errors.required?58:-1),W(7),Nt("is-invalid",((d=r.form.get("email"))==null?null:d.invalid)&&((d=r.form.get("email"))==null?null:d.touched))("is-valid",((h=r.form.get("email"))==null?null:h.valid)&&((h=r.form.get("email"))==null?null:h.touched)),W(),be(!((p=r.form.get("email"))==null||p.errors==null)&&p.errors.email?66:-1),W(7),Nt("is-invalid",((m=r.form.get("phone"))==null?null:m.invalid)&&((m=r.form.get("phone"))==null?null:m.touched))("is-valid",((_=r.form.get("phone"))==null?null:_.valid)&&((_=r.form.get("phone"))==null?null:_.touched)),W(),be(!((C=r.form.get("phone"))==null||C.errors==null)&&C.errors.pattern?74:-1),W(7),Nt("is-invalid",((x=r.form.get("password"))==null?null:x.invalid)&&((x=r.form.get("password"))==null?null:x.touched))("is-valid",((S=r.form.get("password"))==null?null:S.valid)&&((S=r.form.get("password"))==null?null:S.touched)),W(),be(!((N=r.form.get("password"))==null||N.errors==null)&&N.errors.minlength?82:-1),W(),be(!((F=r.form.get("password"))==null||F.errors==null)&&F.errors.maxlength?83:-1),W(),be(((R=r.form.get("role"))==null?null:R.value)==="doctor"?84:-1),W(),xe("disabled",r.form.invalid||r.isLoading),W(),be(r.isLoading?86:87),W(2),be(r.errorMessage?88:-1)}},dependencies:[No,br,Oo,Ro,Jn,ps,$i,Pa,_r,yr,Ma,Hi,lo,$n,In],styles:[".fa-location-dot-icon[_ngcontent-%COMP%]{color:red;text-align:center;display:flex;justify-content:center;align-items:center}"]})};var Qi=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-loading"]],decls:10,vars:0,consts:[[1,"loading-container"],[1,"loading-content"],[1,"pulse-container"],[1,"pulse-icon"],[1,"fas","fa-heartbeat"],[1,"pulse-circle"],[1,"loading-text"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),G(4,"i",4),b(),G(5,"div",5)(6,"div",5)(7,"div",5),b(),w(8,"div",6),A(9," \u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0645\u064A\u0644... "),b()()())},dependencies:[In],styles:['.loading-container[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#fffffffa;display:flex;justify-content:center;align-items:center;z-index:9999;direction:rtl}.loading-content[_ngcontent-%COMP%]{text-align:center}.pulse-container[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;margin:0 auto 2rem}.pulse-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:2}.pulse-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:#0070f3;animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}.pulse-circle[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;height:100%;border:3px solid #0070f3;border-radius:50%;opacity:0;animation:_ngcontent-%COMP%_ripple 2s cubic-bezier(.4,0,.6,1) infinite}.pulse-circle[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.5s}.pulse-circle[_ngcontent-%COMP%]:nth-child(3){animation-delay:-1s}.pulse-circle[_ngcontent-%COMP%]:nth-child(4){animation-delay:-1.5s}.loading-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#7928ca;position:relative;animation:_ngcontent-%COMP%_textPulse 2s ease-in-out infinite}.loading-text[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-8px;left:0;width:100%;height:2px;background:linear-gradient(to right,#0070f3,#7928ca);transform:scaleX(0);transform-origin:right;animation:_ngcontent-%COMP%_lineProgress 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:translate(-50%,-50%) scale(.8);opacity:1}to{transform:translate(-50%,-50%) scale(1.5);opacity:0}}@keyframes _ngcontent-%COMP%_textPulse{0%,to{opacity:1;transform:translateY(0)}50%{opacity:.7;transform:translateY(-2px)}}@keyframes _ngcontent-%COMP%_lineProgress{0%{transform:scaleX(0);transform-origin:right}50%{transform:scaleX(1);transform-origin:right}50.1%{transform:scaleX(1);transform-origin:left}to{transform:scaleX(0);transform-origin:left}}@media (max-width: 768px){.pulse-container[_ngcontent-%COMP%]{width:100px;height:100px}.pulse-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.loading-text[_ngcontent-%COMP%]{font-size:1.25rem}}.loading-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#0070f308,#7928ca08,#0070f308);background-size:400% 400%;animation:_ngcontent-%COMP%_gradientBG 15s ease infinite;z-index:-1}@keyframes _ngcontent-%COMP%_gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}']})};var Vk=ha(td());var gd=class n{constructor(t){this.db=t}createBooking(t){let e=Kh(jt(this.db,"bookings")).key,r=Date.now();if(!e)throw new Error("Failed to generate booking ID");let i=bt(Ie({},t),{bookingId:e,status:t.status??"pending",createdAt:r});return rt(fs(jt(this.db,`bookings/${e}`),i))}getDoctorBookings(t){let e=jt(this.db,"bookings");return rt(ai(e)).pipe(ct(r=>{let i=r.val();return i?Object.values(i).filter(o=>o.doctorId===t):[]}))}getClientBookings(t){let e=jt(this.db,"bookings");return rt(ai(e)).pipe(ct(r=>{let i=r.val();return i?Object.values(i).filter(o=>o.clientId===t):[]}))}getBookingDetails(t){let e=jt(this.db,`bookings/${t}`);return rt(ai(e)).pipe(ct(r=>r.val()??null))}updateBookingStatus(t,e){let r=jt(this.db,`bookings/${t}/status`);return rt(fs(r,e))}deleteBooking(t){return rt(fs(jt(this.db,`bookings/${t}`),null))}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var ea=class n{constructor(t){this.db=t}sendNotification(t,e){let r=jt(this.db,`users/${t}/notifications`);return Kh(r,bt(Ie({},e),{createdAt:new Date().toISOString(),isRead:!1})).then(()=>{})}getNotifications(t){let e=jt(this.db,`users/${t}/notifications`),r=bP(e,yP("createdAt"));return new Tt(i=>{_P(r,o=>{let s=[];o.forEach(a=>{s.push(Ie({id:a.key},a.val()))}),s.sort((a,u)=>new Date(u.createdAt).getTime()-new Date(a.createdAt).getTime()),i.next(s)},o=>{i.error(o)})})}makeNotificationSound(){new Audio("../../../../assets/sounds/notification.mp3").play()}getUnreadNotifications(t){let e=jt(this.db,`users/${t}/notifications`),r=bP(e,yP("isRead"),O7(!1));return new Tt(i=>{_P(r,o=>{let s=[],a=0;if(o.forEach(u=>{s.push(Ie({id:u.key},u.val()))}),s.length>a)try{this.makeNotificationSound()}catch{console.log("Could not play notification sound - user interaction required")}a=s.length,i.next(s)},o=>{i.error(o)})})}markAsRead(t,e){let r=jt(this.db,`users/${t}/notifications/${e}`);return Mc(r,{isRead:!0})}deleteNotification(t,e){let r=jt(this.db,`users/${t}/notifications/${e}`);return Yh(r)}deleteAllNotifications(t){let e=jt(this.db,`users/${t}/notifications`);return Yh(e)}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bpe=(n,t)=>t.id;function Upe(n,t){n&1&&(w(0,"div",13),G(1,"i",46),A(2," \u0645\u0639\u062A\u0645\u062F \u0645\u0646 \u0637\u0628\u064A\u0628\u064A "),b())}function jpe(n,t){n&1&&(w(0,"div",14),G(1,"i",47),A(2," \u063A\u064A\u0631 \u0645\u0639\u062A\u0645\u062F \u0645\u0646 \u0637\u0628\u064A\u0628\u064A "),b())}function zpe(n,t){if(n&1&&(w(0,"div",31)(1,"div",48),G(2,"i",49),w(3,"span"),A(4),b()(),w(5,"div",48),G(6,"i",50),w(7,"span"),A(8),b()()()),n&2){let e=ve(2);W(4),st(e.distanceToDoctor),W(4),st(e.estimatedDrivingTime)}}function Wpe(n,t){n&1&&(w(0,"span",62),G(1,"i",63),A(2," \u0623\u0633\u0628\u0648\u0639\u064A "),b())}function Hpe(n,t){if(n&1&&(w(0,"div",53)(1,"div",54),G(2,"i",55),A(3),nn(4,"date"),b(),w(5,"div",56),G(6,"i",57),A(7),nn(8,"date"),nn(9,"date"),b(),w(10,"div",58)(11,"span",59),G(12,"i",60),A(13),b(),w(14,"span",61),G(15,"i",22),A(16),b(),Te(17,Wpe,3,0,"span",62),b()()),n&2){let e=t.$implicit;W(3),Ze(" ",bn(4,6,e.startDate,"mediumDate")," "),W(4),f0(" ",bn(8,9,e.startDate,"shortTime")," - ",bn(9,12,e.endDate,"shortTime")," "),W(6),Ze(" ",e.duration," \u062F\u0642\u064A\u0642\u0629 "),W(3),Ze(" ",e.maxPatients," \u0645\u0631\u064A\u0636 "),W(),be(e.isRecurring?17:-1)}}function $pe(n,t){if(n&1&&(w(0,"div",34)(1,"div",26),G(2,"i",51),w(3,"h3"),A(4,"\u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),b()(),w(5,"div",52),_n(6,Hpe,18,15,"div",53,Bpe),b()()),n&2){let e=ve(2);W(6),yn(e.doctor.availableSlots)}}function qpe(n,t){if(n&1&&(w(0,"option",74),A(1),nn(2,"date"),nn(3,"date"),nn(4,"date"),b()),n&2){let e=t.$implicit;xe("ngValue",e),W(),Sl(" ",bn(2,4,e.startDate,"shortDate")," - ",bn(3,7,e.startDate,"shortTime")," - ",bn(4,10,e.endDate,"shortTime")," ")}}function Gpe(n,t){n&1&&(w(0,"div",76),G(1,"i",91),A(2," \u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0648\u0639\u062F "),b())}function Kpe(n,t){n&1&&(w(0,"div",76),G(1,"i",91),A(2," \u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644 "),b())}function Ype(n,t){n&1&&(w(0,"div",76),G(1,"i",91),A(2," \u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u062D\u064A\u062D "),b())}function Zpe(n,t){n&1&&(w(0,"div",76),G(1,"i",91),A(2," \u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0635\u062D\u064A\u062D "),b())}function Qpe(n,t){if(n&1&&(w(0,"div",87)(1,"h4",92),G(2,"i",93),A(3," \u0645\u0644\u062E\u0635 \u0627\u0644\u062D\u062C\u0632 "),b(),w(4,"div",94)(5,"div",95)(6,"span",96),A(7,"\u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u062E\u062A\u0627\u0631:"),b(),w(8,"span",97),A(9),nn(10,"date"),nn(11,"date"),nn(12,"date"),b()(),w(13,"div",95)(14,"span",96),A(15,"\u0627\u0644\u0627\u0633\u0645:"),b(),w(16,"span",97),A(17),b()(),w(18,"div",95)(19,"span",96),A(20,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641:"),b(),w(21,"span",97),A(22),b()(),w(23,"div",95)(24,"span",96),A(25,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A:"),b(),w(26,"span",97),A(27),b()(),w(28,"div",95)(29,"span",96),A(30,"\u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A:"),b(),w(31,"span",97),A(32),b()()()()),n&2){let e,r,i,o,s,a=ve(3);W(9),Sl("",bn(10,7,(e=a.bookingForm.get("slot"))==null?null:e.value.startDate,"shortDate")," - ",bn(11,10,(e=a.bookingForm.get("slot"))==null?null:e.value.startDate,"shortTime")," - ",bn(12,13,(e=a.bookingForm.get("slot"))==null?null:e.value.endDate,"shortTime"),""),W(8),st((r=a.bookingForm.get("name"))==null?null:r.value),W(5),st((i=a.bookingForm.get("phone"))==null?null:i.value),W(5),st((o=a.bookingForm.get("email"))==null?null:o.value),W(5),st((s=a.bookingForm.get("notes"))==null?null:s.value)}}function Xpe(n,t){n&1&&(w(0,"span",90),A(1,"\u0627\u0636\u063A\u0637 \u0644\u0644\u062A\u0623\u0643\u064A\u062F"),b())}function Jpe(n,t){if(n&1){let e=Lt();w(0,"div",45)(1,"div",64)(2,"h3"),A(3,"\u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0643 \u0627\u0644\u0622\u0646"),b(),w(4,"p",65),A(5,"\u0627\u0645\u0644\u0623 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062A\u0627\u0644\u064A\u0629 \u0644\u0644\u062D\u062C\u0632"),b()(),w(6,"form",66),je("ngSubmit",function(){De(e);let i=ve(2);return Pe(i.bookAppointment())}),w(7,"div",67)(8,"h4",68),G(9,"i",51),A(10," \u062A\u0641\u0627\u0635\u064A\u0644 \u0627\u0644\u0645\u0648\u0639\u062F "),b(),w(11,"div",69)(12,"label",70),A(13,"\u0627\u062E\u062A\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u0646\u0627\u0633\u0628"),b(),w(14,"div",71)(15,"select",72)(16,"option",73),A(17," \u0627\u062E\u062A\u0631 \u0645\u0648\u0639\u062F\u0627\u064B \u2728"),b(),_n(18,qpe,5,13,"option",74,Lr),b(),G(20,"i",75),b(),Te(21,Gpe,3,0,"div",76),b()(),w(22,"div",67)(23,"h4",68),G(24,"i",77),A(25," \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629 "),b(),w(26,"div",69)(27,"label",70),A(28,"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"),b(),w(29,"div",78),G(30,"input",79)(31,"i",80),b(),Te(32,Kpe,3,0,"div",76),b(),w(33,"div",69)(34,"label",70),A(35,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),b(),w(36,"div",78),G(37,"input",81)(38,"i",82),b(),Te(39,Ype,3,0,"div",76),b(),w(40,"div",69)(41,"label",70),A(42,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),b(),w(43,"div",78),G(44,"input",83)(45,"i",84),b(),Te(46,Zpe,3,0,"div",76),b(),w(47,"div",69)(48,"label",70),A(49,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),b(),w(50,"div",78),G(51,"textarea",85)(52,"i",86),b()()(),Te(53,Qpe,33,16,"div",87),w(54,"button",88),G(55,"i",89),A(56," \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632 "),Te(57,Xpe,2,0,"span",90),b()()()}if(n&2){let e,r,i,o,s,a,u,c,d=ve(2);W(6),xe("formGroup",d.bookingForm),W(9),Nt("is-invalid",((e=d.bookingForm.get("slot"))==null?null:e.invalid)&&((e=d.bookingForm.get("slot"))==null?null:e.touched)),W(),xe("value",null),W(2),yn(d.doctor.availableSlots),W(3),be((r=d.bookingForm.get("slot"))!=null&&r.invalid&&((r=d.bookingForm.get("slot"))!=null&&r.touched)?21:-1),W(9),Nt("is-invalid",((i=d.bookingForm.get("name"))==null?null:i.invalid)&&((i=d.bookingForm.get("name"))==null?null:i.touched)),W(2),be((o=d.bookingForm.get("name"))!=null&&o.invalid&&((o=d.bookingForm.get("name"))!=null&&o.touched)?32:-1),W(5),Nt("is-invalid",((s=d.bookingForm.get("email"))==null?null:s.invalid)&&((s=d.bookingForm.get("email"))==null?null:s.touched)),W(2),be((a=d.bookingForm.get("email"))!=null&&a.invalid&&((a=d.bookingForm.get("email"))!=null&&a.touched)?39:-1),W(5),Nt("is-invalid",((u=d.bookingForm.get("phone"))==null?null:u.invalid)&&((u=d.bookingForm.get("phone"))==null?null:u.touched)),W(2),be((c=d.bookingForm.get("phone"))!=null&&c.invalid&&((c=d.bookingForm.get("phone"))!=null&&c.touched)?46:-1),W(7),be(d.bookingForm.valid?53:-1),W(),xe("disabled",d.bookingForm.invalid||!d.isLoggedIn||(d.userData==null?null:d.userData.role)=="doctor"||d.isAdmin||(d.userData==null?null:d.userData.isActive)==!1),W(3),be(d.bookingForm.valid?57:-1)}}function eme(n,t){n&1&&(w(0,"div",98),G(1,"i",100),w(2,"p"),A(3,"\u064A\u0631\u062C\u0649 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0644\u0644\u062D\u062C\u0632"),b(),w(4,"a",101),A(5,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"),b()())}function tme(n,t){n&1&&(w(0,"div",99),G(1,"i",102),w(2,"p"),A(3,"\u0639\u0630\u0631\u0627\u064B\u060C \u0644\u0627 \u064A\u0645\u0643\u0646 \u0644\u0644\u0623\u0637\u0628\u0627\u0621 \u062D\u062C\u0632 \u0645\u0648\u0627\u0639\u064A\u062F"),b()())}function nme(n,t){n&1&&(w(0,"div",99),G(1,"i",103),w(2,"p"),A(3,"\u0639\u0630\u0631\u0627\u064B\u060C \u0644\u0627 \u064A\u0645\u0643\u0646 \u0644\u0644\u062D\u0633\u0627\u0628 \u0627\u0644\u0625\u062F\u0627\u0631\u064A \u062D\u062C\u0632 \u0645\u0648\u0627\u0639\u064A\u062F"),b()())}function rme(n,t){n&1&&(w(0,"div",99),G(1,"i",104),w(2,"p"),A(3,"\u0639\u0630\u0631\u0627\u064B\u060C \u062D\u0633\u0627\u0628\u0643 \u063A\u064A\u0631 \u0645\u0641\u0639\u0644 \u0628\u0639\u062F"),b(),w(4,"small"),A(5,"\u064A\u0631\u062C\u0649 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 \u062D\u062A\u0649 \u064A\u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u062D\u0633\u0627\u0628\u0643"),b()())}function ime(n,t){if(n&1&&Te(0,eme,6,0,"div",98)(1,tme,4,0,"div",99)(2,nme,4,0,"div",99)(3,rme,6,0,"div",99),n&2){let e=ve(2);be(e.isLoggedIn?(e.userData==null?null:e.userData.role)==="doctor"?1:e.isAdmin?2:(e.userData==null?null:e.userData.isActive)===!1?3:-1:0)}}function ome(n,t){if(n&1&&(w(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),G(5,"img",6)(6,"div",7),b()(),w(7,"div",8)(8,"h1",9)(9,"span",10),A(10,"\u062F."),b(),A(11),b(),w(12,"div",11),G(13,"i",12),A(14),b(),w(15,"div",11),A(16),b(),Te(17,Upe,3,0,"div",13)(18,jpe,3,0,"div",14),b(),w(19,"div",15)(20,"div",16)(21,"div",17),G(22,"i",18),b(),w(23,"div",19)(24,"span",20),A(25),b(),w(26,"span",21),A(27,"\u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629"),b()()(),w(28,"div",16)(29,"div",17),G(30,"i",22),b(),w(31,"div",19)(32,"span",20),A(33,"4.9"),b(),w(34,"span",21),A(35,"\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u0631\u0636\u0649"),b()()()()()(),w(36,"div",23)(37,"div",24)(38,"div",25)(39,"div",26),G(40,"i",27),w(41,"h3"),A(42,"\u0645\u0648\u0642\u0639 \u0627\u0644\u0639\u064A\u0627\u062F\u0629"),b()(),w(43,"div",28)(44,"div",29),G(45,"i",30),w(46,"p"),A(47),b()(),Te(48,zpe,9,2,"div",31),w(49,"a",32),G(50,"i",33),A(51," \u0641\u062A\u062D \u0641\u064A \u0627\u0644\u062E\u0631\u064A\u0637\u0629 "),b()()(),Te(52,$pe,8,0,"div",34),b(),w(53,"div",35)(54,"div",36)(55,"h3",37),A(56,"\u062A\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u062F\u0643\u062A\u0648\u0631"),b(),w(57,"div",38)(58,"a",39),G(59,"i",40),w(60,"span"),A(61,"\u0627\u062A\u0635\u0627\u0644 \u0645\u0628\u0627\u0634\u0631"),b()(),w(62,"a",41),G(63,"i",42),w(64,"span"),A(65,"\u0648\u0627\u062A\u0633\u0627\u0628"),b()(),w(66,"a",43),G(67,"i",44),w(68,"span"),A(69,"\u0627\u0631\u0633\u0627\u0644 \u0627\u064A\u0645\u064A\u0644"),b()()()(),Te(70,Jpe,58,17,"div",45)(71,ime,4,1),b()()()),n&2){let e=ve();W(5),xe("src",e.doctor.image,It),W(6),Ze(" ",e.doctor.displayName," "),W(3),Ze(" ",e.doctor.specialization," "),W(2),Ze(" \u0631\u0642\u0645 \u0627\u0644\u0642\u064A\u062F \u0628\u0627\u0644\u0646\u0642\u0627\u0628\u0629 : ",e.doctor.syndicateRegistrationNumber," "),W(),be(e.doctor.isVerified?17:18),W(8),st(e.doctor.experience||"0"),W(22),st(e.doctor.clinicAddress),W(),be(e.distanceToDoctor&&e.estimatedDrivingTime?48:-1),W(),xe("href","https://www.google.com/maps?q="+e.doctor.location.lat+","+e.doctor.location.lng,It),W(3),be(e.doctor.availableSlots!=null&&e.doctor.availableSlots.length?52:-1),W(6),xe("href","tel:+20"+e.doctor.phone,It),W(4),xe("href","https://wa.me/+20"+e.doctor.phone,It),W(4),xe("href","mailto:"+e.doctor.email,It),W(4),be(e.isLoggedIn&&(e.userData==null?null:e.userData.role)=="client"&&!e.isAdmin&&(e.userData==null?null:e.userData.isActive)==!0?70:71)}}function sme(n,t){n&1&&G(0,"app-loading")}var qx=class n{constructor(t,e,r,i,o,s,a,u,c,d,h){this.route=t;this.doctorService=e;this.auth=r;this.userService=i;this.settingsService=o;this.bookingsService=s;this.fb=a;this.title=u;this.router=c;this.adminService=d;this.notificationService=h;this.bookingForm=this.fb.group({name:["",[We.required,We.minLength(2),We.maxLength(30)]],email:["",[We.required,We.email]],phone:["",[We.required]],slot:[null,We.required],notes:[""]})}doctor;user;userData=null;isLoggedIn=!1;isAdmin=!1;bookingForm;userLat=null;userLng=null;distanceToDoctor=null;estimatedDrivingTime=null;clinicLocationName="";ngOnInit(){this.getDoctorData(),this.getCurrentUser(),this.getUserLocation()}getDoctorData(){let t=this.route.snapshot.paramMap.get("id");t&&this.doctorService.getDoctorById(t).subscribe(e=>{this.doctor=e,this.tryCalculateDistance(),this.setTitle(),this.getClinicLocationMap()})}setTitle(){if(this.doctor){let t=this.doctor.displayName||"\u062F\u0643\u062A\u0648\u0631",e=this.doctor.city||"",r=this.doctor.specialization||"",i=`${t} - ${r} \u0641\u064A ${e} | \u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0627\u0644\u0622\u0646`;this.title.setTitle(i)}}getClinicLocationMap(){this.settingsService.getLocation(this.doctor.location.lat,this.doctor.location.lng).subscribe({next:t=>{this.clinicLocationName=t?.display_name||"\u0627\u0644\u0645\u0648\u0642\u0639 \u063A\u064A\u0631 \u0645\u062A\u0648\u0641\u0631"},error:t=>{console.error("\u062E\u0637\u0623 \u0641\u064A \u062C\u0644\u0628 \u0627\u0644\u0645\u0648\u0642\u0639:",t),this.clinicLocationName="\u062A\u0639\u0630\u0631 \u062A\u062D\u062F\u064A\u062F \u0627\u0644\u0645\u0648\u0642\u0639"}})}getCurrentUser(){this.auth.onAuthStateChanged(t=>{this.user=t,this.isLoggedIn=!!t,this.isAdmin=this.adminService.adminsList.some(e=>e.email===t?.email),t&&this.userService.getUserData(t.uid).subscribe(e=>{this.userData=e.val(),this.bookingForm.patchValue({name:this.userData?.displayName||"",email:this.userData?.email||"",phone:this.userData?.phone||""})})})}getUserLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{this.userLat=t.coords.latitude,this.userLng=t.coords.longitude,this.tryCalculateDistance()},t=>{console.error("Error getting location:",t)})}tryCalculateDistance(){this.userLat!=null&&this.userLng!=null&&this.doctor?.location&&this.calculateDistance()}calculateDistance(){let e=this.deg2rad(this.doctor.location.lat-this.userLat),r=this.deg2rad(this.doctor.location.lng-this.userLng),i=this.deg2rad(this.userLat),o=this.deg2rad(this.doctor.location.lat),s=Math.sin(e/2)**2+Math.cos(i)*Math.cos(o)*Math.sin(r/2)**2,u=6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)));this.distanceToDoctor=`${u.toFixed(2)} \u0643\u0645`;let c=u/40*60;this.estimatedDrivingTime=`${Math.round(c)} \u062F\u0642\u064A\u0642\u0629 \u062A\u0642\u0631\u064A\u0628\u0627\u064B`}deg2rad(t){return t*(Math.PI/180)}onSlotSelect(t){let e=t.selectedIndex,r=this.doctor.availableSlots[e-1];r&&this.bookingForm.patchValue({slot:{day:r.day,time:r.time,id:r.id}})}bookAppointment(){if(this.bookingForm.valid){let t=this.bookingForm.value,e={doctorId:this.doctor.uid,clientId:this.userData.uid,clientName:t.name,clientPhone:t.phone,service:this.doctor.specialization,slot:t.slot,notes:t.notes||"",status:"pending",createdAt:Date.now()};this.bookingsService.createBooking(e).subscribe({next:()=>{this.showSuccessAlert("\u062A\u0645 \u0627\u0644\u062D\u062C\u0632 \u0628\u0646\u062C\u0627\u062D!"),this.bookingForm.reset(),this.sendNotification(this.doctor.uid,`\u062A\u0645 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0628\u0646\u062C\u0627\u062D \u0628\u0648\u0627\u0633\u0637\u0629 ${t.name}`,"\u062A\u0645 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0628\u0646\u062C\u0627\u062D"),this.sendNotification(this.userData.uid,`\u062A\u0645 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0628\u0646\u062C\u0627\u062D \u0645\u0639 \u062F\u0643\u062A\u0648\u0631 ${this.doctor.displayName}`,"\u062A\u0645 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0628\u0646\u062C\u0627\u062D"),this.router.navigate(["/appointments"])},error:r=>{console.error("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u062C\u0632:",r),this.showErrorAlert("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u062C\u0632. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u0627\u064B.")}})}else this.showErrorAlert("\u064A\u0631\u062C\u0649 \u0645\u0644\u0621 \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629.")}sendNotification(t,e,r){this.notificationService.sendNotification(t,{title:r,message:e,type:"status",createdAt:new Date().toISOString(),isRead:!1})}showSuccessAlert(t){Vk.default.fire({icon:"success",title:"\u062A\u0645 \u0628\u0646\u062C\u0627\u062D",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",customClass:{confirmButton:"bg-green-600 text-white px-4 py-2 rounded"}})}showErrorAlert(t){Vk.default.fire({icon:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0623",text:t,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",customClass:{confirmButton:"bg-red-600 text-white px-4 py-2 rounded"}})}static \u0275fac=function(e){return new(e||n)(me(Fs),me(Ql),me(or),me(Wi),me($s),me(gd),me(qs),me(xw),me(Ar),me(Hs),me(ea))};static \u0275cmp=_t({type:n,selectors:[["app-doctor"]],decls:3,vars:1,consts:[[1,"doctor-page"],[1,"doctor-profile"],[1,"hero-section"],[1,"profile-card"],[1,"profile-image-container"],[1,"image-wrapper"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0637\u0628\u064A\u0628",1,"doctor-image",3,"src"],[1,"status-ring"],[1,"doctor-intro"],[1,"doctor-name"],[1,"title"],[1,"specialty-badge"],[1,"fas","fa-stethoscope","pulse-icon"],[1,"specialty-badge","text-success"],[1,"specialty-badge","text-danger"],[1,"quick-stats"],[1,"stat-item"],[1,"stat-icon"],[1,"fas","fa-award"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"fas","fa-user-friends"],[1,"content-grid"],[1,"info-column"],[1,"info-card","location-card"],[1,"card-header"],[1,"fas","fa-map-marked-alt"],[1,"clinic-details"],[1,"address-info"],[1,"fas","fa-clinic-medical"],[1,"distance-info"],["target","_blank",1,"map-button",3,"href"],[1,"fas","fa-map-marker-alt"],[1,"info-card","slots-card"],[1,"action-column"],[1,"contact-panel"],[1,"panel-title"],[1,"contact-options"],[1,"contact-button","phone",3,"href"],[1,"fas","fa-phone-alt"],[1,"contact-button","whatsapp",3,"href"],[1,"fab","fa-whatsapp"],[1,"contact-button","email",3,"href"],[1,"fas","fa-envelope"],[1,"booking-panel"],[1,"fas","fa-check-circle"],[1,"fas","fa-times-circle"],[1,"info-row"],[1,"fas","fa-route"],[1,"fas","fa-clock"],[1,"fas","fa-calendar-alt"],[1,"slots-grid"],[1,"slot-item"],[1,"slot-date"],[1,"far","fa-calendar"],[1,"slot-time"],[1,"far","fa-clock"],[1,"slot-details"],[1,"duration"],[1,"fas","fa-hourglass-half"],[1,"capacity"],[1,"slot-status","available"],[1,"fas","fa-sync-alt","me-1"],[1,"panel-header"],[1,"subtitle"],[1,"booking-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"section-title"],[1,"form-group"],[1,"form-label"],[1,"select-wrapper"],["formControlName","slot",1,"form-select"],["disabled","","selected","",3,"value"],[3,"ngValue"],[1,"fas","fa-clock","select-icon"],[1,"error-message"],[1,"fas","fa-user"],[1,"input-wrapper"],["type","text","formControlName","name","placeholder","\u0627\u062F\u062E\u0644 \u0627\u0633\u0645\u0643 \u0627\u0644\u0643\u0627\u0645\u0644"],[1,"fas","fa-user","input-icon"],["type","email","formControlName","email","placeholder","\u0627\u062F\u062E\u0644 \u0628\u0631\u064A\u062F\u0643 \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"],[1,"fas","fa-envelope","input-icon"],["type","tel","formControlName","phone","placeholder","\u0627\u062F\u062E\u0644 \u0631\u0642\u0645 \u0647\u0627\u062A\u0641\u0643"],[1,"fas","fa-phone","input-icon"],["formControlName","notes","placeholder","\u0627\u0643\u062A\u0628 \u0623\u064A \u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 \u0647\u0646\u0627...","rows","4"],[1,"fas","fa-notes-medical","input-icon"],[1,"booking-summary"],["type","submit",1,"submit-button",3,"disabled"],[1,"fas","fa-calendar-check"],[1,"button-note"],[1,"fas","fa-exclamation-circle"],[1,"summary-title"],[1,"fas","fa-clipboard-check"],[1,"summary-content"],[1,"summary-row"],[1,"label"],[1,"value"],[1,"login-prompt"],[1,"booking-error"],[1,"fas","fa-lock"],["routerLink","/login",1,"login-link"],[1,"fas","fa-user-md"],[1,"fas","fa-user-shield"],[1,"fas","fa-user-clock"]],template:function(e,r){e&1&&(w(0,"div",0),Te(1,ome,72,14,"div",1)(2,sme,1,0,"app-loading"),b()),e&2&&(W(),be(r.doctor?1:2))},dependencies:[No,br,Oo,Ro,Jn,$i,_r,yr,Hi,lo,Qi,$n,bc],styles:['.bookBtn[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,color .3s ease}.bookBtn[_ngcontent-%COMP%]:hover{box-shadow:0 5px 20px #0003;color:#fff!important;background-color:#007bff!important}@keyframes _ngcontent-%COMP%_bounce{0%{transform:scale(1);color:#fff;background-color:#007bff}50%{transform:scale(1.02);color:#007bff;background-color:#fff}to{transform:scale(1);color:#fff;background-color:#007bff}}.bookBtn[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 3s ease-in-out infinite}.small-slot-card[_ngcontent-%COMP%]{min-width:120px;text-align:center;font-size:.9rem;transition:transform .3s ease}.small-slot-card[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:#eef6ff}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.doctor-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f6f9fc,#f1f4f8);padding:2rem 1rem}.hero-section[_ngcontent-%COMP%]{margin-bottom:3rem}.hero-section[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 10px 20px #00000014;text-align:center}.profile-image-container[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-bottom:2rem}.profile-image-container[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;margin:0 auto}.profile-image-container[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .doctor-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;border:4px solid white;box-shadow:0 10px 20px #00000014;transition:transform .3s ease}.profile-image-container[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .doctor-image[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.profile-image-container[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .status-ring[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;width:20px;height:20px;border-radius:50%;background:#4caf50;border:3px solid white;animation:_ngcontent-%COMP%_pulse 2s infinite}.doctor-intro[_ngcontent-%COMP%]{margin-bottom:2rem}.doctor-intro[_ngcontent-%COMP%]   .doctor-name[_ngcontent-%COMP%]{font-size:2.5rem;color:#333;margin-bottom:1rem}.doctor-intro[_ngcontent-%COMP%]   .doctor-name[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#2196f3;font-weight:700}.doctor-intro[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.5rem 1.5rem;background:#2196f31a;color:#2196f3;border-radius:50px;font-weight:500;margin:.5rem}.doctor-intro[_ngcontent-%COMP%]   .specialty-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem}.quick-stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-top:2rem}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 2rem;background:#fff;border-radius:15px;box-shadow:0 10px 20px #00000014;transition:transform .3s ease}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;background:#2196f31a;border-radius:12px;color:#2196f3;font-size:1.5rem}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]{text-align:start}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{display:block;font-size:1.5rem;font-weight:700;color:#333}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.content-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 1.5fr;gap:2rem}@media (max-width: 992px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:1.5rem;box-shadow:0 10px 20px #00000014;margin-bottom:2rem}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#2196f3}.info-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:#333}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;margin-bottom:1rem}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .address-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#f44336;font-size:1.2rem}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .distance-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .distance-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#666}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .distance-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2196f3}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .map-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:1rem;background:#2196f3;color:#fff;border-radius:12px;text-decoration:none;transition:all .3s ease}.location-card[_ngcontent-%COMP%]   .clinic-details[_ngcontent-%COMP%]   .map-button[_ngcontent-%COMP%]:hover{background:#1976d2;transform:translateY(-2px)}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]{display:grid;gap:1rem}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:#f8f9fa;border-radius:12px;transition:all .3s ease}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]:hover{background:#fff;box-shadow:0 10px 20px #00000014}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .slot-date[_ngcontent-%COMP%], .slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#333}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .slot-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2196f3}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .book-slot-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background:#2196f3;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease}.slots-card[_ngcontent-%COMP%]   .slots-container[_ngcontent-%COMP%]   .slot-item[_ngcontent-%COMP%]   .book-slot-btn[_ngcontent-%COMP%]:hover{background:#1976d2;transform:translateY(-2px)}.contact-panel[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 20px #00000014;margin-bottom:2rem}.contact-panel[_ngcontent-%COMP%]   .panel-title[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:1.5rem}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}@media (max-width: 768px){.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]{grid-template-columns:1fr}}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1.5rem;border-radius:12px;text-decoration:none;transition:all .3s ease}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button.phone[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button.whatsapp[_ngcontent-%COMP%]{background:#25d3661a;color:#25d366}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button.email[_ngcontent-%COMP%]{background:#2196f31a;color:#2196f3}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.contact-panel[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .contact-button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);filter:brightness(.95)}.booking-panel[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 20px #00000014}.booking-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.booking-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.booking-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#666}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem 1rem 1rem 3rem;border:1px solid #ddd;border-radius:12px;transition:all .3s ease}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#2196f3;box-shadow:0 0 0 3px #2196f31a;outline:none}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{width:100%;padding:1rem;background:#2196f3;color:#fff;border:none;border-radius:12px;font-weight:500;cursor:pointer;transition:all .3s ease}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2;transform:translateY(-2px)}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.booking-panel[_ngcontent-%COMP%]   .booking-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.booking-panel[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;padding:1rem;background:#ff98001a;border-radius:12px}.booking-panel[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ff9800;font-size:1.5rem;margin-bottom:.5rem}.booking-panel[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:.5rem}.booking-panel[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{color:#2196f3;text-decoration:none;font-weight:500}.booking-panel[_ngcontent-%COMP%]   .login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px}.loading-state[_ngcontent-%COMP%]   .loader[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid #f3f3f3;border-top:3px solid #2196f3;border-radius:50%;animation:_ngcontent-%COMP%_rotate 1s linear infinite;margin-bottom:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}@media (max-width: 768px){.doctor-page[_ngcontent-%COMP%]{padding:1rem}.profile-card[_ngcontent-%COMP%]{padding:1.5rem}.quick-stats[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.quick-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{width:100%}.content-grid[_ngcontent-%COMP%]{gap:1rem}.info-card[_ngcontent-%COMP%], .contact-panel[_ngcontent-%COMP%], .booking-panel[_ngcontent-%COMP%]{padding:1.5rem}}.booking-panel[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:#f8f9fa;border-radius:12px}.booking-panel[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;color:#2196f3;font-size:1.2rem;margin-bottom:1.5rem;padding-bottom:.8rem;border-bottom:2px solid rgba(33,150,243,.1)}.booking-panel[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.4rem}.booking-panel[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#333;font-weight:500}.booking-panel[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]{position:relative}.booking-panel[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:1rem 3rem 1rem 1rem;border:2px solid #eee;border-radius:12px;appearance:none;background:#fff;color:#333;font-size:1rem;transition:all .3s ease}.booking-panel[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#2196f3;box-shadow:0 0 0 4px #2196f31a;outline:none}.booking-panel[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   select.is-invalid[_ngcontent-%COMP%]{border-color:#f44336}.booking-panel[_ngcontent-%COMP%]   .select-wrapper[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#666;pointer-events:none}.booking-panel[_ngcontent-%COMP%]   .service-summary[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background:#fff;border-radius:8px;border:1px solid #eee}.booking-panel[_ngcontent-%COMP%]   .service-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;padding:.5rem 0;color:#333}.booking-panel[_ngcontent-%COMP%]   .service-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2196f3;width:20px}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]{margin:2rem 0;padding:1.5rem;background:#2196f30d;border-radius:12px;border:1px solid rgba(33,150,243,.1)}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem;color:#2196f3;margin-bottom:1rem}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.8rem 0;border-bottom:1px solid rgba(33,150,243,.1)}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666}.booking-panel[_ngcontent-%COMP%]   .booking-summary[_ngcontent-%COMP%]   .summary-content[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:500}.booking-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#f44336;font-size:.9rem;margin-top:.5rem}.booking-panel[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem}.slot-item[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.25rem;margin-bottom:1rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;transition:all .3s ease;border:1px solid #e2e8f0}.slot-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a}.slot-item[_ngcontent-%COMP%]   .slot-date[_ngcontent-%COMP%]{color:#2563eb;font-size:1.1rem;font-weight:600;margin-bottom:.5rem}.slot-item[_ngcontent-%COMP%]   .slot-date[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;opacity:.8}.slot-item[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]{color:#64748b;font-size:.95rem;margin-bottom:1rem;display:flex;align-items:center}.slot-item[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;color:#f59e0b}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]{display:flex;gap:1.5rem;padding-top:.75rem;border-top:1px dashed #e2e8f0}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%], .slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9rem;color:#64748b}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;font-size:1rem}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .duration[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#22c55e}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2563eb}.slots-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1.5rem;padding:1rem 0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.slot-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.slot-status[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500}.slot-status.available[_ngcontent-%COMP%]{background-color:#22c55e1a;color:#22c55e}.slot-status.booked[_ngcontent-%COMP%]{background-color:#ef44441a;color:#ef4444}.slot-item[_ngcontent-%COMP%]{position:relative;overflow:hidden}.slot-item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(to right,#2563eb,#22c55e);opacity:0;transition:all .3s ease}.slot-item[_ngcontent-%COMP%]:hover:before{opacity:1}@media (max-width: 768px){.slots-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.slot-item[_ngcontent-%COMP%]{padding:1rem}.slot-item[_ngcontent-%COMP%]   .slot-date[_ngcontent-%COMP%]{font-size:1rem}.slot-item[_ngcontent-%COMP%]   .slot-time[_ngcontent-%COMP%]{font-size:.9rem}.slot-item[_ngcontent-%COMP%]   .slot-details[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.login-prompt[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]{position:relative;text-align:center;margin:2rem auto;padding:2.5rem 2rem;border-radius:20px;max-width:400px;overflow:hidden;transition:all .3s ease;background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #1f268726}.login-prompt[_ngcontent-%COMP%]:before, .booking-error[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,#2563eb,#7c3aed)}.login-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:1.5rem;display:block;animation:_ngcontent-%COMP%_floatIcon 3s ease-in-out infinite}.login-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#1f2937;margin-bottom:1.5rem;font-weight:500}.login-prompt[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;color:#6b7280;margin-top:.5rem}.login-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#2563eb;background:linear-gradient(135deg,#2563eb,#7c3aed);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{display:inline-block;padding:.8rem 2rem;background:linear-gradient(135deg,#2563eb,#7c3aed);color:#fff;text-decoration:none;border-radius:50px;font-weight:500;transition:all .3s ease;position:relative;overflow:hidden}.login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#7c3aed,#2563eb);opacity:0;transition:opacity .3s ease}.login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #2563eb4d}.login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover:before{opacity:1}.login-prompt[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{position:relative;z-index:1}.booking-error[_ngcontent-%COMP%]{background:#fef2f2f2;border:1px solid rgba(252,165,165,.2)}.booking-error[_ngcontent-%COMP%]:before{background:linear-gradient(90deg,#ef4444,#f59e0b)}.booking-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444;background:linear-gradient(135deg,#ef4444,#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#991b1b}.booking-error[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#9b2c2c}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-md){background:#eef2fff2;border:1px solid rgba(165,180,252,.2)}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-md):before{background:linear-gradient(90deg,#3730a3,#2563eb)}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-md)   i[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3730a3,#2563eb);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-md)   p[_ngcontent-%COMP%]{color:#3730a3}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-shield){background:#f0fdf4f2;border:1px solid rgba(167,243,208,.2)}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-shield):before{background:linear-gradient(90deg,#065f46,#059669)}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-shield)   i[_ngcontent-%COMP%]{background:linear-gradient(135deg,#065f46,#059669);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.booking-error[_ngcontent-%COMP%]:has(i.fa-user-shield)   p[_ngcontent-%COMP%]{color:#065f46}@keyframes _ngcontent-%COMP%_floatIcon{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #2563eb66}70%{box-shadow:0 0 0 10px #2563eb00}to{box-shadow:0 0 #2563eb00}}.login-prompt[_ngcontent-%COMP%]:hover, .booking-error[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 40px #1f268733}@media (max-width: 768px){.login-prompt[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]{margin:1.5rem auto;padding:2rem 1.5rem}.login-prompt[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.login-prompt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .booking-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem}}']})};var r9=n=>["/doctor",n];function ame(n,t){if(n&1){let e=Lt();w(0,"button",30),je("click",function(){De(e);let i=ve(2);return Pe(i.clearSearch())}),G(1,"i",31),b()}}function ume(n,t){if(n&1&&(w(0,"option",23),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function cme(n,t){if(n&1&&(w(0,"option",23),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function lme(n,t){if(n&1){let e=Lt();w(0,"span",34),G(1,"i",37),A(2),w(3,"button",38),je("click",function(){De(e);let i=ve(3);return Pe(i.clearSearch())}),A(4,"\xD7"),b()()}if(n&2){let e=ve(3);W(2),Ze(" ",e.searchText," ")}}function dme(n,t){if(n&1){let e=Lt();w(0,"span",34),G(1,"i",39),A(2),w(3,"button",38),je("click",function(){De(e);let i=ve(3);return Pe(i.clearSpecialization())}),A(4,"\xD7"),b()()}if(n&2){let e=ve(3);W(2),Ze(" ",e.selectedSpecialization," ")}}function hme(n,t){if(n&1){let e=Lt();w(0,"span",34),G(1,"i",40),A(2),w(3,"button",38),je("click",function(){De(e);let i=ve(3);return Pe(i.clearCity())}),A(4,"\xD7"),b()()}if(n&2){let e=ve(3);W(2),Ze(" ",e.selectedCity," ")}}function fme(n,t){if(n&1){let e=Lt();w(0,"span",34),G(1,"i",41),A(2),w(3,"button",38),je("click",function(){De(e);let i=ve(3);return Pe(i.clearExperience())}),A(4,"\xD7"),b()()}if(n&2){let e=ve(3);W(2),Ze(" +",e.minExperience," \u0633\u0646\u0648\u0627\u062A ")}}function pme(n,t){if(n&1){let e=Lt();w(0,"div",27)(1,"div",32)(2,"span",33),A(3,"\u0627\u0644\u0641\u0644\u0627\u062A\u0631 \u0627\u0644\u0646\u0634\u0637\u0629:"),b(),Te(4,lme,5,1,"span",34)(5,dme,5,1,"span",34)(6,hme,5,1,"span",34)(7,fme,5,1,"span",34),w(8,"button",35),je("click",function(){De(e);let i=ve(2);return Pe(i.clearAllFilters())}),A(9," \u0645\u0633\u062D \u0627\u0644\u0643\u0644 "),G(10,"i",36),b()()()}if(n&2){let e=ve(2);W(4),be(e.searchText?4:-1),W(),be(e.selectedSpecialization?5:-1),W(),be(e.selectedCity?6:-1),W(),be(e.minExperience>0?7:-1)}}function mme(n,t){if(n&1&&(w(0,"a",43)(1,"div",57),G(2,"img",58),b()()),n&2){let e=ve().$implicit;xe("routerLink",ph(3,r9,e.uid)),W(2),xe("src",e.image,It)("alt",e.displayName)}}function gme(n,t){if(n&1&&(w(0,"a",53),G(1,"i",59),w(2,"span",60),A(3),b()()),n&2){let e=ve().$implicit;xe("href","https://www.google.com/maps?q="+e.location.lat+","+e.location.lng,It),W(3),st(e.clinicAddress)}}function vme(n,t){if(n&1&&(w(0,"a",55),G(1,"i",61),b()),n&2){let e=ve().$implicit;xe("href","mailto:"+e.email,It)}}function _me(n,t){if(n&1&&(w(0,"a",62),G(1,"i",63),b(),w(2,"a",64),G(3,"i",65),b()),n&2){let e=ve().$implicit;xe("href","https://wa.me/+20"+e.phone,It),W(2),xe("href","tel:+20"+e.phone,It)}}function yme(n,t){if(n&1&&(w(0,"a",56),G(1,"i",50),b()),n&2){let e=ve().$implicit;xe("href","https://www.google.com/maps?q="+e.location.lat+","+e.location.lng,It)}}function bme(n,t){if(n&1&&(w(0,"div",28)(1,"div",42),Te(2,mme,3,5,"a",43),w(3,"div",44)(4,"h5",45)(5,"a",46),A(6),b()(),w(7,"p",47),G(8,"i",48),A(9),b(),w(10,"p",49),G(11,"i",50),A(12),b(),w(13,"p",51),G(14,"i",52),w(15,"span"),A(16),b()(),Te(17,gme,4,2,"a",53),w(18,"div",54),Te(19,vme,2,1,"a",55)(20,_me,4,2)(21,yme,2,1,"a",56),b()()()()),n&2){let e=t.$implicit;W(2),be(e.image?2:-1),W(3),xe("routerLink",ph(10,r9,e.uid)),W(),Ze(" \u062F/ ",e.displayName," "),W(3),Ze(" ",e.specialization," "),W(3),Ze(" ",e.city," "),W(4),Ze("",e.experience||"\u063A\u064A\u0631 \u0645\u062D\u062F\u062F\u0629"," \u0633\u0646\u0629 \u062E\u0628\u0631\u0629"),W(),be(e.location?17:-1),W(2),be(e.email?19:-1),W(),be(e.phone?20:-1),W(),be(e.location?21:-1)}}function wme(n,t){n&1&&(w(0,"div",29)(1,"div",66),G(2,"i",67),w(3,"span"),A(4,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0637\u0628\u064A\u0628 \u0628\u0646\u0627\u0621\u064B \u0639\u0644\u0649 \u0645\u0639\u0627\u064A\u064A\u0631 \u0627\u0644\u0628\u062D\u062B \u0627\u0644\u0645\u062D\u062F\u062F\u0629"),b()()())}function Cme(n,t){n&1&&(w(0,"div",29)(1,"div",66),G(2,"i",68),w(3,"span"),A(4,"\u0644\u0627 \u064A\u0648\u062C\u062F \u0623\u0637\u0628\u0627\u0621 \u062D\u0627\u0644\u064A\u0627\u064B"),b()()())}function xme(n,t){if(n&1){let e=Lt();w(0,"div",2)(1,"div",4)(2,"button",5),G(3,"i",6),w(4,"span"),A(5,"\u062E\u064A\u0627\u0631\u0627\u062A \u0627\u0644\u0628\u062D\u062B"),b(),G(6,"div",7),b()(),w(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12),G(12,"i",13),w(13,"input",14),ht("ngModelChange",function(i){De(e);let o=ve();return mt(o.searchText,i)||(o.searchText=i),Pe(i)}),je("input",function(){De(e);let i=ve();return Pe(i.filterDoctors())}),b(),Te(14,ame,2,0,"button",15),b()(),w(15,"div",16)(16,"div",17)(17,"label",18),G(18,"i",19),A(19," \u0627\u0644\u062A\u062E\u0635\u0635 "),b(),w(20,"div",20)(21,"select",21),ht("ngModelChange",function(i){De(e);let o=ve();return mt(o.selectedSpecialization,i)||(o.selectedSpecialization=i),Pe(i)}),je("change",function(){De(e);let i=ve();return Pe(i.filterDoctors())}),w(22,"option",22),A(23,"\u0643\u0644 \u0627\u0644\u062A\u062E\u0635\u0635\u0627\u062A"),b(),_n(24,ume,2,2,"option",23,h0),b(),G(26,"i",24),b()()(),w(27,"div",16)(28,"div",17)(29,"label",18),G(30,"i",25),A(31," \u0627\u0644\u0645\u062D\u0627\u0641\u0638\u0629 "),b(),w(32,"div",20)(33,"select",21),ht("ngModelChange",function(i){De(e);let o=ve();return mt(o.selectedCity,i)||(o.selectedCity=i),Pe(i)}),je("change",function(){De(e);let i=ve();return Pe(i.filterDoctors())}),w(34,"option",22),A(35,"\u0643\u0644 \u0627\u0644\u0645\u062D\u0627\u0641\u0638\u0627\u062A"),b(),_n(36,cme,2,2,"option",23,h0),b(),G(38,"i",24),b()()(),w(39,"div",16)(40,"div",17)(41,"label",18),G(42,"i",26),A(43," \u0627\u0644\u062E\u0628\u0631\u0629 "),b(),w(44,"div",20)(45,"select",21),ht("ngModelChange",function(i){De(e);let o=ve();return mt(o.minExperience,i)||(o.minExperience=i),Pe(i)}),je("change",function(){De(e);let i=ve();return Pe(i.filterDoctors())}),w(46,"option",23),A(47,"\u0643\u0644 \u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629"),b(),w(48,"option",23),A(49,"+5 \u0633\u0646\u0648\u0627\u062A"),b(),w(50,"option",23),A(51,"+10 \u0633\u0646\u0648\u0627\u062A"),b(),w(52,"option",23),A(53,"+15 \u0633\u0646\u0629"),b()(),G(54,"i",24),b()()()(),Te(55,pme,11,4,"div",27),b()(),_n(56,bme,22,12,"div",28,Lr),Te(58,wme,5,0,"div",29)(59,Cme,5,0,"div",29),b()}if(n&2){let e=ve();W(13),dt("ngModel",e.searchText),W(),be(e.searchText?14:-1),W(7),Nt("has-value",e.selectedSpecialization),dt("ngModel",e.selectedSpecialization),W(3),yn(e.doctorSpecializations),W(9),Nt("has-value",e.selectedCity),dt("ngModel",e.selectedCity),W(3),yn(e.egyptCities),W(9),Nt("has-value",e.minExperience>0),dt("ngModel",e.minExperience),W(),xe("value",0),W(2),xe("value",5),W(2),xe("value",10),W(2),xe("value",15),W(3),be(e.hasActiveFilters()?55:-1),W(),yn(e.filteredDoctors),W(2),be(e.filteredDoctors.length===0&&e.doctors.length>0?58:-1),W(),be(e.doctors.length===0?59:-1)}}function Eme(n,t){n&1&&(w(0,"div",3),G(1,"app-loading"),b())}var Gx=class n{constructor(t,e){this.doctorService=t;this.settingsService=e}doctors=[];filteredDoctors=[];loading=!0;error="";egyptCities;doctorSpecializations;searchText="";selectedCity="";selectedSpecialization="";minExperience=0;ngOnInit(){this.getDoctors(),this.egyptCities=this.settingsService.egyptCities,this.doctorSpecializations=this.settingsService.doctorSpecializations}getDoctors(){this.doctorService.getAllDoctors().subscribe(t=>{this.doctors=t,this.filteredDoctors=t,console.log(this.doctors),this.loading=!1})}filterDoctors(){let t=this.searchText.trim().toLowerCase();this.filteredDoctors=this.doctors.filter(e=>{let r=e.displayName?.toLowerCase().includes(t),i=this.selectedCity?e.city===this.selectedCity:!0,o=this.selectedSpecialization?e.specialization===this.selectedSpecialization:!0,s=this.minExperience!=null?(+e.experience||0)>=this.minExperience:!0;return r&&i&&o&&s})}hasActiveFilters(){return!!(this.searchText||this.selectedSpecialization||this.selectedCity||this.minExperience>0)}clearSearch(){this.searchText="",this.filterDoctors()}clearSpecialization(){this.selectedSpecialization="",this.filterDoctors()}clearCity(){this.selectedCity="",this.filterDoctors()}clearExperience(){this.minExperience=0,this.filterDoctors()}clearAllFilters(){this.searchText="",this.selectedSpecialization="",this.selectedCity="",this.minExperience=0,this.filterDoctors()}static \u0275fac=function(e){return new(e||n)(me(Ql),me($s))};static \u0275cmp=_t({type:n,selectors:[["app-doctors"]],decls:5,vars:1,consts:[[1,"container","my-5"],[1,"text-center","mb-5","text-primary","fst-italic"],[1,"row","g-3"],[1,"d-flex","justify-content-center"],[1,"d-flex","justify-content-end","mb-3"],["type","button","data-bs-toggle","collapse","data-bs-target","#filtersCollapse","aria-expanded","false","aria-controls","filtersCollapse",1,"btn","btn-filter"],[1,"fas","fa-sliders-h","me-2"],[1,"ripple"],["id","filtersCollapse",1,"collapse","filter-collapse"],[1,"filter-card"],[1,"row","g-4"],[1,"col-lg-6","col-md-12"],[1,"search-wrapper"],[1,"fas","fa-search","search-icon"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"clear-search"],[1,"col-lg-2","col-md-4"],[1,"filter-group"],[1,"filter-label"],[1,"fas","fa-stethoscope","icon-specialty"],[1,"custom-select"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"fas","fa-chevron-down","select-arrow"],[1,"fas","fa-map-marker-alt","icon-location"],[1,"fas","fa-award","icon-experience"],[1,"active-filters","mt-4"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","mb-4"],[1,"col-12"],[1,"clear-search",3,"click"],[1,"fas","fa-times"],[1,"d-flex","align-items-center","flex-wrap","gap-2"],[1,"filter-tag"],[1,"filter-badge"],[1,"clear-all-btn",3,"click"],[1,"fas","fa-times-circle","ms-1"],[1,"fas","fa-search","me-1"],[1,"remove-filter",3,"click"],[1,"fas","fa-stethoscope","me-1"],[1,"fas","fa-map-marker-alt","me-1"],[1,"fas","fa-award","me-1"],[1,"doctor-card","p-3","rounded-4","shadow-sm"],[1,"d-block","text-center",3,"routerLink"],[1,"doctor-info","text-center"],[1,"doctor-name"],[3,"routerLink"],[1,"specialty-tag"],[1,"fas","fa-stethoscope"],[1,"location-tag"],[1,"fas","fa-map-marker-alt"],[1,"experience-tag"],[1,"fas","fa-award"],["target","_blank",1,"clinic-address","d-block","mb-3","text-decoration-none",3,"href"],[1,"contact-buttons","d-flex","justify-content-center","gap-2","flex-wrap"],["title","\u0627\u0631\u0633\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",1,"btn","btn-outline-primary","btn-sm","rounded-pill",3,"href"],["target","_blank","title","\u0639\u0631\u0636 \u0627\u0644\u0645\u0648\u0642\u0639 \u0639\u0644\u0649 \u0627\u0644\u062E\u0631\u064A\u0637\u0629",1,"btn","btn-outline-secondary","btn-sm","rounded-pill",3,"href"],[1,"doctor-card-img"],[1,"img-fluid",3,"src","alt"],[1,"fas","fa-clinic-medical","text-success"],[1,"ms-2"],[1,"fas","fa-envelope"],["target","_blank","title","\u062A\u0648\u0627\u0635\u0644 \u0639\u0628\u0631 \u0648\u0627\u062A\u0633\u0627\u0628",1,"btn","btn-success","btn-sm","rounded-pill",3,"href"],[1,"fab","fa-whatsapp"],["title","\u0627\u062A\u0635\u0644 \u0627\u0644\u0622\u0646",1,"btn","btn-outline-success","btn-sm","rounded-pill",3,"href"],[1,"fas","fa-phone"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-user-md"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"h2",1),A(2," \u0627\u0643\u062A\u0634\u0641 \u0646\u062E\u0628\u0629 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0627\u0644\u0645\u0645\u064A\u0632\u064A\u0646 \u0648\u0627\u062E\u062A\u0631 \u0627\u0644\u0623\u0641\u0636\u0644 \u0644\u0631\u0639\u0627\u064A\u062A\u0643 "),b(),Te(3,xme,60,18,"div",2)(4,Eme,2,0,"div",3),b()),e&2&&(W(3),be(!r.loading&&r.doctors.length?3:4))},dependencies:[Qi,$n,Gs,Oo,Ro,Jn,$i,_r,Nc],styles:['.doctor-card[_ngcontent-%COMP%]{background:#fff;transition:all .4s cubic-bezier(.4,0,.2,1);border:none;position:relative;overflow:hidden;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#fffffff2}.doctor-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,#0070f3,#7928ca);transform:scaleX(0);transform-origin:left;transition:transform .4s ease}.doctor-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 24px #0000001a}.doctor-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.doctor-card[_ngcontent-%COMP%]:hover   .doctor-card-img[_ngcontent-%COMP%]{transform:scale(1.05);border-color:#0070f3}.doctor-card[_ngcontent-%COMP%]:hover   .doctor-card-img[_ngcontent-%COMP%]:after{opacity:1}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]{width:140px;height:140px;margin:0 auto;overflow:hidden;border-radius:50%;border:3px solid transparent;transition:all .4s ease;position:relative}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:50%;background:linear-gradient(45deg,#0070f333,#7928ca33);opacity:0;transition:opacity .4s ease}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .4s ease}.doctor-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;margin:1rem 0}.doctor-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#343a40;transition:color .3s ease}.doctor-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0070f3;text-decoration:none}.doctor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.75rem;line-height:1.5}.doctor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;text-align:center;margin-left:8px;transition:transform .3s ease}.doctor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.doctor-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.5rem 1rem;transition:all .3s ease;margin:.25rem;border-width:2px}.doctor-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.doctor-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.doctor-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.2)}.doctor-card[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0070f3,#7928ca);border-color:transparent}.doctor-card[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:#25d366;border-color:#25d366}.doctor-card[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover{background:#21bd5c;border-color:#21bd5c}.doctor-card[_ngcontent-%COMP%]   .specialty-tag[_ngcontent-%COMP%], .doctor-card[_ngcontent-%COMP%]   .location-tag[_ngcontent-%COMP%], .doctor-card[_ngcontent-%COMP%]   .experience-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.4rem .8rem;border-radius:20px;font-size:.9rem;margin-bottom:.5rem;transition:all .3s ease}.doctor-card[_ngcontent-%COMP%]   .specialty-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .doctor-card[_ngcontent-%COMP%]   .location-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .doctor-card[_ngcontent-%COMP%]   .experience-tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:6px}.doctor-card[_ngcontent-%COMP%]   .specialty-tag[_ngcontent-%COMP%]{background:#0070f31a;color:#0070f3}.doctor-card[_ngcontent-%COMP%]   .specialty-tag[_ngcontent-%COMP%]:hover{background:#0070f326}.doctor-card[_ngcontent-%COMP%]   .location-tag[_ngcontent-%COMP%]{background:#dc35451a;color:#dc3545}.doctor-card[_ngcontent-%COMP%]   .location-tag[_ngcontent-%COMP%]:hover{background:#dc354526}.doctor-card[_ngcontent-%COMP%]   .experience-tag[_ngcontent-%COMP%]{background:#28a7451a;color:#28a745}.doctor-card[_ngcontent-%COMP%]   .experience-tag[_ngcontent-%COMP%]:hover{background:#28a74526}.alert-warning[_ngcontent-%COMP%]{background:#edc40e1a;border:none;border-radius:12px;padding:1rem;display:flex;align-items:center;gap:.5rem}.alert-warning[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#edc40e}@media (max-width: 1200px){.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]{width:120px;height:120px}.doctor-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1.1rem}}@media (max-width: 992px){.doctor-card[_ngcontent-%COMP%]{padding:1.25rem!important}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]{width:110px;height:110px}}@media (max-width: 768px){.doctor-card[_ngcontent-%COMP%]{margin-bottom:1rem}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]{width:100px;height:100px}.doctor-card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem}.doctor-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem}.doctor-card[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.9rem}}@media (max-width: 576px){.doctor-card[_ngcontent-%COMP%]{text-align:center}.doctor-card[_ngcontent-%COMP%]   .doctor-card-img[_ngcontent-%COMP%]{width:120px;height:120px;margin-bottom:1rem}.doctor-card[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{justify-content:center}}.btn-filter[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0070f3,#7928ca);color:#fff;border:none;padding:.75rem 1.5rem;border-radius:12px;font-weight:600;position:relative;overflow:hidden;transition:all .3s ease}.btn-filter[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.btn-filter[_ngcontent-%COMP%]   .ripple[_ngcontent-%COMP%]{position:absolute;border-radius:50%;transform:scale(0);animation:_ngcontent-%COMP%_ripple .6s linear;background-color:#ffffff4d}.filter-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:1.5rem;box-shadow:0 4px 20px #00000014;margin-bottom:2rem;transition:all .3s ease}.search-wrapper[_ngcontent-%COMP%]{position:relative}.search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#0070f3;font-size:1.1rem}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem;border:2px solid rgba(0,112,243,.1);border-radius:12px;font-size:1rem;transition:all .3s ease}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0070f3;box-shadow:0 0 0 3px #0070f31a}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#343a40;cursor:pointer;padding:.25rem;opacity:.6;transition:all .3s ease}.search-wrapper[_ngcontent-%COMP%]   .clear-search[_ngcontent-%COMP%]:hover{opacity:1;color:#dc3545}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#343a40}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   i.icon-specialty[_ngcontent-%COMP%]{color:#0070f3}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   i.icon-location[_ngcontent-%COMP%]{color:#dc3545}.filter-group[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   i.icon-experience[_ngcontent-%COMP%]{color:#28a745}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{position:relative}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid rgba(0,112,243,.1);border-radius:12px;appearance:none;font-size:.95rem;transition:all .3s ease;cursor:pointer;background:#fff}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0070f3;box-shadow:0 0 0 3px #0070f31a}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   select.has-value[_ngcontent-%COMP%]{border-color:#0070f34d}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   .select-arrow[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#0070f3;pointer-events:none;transition:all .3s ease}.filter-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]:hover   .select-arrow[_ngcontent-%COMP%]{transform:translateY(-50%) translate(-3px)}.active-filters[_ngcontent-%COMP%]{padding-top:1.5rem;margin-top:1.5rem;border-top:1px solid rgba(52,58,64,.1)}.active-filters[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{font-weight:600;color:#343a40;margin-right:.5rem}.active-filters[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;background:#0070f31a;color:#0070f3;padding:.5rem 1rem;border-radius:2rem;font-size:.9rem;margin:.25rem}.active-filters[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.active-filters[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .remove-filter[_ngcontent-%COMP%]{background:none;border:none;color:inherit;margin-left:.5rem;padding:0 .25rem;cursor:pointer;opacity:.7;transition:all .3s ease}.active-filters[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]   .remove-filter[_ngcontent-%COMP%]:hover{opacity:1}.active-filters[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{background:#dc35451a;color:#dc3545;border:none;padding:.5rem 1rem;border-radius:2rem;font-size:.9rem;cursor:pointer;transition:all .3s ease}.active-filters[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]:hover{background:#dc354533;transform:translateY(-1px)}@keyframes _ngcontent-%COMP%_ripple{to{transform:scale(4);opacity:0}}@media (max-width: 768px){.filter-card[_ngcontent-%COMP%]{padding:1rem}.search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%], .filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.9rem}.active-filters[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%], .active-filters[_ngcontent-%COMP%]   .clear-all-btn[_ngcontent-%COMP%]{font-size:.8rem}}']})};var i9=ha(_T());var Kx=class n{searchQuery="";categories=[{title:"\u062D\u062C\u0632 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F",icon:"book-medical",color:"primary",description:"\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0643\u064A\u0641\u064A\u0629 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0639 \u0637\u0628\u064A\u0628\u0643 \u0627\u0644\u0645\u0641\u0636\u0644",links:[{text:"\u0643\u064A\u0641\u064A\u0629 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u062C\u062F\u064A\u062F",url:"#"},{text:"\u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F",url:"#"},{text:"\u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u0645\u062A\u0627\u062D\u0629",url:"#"}]},{title:"\u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0648\u0627\u0644\u0639\u064A\u0627\u062F\u0627\u062A",icon:"user-md",color:"success",description:"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0639\u0646 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0648\u0627\u0644\u062A\u062E\u0635\u0635\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629",links:[{text:"\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628",url:"#"},{text:"\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0623\u0637\u0628\u0627\u0621",url:"#"},{text:"\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0639\u064A\u0627\u062F\u0627\u062A",url:"#"}]},{title:"\u062D\u0633\u0627\u0628\u0643 \u0627\u0644\u0634\u062E\u0635\u064A",icon:"user-circle",color:"info",description:"\u0625\u062F\u0627\u0631\u0629 \u062D\u0633\u0627\u0628\u0643 \u0648\u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629",links:[{text:"\u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A",url:"#"},{text:"\u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",url:"#"},{text:"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062E\u0635\u0648\u0635\u064A\u0629",url:"#"}]}];faqs=[{question:"\u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0639 \u0637\u0628\u064A\u0628\u061F",answer:`\u064A\u0645\u0643\u0646\u0643 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u062A\u0628\u0627\u0639 \u0627\u0644\u062E\u0637\u0648\u0627\u062A \u0627\u0644\u062A\u0627\u0644\u064A\u0629:
        <ol>
          <li>\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0637\u0628\u064A\u0628 \u0627\u0644\u0645\u0646\u0627\u0633\u0628</li>
          <li>\u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0645\u0646 \u062C\u062F\u0648\u0644 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D\u0629</li>
          <li>\u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629</li>
          <li>\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632 \u0648\u0627\u0644\u062F\u0641\u0639</li>
        </ol>`},{question:"\u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F\u064A\u061F",answer:'\u064A\u0645\u0643\u0646\u0643 \u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F\u0643 \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u0644\u0630\u0647\u0627\u0628 \u0625\u0644\u0649 \u0635\u0641\u062D\u0629 "\u0645\u0648\u0627\u0639\u064A\u062F\u064A" \u0641\u064A \u062D\u0633\u0627\u0628\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u060C \u062B\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u0631\u0627\u062F \u062A\u0639\u062F\u064A\u0644\u0647 \u0648\u0627\u062A\u0628\u0627\u0639 \u0627\u0644\u062E\u0637\u0648\u0627\u062A.'}];ngOnInit(){i9.init({duration:800,once:!0,mirror:!1})}onSearch(t){let e=t.target.value;this.searchQuery=e,console.log("Searching for:",e)}startChat(){console.log("Starting chat...")}sendEmail(){console.log("Opening email form...")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-help-center"]],decls:112,vars:0,consts:[[1,"help-hero-section","text-center","py-5"],[1,"container"],["data-aos","fade-up",1,"display-4","mb-4","fw-bold","text-primary"],["data-aos","fade-up","data-aos-delay","100",1,"search-container"],[1,"input-group"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0633\u0624\u0627\u0644\u0643 \u0647\u0646\u0627...",1,"form-control","form-control-lg"],[1,"btn","btn-primary","btn-lg"],[1,"fas","fa-search"],[1,"help-categories","py-5"],[1,"row","g-4"],["data-aos","fade-up",1,"col-md-4"],[1,"category-card"],[1,"icon-wrapper","bg-primary-subtle"],[1,"fas","fa-book-medical","display-4","text-primary"],[1,"mt-4"],[1,"text-muted"],[1,"links-list"],["href","#",1,"help-link"],[1,"fas","fa-angle-left"],["data-aos","fade-up","data-aos-delay","100",1,"col-md-4"],[1,"icon-wrapper","bg-success-subtle"],[1,"fas","fa-user-md","display-4","text-success"],["data-aos","fade-up","data-aos-delay","200",1,"col-md-4"],[1,"icon-wrapper","bg-info-subtle"],[1,"fas","fa-user-circle","display-4","text-info"],[1,"faq-section","py-5","bg-light"],["data-aos","fade-up",1,"text-center","mb-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],["id","faqAccordion",1,"accordion","custom-accordion"],["data-aos","fade-up",1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq1",1,"accordion-button"],["id","faq1","data-bs-parent","#faqAccordion",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],["data-aos","fade-up","data-aos-delay","100",1,"accordion-item"],["type","button","data-bs-toggle","collapse","data-bs-target","#faq2",1,"accordion-button","collapsed"],["id","faq2","data-bs-parent","#faqAccordion",1,"accordion-collapse","collapse"],[1,"contact-section","py-5"],[1,"col-lg-6","text-center"],["data-aos","fade-up",1,"mb-4"],["data-aos","fade-up","data-aos-delay","100",1,"mb-4"],["data-aos","fade-up","data-aos-delay","200",1,"contact-options"],["href","#",1,"btn","btn-outline-primary","btn-lg","mx-2"],[1,"fas","fa-comments","me-2"],["href","#",1,"btn","btn-outline-success","btn-lg","mx-2"],[1,"fas","fa-envelope","me-2"]],template:function(e,r){e&1&&(w(0,"section",0)(1,"div",1)(2,"h1",2),A(3,"\u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u0627 \u0645\u0633\u0627\u0639\u062F\u062A\u0643\u061F"),b(),w(4,"div",3)(5,"div",4),G(6,"input",5),w(7,"button",6),G(8,"i",7),b()()()()(),w(9,"section",8)(10,"div",1)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),G(15,"i",13),b(),w(16,"h3",14),A(17,"\u062D\u062C\u0632 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F"),b(),w(18,"p",15),A(19,"\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0643\u064A\u0641\u064A\u0629 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0639 \u0637\u0628\u064A\u0628\u0643 \u0627\u0644\u0645\u0641\u0636\u0644"),b(),w(20,"div",16)(21,"a",17),G(22,"i",18),A(23," \u0643\u064A\u0641\u064A\u0629 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u062C\u062F\u064A\u062F "),b(),w(24,"a",17),G(25,"i",18),A(26," \u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F "),b(),w(27,"a",17),G(28,"i",18),A(29," \u0637\u0631\u0642 \u0627\u0644\u062F\u0641\u0639 \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),b()()()(),w(30,"div",19)(31,"div",11)(32,"div",20),G(33,"i",21),b(),w(34,"h3",14),A(35,"\u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0648\u0627\u0644\u0639\u064A\u0627\u062F\u0627\u062A"),b(),w(36,"p",15),A(37,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0639\u0646 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0648\u0627\u0644\u062A\u062E\u0635\u0635\u0627\u062A \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),b(),w(38,"div",16)(39,"a",17),G(40,"i",18),A(41," \u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628 "),b(),w(42,"a",17),G(43,"i",18),A(44," \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 "),b(),w(45,"a",17),G(46,"i",18),A(47," \u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0639\u064A\u0627\u062F\u0627\u062A "),b()()()(),w(48,"div",22)(49,"div",11)(50,"div",23),G(51,"i",24),b(),w(52,"h3",14),A(53,"\u062D\u0633\u0627\u0628\u0643 \u0627\u0644\u0634\u062E\u0635\u064A"),b(),w(54,"p",15),A(55,"\u0625\u062F\u0627\u0631\u0629 \u062D\u0633\u0627\u0628\u0643 \u0648\u062A\u062D\u062F\u064A\u062B \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),b(),w(56,"div",16)(57,"a",17),G(58,"i",18),A(59," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062E\u0635\u064A "),b(),w(60,"a",17),G(61,"i",18),A(62," \u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 "),b(),w(63,"a",17),G(64,"i",18),A(65," \u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062E\u0635\u0648\u0635\u064A\u0629 "),b()()()()()()(),w(66,"section",25)(67,"div",1)(68,"h2",26),A(69,"\u0627\u0644\u0623\u0633\u0626\u0644\u0629 \u0627\u0644\u0634\u0627\u0626\u0639\u0629"),b(),w(70,"div",27)(71,"div",28)(72,"div",29)(73,"div",30)(74,"h2",31)(75,"button",32),A(76," \u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0639 \u0637\u0628\u064A\u0628\u061F "),b()(),w(77,"div",33)(78,"div",34)(79,"p"),A(80,"\u064A\u0645\u0643\u0646\u0643 \u062D\u062C\u0632 \u0645\u0648\u0639\u062F \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u062A\u0628\u0627\u0639 \u0627\u0644\u062E\u0637\u0648\u0627\u062A \u0627\u0644\u062A\u0627\u0644\u064A\u0629:"),b(),w(81,"ol")(82,"li"),A(83,"\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0637\u0628\u064A\u0628 \u0627\u0644\u0645\u0646\u0627\u0633\u0628"),b(),w(84,"li"),A(85,"\u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0645\u0646 \u062C\u062F\u0648\u0644 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D\u0629"),b(),w(86,"li"),A(87,"\u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"),b(),w(88,"li"),A(89,"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u062D\u062C\u0632 \u0648\u0627\u0644\u062F\u0641\u0639"),b()()()()(),w(90,"div",35)(91,"h2",31)(92,"button",36),A(93," \u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F\u064A\u061F "),b()(),w(94,"div",37)(95,"div",34),A(96,' \u064A\u0645\u0643\u0646\u0643 \u0625\u0644\u063A\u0627\u0621 \u0623\u0648 \u062A\u0639\u062F\u064A\u0644 \u0645\u0648\u0639\u062F\u0643 \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u0644\u0630\u0647\u0627\u0628 \u0625\u0644\u0649 \u0635\u0641\u062D\u0629 "\u0645\u0648\u0627\u0639\u064A\u062F\u064A" \u0641\u064A \u062D\u0633\u0627\u0628\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u060C \u062B\u0645 \u0627\u062E\u062A\u064A\u0627\u0631 \u0627\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u0631\u0627\u062F \u062A\u0639\u062F\u064A\u0644\u0647 \u0648\u0627\u062A\u0628\u0627\u0639 \u0627\u0644\u062E\u0637\u0648\u0627\u062A. '),b()()()()()()()(),w(97,"section",38)(98,"div",1)(99,"div",27)(100,"div",39)(101,"h2",40),A(102,"\u0644\u0645 \u062A\u062C\u062F \u0645\u0627 \u062A\u0628\u062D\u062B \u0639\u0646\u0647\u061F"),b(),w(103,"p",41),A(104,"\u0641\u0631\u064A\u0642 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A \u0645\u062A\u0648\u0627\u062C\u062F \u0639\u0644\u0649 \u0645\u062F\u0627\u0631 \u0627\u0644\u0633\u0627\u0639\u0629 \u0644\u0645\u0633\u0627\u0639\u062F\u062A\u0643"),b(),w(105,"div",42)(106,"a",43),G(107,"i",44),A(108," \u0627\u0644\u0645\u062D\u0627\u062F\u062B\u0629 \u0627\u0644\u0645\u0628\u0627\u0634\u0631\u0629 "),b(),w(109,"a",45),G(110,"i",46),A(111," \u0631\u0627\u0633\u0644\u0646\u0627 "),b()()()()()())},dependencies:[In,hT],styles:['.help-hero-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8f9fa,#e9ecef);min-height:40vh;display:flex;align-items:center;position:relative;overflow:hidden}.help-hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:url(/assets/images/pattern.svg) repeat;opacity:.1;z-index:1}.help-hero-section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;z-index:2}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{box-shadow:0 10px 20px #0000001a;border-radius:50px;overflow:hidden}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;padding:15px 25px;font-size:1.1rem}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{box-shadow:none}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:15px 30px;border-radius:0 50px 50px 0}.category-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:2rem;height:100%;transition:all .3s ease;position:relative;overflow:hidden;box-shadow:0 5px 15px #0000000d}.category-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:100%;height:5px;background:var(--bs-primary);transform:scaleX(0);transform-origin:right;transition:transform .3s ease}.category-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.category-card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}.category-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:1rem;transition:transform .3s ease}.category-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transition:transform .3s ease}.category-card[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]{transform:scale(1.1)}.category-card[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:rotate(360deg)}.category-card[_ngcontent-%COMP%]   .links-list[_ngcontent-%COMP%]{margin-top:1.5rem}.category-card[_ngcontent-%COMP%]   .links-list[_ngcontent-%COMP%]   .help-link[_ngcontent-%COMP%]{display:block;padding:.5rem 0;color:var(--bs-body-color);text-decoration:none;transition:all .2s ease}.category-card[_ngcontent-%COMP%]   .links-list[_ngcontent-%COMP%]   .help-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:.5rem;transition:transform .2s ease}.category-card[_ngcontent-%COMP%]   .links-list[_ngcontent-%COMP%]   .help-link[_ngcontent-%COMP%]:hover{color:var(--bs-primary);transform:translate(-5px)}.category-card[_ngcontent-%COMP%]   .links-list[_ngcontent-%COMP%]   .help-link[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:translate(-5px)}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]{border:none;background:transparent;margin-bottom:1rem}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:1.5rem;box-shadow:0 5px 15px #0000000d;transition:all .3s ease}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:not(.collapsed){color:var(--bs-primary);background:#fff;box-shadow:0 10px 20px #0000001a}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:after{transition:transform .3s ease}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-button[_ngcontent-%COMP%]:hover{background:var(--bs-primary-bg-subtle)}.custom-accordion[_ngcontent-%COMP%]   .accordion-item[_ngcontent-%COMP%]   .accordion-body[_ngcontent-%COMP%]{padding:1.5rem;background:#fff;border-radius:0 0 10px 10px}.contact-section[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{transition:all .3s ease;border-width:2px}.contact-section[_ngcontent-%COMP%]   .contact-options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 5px 15px #0000001a}@media (max-width: 768px){.help-hero-section[_ngcontent-%COMP%]{min-height:30vh}.help-hero-section[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{width:90%}.category-card[_ngcontent-%COMP%]{padding:1.5rem}.category-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px}.contact-options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:block;margin:.5rem auto!important;width:100%;max-width:300px}}.fade-up[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px);transition:all .6s ease}.fade-up.visible[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.loading-skeleton[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_loading 1.5s infinite}@keyframes _ngcontent-%COMP%_loading{0%{background-position:200% 0}to{background-position:-200% 0}}']})};var vd=ha(LP());var o9=(n,t)=>t.uid;function Ime(n,t){n&1&&G(0,"app-loading")}function Sme(n,t){if(n&1){let e=Lt();w(0,"button",44),je("click",function(){De(e);let i=ve(2);return Pe(i.deleteSelected())}),G(1,"i",45),A(2),b()}if(n&2){let e=ve(2);W(2),Ze(" \u062D\u0630\u0641 \u0627\u0644\u0645\u062D\u062F\u062F (",e.selectedItems.size,") ")}}function Tme(n,t){if(n&1){let e=Lt();w(0,"tr")(1,"td")(2,"div",46)(3,"input",48),je("change",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.toggleSelection(i.uid))}),b()()(),w(4,"td")(5,"div",49),G(6,"img",50),b()(),w(7,"td")(8,"div",51)(9,"h4")(10,"a",52),A(11),b()(),w(12,"p"),A(13),b(),w(14,"span",53),G(15,"i",54),A(16),b(),w(17,"span",53),G(18,"i",55),A(19),b()()(),w(20,"td")(21,"span",56),A(22),b()(),w(23,"td")(24,"div",57),G(25,"i",58),A(26),b()(),w(27,"td")(28,"div",59)(29,"button",60),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.toggleDoctorVerification(i.uid,!i.isVerified))}),G(30,"i",58),b(),w(31,"button",61),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.deleteDoctor(i.uid))}),G(32,"i",45),b(),w(33,"button",62),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.selectUserForNotification(i.uid))}),G(34,"i",63),b()()()()}if(n&2){let e=t.$implicit,r=ve(3);W(3),xe("checked",r.selectedItems.has(e.uid)),W(3),xe("src",e.image||"assets/images/default-avatar.png",It),W(4),qb("routerLink","/doctor/",e.uid,""),W(),Ze(" ",e.displayName," "),W(2),st(e.email),W(3),Ze(" ",e.city," "),W(3),Ze(" ",e.syndicateRegistrationNumber," "),W(3),Ze(" ",e.specialization," "),W(2),Nt("verified",e.isVerified)("unverified",!e.isVerified),W(),Nt("fa-check-circle",e.isVerified)("fa-times-circle",!e.isVerified),W(),Ze(" ",e.isVerified?"\u0645\u0648\u062B\u0642":"\u063A\u064A\u0631 \u0645\u0648\u062B\u0642"," "),W(3),Nt("verified",e.isVerified),xe("title",e.isVerified?"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u0648\u062B\u064A\u0642":"\u062A\u0648\u062B\u064A\u0642"),W(),Nt("fa-check",!e.isVerified)("fa-times",e.isVerified)}}function Ame(n,t){if(n&1&&(w(0,"div",42)(1,"table")(2,"thead")(3,"tr")(4,"th")(5,"div",46),G(6,"input",47),b()(),w(7,"th"),A(8,"\u0627\u0644\u0635\u0648\u0631\u0629"),b(),w(9,"th"),A(10,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0628\u064A\u0628"),b(),w(11,"th"),A(12,"\u0627\u0644\u062A\u062E\u0635\u0635"),b(),w(13,"th"),A(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),b(),w(15,"th"),A(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),b()()(),w(17,"tbody"),_n(18,Tme,35,25,"tr",null,o9),b()()()),n&2){let e=ve(2);W(6),xe("checked",e.selectedItems.size===e.filteredDoctors.length&&e.filteredDoctors.length>0),W(12),yn(e.filteredDoctors)}}function Dme(n,t){n&1&&(w(0,"div",43),G(1,"i",64),A(2," \u0644\u0627 \u064A\u0648\u062C\u062F \u0623\u0637\u0628\u0627\u0621 \u0645\u062A\u0627\u062D\u064A\u0646 "),b())}function Pme(n,t){if(n&1){let e=Lt();w(0,"div",15)(1,"div",38)(2,"input",39,0),je("keyup",function(){De(e);let i=iS(3),o=ve();return Pe(o.searchDoctors(i.value))}),b()(),w(4,"div",40),Te(5,Sme,3,1,"button",41),b(),Te(6,Ame,20,1,"div",42)(7,Dme,3,0,"div",43),b()}if(n&2){let e=ve();W(5),be(e.selectedItems.size>0?5:-1),W(),be(e.filteredDoctors.length>0?6:7)}}function Mme(n,t){if(n&1){let e=Lt();w(0,"button",44),je("click",function(){De(e);let i=ve(2);return Pe(i.deleteSelected())}),G(1,"i",45),A(2),b()}if(n&2){let e=ve(2);W(2),Ze(" \u062D\u0630\u0641 \u0627\u0644\u0645\u062D\u062F\u062F (",e.selectedItems.size,") ")}}function kme(n,t){if(n&1){let e=Lt();w(0,"tr")(1,"td")(2,"div",46)(3,"input",48),je("change",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.toggleSelection(i.uid))}),b()()(),w(4,"td")(5,"div",66),G(6,"img",67),b()(),w(7,"td")(8,"div",68)(9,"h4"),A(10),b(),w(11,"p"),A(12),b()()(),w(13,"td")(14,"span",69),G(15,"i",70),A(16),b()(),w(17,"td")(18,"div",57),G(19,"i",58),A(20),b()(),w(21,"td")(22,"div",59)(23,"button",71),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.toggleUserStatus(i.uid,!i.isActive))}),G(24,"i",58),b(),w(25,"button",61),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.deleteUser(i.uid))}),G(26,"i",45),b(),w(27,"button",72),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.selectUserForNotification(i.uid))}),G(28,"i",63),b()()()()}if(n&2){let e=t.$implicit,r=ve(3);W(3),xe("checked",r.selectedItems.has(e.uid)),W(3),xe("src",e.image||"assets/images/default-avatar.png",It),W(4),st(e.displayName),W(2),st(e.email),W(4),Ze(" ",e.phone," "),W(2),Nt("active",e.isActive)("inactive",!e.isActive),W(),Nt("fa-check-circle",e.isActive)("fa-times-circle",!e.isActive),W(),Ze(" ",e.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"," "),W(3),Nt("active",e.isActive),xe("title",e.isActive?"\u062A\u0639\u0637\u064A\u0644":"\u062A\u0641\u0639\u064A\u0644"),W(),Nt("fa-check",!e.isActive)("fa-times",e.isActive)}}function Ome(n,t){if(n&1&&(w(0,"div",42)(1,"table")(2,"thead")(3,"tr")(4,"th")(5,"div",46),G(6,"input",47),b()(),w(7,"th"),A(8,"\u0627\u0644\u0635\u0648\u0631\u0629"),b(),w(9,"th"),A(10,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),b(),w(11,"th"),A(12,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),b(),w(13,"th"),A(14,"\u0627\u0644\u062D\u0627\u0644\u0629"),b(),w(15,"th"),A(16,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),b()()(),w(17,"tbody"),_n(18,kme,29,21,"tr",null,o9),b()()()),n&2){let e=ve(2);W(6),xe("checked",e.selectedItems.size===e.filteredUsers.length&&e.filteredUsers.length>0),W(12),yn(e.filteredUsers)}}function Rme(n,t){n&1&&(w(0,"div",43),G(1,"i",64),A(2," \u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646 \u0645\u062A\u0627\u062D\u064A\u0646 "),b())}function Nme(n,t){if(n&1){let e=Lt();w(0,"div",16)(1,"div",38)(2,"input",65,1),je("keyup",function(){De(e);let i=iS(3),o=ve();return Pe(o.searchUsers(i.value))}),b()(),w(4,"div",40),Te(5,Mme,3,1,"button",41),b(),Te(6,Ome,20,1,"div",42)(7,Rme,3,0,"div",43),b()}if(n&2){let e=ve();W(5),be(e.selectedItems.size>0?5:-1),W(),be(e.filteredUsers.length>0?6:7)}}var Yx=class n{constructor(t,e){this.adminService=t;this.notificationService=e}doctors=[];users=[];searchTermDoctors="";searchTermUsers="";isLoading=!1;activeTab="doctors";selectedItems=new Set;filteredDoctors=[];filteredUsers=[];notificationForm=new Du({userId:new Au("",We.required),title:new Au("",We.required),message:new Au("",We.required),type:new Au("general",We.required)});ngOnInit(){this.loadDoctors(),this.loadUsers()}loadDoctors(){this.isLoading=!0,this.adminService.getAllDoctors().subscribe({next:t=>{this.doctors=t,this.filteredDoctors=[...t],this.isLoading=!1},error:t=>{console.error("Error loading doctors:",t),this.isLoading=!1}})}loadUsers(){this.isLoading=!0,this.adminService.getAllUsers().subscribe({next:t=>{this.users=t,this.filteredUsers=[...t],this.isLoading=!1},error:t=>{console.error("Error loading users:",t),this.isLoading=!1}})}setActiveTab(t){this.activeTab=t}searchDoctors(t){this.filteredDoctors=this.doctors.filter(e=>e.displayName?.toLowerCase().includes(t.toLowerCase())||!1||e.syndicateRegistrationNumber?.toLowerCase().includes(t.toLowerCase())||!1||e.specialization?.toLowerCase().includes(t.toLowerCase())||!1||e.city?.toLowerCase().includes(t.toLowerCase())||!1||e.email?.toLowerCase().includes(t.toLowerCase())||!1)}searchUsers(t){this.filteredUsers=this.users.filter(e=>e.displayName?.toLowerCase().includes(t.toLowerCase())||!1||e.email?.toLowerCase().includes(t.toLowerCase())||!1)}toggleDoctorVerification(t,e){this.adminService.toggleDoctorVerification(t,e).subscribe({next:()=>{let r=this.doctors.find(i=>i.uid===t);r&&(r.isVerified=e,this.notificationService.sendNotification(t,{title:"\u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u062A\u062D\u0642\u0642",message:e?"\u062A\u0645 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u062D\u0633\u0627\u0628\u0643 \u0628\u0646\u062C\u0627\u062D":"\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u062A\u062D\u0642\u0642 \u0645\u0646 \u062D\u0633\u0627\u0628\u0643",type:"verification",createdAt:new Date().toISOString(),isRead:!1}))},error:r=>console.error("Error toggling verification:",r)})}toggleUserStatus(t,e){this.adminService.toggleUserStatus(t,e).subscribe({next:()=>{let r=this.users.find(i=>i.uid===t);r&&(r.isActive=e,this.notificationService.sendNotification(t,{title:"\u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u0633\u0627\u0628",message:e?"\u062A\u0645 \u062A\u0641\u0639\u064A\u0644 \u062D\u0633\u0627\u0628\u0643":"\u062A\u0645 \u062A\u0639\u0637\u064A\u0644 \u062D\u0633\u0627\u0628\u0643",type:"status",createdAt:new Date().toISOString(),isRead:!1}))},error:r=>console.error("Error toggling status:",r)})}selectUserForNotification(t){this.notificationForm.patchValue({userId:t})}sendNotification(){let t=this.notificationForm.value.userId;this.notificationService.sendNotification(t,{title:this.notificationForm.value.title,message:this.notificationForm.value.message,type:this.notificationForm.value.type,createdAt:new Date().toISOString(),isRead:!1}),this.notificationForm.reset(),alert("\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062A\u0646\u0628\u064A\u0647 \u0628\u0646\u062C\u0627\u062D")}deleteDoctor(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0637\u0628\u064A\u0628\u061F")&&this.adminService.deleteDoctor(t).subscribe({next:()=>{this.doctors=this.doctors.filter(e=>e.uid!==t)},error:e=>console.error("Error deleting doctor:",e)})}deleteUser(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u061F")&&this.adminService.deleteUser(t).subscribe({next:()=>{this.users=this.users.filter(e=>e.uid!==t)},error:e=>console.error("Error deleting user:",e)})}toggleSelection(t){this.selectedItems.has(t)?this.selectedItems.delete(t):this.selectedItems.add(t)}deleteSelected(){if(this.selectedItems.size!==0&&confirm(`\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 ${this.selectedItems.size} \u0639\u0646\u0635\u0631\u061F`)){let t=Array.from(this.selectedItems);this.adminService.batchDeleteUsers(t).subscribe({next:()=>{this.activeTab==="doctors"?this.doctors=this.doctors.filter(e=>!t.includes(e.uid)):this.users=this.users.filter(e=>!t.includes(e.uid)),this.selectedItems.clear()},error:e=>console.error("Error batch deleting:",e)})}}static \u0275fac=function(e){return new(e||n)(me(Hs),me(ea))};static \u0275cmp=_t({type:n,selectors:[["app-admin"]],decls:65,vars:11,consts:[["searchInput",""],["searchInput2",""],[1,"admin-dashboard"],[1,"dashboard-header"],[1,"header-content"],[1,"dashboard-title"],[1,"stats-cards"],[1,"stat-card","doctors"],[1,"fas","fa-user-md"],[1,"stat-info"],[1,"stat-card","users"],[1,"fas","fa-users"],[1,"dashboard-content"],[1,"custom-tabs"],[1,"tab-btn",3,"click"],[1,"content-section","doctors-section"],[1,"content-section","users-section"],["id","notificationModal","tabindex","-1","aria-labelledby","notificationModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","notificationModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title",1,"form-control"],["for","message",1,"form-label"],["id","message","formControlName","message",1,"form-control"],["for","type",1,"form-label"],["id","type","formControlName","type",1,"form-control"],["value","general"],["value","status"],["value","verification"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],[1,"search-container"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0627\u064A\u0645\u064A\u0644 \u0623\u0648 \u0631\u0642\u0645  \u0627\u0644\u0642\u064A\u062F \u0628\u0627\u0644\u0646\u0642\u0627\u0628\u0629 \u0623\u0648 \u0627\u0644\u062A\u062E\u0635\u0635 \u0623\u0648 \u0627\u0644\u0645\u062F\u064A\u0646\u0629 ",1,"form-control",3,"keyup"],[1,"section-header"],[1,"delete-selected-btn"],[1,"custom-table"],[1,"alert","alert-warning"],[1,"delete-selected-btn",3,"click"],[1,"fas","fa-trash-alt"],[1,"checkbox-wrapper"],["type","checkbox",3,"checked"],["type","checkbox",3,"change","checked"],[1,"doctor-avatar"],["alt","Doctor photo",3,"src"],[1,"doctor-info"],[3,"routerLink"],[1,"location"],[1,"fas","fa-map-marker-alt"],[1,"fas","fa-id-card"],[1,"specialization-badge"],[1,"status-badge"],[1,"fas"],[1,"action-buttons"],[1,"action-btn","verify-btn",3,"click","title"],["title","\u062D\u0630\u0641",1,"action-btn","delete-btn",3,"click"],["title","\u0625\u0631\u0633\u0627\u0644 \u062A\u0646\u0628\u064A\u0647","data-bs-toggle","modal","data-bs-target","#notificationModal",1,"action-btn","notification-btn",3,"click"],[1,"fas","fa-bell"],[1,"fas","fa-exclamation-triangle"],["type","text","placeholder","\u0627\u0628\u062D\u062B \u0639\u0646 \u0645\u0633\u062A\u062E\u062F\u0645 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0627\u064A\u0645\u064A\u0644  ",1,"form-control",3,"keyup"],[1,"user-avatar"],["alt","User photo",3,"src"],[1,"user-info"],[1,"phone-number"],[1,"fas","fa-phone"],[1,"action-btn","status-btn",3,"click","title"],["data-bs-toggle","modal","data-bs-target","#notificationModal","title","\u0625\u0631\u0633\u0627\u0644 \u062A\u0646\u0628\u064A\u0647",1,"action-btn","notification-btn",3,"click"]],template:function(e,r){e&1&&(w(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1",5),A(4,"\u0644\u0648\u062D\u0629 \u0627\u0644\u062A\u062D\u0643\u0645"),b(),w(5,"div",6)(6,"div",7),G(7,"i",8),w(8,"div",9)(9,"h3"),A(10),b(),w(11,"p"),A(12,"\u0627\u0644\u0623\u0637\u0628\u0627\u0621"),b()()(),w(13,"div",10),G(14,"i",11),w(15,"div",9)(16,"h3"),A(17),b(),w(18,"p"),A(19,"\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),b()()()()()(),w(20,"div",12)(21,"div",13)(22,"button",14),je("click",function(){return r.setActiveTab("doctors")}),G(23,"i",8),w(24,"span"),A(25,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0623\u0637\u0628\u0627\u0621"),b()(),w(26,"button",14),je("click",function(){return r.setActiveTab("users")}),G(27,"i",11),w(28,"span"),A(29,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646"),b()()(),Te(30,Ime,1,0,"app-loading")(31,Pme,8,2,"div",15)(32,Nme,8,2,"div",16),b()(),w(33,"div",17)(34,"div",18)(35,"div",19)(36,"div",20)(37,"h1",21),A(38,"\u0625\u0631\u0633\u0627\u0644 \u062A\u0646\u0628\u064A\u0647"),b(),G(39,"button",22),b(),w(40,"div",23)(41,"form",24)(42,"div",25)(43,"label",26),A(44,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),b(),G(45,"input",27),b(),w(46,"div",25)(47,"label",28),A(48,"\u0627\u0644\u0631\u0633\u0627\u0644\u0629"),b(),G(49,"textarea",29),b(),w(50,"div",25)(51,"label",30),A(52,"\u0627\u0644\u0646\u0648\u0639"),b(),w(53,"select",31)(54,"option",32),A(55,"\u0639\u0627\u0645"),b(),w(56,"option",33),A(57,"\u062D\u0627\u0644\u0629"),b(),w(58,"option",34),A(59,"\u062A\u062D\u0642\u0642"),b()()()()(),w(60,"div",35)(61,"button",36),A(62,"Close"),b(),w(63,"button",37),je("click",function(){return r.sendNotification()}),A(64,"\u0625\u0631\u0633\u0627\u0644"),b()()()()()),e&2&&(W(10),st(r.doctors.length),W(7),st(r.users.length),W(5),Nt("active",r.activeTab==="doctors"),W(4),Nt("active",r.activeTab==="users"),W(4),be(r.isLoading?30:-1),W(),be(r.activeTab==="doctors"&&!r.isLoading?31:-1),W(),be(r.activeTab==="users"&&!r.isLoading?32:-1),W(9),xe("formGroup",r.notificationForm),W(22),xe("disabled",r.notificationForm.invalid))},dependencies:[In,Gs,br,Oo,Ro,Jn,$i,_r,yr,Qi,$n,No,Hi,lo],styles:[".admin-dashboard[_ngcontent-%COMP%]{background-color:#f8f9fa;min-height:100vh;padding:2rem}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0061f2,#6e00ff);border-radius:15px;padding:2rem;margin-bottom:2rem;color:#fff;box-shadow:0 4px 20px #0000001a}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .dashboard-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:2rem;font-weight:600}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]{display:flex;gap:2rem}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:1.5rem;border-radius:12px;display:flex;align-items:center;gap:1rem;flex:1;transition:transform .3s ease}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;opacity:.9}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2rem;margin:0;font-weight:700}.admin-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .stats-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.9}.admin-dashboard[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:2rem}.admin-dashboard[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]{background:#fff;border:none;padding:1rem 2rem;border-radius:10px;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 10px #0000000d}.admin-dashboard[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.admin-dashboard[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .tab-btn.active[_ngcontent-%COMP%]{background:#0061f2;color:#fff}.admin-dashboard[_ngcontent-%COMP%]   .custom-tabs[_ngcontent-%COMP%]   .tab-btn[_ngcontent-%COMP%]:hover:not(.active){background:#f0f2f5}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:2rem;box-shadow:0 2px 15px #0000000d}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;width:300px}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#6c757d}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:.8rem 1rem .8rem 2.5rem;border:1px solid #e0e0e0;border-radius:10px;transition:all .3s ease}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{border-color:#0061f2;box-shadow:0 0 0 3px #0061f21a;outline:none}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .delete-selected-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:.8rem 1.5rem;border-radius:10px;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .delete-selected-btn[_ngcontent-%COMP%]:hover{background:#c82333}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]{overflow-x:auto}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 .5rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;background:#f8f9fa;font-weight:600;text-align:right}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;vertical-align:middle;background:#fff}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 5px 15px #0000000d}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .checkbox-wrapper[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-avatar[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;overflow:hidden}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;color:#6c757d;font-size:.9rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .doctor-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .user-info[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0061f2;margin-left:.3rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .specialization-badge[_ngcontent-%COMP%]{background:#e3f2fd;color:#0061f2;padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:20px;font-size:.9rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.verified[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.unverified[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{width:35px;height:35px;border:none;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.verify-btn[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.status-btn[_ngcontent-%COMP%]{background:#28a745;color:#fff}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.verify-btn.verified[_ngcontent-%COMP%], .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.status-btn.verified[_ngcontent-%COMP%]{background:#dc3545}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.verify-btn[_ngcontent-%COMP%]:hover, .admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.status-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff}.admin-dashboard[_ngcontent-%COMP%]   .content-section[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .action-btn.delete-btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.loading-overlay[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{left:auto;right:1rem}[dir=rtl][_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{padding:.8rem 2.5rem .8rem 1rem}"]})};var H_=ha(td());function Fme(n,t){if(n&1&&G(0,"img",9),n&2){let e=ve(3);xe("src",e.imagePreview,It)}}function Lme(n,t){n&1&&(w(0,"div",10),G(1,"i",32),b())}function Vme(n,t){if(n&1&&(w(0,"option",37),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function Bme(n,t){if(n&1&&(w(0,"option",37),A(1),b()),n&2){let e=t.$implicit;xe("value",e),W(),st(e)}}function Ume(n,t){if(n&1&&(w(0,"div",33)(1,"label",34),G(2,"i",35),A(3," \u0627\u0644\u062A\u062E\u0635\u0635"),b(),w(4,"select",36),_n(5,Vme,2,2,"option",37,Lr),b()(),w(7,"div",33)(8,"label",38),G(9,"i",39),A(10," \u0631\u0642\u0645 \u0627\u0644\u0642\u064A\u062F \u0628\u0627\u0644\u0646\u0642\u0627\u0628\u0629"),b(),G(11,"input",40),b(),w(12,"div",33)(13,"label",41),G(14,"i",42),A(15," \u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629"),b(),G(16,"input",43),b(),w(17,"div",33)(18,"label",44),G(19,"i",45),A(20," \u0627\u0644\u0645\u062F\u064A\u0646\u0629"),b(),w(21,"select",46),_n(22,Bme,2,2,"option",37,Lr),b()(),w(24,"div",33)(25,"label",47),G(26,"i",48),A(27," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u064A\u0627\u062F\u0629"),b(),G(28,"input",49),b(),w(29,"div",50)(30,"label",5),G(31,"i",48),A(32," \u0645\u0648\u0642\u0639 \u0627\u0644\u0639\u064A\u0627\u062F\u0629"),b(),G(33,"div",51),b()),n&2){let e=ve(3);W(5),yn(e.doctorSpecializations),W(17),yn(e.egyptCities)}}function jme(n,t){if(n&1){let e=Lt();w(0,"h2",1),A(1," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A "),b(),w(2,"form",2),je("ngSubmit",function(){De(e);let i=ve(2);return Pe(i.onSubmit())}),w(3,"div",3)(4,"div",4)(5,"label",5),A(6,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062E\u0635\u064A\u0629"),b(),w(7,"div",6)(8,"div",7)(9,"div",8),Te(10,Fme,1,1,"img",9)(11,Lme,2,0,"div",10),w(12,"input",11),je("change",function(i){De(e);let o=ve(2);return Pe(o.onFileSelected(i))}),b()()()()(),w(13,"div",12)(14,"label",13),G(15,"i",14),A(16," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),b(),G(17,"input",15),b(),w(18,"div",12)(19,"label",16),G(20,"i",17),A(21," \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"),b(),G(22,"input",18),b(),w(23,"div",12)(24,"label",5),G(25,"i",19),A(26," \u0627\u0644\u062C\u0646\u0633"),b(),w(27,"div",20)(28,"div",21),G(29,"input",22),w(30,"label",23),A(31," \u0630\u0643\u0631 "),b()(),w(32,"div",21),G(33,"input",24),w(34,"label",25),A(35," \u0623\u0646\u062B\u064A "),b()()()(),w(36,"div",12)(37,"label",26),G(38,"i",27),A(39," \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641"),b(),G(40,"input",28),b(),Te(41,Ume,34,0),w(42,"div",29)(43,"button",30),A(44," \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A "),G(45,"i",31),b()()()()}if(n&2){let e=ve(2);W(2),xe("formGroup",e.profileForm),W(8),be(e.imagePreview?10:11),W(31),be((e.userData==null?null:e.userData.role)==="doctor"?41:-1),W(2),xe("disabled",e.profileForm.invalid)}}function zme(n,t){n&1&&G(0,"app-loading")}function Wme(n,t){if(n&1&&Te(0,jme,46,4)(1,zme,1,0,"app-loading"),n&2){let e=ve();be(e.userData?0:1)}}function Hme(n,t){n&1&&G(0,"app-admin")}var Zx=class n{constructor(t,e,r,i,o){this.fb=t;this.auth=e;this.userService=r;this.settingsService=i;this.adminService=o;this.handleAuthState()}profileForm;user=null;userData=null;isLoggedIn=!1;isAdmin=!1;egyptCities=[];doctorSpecializations=[];PHONE_PATTERN="^[01][0,1,2,5]{1}[0-9]{8}$";imagePreview=null;mapInitialized=!1;ngOnInit(){this.egyptCities=this.settingsService.egyptCities,this.doctorSpecializations=this.settingsService.doctorSpecializations}handleAuthState(){this.auth.onAuthStateChanged(t=>{this.user=t,this.isLoggedIn=!!t,this.isAdmin=this.adminService.adminsList.some(e=>e.email===t?.email),t&&this.userService.getUserData(t.uid).subscribe(e=>{this.userData=e.val(),this.initializeForm(),this.userData?.role==="doctor"&&setTimeout(()=>this.initializeMap(),0)})})}initializeForm(){this.imagePreview=this.userData?.image||null;let t={displayName:[this.userData?.displayName||"",[We.required,We.minLength(3),We.maxLength(50)]],image:[this.userData?.image||"",[We.required]],email:[{value:this.userData?.email||"",disabled:!0},[We.required,We.email,We.pattern(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)]],phone:[this.userData?.phone||"",[We.required,We.pattern(this.PHONE_PATTERN)]],gender:[{value:this.userData?.gender||"",disabled:!0}]},e=this.userData?.role==="doctor"?{city:[this.userData?.city||"",We.required],specialization:[this.userData?.specialization||"",We.required],experience:[this.userData?.experience||"",[We.required,We.min(0),We.max(50),We.pattern(/^\d+$/)]],syndicateRegistrationNumber:[this.userData?.syndicateRegistrationNumber||"",[We.required,We.pattern(/^\d{6}$/)]],clinicAddress:[this.userData?.clinicAddress||"",We.required],location:this.fb.group({lat:[this.userData?.location?.lat||30.033,We.required],lng:[this.userData?.location?.lng||31.233,We.required]})}:{};this.profileForm=this.fb.group(Ie(Ie({},t),e))}initializeMap(){if(this.mapInitialized)return;this.mapInitialized=!0;let{lat:t,lng:e}=this.profileForm.get("location")?.value||{lat:30.033,lng:31.233},r=vd.map("map").setView([t,e],13);vd.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(r);let i=vd.icon({iconUrl:"assets/media/map markers/marker-icon-2x.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});vd.marker([t,e],{icon:i,draggable:!0}).addTo(r).on("dragend",s=>{let{lat:a,lng:u}=s.target.getLatLng();this.profileForm.patchValue({location:{lat:a,lng:u}})})}onFileSelected(t){let e=t.target;if(!e.files||e.files.length===0)return;let r=e.files[0],i=new FileReader;i.onload=()=>{this.imagePreview=i.result,this.profileForm.patchValue({image:i.result})},i.readAsDataURL(r)}onSubmit(){if(this.profileForm.invalid||!this.user||!this.userData)return;let t=this.profileForm.getRawValue(),e={displayName:t.displayName,image:t.image,phone:t.phone,gender:t.gender};this.userData.role==="doctor"?Object.assign(e,{city:t.city,specialization:t.specialization,experience:t.experience,clinicAddress:t.clinicAddress,syndicateRegistrationNumber:t.syndicateRegistrationNumber,location:t.location,isVerified:!1}):Object.assign(e,{isActive:!1}),H_.default.fire({title:"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u062B...",html:"\u0628\u0631\u062C\u0627\u0621 \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631",allowOutsideClick:!1,didOpen:()=>{H_.default.showLoading()}}),this.userService.updateUserData(this.user.uid,e).subscribe({next:()=>{this.showSuccessMessage()},error:r=>{console.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A:",r),this.showErrorMessage()}})}showSuccessMessage(){let t=this.userData?.role==="doctor";H_.default.fire({icon:"success",title:"\u062A\u0645 \u0627\u0644\u062A\u062D\u062F\u064A\u062B \u0628\u0646\u062C\u0627\u062D!",html:`
        <div class="custom-swal-content">
          <p>${t?"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0639\u064A\u0627\u062F\u0629 \u0628\u0646\u062C\u0627\u062D":"\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u0645\u0639\u0644\u0648\u0645\u0627\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629 \u0628\u0646\u062C\u0627\u062D"}
          </p>
          <p class="text-warning">
            <i class="fas fa-exclamation-triangle"></i>
            ${t?"\u0633\u064A\u062A\u0645 \u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u062A\u062D\u062F\u064A\u062B\u0627\u062A \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0625\u062F\u0627\u0631\u0629 \u0648\u0625\u0639\u0627\u062F\u0629 \u062A\u0641\u0639\u064A\u0644 \u062D\u0633\u0627\u0628\u0643 \u0642\u0631\u064A\u0628\u0627\u064B":"\u0633\u064A\u062A\u0645 \u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u062A\u062D\u062F\u064A\u062B\u0627\u062A \u0648\u0625\u0639\u0627\u062F\u0629 \u062A\u0641\u0639\u064A\u0644 \u062D\u0633\u0627\u0628\u0643 \u0645\u0646 \u0642\u0628\u0644 \u0627\u0644\u0625\u062F\u0627\u0631\u0629"}
          </p>
        </div>
      `,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",confirmButtonColor:"#28a745",showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutUp"},customClass:{container:"custom-swal-container",popup:"custom-swal-popup",title:"custom-swal-title",htmlContainer:"custom-swal-html",confirmButton:"custom-swal-button"}})}showErrorMessage(){H_.default.fire({icon:"error",title:"\u062D\u062F\u062B \u062E\u0637\u0623!",html:`
        <div class="custom-swal-content">
          <p>\u0639\u0630\u0631\u0627\u064B\u060C \u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A</p>
          <p class="text-muted">\u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649 \u0623\u0648 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u062F\u0639\u0645 \u0627\u0644\u0641\u0646\u064A</p>
        </div>
      `,confirmButtonText:"\u062D\u0627\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649",confirmButtonColor:"#dc3545",showClass:{popup:"animate__animated animate__shakeX"},customClass:{container:"custom-swal-container",popup:"custom-swal-popup",title:"custom-swal-title",htmlContainer:"custom-swal-html",confirmButton:"custom-swal-button"}})}static \u0275fac=function(e){return new(e||n)(me(qs),me(or),me(Wi),me($s),me(Hs))};static \u0275cmp=_t({type:n,selectors:[["app-control-panel"]],decls:3,vars:2,consts:[[1,"container","my-5"],[1,"text-center","mb-5","fw-bold"],[3,"ngSubmit","formGroup"],[1,"row","g-2"],[1,"mb-4","text-center"],[1,"form-label"],[1,"d-flex","justify-content-center"],[1,"position-relative"],[1,"avatar-upload"],[1,"rounded-circle",2,"width","150px","height","150px","object-fit","cover",3,"src"],[1,"avatar-placeholder","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","150px","height","150px","background-color","#e9ecef"],["type","file","accept","image/*",1,"position-absolute","top-0","start-0","opacity-0","w-100","h-100",3,"change"],[1,"col-md-4"],["for","email",1,"form-label"],[1,"fas","fa-envelope"],["type","email","id","email","formControlName","email",1,"form-control"],["for","displayName",1,"form-label"],[1,"fas","fa-user"],["type","text","id","displayName","formControlName","displayName","placeholder","\u0627\u062F\u062E\u0644 \u0627\u0633\u0645\u0643 \u0627\u0644\u0643\u0627\u0645\u0644",1,"form-control"],[1,"fas","fa-venus-mars"],[1,"d-flex","gap-4"],[1,"form-check"],["type","radio","id","male","value","male","formControlName","gender",1,"form-check-input"],["for","male",1,"form-check-label"],["type","radio","id","female","value","female","formControlName","gender",1,"form-check-input"],["for","female",1,"form-check-label"],["for","phone",1,"form-label"],[1,"fas","fa-phone"],["type","number","id","phone","formControlName","phone","placeholder","\u0627\u062F\u062E\u0644 \u0631\u0642\u0645 \u0647\u0627\u062A\u0641\u0643",1,"form-control"],[1,"col-12","text-center","mt-4"],["type","submit",1,"btn","btn-primary","px-5",3,"disabled"],[1,"fa-solid","fa-pen-to-square"],[1,"fas","fa-camera","fa-2x","text-muted"],[1,"col-md-6"],["for","specialization",1,"form-label"],[1,"fas","fa-user-md"],["id","specialization","formControlName","specialization",1,"form-select"],[3,"value"],["for","syndicateRegistrationNumber",1,"form-label"],[1,"fas","fa-user-tag"],["type","text","id","syndicateRegistrationNumber","formControlName","syndicateRegistrationNumber","placeholder","\u0631\u0642\u0645 \u0627\u0644\u062A\u062D\u0627\u0642 \u0627\u0644\u0633\u0646\u062F\u064A",1,"form-control"],["for","experience",1,"form-label"],[1,"fas","fa-calendar-alt"],["type","number","id","experience","formControlName","experience","placeholder","\u0639\u062F\u062F \u0633\u0646\u0648\u0627\u062A \u0627\u0644\u062E\u0628\u0631\u0629",1,"form-control"],["for","city",1,"form-label"],[1,"fas","fa-city"],["id","city","formControlName","city",1,"form-select"],["for","clinicAddress",1,"form-label"],[1,"fas","fa-map-marker-alt"],["type","text","id","clinicAddress","formControlName","clinicAddress","placeholder","\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u064A\u0627\u062F\u0629",1,"form-control"],[1,"col-12"],["id","map",1,"rounded","shadow-sm",2,"height","400px"]],template:function(e,r){e&1&&(w(0,"div",0),Te(1,Wme,2,1)(2,Hme,1,0,"app-admin"),b()),e&2&&(W(),be(r.user&&!r.isAdmin?1:-1),W(),be(r.isAdmin?2:-1))},dependencies:[No,br,Oo,Ro,Jn,ps,$i,Pa,_r,yr,Hi,lo,Qi,Yx],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:15px;box-shadow:0 0 20px #0000001a;padding:2rem}.form-label[_ngcontent-%COMP%]{font-weight:600;color:#2c3e50;margin-bottom:.5rem;font-size:.95rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:2px solid #e9ecef;border-radius:8px;padding:.75rem;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#4299e1;box-shadow:0 0 0 3px #4299e133}.form-control[_ngcontent-%COMP%]::placeholder{color:#a0aec0}#map[_ngcontent-%COMP%]{border-radius:12px;margin-top:.5rem;border:2px solid #e9ecef}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4299e1,#667eea);border:none;padding:.75rem 2rem;border-radius:50px;font-weight:600;transition:all .3s ease;box-shadow:0 4px 6px #4299e133}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 12px #4299e14d}.btn-primary[_ngcontent-%COMP%]:disabled{background:#cbd5e0;cursor:not-allowed;transform:none}.btn-primary[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.col-md-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem}.form-container[_ngcontent-%COMP%]{padding:1.5rem}.btn-primary[_ngcontent-%COMP%]{width:100%}}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.doctor-fields[_ngcontent-%COMP%]{background:#f8fafc;border-radius:12px;padding:1.5rem;margin:1rem 0}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#fc8181}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #fc818133}.form-control.ng-valid.ng-touched[_ngcontent-%COMP%]{border-color:#68d391}.form-control.ng-valid.ng-touched[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #68d39133}"]})};var $me=(n,t,e)=>({"fa-clock":n,"fa-check-circle":t,"fa-times-circle":e}),qme=n=>["/doctor",n];function Gme(n,t){if(n&1&&(w(0,"div",19),G(1,"i",29),w(2,"div",21)(3,"span",22),A(4,"\u0645\u0644\u0627\u062D\u0638\u0627\u062A"),b(),w(5,"span",23),A(6),b()()()),n&2){let e=ve().$implicit;W(6),st(e.notes)}}function Kme(n,t){if(n&1){let e=Lt();w(0,"div",8)(1,"div",9),G(2,"i",10),w(3,"span"),A(4),b()(),w(5,"div",11)(6,"div",12),G(7,"i",13),w(8,"h3"),A(9),b()(),w(10,"div",14)(11,"div",15),G(12,"i",16),w(13,"a",17),A(14," \u0635\u0641\u062D\u0629 \u0627\u0644\u0637\u0628\u064A\u0628 "),G(15,"i",18),b()(),w(16,"div",19),G(17,"i",20),w(18,"div",21)(19,"span",22),A(20,"\u0645\u0648\u0639\u062F \u0627\u0644\u062D\u062C\u0632"),b(),w(21,"span",23),A(22),nn(23,"date"),nn(24,"date"),nn(25,"date"),b(),w(26,"span",23),A(27),b()()(),Te(28,Gme,7,1,"div",19),w(29,"div",24),G(30,"i",25),w(31,"div",21)(32,"span",22),A(33,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u062D\u062C\u0632"),b(),w(34,"span",23),A(35),nn(36,"date"),b()()()()(),w(37,"div",26)(38,"button",27),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.deleteBooking(i))}),G(39,"i",28),w(40,"span"),A(41,"\u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0645\u0648\u0639\u062F"),b()()()()}if(n&2){let e=t.$implicit,r=ve(3);xe("ngClass","status-"+e.status),W(2),xe("ngClass",Yb(25,$me,e.status==="pending",e.status==="confirmed",e.status==="cancelled")),W(2),st(e.status==="pending"?"\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631":e.status==="confirmed"?"\u0645\u0624\u0643\u062F":"\u0645\u0644\u063A\u064A"),W(5),st(e.service),W(4),xe("routerLink",ph(29,qme,e.doctorId)),W(9),Sl(" ",bn(23,13,e.slot.startDate,"shortDate")," - ",bn(24,16,e.slot.startDate,"shortTime")," - ",bn(25,19,e.slot.endDate,"shortTime")," "),W(4),gc("color",r.getTimeStatus(e.slot.startDate)==="\u0627\u0646\u062A\u0647\u0649 \u0627\u0644\u0645\u0648\u0639\u062F"?"red":"green"),W(),Ze(" ",r.getTimeStatus(e.slot.startDate)," "),W(),be(e.notes?28:-1),W(7),st(bn(36,22,e.createdAt,"medium"))}}function Yme(n,t){if(n&1&&(w(0,"div",6),_n(1,Kme,42,31,"div",8,Lr),b()),n&2){let e=ve(2);W(),yn(e.bookings)}}function Zme(n,t){n&1&&(w(0,"div",7)(1,"div",30),G(2,"i",31),b(),w(3,"h3"),A(4,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0648\u0627\u0639\u064A\u062F"),b(),w(5,"p"),A(6,"\u0644\u0645 \u064A\u062A\u0645 \u0627\u0644\u0639\u062B\u0648\u0631 \u0639\u0644\u0649 \u0623\u064A \u0645\u0648\u0627\u0639\u064A\u062F \u062D\u0627\u0644\u064A\u0629"),b(),w(7,"a",32),G(8,"i",33),A(9," \u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0627\u064B \u062C\u062F\u064A\u062F\u0627\u064B "),b()())}function Qme(n,t){if(n&1&&Te(0,Yme,3,0,"div",6)(1,Zme,10,0,"div",7),n&2){let e=ve();be(e.bookings.length>0?0:1)}}function Xme(n,t){n&1&&(w(0,"div",5),G(1,"app-loading"),b())}var Qx=class n{constructor(t,e,r){this.auth=t;this.bookingsService=e;this.userService=r}user;userData=null;userId="";isLoggedIn=!1;bookings;today=new Date;ngOnInit(){this.auth.onAuthStateChanged(t=>{t&&(this.userId=t.uid,this.loadUserData(),this.bookingsService.getClientBookings(this.userId).subscribe(e=>{this.bookings=e}))})}loadUserData(){this.userService.getUserData(this.userId).subscribe(t=>{this.userData=t.val(),console.log(this.userData)})}deleteBooking(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0639\u062F\u061F")&&this.bookingsService.deleteBooking(t.bookingId).subscribe(()=>{this.bookings=this.bookings.filter(e=>e.bookingId!==t.bookingId)})}getTimeStatus(t){let e=new Date,r=new Date(t);if(e>r)return"\u0627\u0646\u062A\u0647\u0649 \u0627\u0644\u0645\u0648\u0639\u062F";let i=Math.abs(r.getTime()-e.getTime()),o=Math.ceil(i/(1e3*60*60*24)),s=Math.ceil(i/(1e3*60*60));return o>1?`\u0645\u062A\u0628\u0642\u064A ${o} \u064A\u0648\u0645`:s>1?`\u0645\u062A\u0628\u0642\u064A ${s} \u0633\u0627\u0639\u0629`:"\u0627\u0644\u0645\u0648\u0639\u062F \u062E\u0644\u0627\u0644 \u0633\u0627\u0639\u0629"}static \u0275fac=function(e){return new(e||n)(me(or),me(gd),me(Wi))};static \u0275cmp=_t({type:n,selectors:[["app-appointments"]],decls:9,vars:1,consts:[[1,"appointments-page"],[1,"page-header"],[1,"page-title"],[1,"fa-solid","fa-calendar-check"],[1,"page-subtitle"],[1,"loading-state"],[1,"appointments-grid"],[1,"empty-state"],[1,"appointment-card",3,"ngClass"],[1,"status-badge"],[1,"fas",3,"ngClass"],[1,"appointment-content"],[1,"service-info"],[1,"fa-solid","fa-stethoscope"],[1,"appointment-details"],[1,"detail-item","doctor-link"],[1,"fa-solid","fa-user-doctor"],[3,"routerLink"],[1,"fas","fa-external-link-alt"],[1,"detail-item"],[1,"fa-regular","fa-clock"],[1,"detail-content"],[1,"detail-label"],[1,"detail-value"],[1,"detail-item","creation-date"],[1,"fa-regular","fa-calendar-plus"],[1,"appointment-actions"],[1,"action-button","delete-btn",3,"click"],[1,"fa-solid","fa-trash-alt"],[1,"fa-regular","fa-note-sticky"],[1,"empty-state-icon"],[1,"fa-solid","fa-calendar-xmark"],["routerLink","/doctors",1,"book-now-btn"],[1,"fas","fa-plus-circle"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"h1",2),G(3,"i",3),A(4," \u0645\u0648\u0627\u0639\u064A\u062F\u064A "),b(),w(5,"p",4),A(6,"\u0625\u062F\u0627\u0631\u0629 \u0648\u0639\u0631\u0636 \u062C\u0645\u064A\u0639 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u062E\u0627\u0635\u0629 \u0628\u0643"),b()(),Te(7,Qme,2,1)(8,Xme,2,0,"div",5),b()),e&2&&(W(7),be(r.bookings?7:8))},dependencies:[In,Ca,bc,Qi,$n],styles:[".appointments-page[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f6f9fc,#f1f4f8);padding:2rem 1rem}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#2196f3;margin-bottom:.5rem;display:flex;align-items:center;justify-content:center;gap:1rem}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#757575;font-size:1.1rem}.appointments-grid[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;gap:1.5rem;grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}.appointment-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 8px 24px #00000014;transition:transform .3s ease;position:relative}.appointment-card[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.appointment-card.status-pending[_ngcontent-%COMP%]{border-top:4px solid #ffc107}.appointment-card.status-pending[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#ffc1071a;color:#ffc107}.appointment-card.status-confirmed[_ngcontent-%COMP%]{border-top:4px solid #4caf50}.appointment-card.status-confirmed[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#4caf501a;color:#4caf50}.appointment-card.status-cancelled[_ngcontent-%COMP%]{border-top:4px solid #f44336}.appointment-card.status-cancelled[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{background:#f443361a;color:#f44336}.status-badge[_ngcontent-%COMP%]{padding:.8rem 1.5rem;display:flex;align-items:center;gap:.5rem;font-weight:500}.status-badge[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.appointment-content[_ngcontent-%COMP%]{padding:1.5rem}.service-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1.5rem}.service-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#2196f3;background:#2196f31a;padding:1rem;border-radius:12px}.service-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333;font-size:1.2rem}.appointment-details[_ngcontent-%COMP%]{display:grid;gap:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem}.detail-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#757575;font-size:1.2rem;margin-top:.2rem}.detail-item[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.2rem}.detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{color:#757575;font-size:.9rem}.detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#333;font-weight:500}.detail-item.doctor-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#2196f3;text-decoration:none;font-weight:500;display:flex;align-items:center;gap:.5rem}.detail-item.doctor-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.detail-item.doctor-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.detail-item.creation-date[_ngcontent-%COMP%]{margin-top:.5rem;padding-top:.5rem;border-top:1px solid #eee}.detail-item.creation-date[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{color:#757575;font-size:.9rem}.appointment-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;display:flex;justify-content:flex-end}.appointment-actions[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{border:none;background:none;padding:.8rem 1.5rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;cursor:pointer;transition:all .3s ease}.appointment-actions[_ngcontent-%COMP%]   .action-button.delete-btn[_ngcontent-%COMP%]{color:#f44336}.appointment-actions[_ngcontent-%COMP%]   .action-button.delete-btn[_ngcontent-%COMP%]:hover{background:#f443361a}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;background:#fff;border-radius:20px;box-shadow:0 8px 24px #00000014;max-width:600px;margin:0 auto}.empty-state[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]{font-size:4rem;color:#757575;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   .empty-state-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#757575;margin-bottom:2rem}.empty-state[_ngcontent-%COMP%]   .book-now-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:1rem 2rem;background:#2196f3;color:#fff;text-decoration:none;border-radius:12px;font-weight:500;transition:all .3s ease}.empty-state[_ngcontent-%COMP%]   .book-now-btn[_ngcontent-%COMP%]:hover{background:#1976d2;transform:translateY(-2px)}.loading-state[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:400px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:2rem}.appointments-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.appointment-card[_ngcontent-%COMP%]{margin:0 1rem}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.appointment-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease forwards}[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2196f3;border-radius:4px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#1976d2}"]})};var Bk=ha(td());var Xx=class n{constructor(t){this.db=t}addAvailableSlot(t,e){let r=this.generateUniqueId(),i=jt(this.db,`users/${t}/availableSlots`);return rt(ai(i)).pipe(ti(o=>{let s=o.val()||[],a=Ie({id:r},e);return fs(i,[...s,a])}))}generateUniqueId(){return Math.random().toString(36).substring(2,10)}getAvailableSlots(t){let e=jt(this.db,`users/${t}/availableSlots`);return rt(ai(e)).pipe(ct(r=>r.val()||[]))}deleteAvailableSlot(t,e){let r=jt(this.db,`users/${t}/availableSlots`);return rt(ai(r)).pipe(ti(i=>{let s=(i.val()||[]).filter(a=>a.id!==e);return fs(r,s)}))}updateAvailableSlot(t,e,r){let i=jt(this.db,`users/${t}/availableSlots`);return rt(ai(i)).pipe(ti(o=>{let a=(o.val()||[]).map(u=>u.id===e?Ie(Ie({},u),r):u);return fs(i,a)}))}static \u0275fac=function(e){return new(e||n)(qe(xi))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};var ege=()=>["\u0627\u0644\u0623\u062D\u062F","\u0627\u0644\u0627\u062B\u0646\u064A\u0646","\u0627\u0644\u062B\u0644\u0627\u062B\u0627\u0621","\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621","\u0627\u0644\u062E\u0645\u064A\u0633","\u0627\u0644\u062C\u0645\u0639\u0629","\u0627\u0644\u0633\u0628\u062A"],tge=(n,t)=>t.id;function nge(n,t){if(n&1){let e=Lt();w(0,"div",13)(1,"input",30),je("change",function(i){De(e);let o=ve(3);return Pe(o.onDaySelect(i))}),b(),w(2,"label",31),A(3),b()()}if(n&2){let e=t.$implicit;W(),xe("value",e),W(2),st(e)}}function rge(n,t){n&1&&(w(0,"div",12)(1,"label",7),A(2,"\u0623\u064A\u0627\u0645 \u0627\u0644\u062A\u0643\u0631\u0627\u0631"),b(),w(3,"div",29),_n(4,nge,4,2,"div",13,h0),b()()),n&2&&(W(4),yn(Gb(0,ege)))}function ige(n,t){if(n&1){let e=Lt();w(0,"button",32),je("click",function(){De(e);let i=ve(2);return Pe(i.resetForm())}),A(1," \u0625\u0644\u063A\u0627\u0621 "),b()}}function oge(n,t){n&1&&(w(0,"div",27),A(1," \u0644\u0627 \u064A\u0645\u0643\u0646\u0643 \u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0627\u0639\u064A\u062F \u0625\u0644\u0627 \u0625\u0630\u0627 \u0643\u0646\u062A \u0637\u0628\u064A\u0628\u0627\u064B \u0645\u0639\u062A\u0645\u062F\u0627\u064B \u0648\u0645\u0648\u062B\u0648\u0642 \u0628\u0647. "),b())}function sge(n,t){n&1&&(w(0,"span",39),A(1,"\u0623\u0633\u0628\u0648\u0639\u064A"),b())}function age(n,t){n&1&&(w(0,"span",40),A(1,"\u0645\u0631\u0629 \u0648\u0627\u062D\u062F\u0629"),b())}function uge(n,t){if(n&1){let e=Lt();w(0,"tr")(1,"td")(2,"div"),A(3),nn(4,"date"),b(),w(5,"div"),A(6),nn(7,"date"),b()(),w(8,"td"),A(9),b(),w(10,"td"),A(11),b(),w(12,"td"),Te(13,sge,2,0,"span",39)(14,age,2,0,"span",40),b(),w(15,"td")(16,"button",41),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.editSlot(i.id))}),G(17,"i",42),b(),w(18,"button",43),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.deleteAvailableSlot(i.id))}),G(19,"i",44),b()()()}if(n&2){let e=t.$implicit;W(3),Ze("\u0645\u0646: ",bn(4,5,e.startDate,"short"),""),W(3),Ze("\u0625\u0644\u0649: ",bn(7,8,e.endDate,"short"),""),W(3),Ze("",e.duration," \u062F\u0642\u064A\u0642\u0629"),W(2),Ze("",e.maxPatients," \u0645\u0631\u064A\u0636"),W(2),be(e.isRecurring?13:14)}}function cge(n,t){if(n&1&&(w(0,"div",28)(1,"div",33)(2,"h5",34),G(3,"i",35),A(4,"\u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F \u0627\u0644\u0645\u062A\u0627\u062D\u0629 "),b(),w(5,"div",36)(6,"table",37)(7,"thead",38)(8,"tr")(9,"th"),A(10,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),b(),w(11,"th"),A(12,"\u0627\u0644\u0645\u062F\u0629"),b(),w(13,"th"),A(14,"\u0627\u0644\u0633\u0639\u0629"),b(),w(15,"th"),A(16,"\u062A\u0643\u0631\u0627\u0631"),b(),w(17,"th"),A(18,"\u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A"),b()()(),w(19,"tbody"),_n(20,uge,20,11,"tr",null,tge),b()()()()()),n&2){let e=ve(2);W(20),yn(e.availableSlots)}}function lge(n,t){n&1&&(w(0,"div",27),A(1," \u0644\u0627 \u062A\u0648\u062C\u062F \u0645\u0648\u0627\u0639\u064A\u062F \u062D\u0627\u0644\u064A\u0627\u064B. \u0628\u0627\u062F\u0631 \u0628\u0625\u0636\u0627\u0641\u0629 \u0623\u0648\u0642\u0627\u062A \u062A\u0648\u0627\u062C\u062F\u0643 \u0644\u062A\u0633\u0647\u064A\u0644 \u0627\u0644\u062D\u062C\u0632 \u0639\u0644\u0649 \u0627\u0644\u0645\u0631\u0636\u0649. "),b())}function dge(n,t){if(n&1){let e=Lt();w(0,"form",5),je("ngSubmit",function(){De(e);let i=ve();return Pe(i.addAvailableSlot())}),w(1,"div",6)(2,"label",7),A(3,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0628\u062F\u0627\u064A\u0629"),b(),G(4,"input",8),b(),w(5,"div",6)(6,"label",7),A(7,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0646\u0647\u0627\u064A\u0629"),b(),G(8,"input",9),b(),w(9,"div",6)(10,"label",7),A(11,"\u0645\u062F\u0629 \u0627\u0644\u0643\u0634\u0641 (\u062F\u0642\u064A\u0642\u0629)"),b(),G(12,"input",10),b(),w(13,"div",6)(14,"label",7),A(15,"\u0639\u062F\u062F \u0627\u0644\u0645\u0631\u0636\u0649 \u0644\u0643\u0644 \u0645\u0648\u0639\u062F"),b(),G(16,"input",11),b(),w(17,"div",12)(18,"div",13),G(19,"input",14),w(20,"label",15),A(21," \u062A\u0643\u0631\u0627\u0631 \u0623\u0633\u0628\u0648\u0639\u064A "),b()()(),Te(22,rge,6,1,"div",12),w(23,"div",16)(24,"h6",17),A(25,"\u0648\u0642\u062A \u0627\u0644\u0631\u0627\u062D\u0629 (\u0627\u062E\u062A\u064A\u0627\u0631\u064A)"),b(),w(26,"div",18)(27,"div",19)(28,"label",20),A(29,"\u0645\u0646"),b(),G(30,"input",21),b(),w(31,"div",19)(32,"label",20),A(33,"\u0625\u0644\u0649"),b(),G(34,"input",22),b()()(),w(35,"div",23)(36,"button",24),G(37,"i",25),A(38),b(),Te(39,ige,2,0,"button",26),b()(),Te(40,oge,2,0,"div",27)(41,cge,22,0,"div",28)(42,lge,2,0,"div",27)}if(n&2){let e,r=ve();xe("formGroup",r.slotForm),W(22),be((e=r.slotForm.get("isRecurring"))!=null&&e.value?22:-1),W(14),xe("disabled",r.slotForm.invalid||!r.isDoctor||!r.userData.isVerified),W(2),Ze(" ",r.editMode?"\u062A\u062D\u062F\u064A\u062B \u0627\u0644\u0645\u0648\u0639\u062F":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0639\u062F"," "),W(),be(r.editMode?39:-1),W(),be(!r.isDoctor||!r.userData.isVerified?40:-1),W(),be(r.availableSlots.length>0?41:42)}}function hge(n,t){n&1&&G(0,"app-loading")}var Jx=class n{constructor(t,e,r,i){this.slotsService=t;this.auth=e;this.fb=r;this.userService=i;this.slotForm=this.fb.group({startDate:["",We.required],endDate:["",We.required],duration:[30,[We.required,We.min(5)]],maxPatients:[1,[We.required,We.min(1)]],isRecurring:[!1],recurringDays:[[]],breakTime:this.fb.group({start:[""],end:[""]})})}availableSlots=[];slotForm;doctorId;selectedDays=[];editMode=!1;editingSlotId=null;userData;isDoctor=!1;ngOnInit(){this.auth.onAuthStateChanged(t=>{t&&(this.doctorId=t.uid,this.loadAvailableSlots(),this.userService.getUserData(t.uid).subscribe(e=>{this.userData=e.val(),this.isDoctor=this.userData.role==="doctor"}))})}loadAvailableSlots(){this.slotsService.getAvailableSlots(this.doctorId).subscribe(t=>{this.availableSlots=t})}addAvailableSlot(){this.slotForm.invalid||(this.editMode&&this.editingSlotId?this.slotsService.updateAvailableSlot(this.doctorId,this.editingSlotId,this.slotForm.value).subscribe(()=>{this.resetForm(),this.loadAvailableSlots()}):this.slotsService.addAvailableSlot(this.doctorId,this.slotForm.value).subscribe(()=>{this.resetForm(),this.loadAvailableSlots()}))}editSlot(t){let e=this.availableSlots.find(r=>r.id===t);e&&(this.editMode=!0,this.editingSlotId=t,this.selectedDays=e.recurringDays||[],this.slotForm.patchValue({startDate:e.startDate,endDate:e.endDate,duration:e.duration,maxPatients:e.maxPatients,isRecurring:e.isRecurring,recurringDays:e.recurringDays,breakTime:{start:e.breakTime?.start||"",end:e.breakTime?.end||""}}))}deleteAvailableSlot(t){Bk.default.fire({title:"\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F\u061F",text:"\u0644\u0646 \u064A\u0645\u0643\u0646\u0643 \u0627\u0633\u062A\u0631\u062C\u0627\u0639 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0639\u062F \u0628\u0639\u062F \u062D\u0630\u0641\u0647!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"\u0646\u0639\u0645\u060C \u0627\u062D\u0630\u0641\u0647",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621"}).then(e=>{e.isConfirmed&&this.slotsService.deleteAvailableSlot(this.doctorId,t).subscribe(()=>{this.loadAvailableSlots(),Bk.default.fire({title:"\u062A\u0645 \u0627\u0644\u062D\u0630\u0641!",text:"\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0648\u0639\u062F \u0628\u0646\u062C\u0627\u062D.",icon:"success",confirmButtonText:"\u062D\u0633\u0646\u064B\u0627"})})})}resetForm(){this.slotForm.reset(),this.editMode=!1,this.editingSlotId=null}onDaySelect(t){let e=t.target;e.checked?this.selectedDays.push(e.value):this.selectedDays=this.selectedDays.filter(r=>r!==e.value),this.slotForm.patchValue({recurringDays:this.selectedDays})}static \u0275fac=function(e){return new(e||n)(me(Xx),me(or),me(qs),me(Wi))};static \u0275cmp=_t({type:n,selectors:[["app-bookings"]],decls:9,vars:1,consts:[[1,"container","py-5"],[1,"text-center","mb-5"],[1,"fw-bold","text-primary"],[1,"bi","bi-calendar-week","me-2"],[1,"text-muted"],[1,"row","gy-3","justify-content-center","shadow-sm","p-4","rounded","bg-light","mb-5",3,"ngSubmit","formGroup"],[1,"col-md-3"],[1,"form-label","fw-semibold"],["type","datetime-local","formControlName","startDate",1,"form-control"],["type","datetime-local","formControlName","endDate",1,"form-control"],["type","number","formControlName","duration","min","5",1,"form-control"],["type","number","formControlName","maxPatients","min","1",1,"form-control"],[1,"col-md-12"],[1,"form-check"],["type","checkbox","formControlName","isRecurring","id","isRecurring",1,"form-check-input"],["for","isRecurring",1,"form-check-label"],["formGroupName","breakTime",1,"col-md-6"],[1,"fw-semibold"],[1,"row"],[1,"col-6"],[1,"form-label"],["type","time","formControlName","start",1,"form-control"],["type","time","formControlName","end",1,"form-control"],[1,"col-md-12","text-center","mt-4"],["type","submit",1,"btn","btn-success","me-2",3,"disabled"],[1,"bi","bi-plus-circle","me-1"],["type","button",1,"btn","btn-outline-secondary"],[1,"alert","alert-warning","text-center","fs-5"],[1,"card","shadow-sm","border-0","rounded-4"],[1,"d-flex","gap-3"],["type","checkbox",1,"form-check-input",3,"change","value"],[1,"form-check-label"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"card-body","p-4"],[1,"card-title","mb-4","text-primary"],[1,"bi","bi-clock-history","me-2"],[1,"table-responsive"],[1,"table","table-hover","align-middle"],[1,"table-light"],[1,"badge","bg-success"],[1,"badge","bg-secondary"],[1,"btn","btn-sm","btn-outline-warning","me-2",3,"click"],[1,"fa-regular","fa-pen-to-square"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fa-regular","fa-trash-can"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"h2",2),G(3,"i",3),A(4,"\u0625\u062F\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F "),b(),w(5,"p",4),A(6,"\u0642\u0645 \u0628\u062A\u0646\u0638\u064A\u0645 \u062C\u062F\u0648\u0644\u0643 \u0648\u0625\u062F\u0627\u0631\u0629 \u0645\u0648\u0627\u0639\u064A\u062F \u0639\u064A\u0627\u062F\u062A\u0643 \u0628\u0643\u0644 \u0633\u0647\u0648\u0644\u0629"),b()(),Te(7,dge,43,7)(8,hge,1,0,"app-loading"),b()),e&2&&(W(7),be(r.availableSlots?7:8))},dependencies:[No,br,Jn,ps,kc,_r,yr,Ma,Hi,lo,x1,Qi,bc],encapsulation:2})};var s9=ha(td());var fge=(n,t,e)=>({"bg-warning text-dark":n,"bg-success":t,"bg-danger":e}),pge=(n,t)=>({"btn-warning":n,"btn-outline-warning":t}),mge=(n,t)=>({"btn-success":n,"btn-outline-success":t}),gge=(n,t)=>({"btn-danger":n,"btn-outline-danger":t});function vge(n,t){if(n&1&&(w(0,"div",18),G(1,"i",33),A(2),b()),n&2){let e=ve().$implicit;W(2),Ze(" ",e.notes," ")}}function _ge(n,t){if(n&1){let e=Lt();w(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),G(5,"i",10),A(6),b(),w(7,"span",11),A(8),b()(),w(9,"div",12)(10,"div",13),G(11,"i",14),w(12,"strong"),A(13,"\u0627\u0644\u0647\u0627\u062A\u0641:"),b(),A(14),b(),w(15,"div",13),G(16,"i",15),w(17,"strong"),A(18,"\u0627\u0644\u062E\u062F\u0645\u0629:"),b(),A(19),b(),w(20,"div",13),G(21,"i",16),w(22,"strong"),A(23,"\u0627\u0644\u0648\u0642\u062A:"),b(),A(24),nn(25,"date"),nn(26,"date"),nn(27,"date"),b(),w(28,"div",13),G(29,"i",17),w(30,"strong"),A(31,"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"),b(),A(32),nn(33,"date"),b(),Te(34,vge,3,1,"div",18),b(),w(35,"div",19)(36,"a",20),G(37,"i",21),A(38," \u0627\u062A\u0635\u0627\u0644 "),b(),w(39,"a",22),G(40,"i",23),A(41," \u0648\u0627\u062A\u0633\u0627\u0628 "),b()(),w(42,"div",24)(43,"button",25),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.updateBookingStatus(i,"pending"))}),G(44,"i",26),A(45," \u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631 "),b(),w(46,"button",25),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.updateBookingStatus(i,"confirmed"))}),G(47,"i",27),A(48," \u062A\u0623\u0643\u064A\u062F "),b(),w(49,"button",25),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.updateBookingStatus(i,"cancelled"))}),G(50,"i",28),A(51," \u0625\u0644\u063A\u0627\u0621 "),b()(),w(52,"div",29)(53,"button",30),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.deleteBooking(i))}),G(54,"i",31),w(55,"span"),A(56,"\u062D\u0630\u0641 \u0627\u0644\u062D\u062C\u0632"),b(),G(57,"div",32),b()()()()()}if(n&2){let e=t.$implicit;W(6),Ze(" ",e.clientName," "),W(),xe("ngClass",Yb(30,fge,e.status==="pending",e.status==="confirmed",e.status==="cancelled")),W(),Ze(" ",e.status==="pending"?"\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631":e.status==="confirmed"?"\u0645\u0624\u0643\u062F":"\u0645\u0644\u063A\u064A"," "),W(6),Ze(" 0",e.clientPhone," "),W(5),Ze(" ",e.service," "),W(5),Sl(" ",bn(25,18,e.slot.startDate,"shortDate")," - ",bn(26,21,e.slot.startDate,"shortTime")," - ",bn(27,24,e.slot.endDate,"shortTime")," "),W(8),Ze(" ",bn(33,27,e.createdAt,"medium")," "),W(2),be(e.notes?34:-1),W(2),xe("href","tel:+20"+e.clientPhone,It),W(3),xe("href","https://wa.me/+20"+e.clientPhone,It),W(4),xe("ngClass",Kb(34,pge,e.status==="pending",e.status!=="pending"))("disabled",e.status==="pending"),W(3),xe("ngClass",Kb(37,mge,e.status==="confirmed",e.status!=="confirmed"))("disabled",e.status==="confirmed"),W(3),xe("ngClass",Kb(40,gge,e.status==="cancelled",e.status!=="cancelled"))("disabled",e.status==="cancelled")}}function yge(n,t){if(n&1&&(w(0,"div",3),_n(1,_ge,58,43,"div",5,Lr),b()),n&2){let e=ve(2);W(),yn(e.bookings)}}function bge(n,t){n&1&&(w(0,"div",4),G(1,"i",34),A(2," \u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u062C\u0648\u0632\u0627\u062A \u062D\u0627\u0644\u064A\u0627\u064B "),b())}function wge(n,t){if(n&1&&Te(0,yge,3,0,"div",3)(1,bge,3,0,"div",4),n&2){let e=ve();be(e.bookings.length>0?0:1)}}function Cge(n,t){n&1&&G(0,"app-loading")}var eE=class n{constructor(t,e,r){this.bookingsService=t;this.auth=e;this.notificationService=r}doctorId;bookings;ngOnInit(){this.auth.onAuthStateChanged(t=>{t&&(this.doctorId=t.uid,this.loadBookings())})}loadBookings(){this.bookingsService.getDoctorBookings(this.doctorId).subscribe(t=>{this.bookings=t,console.log(this.bookings)})}updateBookingStatus(t,e){t.bookingId&&this.bookingsService.updateBookingStatus(t.bookingId,e).subscribe(()=>{t.status=e,this.showStatusUpdateSuccessAlert(e),this.sendNotification(t.clientId,`\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u062C\u0632 \u0625\u0644\u0649: ${this.getStatusLabel(e)} \u0644\u0644\u0645\u0648\u0639\u062F \u0627\u0644\u0645\u062D\u062C\u0648\u0632 \u0628\u062A\u0627\u0631\u064A\u062E  ${new Date(t.createdAt).toLocaleDateString("ar-EG",{day:"2-digit",month:"2-digit",year:"numeric"})} \u0627\u0644\u0633\u0627\u0639\u0629 ${new Date(t.createdAt).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}. \u0627\u0644\u062E\u062F\u0645\u0629: ${t.service}`,`\u062A\u0645 \u062A\u062D\u062F\u064A\u062B \u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u062C\u0632 - ${t.service}`)})}deleteBooking(t){confirm("\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0639\u062F\u061F")&&this.bookingsService.deleteBooking(t.bookingId).subscribe(()=>{this.bookings=this.bookings.filter(e=>e.bookingId!==t.bookingId)})}sendNotification(t,e,r){this.notificationService.sendNotification(t,{title:r,message:e,type:"status",createdAt:new Date().toISOString(),isRead:!1})}showStatusUpdateSuccessAlert(t){s9.default.fire({icon:"success",title:"\u062A\u0645 \u0627\u0644\u062A\u062D\u062F\u064A\u062B \u0628\u0646\u062C\u0627\u062D",text:`\u062A\u0645 \u062A\u063A\u064A\u064A\u0631 \u062D\u0627\u0644\u0629 \u0627\u0644\u062D\u062C\u0632 \u0625\u0644\u0649: ${this.getStatusLabel(t)}`,confirmButtonText:"\u062D\u0633\u0646\u0627\u064B",timer:2e3})}getStatusLabel(t){switch(t){case"pending":return"\u0642\u064A\u062F \u0627\u0644\u0627\u0646\u062A\u0638\u0627\u0631";case"confirmed":return"\u0645\u0624\u0643\u062F";case"cancelled":return"\u0645\u0644\u063A\u064A";default:return""}}static \u0275fac=function(e){return new(e||n)(me(gd),me(or),me(ea))};static \u0275cmp=_t({type:n,selectors:[["app-my-appts"]],decls:6,vars:1,consts:[[1,"container","py-4"],[1,"mb-4","text-center"],[1,"fa-solid","fa-calendar-check","text-primary","ms-2"],[1,"row","g-3"],[1,"alert","alert-info","text-center","mt-4"],[1,"col-md-6"],[1,"card","shadow-sm","border-0","rounded-4","mb-4"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"fs-5","fw-bold","text-primary"],[1,"fa-solid","fa-user","ms-2","text-secondary"],[1,"badge","fs-6","px-3","py-2","rounded-pill",3,"ngClass"],[1,"mb-3"],[1,"mb-2"],[1,"fa-solid","fa-phone","text-muted","ms-2"],[1,"fa-solid","fa-stethoscope","text-muted","ms-2"],[1,"fa-regular","fa-clock","text-muted","ms-2"],[1,"fa-regular","fa-calendar-plus","text-muted","ms-2"],[1,"alert","alert-info","mt-3","mb-0","py-2","px-3"],[1,"d-flex","gap-2","mt-2","mb-3"],[1,"btn","btn-outline-primary","btn-sm","rounded-pill","w-50",3,"href"],[1,"fa-solid","fa-phone"],["target","_blank",1,"btn","btn-outline-success","btn-sm","rounded-pill","w-50",3,"href"],[1,"fa-brands","fa-whatsapp"],[1,"d-flex","justify-content-between","gap-2"],[1,"btn","btn-sm","rounded-pill","w-100",3,"click","ngClass","disabled"],[1,"fa-regular","fa-clock"],[1,"fa-solid","fa-check"],[1,"fa-solid","fa-xmark"],[1,"appointment-actions","mt-4","text-center"],["title","\u062D\u0630\u0641 \u0627\u0644\u062D\u062C\u0632",1,"btn","btn-outline-danger","btn-sm","rounded-pill","px-4","py-2","delete-action",3,"click"],[1,"fa-solid","fa-trash-alt","me-2"],[1,"ripple-effect"],[1,"fa-solid","fa-comment-dots","text-info","ms-2"],[1,"fa-solid","fa-circle-info","ms-2"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"h3",1),G(2,"i",2),A(3," \u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0645\u0631\u0636\u0649 "),b(),Te(4,wge,2,1)(5,Cge,1,0,"app-loading"),b()),e&2&&(W(4),be(r.bookings?4:5))},dependencies:[Qi,bc,In,Ca],styles:[".appointments-dashboard[_ngcontent-%COMP%]{background:linear-gradient(120deg,#e0f7fa,#f3e5f5);min-height:100vh;padding:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.card[_ngcontent-%COMP%]{background:#ffffffe6;border-radius:20px;border:none;box-shadow:0 8px 32px #1f268726;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);transition:transform .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card-header[_ngcontent-%COMP%]{background:linear-gradient(45deg,#2196f3,#1976d2);color:#fff;border-radius:20px 20px 0 0!important;padding:1.5rem}.btn[_ngcontent-%COMP%]{border-radius:25px!important;padding:.5rem 1.5rem;font-weight:500;transition:all .3s ease;text-shadow:0 1px 2px rgba(0,0,0,.1)}.btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 5px 15px #0000001a}.btn-warning[_ngcontent-%COMP%], .btn-outline-warning[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#ffc107,#ff9800)!important;border:none}.btn-success[_ngcontent-%COMP%], .btn-outline-success[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#4caf50,#388e3c)!important;border:none}.btn-danger[_ngcontent-%COMP%], .btn-outline-danger[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#f44336,#d32f2f)!important;border:none}.alert[_ngcontent-%COMP%]{border-radius:15px;padding:1.5rem;background:#2196f31a;border:2px dashed #2196f3;font-size:1.1rem}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.3rem;animation:_ngcontent-%COMP%_bounce 1s infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-5px)}}app-loading[_ngcontent-%COMP%]{display:block;margin:2rem auto;text-align:center}"]})};function xge(n,t){if(n&1&&(w(0,"div",15)(1,"div",30)(2,"div",31),G(3,"i"),b(),w(4,"h3"),A(5),b(),w(6,"p"),A(7),b()()()),n&2){let e=t.$implicit;W(3),$b(e.icon),W(2),st(e.title),W(2),st(e.description)}}function Ege(n,t){if(n&1&&(w(0,"div",17)(1,"div",32)(2,"div",33),A(3),b(),w(4,"div",34),A(5),b()()()),n&2){let e=t.$implicit;W(3),st(e.value),W(2),st(e.label)}}function Ige(n,t){if(n&1&&(w(0,"a",42),G(1,"i",43),b()),n&2){let e=ve().$implicit;xe("href",e.social.facebook,It)}}function Sge(n,t){if(n&1&&(w(0,"a",42),G(1,"i",44),b()),n&2){let e=ve().$implicit;xe("href",e.social.twitter,It)}}function Tge(n,t){if(n&1&&(w(0,"a",42),G(1,"i",45),b()),n&2){let e=ve().$implicit;xe("href",e.social.linkedin,It)}}function Age(n,t){if(n&1&&(w(0,"a",42),G(1,"i",46),b()),n&2){let e=ve().$implicit;xe("href",e.social.github,It)}}function Dge(n,t){if(n&1&&(w(0,"div",19)(1,"div",35)(2,"div",36),G(3,"img",37),b(),w(4,"div",38)(5,"h3"),A(6),b(),w(7,"div",39),A(8),b(),w(9,"p",40),A(10),b(),w(11,"div",41),Te(12,Ige,2,1,"a",42)(13,Sge,2,1,"a",42)(14,Tge,2,1,"a",42)(15,Age,2,1,"a",42),b()()()()),n&2){let e=t.$implicit;W(3),xe("src",e.image,It)("alt",e.name),W(3),st(e.name),W(2),st(e.role),W(2),st(e.bio),W(2),be(e.social.facebook?12:-1),W(),be(e.social.twitter?13:-1),W(),be(e.social.linkedin?14:-1),W(),be(e.social.github?15:-1)}}var tE=class n{features=[{icon:"fas fa-user-md",title:"\u0623\u0637\u0628\u0627\u0621 \u0645\u062A\u062E\u0635\u0635\u0648\u0646",description:"\u0646\u0648\u0641\u0631 \u0644\u0643 \u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0627\u0644\u0645\u062A\u062E\u0635\u0635\u064A\u0646 \u0641\u064A \u0645\u062E\u062A\u0644\u0641 \u0627\u0644\u0645\u062C\u0627\u0644\u0627\u062A \u0627\u0644\u0637\u0628\u064A\u0629"},{icon:"fas fa-calendar-check",title:"\u062D\u062C\u0632 \u0633\u0647\u0644 \u0648\u0633\u0631\u064A\u0639",description:"\u0627\u062D\u062C\u0632 \u0645\u0648\u0639\u062F\u0643 \u0641\u064A \u0623\u064A \u0648\u0642\u062A \u0648\u0628\u0636\u063A\u0637\u0629 \u0632\u0631 \u0648\u0627\u062D\u062F\u0629"},{icon:"fas fa-star",title:"\u062A\u0642\u064A\u064A\u0645\u0627\u062A \u0645\u0648\u062B\u0648\u0642\u0629",description:"\u0627\u0637\u0644\u0639 \u0639\u0644\u0649 \u062A\u0642\u064A\u064A\u0645\u0627\u062A \u0627\u0644\u0645\u0631\u0636\u0649 \u0627\u0644\u0633\u0627\u0628\u0642\u064A\u0646 \u0648\u0627\u062E\u062A\u0631 \u0637\u0628\u064A\u0628\u0643 \u0628\u062B\u0642\u0629"},{icon:"fas fa-clock",title:"\u0645\u062A\u0627\u0628\u0639\u0629 \u0641\u0648\u0631\u064A\u0629",description:"\u062A\u0644\u0642\u064A \u0625\u0634\u0639\u0627\u0631\u0627\u062A \u0648\u062A\u0630\u0643\u064A\u0631\u0627\u062A \u0628\u0645\u0648\u0627\u0639\u064A\u062F\u0643 \u0627\u0644\u0642\u0627\u062F\u0645\u0629"}];teamMembers=[{name:"\u062F. \u0623\u062D\u0645\u062F \u0645\u062D\u0645\u062F",role:"\u0627\u0644\u0645\u0624\u0633\u0633 \u0648\u0627\u0644\u0631\u0626\u064A\u0633 \u0627\u0644\u062A\u0646\u0641\u064A\u0630\u064A",image:"assets/images/team/doctor1.jpg",bio:"\u062E\u0628\u0631\u0629 15 \u0639\u0627\u0645\u0627\u064B \u0641\u064A \u0645\u062C\u0627\u0644 \u0627\u0644\u0637\u0628 \u0648\u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u062E\u062F\u0645\u0627\u062A \u0627\u0644\u0635\u062D\u064A\u0629 \u0627\u0644\u0631\u0642\u0645\u064A\u0629",social:{linkedin:"#",twitter:"#"}},{name:"\u0645. \u0633\u0627\u0631\u0629 \u0623\u062D\u0645\u062F",role:"\u0645\u062F\u064A\u0631 \u0627\u0644\u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u062A\u0642\u0646\u064A",image:"assets/images/team/developer1.jpg",bio:"\u0645\u062A\u062E\u0635\u0635\u0629 \u0641\u064A \u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u0645\u0646\u0635\u0627\u062A \u0627\u0644\u0637\u0628\u064A\u0629 \u0648\u062A\u062D\u0633\u064A\u0646 \u062A\u062C\u0631\u0628\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",social:{github:"#",linkedin:"#"}},{name:"\u0623. \u0645\u062D\u0645\u062F \u0639\u0644\u064A",role:"\u0645\u062F\u064A\u0631 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062A \u0627\u0644\u0637\u0628\u064A\u0629",image:"assets/images/team/manager1.jpg",bio:"\u062E\u0628\u064A\u0631 \u0641\u064A \u062A\u0637\u0648\u064A\u0631 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062A \u0645\u0639 \u0627\u0644\u0645\u0633\u062A\u0634\u0641\u064A\u0627\u062A \u0648\u0627\u0644\u0645\u0631\u0627\u0643\u0632 \u0627\u0644\u0637\u0628\u064A\u0629",social:{linkedin:"#",facebook:"#"}}];statistics=[{value:"50,000+",label:"\u0645\u0631\u064A\u0636"},{value:"1,000+",label:"\u0637\u0628\u064A\u0628"},{value:"100+",label:"\u062A\u062E\u0635\u0635 \u0637\u0628\u064A"},{value:"30+",label:"\u0645\u062F\u064A\u0646\u0629"}];constructor(){}ngOnInit(){this.initializeAnimations()}initializeAnimations(){let t={threshold:.1},e=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&i.target.classList.add("animate")})},t);document.querySelectorAll(".fade-in, .slide-in, .scale-in").forEach(r=>{e.observe(r)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-about"]],decls:61,vars:0,consts:[[1,"about-page"],[1,"hero-section"],[1,"container"],[1,"row","align-items-center"],[1,"col-lg-6"],[1,"fade-in"],[1,"lead","slide-in"],[1,"cta-buttons","fade-in"],["routerLink","/register",1,"btn","btn-primary","btn-lg","me-3"],["routerLink","/doctors",1,"btn","btn-outline-primary","btn-lg"],[1,"hero-image","scale-in"],["src","assets/images/logo-image.png","alt","\u0637\u0628\u064A\u0628\u064A - \u0627\u0644\u0631\u0639\u0627\u064A\u0629 \u0627\u0644\u0635\u062D\u064A\u0629 \u0627\u0644\u0631\u0642\u0645\u064A\u0629",1,"img-fluid"],[1,"features-section"],[1,"section-title","text-center","fade-in"],[1,"row","g-4"],[1,"col-md-6","col-lg-3"],[1,"statistics-section"],[1,"col-6","col-md-3"],[1,"team-section"],[1,"col-md-6","col-lg-4"],[1,"contact-section"],[1,"contact-content","fade-in"],[1,"lead"],[1,"contact-info"],[1,"info-item"],[1,"fas","fa-envelope"],[1,"fas","fa-phone"],[1,"fas","fa-map-marker-alt"],[1,"contact-image","scale-in"],["src","assets/images/about/contact-image.png","alt","\u0627\u062A\u0635\u0644 \u0628\u0646\u0627",1,"img-fluid"],[1,"feature-card","slide-in"],[1,"icon-wrapper"],[1,"stat-card","scale-in"],[1,"stat-value"],[1,"stat-label"],[1,"team-card","slide-in"],[1,"member-image"],[3,"src","alt"],[1,"member-info"],[1,"role"],[1,"bio"],[1,"social-links"],["target","_blank",3,"href"],[1,"fab","fa-facebook"],[1,"fab","fa-twitter"],[1,"fab","fa-linkedin"],[1,"fab","fa-github"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),A(6,"\u0645\u0646\u0635\u0629 \u0637\u0628\u064A\u0628\u064A"),b(),w(7,"p",6),A(8,"\u0646\u062D\u0646 \u0646\u0633\u0639\u0649 \u0644\u062A\u0633\u0647\u064A\u0644 \u0631\u062D\u0644\u0629 \u0627\u0644\u0631\u0639\u0627\u064A\u0629 \u0627\u0644\u0635\u062D\u064A\u0629 \u0645\u0646 \u062E\u0644\u0627\u0644 \u0631\u0628\u0637 \u0627\u0644\u0645\u0631\u0636\u0649 \u0628\u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0637\u0628\u0627\u0621 \u0641\u064A \u0645\u0635\u0631"),b(),w(9,"div",7)(10,"a",8),A(11,"\u0627\u0646\u0636\u0645 \u0625\u0644\u064A\u0646\u0627"),b(),w(12,"a",9),A(13,"\u0627\u0628\u062D\u062B \u0639\u0646 \u0637\u0628\u064A\u0628"),b()()(),w(14,"div",4)(15,"div",10),G(16,"img",11),b()()()()(),w(17,"section",12)(18,"div",2)(19,"h2",13),A(20,"\u0644\u0645\u0627\u0630\u0627 \u0637\u0628\u064A\u0628\u064A\u061F"),b(),w(21,"div",14),_n(22,xge,8,4,"div",15,Lr),b()()(),w(24,"section",16)(25,"div",2)(26,"div",14),_n(27,Ege,6,2,"div",17,Lr),b()()(),w(29,"section",18)(30,"div",2)(31,"h2",13),A(32,"\u0641\u0631\u064A\u0642 \u0627\u0644\u0639\u0645\u0644"),b(),w(33,"div",14),_n(34,Dge,16,9,"div",19,Lr),b()()(),w(36,"section",20)(37,"div",2)(38,"div",3)(39,"div",4)(40,"div",21)(41,"h2"),A(42,"\u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),b(),w(43,"p",22),A(44,"\u0646\u062D\u0646 \u0647\u0646\u0627 \u0644\u0644\u0625\u062C\u0627\u0628\u0629 \u0639\u0644\u0649 \u0627\u0633\u062A\u0641\u0633\u0627\u0631\u0627\u062A\u0643 \u0648\u0645\u0633\u0627\u0639\u062F\u062A\u0643 \u0641\u064A \u0643\u0644 \u0645\u0627 \u062A\u062D\u062A\u0627\u062C"),b(),w(45,"div",23)(46,"div",24),G(47,"i",25),w(48,"span"),A(49,"info@tabiby.com"),b()(),w(50,"div",24),G(51,"i",26),w(52,"span"),A(53,"+20 123 456 7890"),b()(),w(54,"div",24),G(55,"i",27),w(56,"span"),A(57,"\u0627\u0644\u0642\u0627\u0647\u0631\u0629\u060C \u0645\u0635\u0631"),b()()()()(),w(58,"div",4)(59,"div",28),G(60,"img",29),b()()()()()()),e&2&&(W(22),yn(r.features),W(5),yn(r.statistics),W(7),yn(r.teamMembers))},dependencies:[In,$n],styles:['.about-page[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#f8fafc,#fff);overflow-x:hidden;direction:rtl}section[_ngcontent-%COMP%]{padding:80px 0;position:relative}section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1a1a1a;text-align:center;margin-bottom:3rem;position:relative}section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-10px;left:50%;transform:translate(-50%);width:60px;height:3px;background:linear-gradient(to right,#0070f3,#7928ca);border-radius:3px}.hero-section[_ngcontent-%COMP%]{min-height:80vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#0070f30d,#7928ca0d);padding:60px 0}.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem;font-weight:800;margin-bottom:1.5rem;background:linear-gradient(to right,#0070f3,#7928ca);-webkit-background-clip:text;-webkit-text-fill-color:transparent;line-height:1.2}.hero-section[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.25rem;color:#666;margin-bottom:2rem;line-height:1.6}.hero-section[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:20px;box-shadow:0 20px 40px #0000001a;transition:transform .3s ease-in-out}.hero-section[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.hero-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:12px 30px;border-radius:8px;font-weight:600;transition:all .3s ease-in-out;margin:0 10px}.hero-section[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#0070f3,#7928ca);border:none;color:#fff}.hero-section[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 15px #0070f34d}.hero-section[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]{border:2px solid #0070f3;color:#0070f3;background:transparent}.hero-section[_ngcontent-%COMP%]   .btn.btn-outline-primary[_ngcontent-%COMP%]:hover{background:#0070f3;color:#fff;transform:translateY(-3px)}.features-section[_ngcontent-%COMP%]{background:#fff}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:2rem;text-align:center;box-shadow:0 10px 30px #00000014;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 24px #00000026}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{width:70px;height:70px;margin:0 auto 1.5rem;display:flex;align-items:center;justify-content:center;border-radius:50%;background:linear-gradient(135deg,#0070f31a,#7928ca1a)}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;color:#0070f3}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;color:#1a1a1a;margin-bottom:1rem;font-weight:600}.features-section[_ngcontent-%COMP%]   .feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.6;margin:0}.statistics-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0070f3,#7928ca);color:#fff}.statistics-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#ffffff1a;border-radius:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:transform .3s ease-in-out}.statistics-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.statistics-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem}.statistics-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9}.team-section[_ngcontent-%COMP%]{background:#fff}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;overflow:hidden;box-shadow:0 10px 30px #00000014;transition:transform .3s ease-in-out,box-shadow .3s ease-in-out}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 12px 24px #00000026}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-image[_ngcontent-%COMP%]{width:100%;height:280px;overflow:hidden}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease-in-out}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;color:#1a1a1a;margin-bottom:.5rem}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{color:#0070f3;font-size:1rem;margin-bottom:1rem}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{color:#666;font-size:.9rem;line-height:1.6;margin-bottom:1.5rem}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:35px;height:35px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:#f5f5f5;color:#1a1a1a;transition:all .3s ease-in-out}.team-section[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   .member-info[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#0070f3;color:#fff;transform:translateY(-3px)}.contact-section[_ngcontent-%COMP%]{background:#fff}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;color:#1a1a1a;margin-bottom:1.5rem;font-weight:700}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1rem;background:#f8fafc;border-radius:10px;margin-bottom:1rem;transition:all .3s ease-in-out}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{transform:translate(-5px);background:#fff;box-shadow:0 5px 15px #00000014}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#0070f3}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#666;margin-left:1rem;transition:color .3s ease-in-out}.contact-section[_ngcontent-%COMP%]   .contact-content[_ngcontent-%COMP%]   .contact-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1a1a1a}.contact-section[_ngcontent-%COMP%]   .contact-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:15px;box-shadow:0 15px 30px #0000001a}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn 1s ease-out}.slide-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn 1s ease-out}.scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn 1s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@media (max-width: 992px){.hero-section[_ngcontent-%COMP%]{text-align:center}.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.8rem}.hero-section[_ngcontent-%COMP%]   .hero-image[_ngcontent-%COMP%]{margin-top:2rem}}@media (max-width: 768px){section[_ngcontent-%COMP%]{padding:60px 0}.section-title[_ngcontent-%COMP%]{font-size:2rem}.feature-card[_ngcontent-%COMP%]{margin-bottom:1.5rem}.team-card[_ngcontent-%COMP%]{margin-bottom:2rem}.contact-image[_ngcontent-%COMP%]{margin-top:2rem}}']})};function Pge(n,t){n&1&&(w(0,"div",29),G(1,"i",31),w(2,"h3"),A(3,"\u062A\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u062A\u0643 \u0628\u0646\u062C\u0627\u062D"),b(),w(4,"p"),A(5,"\u0633\u0646\u0642\u0648\u0645 \u0628\u0627\u0644\u0631\u062F \u0639\u0644\u064A\u0643 \u0641\u064A \u0623\u0642\u0631\u0628 \u0648\u0642\u062A \u0645\u0645\u0643\u0646"),b()())}function Mge(n,t){n&1&&(w(0,"div",37),A(1,"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"),b())}function kge(n,t){n&1&&(w(0,"div",37),A(1,"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u062D\u064A\u062D"),b())}function Oge(n,t){n&1&&(w(0,"div",37),A(1,"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0645\u0648\u0636\u0648\u0639 \u0627\u0644\u0631\u0633\u0627\u0644\u0629"),b())}function Rge(n,t){n&1&&(w(0,"div",37),A(1,"\u064A\u0631\u062C\u0649 \u0625\u062F\u062E\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u0644\u0627 \u062A\u0642\u0644 \u0639\u0646 10 \u0623\u062D\u0631\u0641"),b())}function Nge(n,t){if(n&1){let e=Lt();w(0,"form",32),je("ngSubmit",function(){De(e);let i=ve();return Pe(i.onSubmit())}),w(1,"div",33)(2,"div",34),G(3,"input",35)(4,"i",36),b(),Te(5,Mge,2,0,"div",37),b(),w(6,"div",33)(7,"div",34),G(8,"input",38)(9,"i",15),b(),Te(10,kge,2,0,"div",37),b(),w(11,"div",33)(12,"div",34),G(13,"input",39)(14,"i",40),b(),Te(15,Oge,2,0,"div",37),b(),w(16,"div",33)(17,"div",34),G(18,"textarea",41)(19,"i",42),b(),Te(20,Rge,2,0,"div",37),b(),w(21,"button",43),G(22,"i",44),A(23," \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),b()()}if(n&2){let e,r,i,o,s,a,u,c,d=ve();xe("formGroup",d.contactForm),W(3),Nt("is-invalid",((e=d.contactForm.get("name"))==null?null:e.invalid)&&((e=d.contactForm.get("name"))==null?null:e.touched)),W(2),be((r=d.contactForm.get("name"))!=null&&r.invalid&&((r=d.contactForm.get("name"))!=null&&r.touched)?5:-1),W(3),Nt("is-invalid",((i=d.contactForm.get("email"))==null?null:i.invalid)&&((i=d.contactForm.get("email"))==null?null:i.touched)),W(2),be((o=d.contactForm.get("email"))!=null&&o.invalid&&((o=d.contactForm.get("email"))!=null&&o.touched)?10:-1),W(3),Nt("is-invalid",((s=d.contactForm.get("subject"))==null?null:s.invalid)&&((s=d.contactForm.get("subject"))==null?null:s.touched)),W(2),be((a=d.contactForm.get("subject"))!=null&&a.invalid&&((a=d.contactForm.get("subject"))!=null&&a.touched)?15:-1),W(3),Nt("is-invalid",((u=d.contactForm.get("message"))==null?null:u.invalid)&&((u=d.contactForm.get("message"))==null?null:u.touched)),W(2),be((c=d.contactForm.get("message"))!=null&&c.invalid&&((c=d.contactForm.get("message"))!=null&&c.touched)?20:-1),W(),xe("disabled",d.contactForm.invalid)}}var nE=class n{constructor(t){this.fb=t;this.contactForm=this.fb.group({name:["",[We.required,We.minLength(3)]],email:["",[We.required,We.email]],subject:["",We.required],message:["",[We.required,We.minLength(10)]]})}contactForm;isSubmitted=!1;contactInfo={phone:"01124599015",email:"info@tabibi.com",socialLinks:{facebook:"https://facebook.com/tabibi",twitter:"https://twitter.com/tabibi",instagram:"https://instagram.com/tabibi",linkedin:"https://linkedin.com/company/tabibi"}};onSubmit(){this.contactForm.valid&&(console.log(this.contactForm.value),this.isSubmitted=!0,this.contactForm.reset())}static \u0275fac=function(e){return new(e||n)(me(qs))};static \u0275cmp=_t({type:n,selectors:[["app-contact"]],decls:54,vars:10,consts:[[1,"contact-page"],[1,"contact-hero"],[1,"hero-content"],[1,"hero-title"],[1,"hero-subtitle"],[1,"contact-container"],[1,"info-section"],[1,"info-card"],[1,"card-icon"],[1,"fas","fa-phone-alt"],[1,"contact-options"],[1,"contact-link","phone",3,"href"],[1,"fas","fa-phone"],["target","_blank",1,"contact-link","whatsapp",3,"href"],[1,"fab","fa-whatsapp"],[1,"fas","fa-envelope"],[1,"contact-link","email",3,"href"],[1,"fas","fa-share-alt"],[1,"social-links"],["target","_blank",1,"social-link","facebook",3,"href"],[1,"fab","fa-facebook-f"],["target","_blank",1,"social-link","twitter",3,"href"],[1,"fab","fa-twitter"],["target","_blank",1,"social-link","instagram",3,"href"],[1,"fab","fa-instagram"],["target","_blank",1,"social-link","linkedin",3,"href"],[1,"fab","fa-linkedin-in"],[1,"form-section"],[1,"form-container"],[1,"success-message"],[1,"contact-form",3,"formGroup"],[1,"fas","fa-check-circle"],[1,"contact-form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"input-wrapper"],["type","text","formControlName","name","placeholder","\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"],[1,"fas","fa-user"],[1,"error-message"],["type","email","formControlName","email","placeholder","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"],["type","text","formControlName","subject","placeholder","\u0627\u0644\u0645\u0648\u0636\u0648\u0639"],[1,"fas","fa-heading"],["formControlName","message","placeholder","\u0631\u0633\u0627\u0644\u062A\u0643","rows","5"],[1,"fas","fa-comment-alt"],["type","submit",1,"submit-button",3,"disabled"],[1,"fas","fa-paper-plane"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),A(4,"\u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627"),b(),w(5,"p",4),A(6,"\u0646\u062D\u0646 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062F\u062A\u0643 \u0648\u0646\u0631\u062D\u0628 \u0628\u062A\u0648\u0627\u0635\u0644\u0643 \u0645\u0639\u0646\u0627"),b()()(),w(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),G(11,"i",9),b(),w(12,"h3"),A(13,"\u0627\u062A\u0635\u0644 \u0628\u0646\u0627"),b(),w(14,"div",10)(15,"a",11),G(16,"i",12),w(17,"span"),A(18),b()(),w(19,"a",13),G(20,"i",14),w(21,"span"),A(22,"\u0648\u0627\u062A\u0633\u0627\u0628"),b()()()(),w(23,"div",7)(24,"div",8),G(25,"i",15),b(),w(26,"h3"),A(27,"\u0631\u0627\u0633\u0644\u0646\u0627"),b(),w(28,"a",16),G(29,"i",15),w(30,"span"),A(31),b()()(),w(32,"div",7)(33,"div",8),G(34,"i",17),b(),w(35,"h3"),A(36,"\u062A\u0627\u0628\u0639\u0646\u0627"),b(),w(37,"div",18)(38,"a",19),G(39,"i",20),b(),w(40,"a",21),G(41,"i",22),b(),w(42,"a",23),G(43,"i",24),b(),w(44,"a",25),G(45,"i",26),b()()()(),w(46,"div",27)(47,"div",28)(48,"h2"),A(49,"\u0627\u0631\u0633\u0644 \u0631\u0633\u0627\u0644\u0629"),b(),w(50,"p"),A(51,"\u064A\u0645\u0643\u0646\u0643 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u062A\u0643 \u0648\u0633\u0646\u0642\u0648\u0645 \u0628\u0627\u0644\u0631\u062F \u0639\u0644\u064A\u0643 \u0641\u064A \u0623\u0642\u0631\u0628 \u0648\u0642\u062A"),b(),Te(52,Pge,6,0,"div",29)(53,Nge,24,14,"form",30),b()()()()),e&2&&(W(15),xe("href","tel:+20"+r.contactInfo.phone,It),W(3),st(r.contactInfo.phone),W(),xe("href","https://wa.me/+20"+r.contactInfo.phone,It),W(9),xe("href","mailto:"+r.contactInfo.email,It),W(3),st(r.contactInfo.email),W(7),xe("href",r.contactInfo.socialLinks.facebook,It),W(2),xe("href",r.contactInfo.socialLinks.twitter,It),W(2),xe("href",r.contactInfo.socialLinks.instagram,It),W(2),xe("href",r.contactInfo.socialLinks.linkedin,It),W(8),be(r.isSubmitted?52:53))},dependencies:[In,No,br,Jn,_r,yr,Hi,lo],styles:['.contact-hero[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2);padding:6rem 2rem;text-align:center;color:#fff;position:relative;overflow:hidden}.contact-hero[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url(/assets/images/pattern.svg) center/cover;opacity:.1}.contact-hero[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]{position:relative;z-index:1}.contact-hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;font-weight:700}.contact-hero[_ngcontent-%COMP%]   .hero-subtitle[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.9}.contact-container[_ngcontent-%COMP%]{max-width:1200px;margin:-3rem auto 4rem;padding:0 1rem;position:relative;z-index:2;display:grid;grid-template-columns:1fr 2fr;gap:2rem}@media (max-width: 992px){.contact-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.info-card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;text-align:center;transition:all .3s ease}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.info-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{width:70px;height:70px;background:#2196f31a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}.info-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.8rem;color:#2196f3}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem}.contact-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.contact-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.8rem;padding:.8rem;border-radius:12px;text-decoration:none;transition:all .3s ease}.contact-link.phone[_ngcontent-%COMP%]{background:#2196f31a;color:#2196f3}.contact-link.phone[_ngcontent-%COMP%]:hover{background:#2196f3;color:#fff}.contact-link.whatsapp[_ngcontent-%COMP%]{background:#25d3661a;color:#25d366}.contact-link.whatsapp[_ngcontent-%COMP%]:hover{background:#25d366;color:#fff}.contact-link.email[_ngcontent-%COMP%]{background:#2196f31a;color:#2196f3}.contact-link.email[_ngcontent-%COMP%]:hover{background:#2196f3;color:#fff}.social-links[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.social-links[_ngcontent-%COMP%]   .social-link[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;transition:all .3s ease}.social-links[_ngcontent-%COMP%]   .social-link.facebook[_ngcontent-%COMP%]{background:#1877f2}.social-links[_ngcontent-%COMP%]   .social-link.facebook[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.social-links[_ngcontent-%COMP%]   .social-link.twitter[_ngcontent-%COMP%]{background:#1da1f2}.social-links[_ngcontent-%COMP%]   .social-link.twitter[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.social-links[_ngcontent-%COMP%]   .social-link.instagram[_ngcontent-%COMP%]{background:#e4405f}.social-links[_ngcontent-%COMP%]   .social-link.instagram[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.social-links[_ngcontent-%COMP%]   .social-link.linkedin[_ngcontent-%COMP%]{background:#0077b5}.social-links[_ngcontent-%COMP%]   .social-link.linkedin[_ngcontent-%COMP%]:hover{transform:translateY(-3px)}.form-section[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;transition:all .3s ease}.form-section[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 30px #0000001a}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.form-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#757575;margin-bottom:2rem}.contact-form[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:1rem 3rem 1rem 1rem;border:2px solid #eee;border-radius:12px;transition:all .3s ease}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#2196f3;box-shadow:0 0 0 4px #2196f31a;outline:none}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input.is-invalid[_ngcontent-%COMP%], .contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea.is-invalid[_ngcontent-%COMP%]{border-color:#f44336}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:1rem;top:50%;transform:translateY(-50%);color:#757575}.contact-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.9rem;margin-top:.5rem}.submit-button[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border:none;padding:1rem 2rem;border-radius:12px;font-size:1.1rem;display:flex;align-items:center;justify-content:center;gap:.8rem;cursor:pointer;transition:all .3s ease}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2;transform:translateY(-2px)}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.submit-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.success-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 2rem}.success-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:#4caf50;margin-bottom:1.5rem}.success-message[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:.5rem}.success-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#757575}@media (max-width: 768px){.contact-hero[_ngcontent-%COMP%]{padding:4rem 1rem}.contact-hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{font-size:2rem}.contact-container[_ngcontent-%COMP%]{margin-top:-2rem}.form-section[_ngcontent-%COMP%]{padding:1.5rem}}']})};var Fge=(n,t)=>t.id;function Lge(n,t){n&1&&(w(0,"div",3),G(1,"i",4),w(2,"p"),A(3,"\u0644\u0627 \u062A\u0648\u062C\u062F \u0625\u0634\u0639\u0627\u0631\u0627\u062A \u062C\u062F\u064A\u062F\u0629"),b()())}function Vge(n,t){if(n&1){let e=Lt();w(0,"div",6),je("click",function(){let i=De(e).$implicit,o=ve(3);return Pe(o.markAsRead(i.id))}),w(1,"div",7),G(2,"i",8),b(),w(3,"div",9)(4,"div",10)(5,"h3"),A(6),b(),w(7,"span",11),A(8),b()(),w(9,"p",12),A(10),b()()()}if(n&2){let e=t.$implicit,r=ve(3);Nt("unread",!e.isRead),W(2),$b(r.getNotificationIcon(e.type)),W(4),st(e.title),W(2),st(r.getTimeAgo(e.createdAt)),W(2),st(e.message)}}function Bge(n,t){if(n&1&&_n(0,Vge,11,7,"div",5,Fge),n&2){let e=ve();yn(e)}}function Uge(n,t){n&1&&Te(0,Lge,4,0,"div",3)(1,Bge,2,0),n&2&&be(t.length===0?0:1)}var rE=class n{constructor(t,e,r){this.notificationService=t;this.authService=e;this.auth=r;this.notifications$=new Tt}notifications$;userId=null;ngOnInit(){this.auth.onAuthStateChanged(t=>{t&&(this.userId=t.uid,this.notifications$=this.notificationService.getNotifications(t.uid))})}markAsRead(t){this.userId&&this.notificationService.markAsRead(this.userId,t)}getNotificationIcon(t){switch(t){case"verification":return"fa-check-circle";case"status":return"fa-user-circle";default:return"fa-bell"}}getTimeAgo(t){let e=new Date,r=new Date(t),i=Math.floor((e.getTime()-r.getTime())/1e3);return i<60?"\u0645\u0646\u0630 \u0644\u062D\u0638\u0627\u062A":i<3600?`\u0645\u0646\u0630 ${Math.floor(i/60)} \u062F\u0642\u064A\u0642\u0629`:i<86400?`\u0645\u0646\u0630 ${Math.floor(i/3600)} \u0633\u0627\u0639\u0629`:`\u0645\u0646\u0630 ${Math.floor(i/86400)} \u064A\u0648\u0645`}static \u0275fac=function(e){return new(e||n)(me(ea),me(nd),me(or))};static \u0275cmp=_t({type:n,selectors:[["app-notifications"]],decls:7,vars:3,consts:[[1,"notifications-container"],[1,"notifications-header"],[1,"notifications-list"],[1,"no-notifications"],[1,"fas","fa-bell-slash"],[1,"notification-item",3,"unread"],[1,"notification-item",3,"click"],[1,"notification-icon"],[1,"fas"],[1,"notification-content"],[1,"notification-header"],[1,"time"],[1,"message"]],template:function(e,r){if(e&1&&(w(0,"div",0)(1,"div",1)(2,"h2"),A(3,"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062A"),b()(),w(4,"div",2),Te(5,Uge,2,1),nn(6,"async"),b()()),e&2){let i;W(5),be((i=p0(6,1,r.notifications$))?5:-1,i)}},dependencies:[In,w0],styles:[".notifications-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;direction:rtl}.notifications-header[_ngcontent-%COMP%]{margin-bottom:2rem}.notifications-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#333;margin:0}.notifications-list[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.no-notifications[_ngcontent-%COMP%]{padding:3rem;text-align:center;color:#666}.no-notifications[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;color:#ccc}.no-notifications[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem}.notification-item[_ngcontent-%COMP%]{display:flex;padding:1rem;border-bottom:1px solid #eee;transition:background-color .2s ease;cursor:pointer}.notification-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.notification-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.notification-item.unread[_ngcontent-%COMP%]{background-color:#f0f7ff}.notification-item.unread[_ngcontent-%COMP%]:hover{background-color:#e6f3ff}.notification-item.unread[_ngcontent-%COMP%]   .notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0d6efd}.notification-icon[_ngcontent-%COMP%]{width:48px;height:48px;margin-left:1rem;background-color:#f8f9fa;border-radius:50%;display:flex;align-items:center;justify-content:center}.notification-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#6c757d}.notification-content[_ngcontent-%COMP%]{flex:1}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:.5rem}.notification-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#333}.notification-header[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.message[_ngcontent-%COMP%]{margin:0;color:#666;font-size:.95rem;line-height:1.4}"]})};var iE=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-ai-analysis"]],decls:47,vars:0,consts:[[1,"page-container"],[1,"hero-section"],[1,"main-title"],[1,"subtitle"],[1,"nav-container"],[1,"ai-analysis-nav"],[1,"nav-list"],[1,"nav-item"],["routerLink","pneumonia","routerLinkActive","active",1,"nav-link"],[1,"icon-wrapper"],[1,"fas","fa-lungs"],[1,"link-content"],[1,"link-title"],[1,"link-description"],["routerLink","liver","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-procedures"],["routerLink","heart","routerLinkActive","active",1,"nav-link"],[1,"fas","fa-heartbeat"],["routerLink","cancer","routerLinkActive","active",1,"nav-link"],[1,"fa-solid","fa-capsules"],[1,"content-container"]],template:function(e,r){e&1&&(w(0,"div",0)(1,"div",1)(2,"h1",2),A(3,"\u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0646\u0628\u0624 \u0628\u0627\u0644\u0623\u0645\u0631\u0627\u0636 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A"),b(),w(4,"p",3),A(5,"\u0627\u062E\u062A\u0631 \u0646\u0648\u0639 \u0627\u0644\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0644\u062D\u0627\u0644\u062A\u0643"),b()(),w(6,"div",4)(7,"nav",5)(8,"ul",6)(9,"li",7)(10,"a",8)(11,"div",9),G(12,"i",10),b(),w(13,"div",11)(14,"span",12),A(15,"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0627\u0644\u062A\u0647\u0627\u0628 \u0627\u0644\u0631\u0626\u0648\u064A"),b(),w(16,"span",13),A(17,"\u062A\u062D\u0644\u064A\u0644 \u0635\u0648\u0631 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629 \u0644\u0644\u0631\u0626\u0629"),b()()()(),w(18,"li",7)(19,"a",14)(20,"div",9),G(21,"i",15),b(),w(22,"div",11)(23,"span",12),A(24,"\u062A\u0646\u0628\u0624 \u062A\u0644\u064A\u0641 \u0627\u0644\u0643\u0628\u062F"),b(),w(25,"span",13),A(26,"\u062A\u062D\u0644\u064A\u0644 \u0645\u0624\u0634\u0631\u0627\u062A \u0648\u0638\u0627\u0626\u0641 \u0627\u0644\u0643\u0628\u062F"),b()()()(),w(27,"li",7)(28,"a",16)(29,"div",9),G(30,"i",17),b(),w(31,"div",11)(32,"span",12),A(33,"\u062A\u0646\u0628\u0624 \u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0642\u0644\u0628"),b(),w(34,"span",13),A(35,"\u062A\u062D\u0644\u064A\u0644 \u0645\u0624\u0634\u0631\u0627\u062A \u0635\u062D\u0629 \u0627\u0644\u0642\u0644\u0628"),b()()()(),w(36,"li",7)(37,"a",18)(38,"div",9),G(39,"i",19),b(),w(40,"div",11)(41,"span",12),A(42,"\u062A\u0646\u0628\u0624 \u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0633\u0631\u0637\u0627\u0646"),b(),w(43,"span",13),A(44,"\u062A\u062D\u0644\u064A\u0644 \u0645\u0624\u0634\u0631\u0627\u062A \u0635\u062D\u0629 \u0627\u0644\u0633\u0631\u0637\u0627\u0646"),b()()()()()()(),w(45,"div",20),G(46,"router-outlet"),b()())},dependencies:[Eh,$n],styles:['@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css";@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_float{0%{transform:translateY(0)}50%{transform:translateY(-10px)}to{transform:translateY(0)}}@keyframes _ngcontent-%COMP%_gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.page-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f6f9fc,#fff);padding:2rem 1rem}.hero-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;animation:_ngcontent-%COMP%_fadeIn 1s cubic-bezier(.4,0,.2,1)}.hero-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#1e293b;margin-bottom:1rem;background:linear-gradient(120deg,#2563eb,#1d4ed8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:_ngcontent-%COMP%_gradientBG 3s ease infinite}.hero-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.2rem;color:#64748b;margin-bottom:2rem}.nav-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 1rem}.ai-analysis-nav[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;padding:1rem;box-shadow:0 10px 30px #0000001a;transition:all .3s ease}.ai-analysis-nav[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #00000026}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;padding:1rem}.nav-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s cubic-bezier(.4,0,.2,1) forwards}.nav-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.2s}.nav-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.4s}.nav-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.6s}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.5rem;background:#fff;border-radius:16px;text-decoration:none;transition:all .3s cubic-bezier(.4,0,.2,1);border:2px solid transparent;direction:rtl}.nav-link[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.02);border-color:#2563eb;box-shadow:0 10px 20px #2563eb1a}.nav-link[_ngcontent-%COMP%]:hover   .icon-wrapper[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg);background:#2563eb;color:#fff}.nav-link.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff}.nav-link.active[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{background:#fff;color:#2563eb}.nav-link.active[_ngcontent-%COMP%]   .link-title[_ngcontent-%COMP%], .nav-link.active[_ngcontent-%COMP%]   .link-description[_ngcontent-%COMP%]{color:#fff}.icon-wrapper[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;background:#f1f5f9;border-radius:50%;margin-left:1rem;transition:all .3s cubic-bezier(.4,0,.2,1);animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#2563eb}.link-content[_ngcontent-%COMP%]{flex:1}.link-title[_ngcontent-%COMP%]{display:block;font-size:1.2rem;font-weight:600;color:#1e293b;margin-bottom:.5rem}.link-description[_ngcontent-%COMP%]{display:block;font-size:.9rem;color:#64748b}.content-container[_ngcontent-%COMP%]{max-width:1200px;margin:2rem auto 0;padding:2rem;background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;animation:_ngcontent-%COMP%_fadeIn .5s cubic-bezier(.4,0,.2,1)}@media (max-width: 768px){.nav-list[_ngcontent-%COMP%]{grid-template-columns:1fr}.hero-section[_ngcontent-%COMP%]   .main-title[_ngcontent-%COMP%]{font-size:2rem}.hero-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem}.nav-link[_ngcontent-%COMP%]{padding:1rem}.icon-wrapper[_ngcontent-%COMP%]{width:50px;height:50px}.icon-wrapper[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}}html[_ngcontent-%COMP%]{scroll-behavior:smooth}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2563eb;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#1d4ed8}']})};var oE=class n{constructor(t){this.http=t}apiUrl="http://localhost:3000/ai-analysis";predict(t){return this.http.post(this.apiUrl,t)}static \u0275fac=function(e){return new(e||n)(qe(jp))};static \u0275prov=Ve({token:n,factory:n.\u0275fac,providedIn:"root"})};function zge(n,t){if(n&1&&(w(0,"div",14),A(1),b()),n&2){let e=ve();W(),Ze(" ",e.error," ")}}function Wge(n,t){if(n&1&&(w(0,"div",15),G(1,"img",16),b()),n&2){let e=ve();W(),xe("src",e.previewUrl,It)}}function Hge(n,t){n&1&&(w(0,"span"),A(1,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0623\u0634\u0639\u0629 \u0644\u0644\u062A\u062D\u0644\u064A\u0644"),b())}function $ge(n,t){n&1&&(w(0,"span"),A(1,"\u062C\u0627\u0631\u064A \u0627\u0644\u062A\u062D\u0644\u064A\u0644..."),b())}function qge(n,t){if(n&1&&(w(0,"div",17)(1,"h2"),A(2,"\u0646\u062A\u0627\u0626\u062C \u0627\u0644\u062A\u062D\u0644\u064A\u0644"),b(),w(3,"div",18)(4,"strong"),A(5,"\u0627\u0644\u062A\u0634\u062E\u064A\u0635:"),b(),A(6),b(),w(7,"div",18)(8,"strong"),A(9,"\u0646\u0633\u0628\u0629 \u0627\u0644\u062B\u0642\u0629:"),b(),A(10),nn(11,"percent"),b()()),n&2){let e=ve();W(6),Ze(" ",e.analysisResult.prediction," "),W(4),Ze(" ",bn(11,2,e.analysisResult.confidence,"1.0-2")," ")}}var sE=class n{constructor(t){this.aiAnalysisService=t}selectedFile=null;previewUrl=null;error=null;isLoading=!1;analysisResult=null;onFileSelected(t){let r=t.target.files?.[0];if(this.error=null,this.analysisResult=null,!r){this.selectedFile=null,this.previewUrl=null;return}if(!r.type.startsWith("image/")){this.error="\u064A\u0631\u062C\u0649 \u062A\u062D\u0645\u064A\u0644 \u0645\u0644\u0641 \u0635\u0648\u0631\u0629 \u0641\u0642\u0637",this.selectedFile=null,this.previewUrl=null;return}this.selectedFile=r;let i=new FileReader;i.onload=()=>{this.previewUrl=i.result},i.readAsDataURL(r)}onSubmit(){if(!this.selectedFile){this.error="\u064A\u0631\u062C\u0649 \u0627\u062E\u062A\u064A\u0627\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629";return}this.isLoading=!0,this.error=null,this.analysisResult=null;let t=new FormData;t.append("image",this.selectedFile),this.aiAnalysisService.predict(t).pipe(tu(()=>this.isLoading=!1)).subscribe({next:e=>{this.analysisResult={prediction:e.prediction,confidence:e.confidence}},error:e=>{console.error("Error analyzing X-ray:",e),this.error="\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0635\u0648\u0631\u0629. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649."}})}static \u0275fac=function(e){return new(e||n)(me(oE))};static \u0275cmp=_t({type:n,selectors:[["app-pneumonia"]],decls:18,vars:7,consts:[["fileInput",""],[1,"container"],[1,"title"],[1,"upload-form",3,"ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"upload-area"],["type","file","accept","image/*","id","x-ray-upload",1,"file-input",3,"change"],[1,"upload-label",3,"for"],["class","error-message",4,"ngIf"],["class","preview-container",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],["class","analysis-results",4,"ngIf"],[1,"error-message"],[1,"preview-container"],["alt","\u0645\u0639\u0627\u064A\u0646\u0629 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629",1,"preview-image",3,"src"],[1,"analysis-results"],[1,"result-item"]],template:function(e,r){if(e&1){let i=Lt();w(0,"div",1)(1,"h1",2),A(2,"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629 \u0644\u0644\u0627\u0644\u062A\u0647\u0627\u0628 \u0627\u0644\u0631\u0626\u0648\u064A"),b(),w(3,"form",3),je("ngSubmit",function(){return De(i),Pe(r.onSubmit())}),w(4,"div",4)(5,"label",5),A(6,"\u062A\u062D\u0645\u064A\u0644 \u0635\u0648\u0631\u0629 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629 \u0644\u0644\u0627\u0644\u062A\u0647\u0627\u0628 \u0627\u0644\u0631\u0626\u0648\u064A"),b(),w(7,"div",6)(8,"input",7,0),je("change",function(s){return De(i),Pe(r.onFileSelected(s))}),b(),w(10,"label",8),A(11," \u0627\u0646\u0642\u0631 \u0644\u062A\u062D\u062F\u064A\u062F \u0635\u0648\u0631\u0629 \u0627\u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0633\u064A\u0646\u064A\u0629 "),b()(),Te(12,zge,2,1,"div",9)(13,Wge,2,1,"div",10),b(),w(14,"button",11),Te(15,Hge,2,0,"span",12)(16,$ge,2,0,"span",12),b()(),Te(17,qge,12,5,"div",13),b()}e&2&&(W(10),xe("for","x-ray-upload"),W(2),xe("ngIf",r.error),W(),xe("ngIf",r.previewUrl),W(),xe("disabled",!r.selectedFile||r.isLoading),W(),xe("ngIf",!r.isLoading),W(),xe("ngIf",r.isLoading),W(),xe("ngIf",r.analysisResult))},dependencies:[In,yc,bS,Gs,br,yr,Rc],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;text-align:center;margin-bottom:2rem}.upload-form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-label[_ngcontent-%COMP%]{display:block;font-size:1.1rem;font-weight:500;margin-bottom:.5rem}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:2rem;text-align:center;cursor:pointer;transition:border-color .3s ease}.upload-area[_ngcontent-%COMP%]:hover{border-color:#666}.file-input[_ngcontent-%COMP%]{display:none}.upload-label[_ngcontent-%COMP%]{color:#2563eb;cursor:pointer}.upload-label[_ngcontent-%COMP%]:hover{color:#1d4ed8}.error-message[_ngcontent-%COMP%]{color:#dc2626;font-size:.875rem;margin-top:.5rem}.preview-container[_ngcontent-%COMP%]{margin-top:1rem;width:100%;height:300px;position:relative;overflow:hidden;border-radius:8px}.preview-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.submit-button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#2563eb;color:#fff;border:none;border-radius:6px;font-weight:500;cursor:pointer;transition:background-color .3s ease}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1d4ed8}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#93c5fd;cursor:not-allowed}"]})};function Gge(n,t){n&1&&(w(0,"li"),A(1," \u0627\u0644\u062D\u0641\u0627\u0638 \u0639\u0644\u0649 \u0646\u0645\u0637 \u062D\u064A\u0627\u0629 \u0635\u062D\u064A \u0648\u0645\u062A\u0627\u0628\u0639\u0629 \u0627\u0644\u0641\u062D\u0648\u0635\u0627\u062A \u0627\u0644\u062F\u0648\u0631\u064A\u0629 "),b())}function Kge(n,t){n&1&&(w(0,"li"),A(1," \u064A\u064F\u0646\u0635\u062D \u0628\u0645\u0631\u0627\u062C\u0639\u0629 \u0637\u0628\u064A\u0628 \u0627\u0644\u0643\u0628\u062F \u0648\u0625\u062C\u0631\u0627\u0621 \u0641\u062D\u0648\u0635\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 "),b())}function Yge(n,t){n&1&&(w(0,"li"),A(1," \u064A\u062C\u0628 \u0645\u0631\u0627\u062C\u0639\u0629 \u0637\u0628\u064A\u0628 \u0627\u0644\u0643\u0628\u062F \u0641\u0648\u0631\u0627\u064B \u0644\u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u062D\u0627\u0644\u0629 \u0648\u0648\u0636\u0639 \u062E\u0637\u0629 \u0639\u0644\u0627\u062C\u064A\u0629 "),b())}function Zge(n,t){if(n&1&&(w(0,"div",37)(1,"h2"),A(2,"\u0646\u062A\u0627\u0626\u062C \u0627\u0644\u062A\u062D\u0644\u064A\u0644"),b(),w(3,"div",38),G(4,"div",39),b(),w(5,"div",40)(6,"h3"),A(7),b(),w(8,"p",41),A(9),nn(10,"number"),b(),w(11,"p",42),A(12),b(),w(13,"div",43)(14,"h4"),A(15,"\u0627\u0644\u062A\u0648\u0635\u064A\u0627\u062A:"),b(),w(16,"ul"),Te(17,Gge,2,0,"li",44)(18,Kge,2,0,"li",44)(19,Yge,2,0,"li",44),w(20,"li"),A(21,"\u062A\u062C\u0646\u0628 \u0627\u0644\u0643\u062D\u0648\u0644 \u0648\u0627\u0644\u0623\u062F\u0648\u064A\u0629 \u0627\u0644\u0636\u0627\u0631\u0629 \u0628\u0627\u0644\u0643\u0628\u062F"),b(),w(22,"li"),A(23,"\u0627\u062A\u0628\u0627\u0639 \u0646\u0638\u0627\u0645 \u063A\u0630\u0627\u0626\u064A \u0635\u062D\u064A"),b(),w(24,"li"),A(25,"\u0645\u0645\u0627\u0631\u0633\u0629 \u0627\u0644\u0631\u064A\u0627\u0636\u0629 \u0628\u0627\u0646\u062A\u0638\u0627\u0645"),b()()()()()),n&2){let e=ve();W(4),gc("width",e.riskPercentage,"%"),W(),xe("ngClass",e.riskLevel),W(2),Ze("\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062E\u0637\u0631: ",e.riskLevel==="low"?"\u0645\u0646\u062E\u0641\u0636":e.riskLevel==="moderate"?"\u0645\u062A\u0648\u0633\u0637":"\u0645\u0631\u062A\u0641\u0639",""),W(2),Ze("\u0646\u0633\u0628\u0629 \u0627\u0644\u062E\u0637\u0631: ",bn(10,9,e.riskPercentage,"1.0-0"),"%"),W(3),st(e.cirrhosisStage),W(5),xe("ngIf",e.riskLevel==="low"),W(),xe("ngIf",e.riskLevel==="moderate"),W(),xe("ngIf",e.riskLevel==="high")}}var aE=class n{formData={age:0,sex:"M",totalBilirubin:0,directBilirubin:0,alkalinePhosphatase:0,alamineAminotransferase:0,aspartateAminotransferase:0,totalProteins:0,albumin:0,albuminGlobulinRatio:0,hasAscites:!1,hasHepatitis:!1};showResult=!1;riskLevel="low";riskPercentage=0;cirrhosisStage="";calculateRisk(){let t=0;this.formData.age>60?t+=2:this.formData.age>45&&(t+=1),this.formData.totalBilirubin>2?t+=2:this.formData.totalBilirubin>1.2&&(t+=1),this.formData.alkalinePhosphatase>300&&(t+=2),this.formData.alamineAminotransferase>50&&(t+=1),this.formData.aspartateAminotransferase>40&&(t+=1),this.formData.albumin<3.5&&(t+=2),this.formData.totalProteins<6&&(t+=1),this.formData.albuminGlobulinRatio<1&&(t+=2),this.formData.hasAscites&&(t+=3),this.formData.hasHepatitis&&(t+=2),this.riskPercentage=t/18*100,this.riskPercentage<33?(this.riskLevel="low",this.cirrhosisStage="\u0644\u0627 \u064A\u0648\u062C\u062F \u0645\u0624\u0634\u0631\u0627\u062A \u0644\u062A\u0644\u064A\u0641 \u0627\u0644\u0643\u0628\u062F"):this.riskPercentage<66?(this.riskLevel="moderate",this.cirrhosisStage="\u062A\u0644\u064A\u0641 \u0643\u0628\u062F\u064A \u0641\u064A \u0627\u0644\u0645\u0631\u0627\u062D\u0644 \u0627\u0644\u0623\u0648\u0644\u0649"):(this.riskLevel="high",this.cirrhosisStage="\u062A\u0644\u064A\u0641 \u0643\u0628\u062F\u064A \u0645\u062A\u0642\u062F\u0645"),this.showResult=!0}resetForm(){this.showResult=!1,this.formData={age:0,sex:"M",totalBilirubin:0,directBilirubin:0,alkalinePhosphatase:0,alamineAminotransferase:0,aspartateAminotransferase:0,totalProteins:0,albumin:0,albuminGlobulinRatio:0,hasAscites:!1,hasHepatitis:!1}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-liver"]],decls:100,vars:14,consts:[["liverForm","ngForm"],[1,"liver-analysis-container"],[1,"header"],[1,"subtitle"],[1,"liver-form",3,"ngSubmit"],[1,"form-grid"],[1,"form-section"],[1,"form-group"],["for","age"],["type","number","id","age","name","age","required","","min","0","max","120",3,"ngModelChange","ngModel"],[1,"radio-group"],["type","radio","name","sex","value","M",3,"ngModelChange","ngModel"],["type","radio","name","sex","value","F",3,"ngModelChange","ngModel"],["for","totalBilirubin"],["type","number","id","totalBilirubin","name","totalBilirubin","required","","step","0.1",3,"ngModelChange","ngModel"],[1,"reference"],["for","directBilirubin"],["type","number","id","directBilirubin","name","directBilirubin","required","","step","0.1",3,"ngModelChange","ngModel"],["for","alkalinePhosphatase"],["type","number","id","alkalinePhosphatase","name","alkalinePhosphatase","required","",3,"ngModelChange","ngModel"],["for","alamineAminotransferase"],["type","number","id","alamineAminotransferase","name","alamineAminotransferase","required","",3,"ngModelChange","ngModel"],["for","aspartateAminotransferase"],["type","number","id","aspartateAminotransferase","name","aspartateAminotransferase","required","",3,"ngModelChange","ngModel"],["for","totalProteins"],["type","number","id","totalProteins","name","totalProteins","required","","step","0.1",3,"ngModelChange","ngModel"],["for","albumin"],["type","number","id","albumin","name","albumin","required","","step","0.1",3,"ngModelChange","ngModel"],["for","albuminGlobulinRatio"],["type","number","id","albuminGlobulinRatio","name","albuminGlobulinRatio","required","","step","0.1",3,"ngModelChange","ngModel"],[1,"form-group","checkbox-group"],["type","checkbox","name","hasAscites",3,"ngModelChange","ngModel"],["type","checkbox","name","hasHepatitis",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"submit-btn"],["type","button",1,"reset-btn",3,"click"],["class","results-section",4,"ngIf"],[1,"results-section"],[1,"risk-meter"],[1,"risk-indicator"],[1,"risk-details",3,"ngClass"],[1,"risk-percentage"],[1,"cirrhosis-stage"],[1,"risk-recommendations"],[4,"ngIf"]],template:function(e,r){if(e&1){let i=Lt();w(0,"div",1)(1,"div",2)(2,"h1"),A(3,"\u062A\u062D\u0644\u064A\u0644 \u062A\u0644\u064A\u0641 \u0627\u0644\u0643\u0628\u062F"),b(),w(4,"p",3),A(5,"\u0623\u062F\u062E\u0644 \u0646\u062A\u0627\u0626\u062C \u0641\u062D\u0648\u0635\u0627\u062A \u0627\u0644\u0643\u0628\u062F \u0644\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0627\u0637\u0631"),b()(),w(6,"form",4,0),je("ngSubmit",function(){return De(i),Pe(r.calculateRisk())}),w(8,"div",5)(9,"div",6)(10,"h2"),A(11,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),b(),w(12,"div",7)(13,"label",8),A(14,"\u0627\u0644\u0639\u0645\u0631"),b(),w(15,"input",9),ht("ngModelChange",function(s){return De(i),mt(r.formData.age,s)||(r.formData.age=s),Pe(s)}),b()(),w(16,"div",7)(17,"label"),A(18,"\u0627\u0644\u062C\u0646\u0633"),b(),w(19,"div",10)(20,"label")(21,"input",11),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(22," \u0630\u0643\u0631 "),b(),w(23,"label")(24,"input",12),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(25," \u0623\u0646\u062B\u0649 "),b()()()(),w(26,"div",6)(27,"h2"),A(28,"\u0641\u062D\u0648\u0635\u0627\u062A \u0627\u0644\u0628\u064A\u0644\u064A\u0631\u0648\u0628\u064A\u0646"),b(),w(29,"div",7)(30,"label",13),A(31,"\u0627\u0644\u0628\u064A\u0644\u064A\u0631\u0648\u0628\u064A\u0646 \u0627\u0644\u0643\u0644\u064A (mg/dL)"),b(),w(32,"input",14),ht("ngModelChange",function(s){return De(i),mt(r.formData.totalBilirubin,s)||(r.formData.totalBilirubin=s),Pe(s)}),b(),w(33,"small",15),A(34,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 0.3-1.2 mg/dL"),b()(),w(35,"div",7)(36,"label",16),A(37,"\u0627\u0644\u0628\u064A\u0644\u064A\u0631\u0648\u0628\u064A\u0646 \u0627\u0644\u0645\u0628\u0627\u0634\u0631 (mg/dL)"),b(),w(38,"input",17),ht("ngModelChange",function(s){return De(i),mt(r.formData.directBilirubin,s)||(r.formData.directBilirubin=s),Pe(s)}),b(),w(39,"small",15),A(40,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 0.1-0.3 mg/dL"),b()()(),w(41,"div",6)(42,"h2"),A(43,"\u0625\u0646\u0632\u064A\u0645\u0627\u062A \u0627\u0644\u0643\u0628\u062F"),b(),w(44,"div",7)(45,"label",18),A(46,"\u0627\u0644\u0641\u0648\u0633\u0641\u0627\u062A\u064A\u0632 \u0627\u0644\u0642\u0644\u0648\u064A (U/L)"),b(),w(47,"input",19),ht("ngModelChange",function(s){return De(i),mt(r.formData.alkalinePhosphatase,s)||(r.formData.alkalinePhosphatase=s),Pe(s)}),b(),w(48,"small",15),A(49,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 20-140 U/L"),b()(),w(50,"div",7)(51,"label",20),A(52,"ALT (U/L)"),b(),w(53,"input",21),ht("ngModelChange",function(s){return De(i),mt(r.formData.alamineAminotransferase,s)||(r.formData.alamineAminotransferase=s),Pe(s)}),b(),w(54,"small",15),A(55,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 7-56 U/L"),b()(),w(56,"div",7)(57,"label",22),A(58,"AST (U/L)"),b(),w(59,"input",23),ht("ngModelChange",function(s){return De(i),mt(r.formData.aspartateAminotransferase,s)||(r.formData.aspartateAminotransferase=s),Pe(s)}),b(),w(60,"small",15),A(61,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 10-40 U/L"),b()()(),w(62,"div",6)(63,"h2"),A(64,"\u0627\u0644\u0628\u0631\u0648\u062A\u064A\u0646\u0627\u062A"),b(),w(65,"div",7)(66,"label",24),A(67,"\u0627\u0644\u0628\u0631\u0648\u062A\u064A\u0646 \u0627\u0644\u0643\u0644\u064A (g/dL)"),b(),w(68,"input",25),ht("ngModelChange",function(s){return De(i),mt(r.formData.totalProteins,s)||(r.formData.totalProteins=s),Pe(s)}),b(),w(69,"small",15),A(70,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 6.0-8.3 g/dL"),b()(),w(71,"div",7)(72,"label",26),A(73,"\u0627\u0644\u0623\u0644\u0628\u0648\u0645\u064A\u0646 (g/dL)"),b(),w(74,"input",27),ht("ngModelChange",function(s){return De(i),mt(r.formData.albumin,s)||(r.formData.albumin=s),Pe(s)}),b(),w(75,"small",15),A(76,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 3.5-5.5 g/dL"),b()(),w(77,"div",7)(78,"label",28),A(79,"\u0646\u0633\u0628\u0629 \u0627\u0644\u0623\u0644\u0628\u0648\u0645\u064A\u0646/\u0627\u0644\u062C\u0644\u0648\u0628\u064A\u0648\u0644\u064A\u0646"),b(),w(80,"input",29),ht("ngModelChange",function(s){return De(i),mt(r.formData.albuminGlobulinRatio,s)||(r.formData.albuminGlobulinRatio=s),Pe(s)}),b(),w(81,"small",15),A(82,"\u0627\u0644\u0645\u0639\u062F\u0644 \u0627\u0644\u0637\u0628\u064A\u0639\u064A: 1.0-2.5"),b()()(),w(83,"div",6)(84,"h2"),A(85,"\u062D\u0627\u0644\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629"),b(),w(86,"div",30)(87,"label")(88,"input",31),ht("ngModelChange",function(s){return De(i),mt(r.formData.hasAscites,s)||(r.formData.hasAscites=s),Pe(s)}),b(),A(89," \u0648\u062C\u0648\u062F \u0627\u0633\u062A\u0633\u0642\u0627\u0621 (\u062A\u062C\u0645\u0639 \u0627\u0644\u0633\u0648\u0627\u0626\u0644 \u0641\u064A \u0627\u0644\u0628\u0637\u0646) "),b()(),w(90,"div",30)(91,"label")(92,"input",32),ht("ngModelChange",function(s){return De(i),mt(r.formData.hasHepatitis,s)||(r.formData.hasHepatitis=s),Pe(s)}),b(),A(93," \u0627\u0644\u062A\u0647\u0627\u0628 \u0627\u0644\u0643\u0628\u062F \u0627\u0644\u0641\u064A\u0631\u0648\u0633\u064A "),b()()()(),w(94,"div",33)(95,"button",34),A(96,"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0646\u062A\u0627\u0626\u062C"),b(),w(97,"button",35),je("click",function(){return De(i),Pe(r.resetForm())}),A(98,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),b()()(),Te(99,Zge,26,12,"div",36),b()}e&2&&(W(15),dt("ngModel",r.formData.age),W(6),dt("ngModel",r.formData.sex),W(3),dt("ngModel",r.formData.sex),W(8),dt("ngModel",r.formData.totalBilirubin),W(6),dt("ngModel",r.formData.directBilirubin),W(9),dt("ngModel",r.formData.alkalinePhosphatase),W(6),dt("ngModel",r.formData.alamineAminotransferase),W(6),dt("ngModel",r.formData.aspartateAminotransferase),W(9),dt("ngModel",r.formData.totalProteins),W(6),dt("ngModel",r.formData.albumin),W(6),dt("ngModel",r.formData.albuminGlobulinRatio),W(8),dt("ngModel",r.formData.hasAscites),W(4),dt("ngModel",r.formData.hasHepatitis),W(7),xe("ngIf",r.showResult))},dependencies:[In,Ca,yc,gh,Gs,br,Jn,ps,kc,Pa,_r,yr,Xh,Ma,Qh,Nc,Rc],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;font-family:Cairo,sans-serif;direction:rtl}.liver-analysis-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:1rem;background:linear-gradient(120deg,#27ae60,#2ecc71);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.liver-form[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 30px #0000001a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#27ae60;font-size:1.3rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e0e0e0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#444;font-weight:600}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{border-color:#27ae60;box-shadow:0 0 0 3px #27ae601a;outline:none}.form-group[_ngcontent-%COMP%]   .reference[_ngcontent-%COMP%]{display:block;color:#666;font-size:.85rem;margin-top:.3rem}.radio-group[_ngcontent-%COMP%], .checkbox-group[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;justify-content:center}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:#27ae60;color:#fff;border:none}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background:#219a52;transform:translateY(-2px)}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]{background:#fff;color:#666;border:2px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#666}.results-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.results-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem;text-align:center}.risk-meter[_ngcontent-%COMP%]{height:20px;background:#f0f0f0;border-radius:10px;overflow:hidden;margin-bottom:2rem}.risk-meter[_ngcontent-%COMP%]   .risk-indicator[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#27ae60,#f1c40f,#e74c3c);transition:width 1s ease-in-out}.risk-details[_ngcontent-%COMP%]{text-align:center;padding:2rem;border-radius:10px;margin-top:1rem}.risk-details.low[_ngcontent-%COMP%]{background:#27ae601a;border:2px solid #27ae60}.risk-details.moderate[_ngcontent-%COMP%]{background:#f1c40f1a;border:2px solid #f1c40f}.risk-details.high[_ngcontent-%COMP%]{background:#e74c3c1a;border:2px solid #e74c3c}.risk-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.risk-details[_ngcontent-%COMP%]   .risk-percentage[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1rem}.risk-details[_ngcontent-%COMP%]   .cirrhosis-stage[_ngcontent-%COMP%]{font-size:1.2rem;color:#666;margin-bottom:1.5rem}.risk-recommendations[_ngcontent-%COMP%]{text-align:right;margin-top:2rem;padding:1.5rem;background:#0000000d;border-radius:8px}.risk-recommendations[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;padding-right:1.5rem;position:relative}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;right:0;color:#27ae60}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.liver-analysis-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#27ae60;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#219a52}']})};function Qge(n,t){n&1&&(w(0,"li"),A(1," \u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u0646\u0645\u0637 \u062D\u064A\u0627\u0629 \u0635\u062D\u064A \u0648\u0645\u062A\u0627\u0628\u0639\u0629 \u0627\u0644\u0641\u062D\u0648\u0635\u0627\u062A \u0627\u0644\u062F\u0648\u0631\u064A\u0629 "),b())}function Xge(n,t){n&1&&(w(0,"li"),A(1," \u064A\u064F\u0646\u0635\u062D \u0628\u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u0637\u0628\u064A\u0628 \u0648\u0625\u062C\u0631\u0627\u0621 \u0641\u062D\u0648\u0635\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629 "),b())}function Jge(n,t){n&1&&(w(0,"li"),A(1," \u064A\u062C\u0628 \u0645\u0631\u0627\u062C\u0639\u0629 \u0627\u0644\u0637\u0628\u064A\u0628 \u0641\u0648\u0631\u0627\u064B \u0644\u062A\u0642\u064A\u064A\u0645 \u062D\u0627\u0644\u062A\u0643 \u0627\u0644\u0635\u062D\u064A\u0629 "),b())}function e0e(n,t){if(n&1&&(w(0,"div",43)(1,"h2"),A(2,"\u0646\u062A\u0627\u0626\u062C \u0627\u0644\u062A\u062D\u0644\u064A\u0644"),b(),w(3,"div",44),G(4,"div",45),b(),w(5,"div",46)(6,"h3"),A(7),b(),w(8,"p",47),A(9),nn(10,"number"),b(),w(11,"div",48)(12,"h4"),A(13,"\u0627\u0644\u062A\u0648\u0635\u064A\u0627\u062A:"),b(),w(14,"ul"),Te(15,Qge,2,0,"li",49)(16,Xge,2,0,"li",49)(17,Jge,2,0,"li",49),b()()()()),n&2){let e=ve();xe("@fadeInOut",void 0),W(4),gc("width",e.riskPercentage,"%"),W(),xe("ngClass",e.riskLevel),W(2),Ze("\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062E\u0637\u0631: ",e.riskLevel==="low"?"\u0645\u0646\u062E\u0641\u0636":e.riskLevel==="moderate"?"\u0645\u062A\u0648\u0633\u0637":"\u0645\u0631\u062A\u0641\u0639",""),W(2),Ze("\u0646\u0633\u0628\u0629 \u0627\u0644\u062E\u0637\u0631: ",bn(10,9,e.riskPercentage,"1.0-0"),"%"),W(6),xe("ngIf",e.riskLevel==="low"),W(),xe("ngIf",e.riskLevel==="moderate"),W(),xe("ngIf",e.riskLevel==="high")}}var uE=class n{formData={age:0,sex:"M",chestPainType:"typical",restingBP:120,cholesterol:200,fastingBS:!1,restingECG:"normal",maxHR:150,exerciseAngina:!1,oldpeak:0,stSlope:"up"};showResult=!1;riskLevel="low";riskPercentage=0;calculateRisk(){let t=0;this.formData.age>60?t+=2:this.formData.age>45&&(t+=1),this.formData.sex==="M"&&(t+=1),this.formData.chestPainType==="asymptomatic"?t+=2:this.formData.chestPainType==="atypical"&&(t+=1),this.formData.restingBP>140?t+=2:this.formData.restingBP>120&&(t+=1),this.formData.cholesterol>240?t+=2:this.formData.cholesterol>200&&(t+=1),this.formData.fastingBS&&(t+=1),this.formData.restingECG==="lvh"?t+=2:this.formData.restingECG==="stt"&&(t+=1),this.formData.maxHR>170&&(t+=2),this.formData.exerciseAngina&&(t+=2),this.formData.stSlope==="down"?t+=2:this.formData.stSlope==="flat"&&(t+=1),this.riskPercentage=t/18*100,this.riskPercentage<33?this.riskLevel="low":this.riskPercentage<66?this.riskLevel="moderate":this.riskLevel="high",this.showResult=!0}resetForm(){this.showResult=!1,this.formData={age:0,sex:"M",chestPainType:"typical",restingBP:120,cholesterol:200,fastingBS:!1,restingECG:"normal",maxHR:150,exerciseAngina:!1,oldpeak:0,stSlope:"up"}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-heart"]],decls:97,vars:13,consts:[["heartForm","ngForm"],[1,"heart-analysis-container"],[1,"header"],[1,"subtitle"],[1,"heart-form",3,"ngSubmit"],[1,"form-grid"],[1,"form-section"],[1,"form-group"],["for","age"],["type","number","id","age","name","age","required","","min","0","max","120",3,"ngModelChange","ngModel"],[1,"radio-group"],["type","radio","name","sex","value","M",3,"ngModelChange","ngModel"],["type","radio","name","sex","value","F",3,"ngModelChange","ngModel"],["for","chestPainType"],["id","chestPainType","name","chestPainType",3,"ngModelChange","ngModel"],["value","typical"],["value","atypical"],["value","nonAnginal"],["value","asymptomatic"],["for","restingBP"],["type","number","id","restingBP","name","restingBP","required","",3,"ngModelChange","ngModel"],["for","cholesterol"],["type","number","id","cholesterol","name","cholesterol","required","",3,"ngModelChange","ngModel"],["type","checkbox","name","fastingBS",3,"ngModelChange","ngModel"],["for","restingECG"],["id","restingECG","name","restingECG",3,"ngModelChange","ngModel"],["value","normal"],["value","stt"],["value","lvh"],["for","maxHR"],["type","number","id","maxHR","name","maxHR","required","",3,"ngModelChange","ngModel"],["type","checkbox","name","exerciseAngina",3,"ngModelChange","ngModel"],["for","oldpeak"],["type","number","id","oldpeak","name","oldpeak","step","0.1","required","",3,"ngModelChange","ngModel"],["for","stSlope"],["id","stSlope","name","stSlope",3,"ngModelChange","ngModel"],["value","up"],["value","flat"],["value","down"],[1,"form-actions"],["type","submit",1,"submit-btn"],["type","button",1,"reset-btn",3,"click"],["class","results-section",4,"ngIf"],[1,"results-section"],[1,"risk-meter"],[1,"risk-indicator"],[1,"risk-details",3,"ngClass"],[1,"risk-percentage"],[1,"risk-recommendations"],[4,"ngIf"]],template:function(e,r){if(e&1){let i=Lt();w(0,"div",1)(1,"div",2)(2,"h1"),A(3,"\u062A\u062D\u0644\u064A\u0644 \u0645\u062E\u0627\u0637\u0631 \u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0642\u0644\u0628"),b(),w(4,"p",3),A(5,"\u0623\u062F\u062E\u0644 \u0628\u064A\u0627\u0646\u0627\u062A\u0643 \u0627\u0644\u0637\u0628\u064A\u0629 \u0644\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0627\u0637\u0631"),b()(),w(6,"form",4,0),je("ngSubmit",function(){return De(i),Pe(r.calculateRisk())}),w(8,"div",5)(9,"div",6)(10,"h2"),A(11,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),b(),w(12,"div",7)(13,"label",8),A(14,"\u0627\u0644\u0639\u0645\u0631"),b(),w(15,"input",9),ht("ngModelChange",function(s){return De(i),mt(r.formData.age,s)||(r.formData.age=s),Pe(s)}),b()(),w(16,"div",7)(17,"label"),A(18,"\u0627\u0644\u062C\u0646\u0633"),b(),w(19,"div",10)(20,"label")(21,"input",11),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(22," \u0630\u0643\u0631 "),b(),w(23,"label")(24,"input",12),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(25," \u0623\u0646\u062B\u0649 "),b()()()(),w(26,"div",6)(27,"h2"),A(28,"\u0645\u0624\u0634\u0631\u0627\u062A \u0627\u0644\u0642\u0644\u0628"),b(),w(29,"div",7)(30,"label",13),A(31,"\u0646\u0648\u0639 \u0623\u0644\u0645 \u0627\u0644\u0635\u062F\u0631"),b(),w(32,"select",14),ht("ngModelChange",function(s){return De(i),mt(r.formData.chestPainType,s)||(r.formData.chestPainType=s),Pe(s)}),w(33,"option",15),A(34,"\u0646\u0645\u0648\u0630\u062C\u064A"),b(),w(35,"option",16),A(36,"\u063A\u064A\u0631 \u0646\u0645\u0648\u0630\u062C\u064A"),b(),w(37,"option",17),A(38,"\u063A\u064A\u0631 \u0645\u0631\u062A\u0628\u0637 \u0628\u0627\u0644\u0642\u0644\u0628"),b(),w(39,"option",18),A(40,"\u0628\u062F\u0648\u0646 \u0623\u0639\u0631\u0627\u0636"),b()()(),w(41,"div",7)(42,"label",19),A(43,"\u0636\u063A\u0637 \u0627\u0644\u062F\u0645 \u0641\u064A \u062D\u0627\u0644\u0629 \u0627\u0644\u0631\u0627\u062D\u0629"),b(),w(44,"input",20),ht("ngModelChange",function(s){return De(i),mt(r.formData.restingBP,s)||(r.formData.restingBP=s),Pe(s)}),b()(),w(45,"div",7)(46,"label",21),A(47,"\u0627\u0644\u0643\u0648\u0644\u064A\u0633\u062A\u0631\u0648\u0644 (mg/dl)"),b(),w(48,"input",22),ht("ngModelChange",function(s){return De(i),mt(r.formData.cholesterol,s)||(r.formData.cholesterol=s),Pe(s)}),b()()(),w(49,"div",6)(50,"h2"),A(51,"\u0641\u062D\u0648\u0635\u0627\u062A \u0625\u0636\u0627\u0641\u064A\u0629"),b(),w(52,"div",7)(53,"label")(54,"input",23),ht("ngModelChange",function(s){return De(i),mt(r.formData.fastingBS,s)||(r.formData.fastingBS=s),Pe(s)}),b(),A(55," \u0633\u0643\u0631 \u0627\u0644\u0635\u064A\u0627\u0645 > 120 mg/dl "),b()(),w(56,"div",7)(57,"label",24),A(58,"\u062A\u062E\u0637\u064A\u0637 \u0627\u0644\u0642\u0644\u0628 \u0641\u064A \u0627\u0644\u0631\u0627\u062D\u0629"),b(),w(59,"select",25),ht("ngModelChange",function(s){return De(i),mt(r.formData.restingECG,s)||(r.formData.restingECG=s),Pe(s)}),w(60,"option",26),A(61,"\u0637\u0628\u064A\u0639\u064A"),b(),w(62,"option",27),A(63,"\u062A\u063A\u064A\u0631\u0627\u062A ST-T"),b(),w(64,"option",28),A(65,"\u062A\u0636\u062E\u0645 \u0627\u0644\u0628\u0637\u064A\u0646 \u0627\u0644\u0623\u064A\u0633\u0631"),b()()(),w(66,"div",7)(67,"label",29),A(68,"\u0623\u0642\u0635\u0649 \u0645\u0639\u062F\u0644 \u0644\u0636\u0631\u0628\u0627\u062A \u0627\u0644\u0642\u0644\u0628"),b(),w(69,"input",30),ht("ngModelChange",function(s){return De(i),mt(r.formData.maxHR,s)||(r.formData.maxHR=s),Pe(s)}),b()()(),w(70,"div",6)(71,"h2"),A(72,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062A\u0645\u0631\u064A\u0646"),b(),w(73,"div",7)(74,"label")(75,"input",31),ht("ngModelChange",function(s){return De(i),mt(r.formData.exerciseAngina,s)||(r.formData.exerciseAngina=s),Pe(s)}),b(),A(76," \u0623\u0644\u0645 \u0641\u064A \u0627\u0644\u0635\u062F\u0631 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0645\u0631\u064A\u0646 "),b()(),w(77,"div",7)(78,"label",32),A(79,"\u0627\u0646\u062E\u0641\u0627\u0636 ST (Oldpeak)"),b(),w(80,"input",33),ht("ngModelChange",function(s){return De(i),mt(r.formData.oldpeak,s)||(r.formData.oldpeak=s),Pe(s)}),b()(),w(81,"div",7)(82,"label",34),A(83,"\u0645\u0646\u062D\u0646\u0649 ST"),b(),w(84,"select",35),ht("ngModelChange",function(s){return De(i),mt(r.formData.stSlope,s)||(r.formData.stSlope=s),Pe(s)}),w(85,"option",36),A(86,"\u0635\u0627\u0639\u062F"),b(),w(87,"option",37),A(88,"\u0645\u0633\u062A\u0648\u064A"),b(),w(89,"option",38),A(90,"\u0647\u0627\u0628\u0637"),b()()()()(),w(91,"div",39)(92,"button",40),A(93,"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0645\u062E\u0627\u0637\u0631"),b(),w(94,"button",41),je("click",function(){return De(i),Pe(r.resetForm())}),A(95,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),b()()(),Te(96,e0e,18,12,"div",42),b()}e&2&&(W(15),dt("ngModel",r.formData.age),W(6),dt("ngModel",r.formData.sex),W(3),dt("ngModel",r.formData.sex),W(8),dt("ngModel",r.formData.chestPainType),W(12),dt("ngModel",r.formData.restingBP),W(4),dt("ngModel",r.formData.cholesterol),W(6),dt("ngModel",r.formData.fastingBS),W(5),dt("ngModel",r.formData.restingECG),W(10),dt("ngModel",r.formData.maxHR),W(6),dt("ngModel",r.formData.exerciseAngina),W(5),dt("ngModel",r.formData.oldpeak),W(4),dt("ngModel",r.formData.stSlope),W(12),xe("ngIf",r.showResult))},dependencies:[In,Ca,yc,gh,Gs,br,Oo,Ro,Jn,ps,kc,$i,Pa,_r,yr,Xh,Ma,Qh,Nc,Rc],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;font-family:Cairo,sans-serif;direction:rtl}.heart-analysis-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:1rem;font-weight:700}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.heart-form[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 30px #0000001a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:2rem}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.3rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e0e0e0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#444;font-weight:600}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#3498db;box-shadow:0 0 0 3px #3498db1a;outline:none}.radio-group[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;justify-content:center}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:#3498db;color:#fff;border:none}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background:#2980b9;transform:translateY(-2px)}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]{background:#fff;color:#666;border:2px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#666}.results-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a}.results-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem;text-align:center}.risk-meter[_ngcontent-%COMP%]{height:20px;background:#f0f0f0;border-radius:10px;overflow:hidden;margin-bottom:2rem}.risk-meter[_ngcontent-%COMP%]   .risk-indicator[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#2ecc71,#f1c40f,#e74c3c);transition:width 1s ease-in-out}.risk-details[_ngcontent-%COMP%]{text-align:center;padding:2rem;border-radius:10px;margin-top:1rem}.risk-details.low[_ngcontent-%COMP%]{background:#2ecc711a;border:2px solid #2ecc71}.risk-details.moderate[_ngcontent-%COMP%]{background:#f1c40f1a;border:2px solid #f1c40f}.risk-details.high[_ngcontent-%COMP%]{background:#e74c3c1a;border:2px solid #e74c3c}.risk-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.risk-details[_ngcontent-%COMP%]   .risk-percentage[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1.5rem}.risk-recommendations[_ngcontent-%COMP%]{text-align:right;margin-top:2rem;padding:1.5rem;background:#0000000d;border-radius:8px}.risk-recommendations[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;padding-right:1.5rem;position:relative}.risk-recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;right:0;color:#3498db}@media (max-width: 768px){.heart-analysis-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.results-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-out}']})};function t0e(n,t){if(n&1&&(w(0,"li"),A(1),b()),n&2){let e=t.$implicit;W(),Ze(" ",e," ")}}function n0e(n,t){if(n&1&&(w(0,"div",49)(1,"h2"),A(2,"\u0646\u062A\u0627\u0626\u062C \u0627\u0644\u062A\u062D\u0644\u064A\u0644"),b(),w(3,"div",50),G(4,"div",51),b(),w(5,"div",52)(6,"h3"),A(7),b(),w(8,"p",53),A(9),nn(10,"number"),b(),w(11,"div",54)(12,"h4"),A(13,"\u0627\u0644\u062A\u0648\u0635\u064A\u0627\u062A:"),b(),w(14,"ul"),Te(15,t0e,2,1,"li",55),b()()()()),n&2){let e=ve();W(4),gc("width",e.riskPercentage,"%"),W(),xe("ngClass",e.riskLevel),W(2),Ze("\u0645\u0633\u062A\u0648\u0649 \u0627\u0644\u062E\u0637\u0631: ",e.riskLevel==="low"?"\u0645\u0646\u062E\u0641\u0636":e.riskLevel==="moderate"?"\u0645\u062A\u0648\u0633\u0637":"\u0645\u0631\u062A\u0641\u0639",""),W(2),Ze("\u0646\u0633\u0628\u0629 \u0627\u0644\u062E\u0637\u0631: ",bn(10,6,e.riskPercentage,"1.0-0"),"%"),W(6),xe("ngForOf",e.recommendations)}}var cE=class n{formData={age:0,sex:"M",familyHistory:!1,smoking:"never",alcoholConsumption:"none",physicalActivity:"moderate",bmi:0,unexplainedWeightLoss:!1,persistentPain:!1,unusualBleeding:!1,unexplainedFatigue:!1,skinChanges:!1,digestiveIssues:!1,persistentCough:!1,exposureToToxins:!1,sunExposure:"low",previousCancer:!1,chronicDisease:!1};showResult=!1;riskLevel="low";riskPercentage=0;recommendations=[];calculateBMI(t,e){return t/(e/100*(e/100))}calculateRisk(){let t=0;this.formData.age>60?t+=3:this.formData.age>45?t+=2:this.formData.age>30&&(t+=1),this.formData.familyHistory&&(t+=3),this.formData.smoking==="current"?t+=3:this.formData.smoking==="former"&&(t+=1),this.formData.alcoholConsumption==="heavy"&&(t+=2),this.formData.physicalActivity==="sedentary"&&(t+=1),this.formData.bmi>30?t+=2:this.formData.bmi>25&&(t+=1),this.formData.unexplainedWeightLoss&&(t+=2),this.formData.persistentPain&&(t+=2),this.formData.unusualBleeding&&(t+=3),this.formData.unexplainedFatigue&&(t+=1),this.formData.skinChanges&&(t+=2),this.formData.digestiveIssues&&(t+=2),this.formData.persistentCough&&(t+=2),this.formData.exposureToToxins&&(t+=2),this.formData.sunExposure==="high"?t+=2:this.formData.sunExposure==="moderate"&&(t+=1),this.formData.previousCancer&&(t+=3),this.formData.chronicDisease&&(t+=1),this.riskPercentage=t/32*100,this.riskPercentage<30?this.riskLevel="low":this.riskPercentage<60?this.riskLevel="moderate":this.riskLevel="high",this.generateRecommendations(),this.showResult=!0}generateRecommendations(){this.recommendations=["\u0627\u0644\u062D\u0641\u0627\u0638 \u0639\u0644\u0649 \u0646\u0645\u0637 \u062D\u064A\u0627\u0629 \u0635\u062D\u064A \u0648\u0645\u062A\u0648\u0627\u0632\u0646"],this.formData.smoking==="current"&&this.recommendations.push("\u0627\u0644\u0625\u0642\u0644\u0627\u0639 \u0639\u0646 \u0627\u0644\u062A\u062F\u062E\u064A\u0646 \u0648\u0627\u0644\u0628\u062D\u062B \u0639\u0646 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629 \u0627\u0644\u0637\u0628\u064A\u0629 \u0644\u0644\u0625\u0642\u0644\u0627\u0639"),this.formData.alcoholConsumption==="heavy"&&this.recommendations.push("\u062A\u0642\u0644\u064A\u0644 \u0627\u0633\u062A\u0647\u0644\u0627\u0643 \u0627\u0644\u0643\u062D\u0648\u0644"),this.formData.physicalActivity==="sedentary"&&this.recommendations.push("\u0632\u064A\u0627\u062F\u0629 \u0627\u0644\u0646\u0634\u0627\u0637 \u0627\u0644\u0628\u062F\u0646\u064A \u0627\u0644\u064A\u0648\u0645\u064A"),this.formData.bmi>25&&this.recommendations.push("\u0627\u0644\u0639\u0645\u0644 \u0639\u0644\u0649 \u062A\u062D\u0642\u064A\u0642 \u0648\u0632\u0646 \u0635\u062D\u064A \u0645\u0646 \u062E\u0644\u0627\u0644 \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u063A\u0630\u0627\u0626\u064A \u0648\u0627\u0644\u0631\u064A\u0627\u0636\u0629"),this.riskLevel==="high"&&this.recommendations.push("\u064A\u062C\u0628 \u0627\u0633\u062A\u0634\u0627\u0631\u0629 \u0627\u0644\u0637\u0628\u064A\u0628 \u0641\u064A \u0623\u0642\u0631\u0628 \u0648\u0642\u062A \u0645\u0645\u0643\u0646 \u0644\u0625\u062C\u0631\u0627\u0621 \u0627\u0644\u0641\u062D\u0648\u0635\u0627\u062A \u0627\u0644\u0644\u0627\u0632\u0645\u0629"),this.formData.sunExposure==="high"&&this.recommendations.push("\u062A\u062C\u0646\u0628 \u0627\u0644\u062A\u0639\u0631\u0636 \u0627\u0644\u0645\u0641\u0631\u0637 \u0644\u0623\u0634\u0639\u0629 \u0627\u0644\u0634\u0645\u0633 \u0648\u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0648\u0627\u0642\u064A \u0627\u0644\u0634\u0645\u0633")}resetForm(){this.showResult=!1,this.formData={age:0,sex:"M",familyHistory:!1,smoking:"never",alcoholConsumption:"none",physicalActivity:"moderate",bmi:0,unexplainedWeightLoss:!1,persistentPain:!1,unusualBleeding:!1,unexplainedFatigue:!1,skinChanges:!1,digestiveIssues:!1,persistentCough:!1,exposureToToxins:!1,sunExposure:"low",previousCancer:!1,chronicDisease:!1}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-cancer"]],decls:130,vars:20,consts:[["cancerForm","ngForm"],[1,"cancer-analysis-container"],[1,"header"],[1,"subtitle"],[1,"cancer-form",3,"ngSubmit"],[1,"form-grid"],[1,"form-section"],[1,"form-group"],["for","age"],["type","number","id","age","name","age","required","","min","0","max","120",3,"ngModelChange","ngModel"],[1,"radio-group"],["type","radio","name","sex","value","M",3,"ngModelChange","ngModel"],["type","radio","name","sex","value","F",3,"ngModelChange","ngModel"],["type","checkbox","name","familyHistory",3,"ngModelChange","ngModel"],["for","smoking"],["id","smoking","name","smoking",3,"ngModelChange","ngModel"],["value","never"],["value","former"],["value","current"],["for","alcoholConsumption"],["id","alcoholConsumption","name","alcoholConsumption",3,"ngModelChange","ngModel"],["value","none"],["value","moderate"],["value","heavy"],["for","physicalActivity"],["id","physicalActivity","name","physicalActivity",3,"ngModelChange","ngModel"],["value","sedentary"],["value","active"],["for","bmi"],["type","number","id","bmi","name","bmi","required","","step","0.1",3,"ngModelChange","ngModel"],["type","checkbox","name","unexplainedWeightLoss",3,"ngModelChange","ngModel"],[1,"symptoms-grid"],["type","checkbox","name","persistentPain",3,"ngModelChange","ngModel"],["type","checkbox","name","unusualBleeding",3,"ngModelChange","ngModel"],["type","checkbox","name","unexplainedFatigue",3,"ngModelChange","ngModel"],["type","checkbox","name","skinChanges",3,"ngModelChange","ngModel"],["type","checkbox","name","digestiveIssues",3,"ngModelChange","ngModel"],["type","checkbox","name","persistentCough",3,"ngModelChange","ngModel"],["type","checkbox","name","exposureToToxins",3,"ngModelChange","ngModel"],["for","sunExposure"],["id","sunExposure","name","sunExposure",3,"ngModelChange","ngModel"],["value","low"],["value","high"],["type","checkbox","name","previousCancer",3,"ngModelChange","ngModel"],["type","checkbox","name","chronicDisease",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"submit-btn"],["type","button",1,"reset-btn",3,"click"],["class","results-section",4,"ngIf"],[1,"results-section"],[1,"risk-meter"],[1,"risk-indicator"],[1,"risk-details",3,"ngClass"],[1,"risk-percentage"],[1,"recommendations"],[4,"ngFor","ngForOf"]],template:function(e,r){if(e&1){let i=Lt();w(0,"div",1)(1,"div",2)(2,"h1"),A(3,"\u062A\u0642\u064A\u064A\u0645 \u0645\u062E\u0627\u0637\u0631 \u0627\u0644\u0633\u0631\u0637\u0627\u0646"),b(),w(4,"p",3),A(5,"\u0642\u0645 \u0628\u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u0646\u0645\u0648\u0630\u062C \u0644\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u062A\u0642\u064A\u064A\u0645 \u0627\u0644\u0645\u062E\u0627\u0637\u0631"),b()(),w(6,"form",4,0),je("ngSubmit",function(){return De(i),Pe(r.calculateRisk())}),w(8,"div",5)(9,"div",6)(10,"h2"),A(11,"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0623\u0633\u0627\u0633\u064A\u0629"),b(),w(12,"div",7)(13,"label",8),A(14,"\u0627\u0644\u0639\u0645\u0631"),b(),w(15,"input",9),ht("ngModelChange",function(s){return De(i),mt(r.formData.age,s)||(r.formData.age=s),Pe(s)}),b()(),w(16,"div",7)(17,"label"),A(18,"\u0627\u0644\u062C\u0646\u0633"),b(),w(19,"div",10)(20,"label")(21,"input",11),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(22," \u0630\u0643\u0631 "),b(),w(23,"label")(24,"input",12),ht("ngModelChange",function(s){return De(i),mt(r.formData.sex,s)||(r.formData.sex=s),Pe(s)}),b(),A(25," \u0623\u0646\u062B\u0649 "),b()()(),w(26,"div",7)(27,"label")(28,"input",13),ht("ngModelChange",function(s){return De(i),mt(r.formData.familyHistory,s)||(r.formData.familyHistory=s),Pe(s)}),b(),A(29," \u062A\u0627\u0631\u064A\u062E \u0639\u0627\u0626\u0644\u064A \u0644\u0644\u0625\u0635\u0627\u0628\u0629 \u0628\u0627\u0644\u0633\u0631\u0637\u0627\u0646 "),b()()(),w(30,"div",6)(31,"h2"),A(32,"\u0639\u0648\u0627\u0645\u0644 \u0646\u0645\u0637 \u0627\u0644\u062D\u064A\u0627\u0629"),b(),w(33,"div",7)(34,"label",14),A(35,"\u0627\u0644\u062A\u062F\u062E\u064A\u0646"),b(),w(36,"select",15),ht("ngModelChange",function(s){return De(i),mt(r.formData.smoking,s)||(r.formData.smoking=s),Pe(s)}),w(37,"option",16),A(38,"\u0644\u0627 \u0623\u062F\u062E\u0646"),b(),w(39,"option",17),A(40,"\u0645\u062F\u062E\u0646 \u0633\u0627\u0628\u0642"),b(),w(41,"option",18),A(42,"\u0645\u062F\u062E\u0646 \u062D\u0627\u0644\u064A"),b()()(),w(43,"div",7)(44,"label",19),A(45,"\u0627\u0633\u062A\u0647\u0644\u0627\u0643 \u0627\u0644\u0643\u062D\u0648\u0644"),b(),w(46,"select",20),ht("ngModelChange",function(s){return De(i),mt(r.formData.alcoholConsumption,s)||(r.formData.alcoholConsumption=s),Pe(s)}),w(47,"option",21),A(48,"\u0644\u0627 \u064A\u0648\u062C\u062F"),b(),w(49,"option",22),A(50,"\u0645\u0639\u062A\u062F\u0644"),b(),w(51,"option",23),A(52,"\u0643\u062B\u064A\u0641"),b()()(),w(53,"div",7)(54,"label",24),A(55,"\u0627\u0644\u0646\u0634\u0627\u0637 \u0627\u0644\u0628\u062F\u0646\u064A"),b(),w(56,"select",25),ht("ngModelChange",function(s){return De(i),mt(r.formData.physicalActivity,s)||(r.formData.physicalActivity=s),Pe(s)}),w(57,"option",26),A(58,"\u0642\u0644\u064A\u0644 \u0627\u0644\u062D\u0631\u0643\u0629"),b(),w(59,"option",22),A(60,"\u0645\u0639\u062A\u062F\u0644"),b(),w(61,"option",27),A(62,"\u0646\u0634\u0637"),b()()()(),w(63,"div",6)(64,"h2"),A(65,"\u0627\u0644\u0645\u0624\u0634\u0631\u0627\u062A \u0627\u0644\u0635\u062D\u064A\u0629"),b(),w(66,"div",7)(67,"label",28),A(68,"\u0645\u0624\u0634\u0631 \u0643\u062A\u0644\u0629 \u0627\u0644\u062C\u0633\u0645 (BMI)"),b(),w(69,"input",29),ht("ngModelChange",function(s){return De(i),mt(r.formData.bmi,s)||(r.formData.bmi=s),Pe(s)}),b()(),w(70,"div",7)(71,"label")(72,"input",30),ht("ngModelChange",function(s){return De(i),mt(r.formData.unexplainedWeightLoss,s)||(r.formData.unexplainedWeightLoss=s),Pe(s)}),b(),A(73," \u0641\u0642\u062F\u0627\u0646 \u0648\u0632\u0646 \u063A\u064A\u0631 \u0645\u0628\u0631\u0631 "),b()()(),w(74,"div",6)(75,"h2"),A(76,"\u0627\u0644\u0623\u0639\u0631\u0627\u0636"),b(),w(77,"div",31)(78,"label")(79,"input",32),ht("ngModelChange",function(s){return De(i),mt(r.formData.persistentPain,s)||(r.formData.persistentPain=s),Pe(s)}),b(),A(80," \u0623\u0644\u0645 \u0645\u0633\u062A\u0645\u0631 "),b(),w(81,"label")(82,"input",33),ht("ngModelChange",function(s){return De(i),mt(r.formData.unusualBleeding,s)||(r.formData.unusualBleeding=s),Pe(s)}),b(),A(83," \u0646\u0632\u064A\u0641 \u063A\u064A\u0631 \u0637\u0628\u064A\u0639\u064A "),b(),w(84,"label")(85,"input",34),ht("ngModelChange",function(s){return De(i),mt(r.formData.unexplainedFatigue,s)||(r.formData.unexplainedFatigue=s),Pe(s)}),b(),A(86," \u062A\u0639\u0628 \u063A\u064A\u0631 \u0645\u0628\u0631\u0631 "),b(),w(87,"label")(88,"input",35),ht("ngModelChange",function(s){return De(i),mt(r.formData.skinChanges,s)||(r.formData.skinChanges=s),Pe(s)}),b(),A(89," \u062A\u063A\u064A\u0631\u0627\u062A \u0641\u064A \u0627\u0644\u062C\u0644\u062F "),b(),w(90,"label")(91,"input",36),ht("ngModelChange",function(s){return De(i),mt(r.formData.digestiveIssues,s)||(r.formData.digestiveIssues=s),Pe(s)}),b(),A(92," \u0645\u0634\u0627\u0643\u0644 \u0641\u064A \u0627\u0644\u0647\u0636\u0645 "),b(),w(93,"label")(94,"input",37),ht("ngModelChange",function(s){return De(i),mt(r.formData.persistentCough,s)||(r.formData.persistentCough=s),Pe(s)}),b(),A(95," \u0633\u0639\u0627\u0644 \u0645\u0633\u062A\u0645\u0631 "),b()()(),w(96,"div",6)(97,"h2"),A(98,"\u0627\u0644\u0639\u0648\u0627\u0645\u0644 \u0627\u0644\u0628\u064A\u0626\u064A\u0629"),b(),w(99,"div",7)(100,"label")(101,"input",38),ht("ngModelChange",function(s){return De(i),mt(r.formData.exposureToToxins,s)||(r.formData.exposureToToxins=s),Pe(s)}),b(),A(102," \u0627\u0644\u062A\u0639\u0631\u0636 \u0644\u0644\u0645\u0648\u0627\u062F \u0627\u0644\u0633\u0627\u0645\u0629 "),b()(),w(103,"div",7)(104,"label",39),A(105,"\u0627\u0644\u062A\u0639\u0631\u0636 \u0644\u0644\u0634\u0645\u0633"),b(),w(106,"select",40),ht("ngModelChange",function(s){return De(i),mt(r.formData.sunExposure,s)||(r.formData.sunExposure=s),Pe(s)}),w(107,"option",41),A(108,"\u0645\u0646\u062E\u0641\u0636"),b(),w(109,"option",22),A(110,"\u0645\u0639\u062A\u062F\u0644"),b(),w(111,"option",42),A(112,"\u0645\u0631\u062A\u0641\u0639"),b()()()(),w(113,"div",6)(114,"h2"),A(115,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0637\u0628\u064A"),b(),w(116,"div",7)(117,"label")(118,"input",43),ht("ngModelChange",function(s){return De(i),mt(r.formData.previousCancer,s)||(r.formData.previousCancer=s),Pe(s)}),b(),A(119," \u0625\u0635\u0627\u0628\u0629 \u0633\u0627\u0628\u0642\u0629 \u0628\u0627\u0644\u0633\u0631\u0637\u0627\u0646 "),b()(),w(120,"div",7)(121,"label")(122,"input",44),ht("ngModelChange",function(s){return De(i),mt(r.formData.chronicDisease,s)||(r.formData.chronicDisease=s),Pe(s)}),b(),A(123," \u0623\u0645\u0631\u0627\u0636 \u0645\u0632\u0645\u0646\u0629 "),b()()()(),w(124,"div",45)(125,"button",46),A(126,"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0645\u062E\u0627\u0637\u0631"),b(),w(127,"button",47),je("click",function(){return De(i),Pe(r.resetForm())}),A(128,"\u0625\u0639\u0627\u062F\u0629 \u062A\u0639\u064A\u064A\u0646"),b()()(),Te(129,n0e,16,9,"div",48),b()}e&2&&(W(15),dt("ngModel",r.formData.age),W(6),dt("ngModel",r.formData.sex),W(3),dt("ngModel",r.formData.sex),W(4),dt("ngModel",r.formData.familyHistory),W(8),dt("ngModel",r.formData.smoking),W(10),dt("ngModel",r.formData.alcoholConsumption),W(10),dt("ngModel",r.formData.physicalActivity),W(13),dt("ngModel",r.formData.bmi),W(3),dt("ngModel",r.formData.unexplainedWeightLoss),W(7),dt("ngModel",r.formData.persistentPain),W(3),dt("ngModel",r.formData.unusualBleeding),W(3),dt("ngModel",r.formData.unexplainedFatigue),W(3),dt("ngModel",r.formData.skinChanges),W(3),dt("ngModel",r.formData.digestiveIssues),W(3),dt("ngModel",r.formData.persistentCough),W(7),dt("ngModel",r.formData.exposureToToxins),W(5),dt("ngModel",r.formData.sunExposure),W(12),dt("ngModel",r.formData.previousCancer),W(4),dt("ngModel",r.formData.chronicDisease),W(7),xe("ngIf",r.showResult))},dependencies:[In,Ca,dw,yc,gh,Gs,br,Oo,Ro,Jn,ps,kc,$i,Pa,_r,yr,Xh,Ma,Qh,Nc,Rc],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:block;font-family:Cairo,sans-serif;direction:rtl}.cancer-analysis-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;color:#2c3e50;margin-bottom:1rem;background:linear-gradient(120deg,#e74c3c,#c0392b);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.cancer-form[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:2rem;box-shadow:0 10px 30px #0000001a}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#c0392b;font-size:1.3rem;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e0e0e0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#444;font-weight:600}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem;transition:all .3s ease}.form-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#c0392b;box-shadow:0 0 0 3px #c0392b1a;outline:none}.symptoms-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}.symptoms-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.radio-group[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;justify-content:center}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem 2rem;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:#c0392b;color:#fff;border:none}.form-actions[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:hover{background:#a93226;transform:translateY(-2px)}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]{background:#fff;color:#666;border:2px solid #e0e0e0}.form-actions[_ngcontent-%COMP%]   .reset-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-color:#666}.results-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.results-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:2rem;text-align:center}.risk-meter[_ngcontent-%COMP%]{height:20px;background:#f0f0f0;border-radius:10px;overflow:hidden;margin-bottom:2rem}.risk-meter[_ngcontent-%COMP%]   .risk-indicator[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#27ae60,#f1c40f,#c0392b);transition:width 1s ease-in-out}.risk-details[_ngcontent-%COMP%]{text-align:center;padding:2rem;border-radius:10px;margin-top:1rem}.risk-details.low[_ngcontent-%COMP%]{background:#27ae601a;border:2px solid #27ae60}.risk-details.moderate[_ngcontent-%COMP%]{background:#f1c40f1a;border:2px solid #f1c40f}.risk-details.high[_ngcontent-%COMP%]{background:#c0392b1a;border:2px solid #c0392b}.risk-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.risk-details[_ngcontent-%COMP%]   .risk-percentage[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1.5rem}.recommendations[_ngcontent-%COMP%]{text-align:right;margin-top:2rem;padding:1.5rem;background:#0000000d;border-radius:8px}.recommendations[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem}.recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem;padding-right:1.5rem;position:relative}.recommendations[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;right:0;color:#c0392b}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.cancer-analysis-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.form-grid[_ngcontent-%COMP%], .symptoms-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c0392b;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a93226}']})};var lE=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",title:"\u0637\u0628\u064A\u0628\u064A - \u0631\u0639\u0627\u064A\u062A\u0643 \u0627\u0644\u0635\u062D\u064A\u0629 \u0641\u064A \u0645\u0643\u0627\u0646 \u0648\u0627\u062D\u062F",component:l1},{path:"login",title:"\u0645\u0631\u062D\u0628\u0627\u064B \u0628\u0639\u0648\u062F\u062A\u0643 - \u0627\u0646\u0636\u0645 \u0625\u0644\u0649 \u0645\u062C\u062A\u0645\u0639 \u0637\u0628\u064A\u0628\u064A",component:E1},{path:"register",title:"\u0627\u0646\u0636\u0645 \u0625\u0644\u0649 \u0639\u0627\u0626\u0644\u0629 \u0637\u0628\u064A\u0628\u064A - \u0631\u062D\u0644\u062A\u0643 \u0646\u062D\u0648 \u0635\u062D\u0629 \u0623\u0641\u0636\u0644 \u062A\u0628\u062F\u0623 \u0647\u0646\u0627",component:$x},{path:"about",title:"\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0642\u0635\u062A\u0646\u0627 - \u0631\u0624\u064A\u0629 \u0637\u0628\u064A\u0628\u064A \u0644\u0644\u0631\u0639\u0627\u064A\u0629 \u0627\u0644\u0635\u062D\u064A\u0629",component:tE},{path:"contact",title:"\u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627 - \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627",component:nE},{path:"help",title:"\u0646\u062D\u0646 \u0647\u0646\u0627 \u0644\u0645\u0633\u0627\u0639\u062F\u062A\u0643 - \u0645\u0631\u0643\u0632 \u0627\u0644\u062F\u0639\u0645",component:Kx},{path:"ai-analysis",title:"\u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0646\u0628\u0624 \u0628\u0627\u0644\u0623\u0645\u0631\u0627\u0636 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A",component:iE,children:[{path:"pneumonia",title:"\u062A\u062D\u0644\u064A\u0644 \u0627\u0644\u0627\u0644\u062A\u0647\u0627\u0628 \u0627\u0644\u0631\u0626\u0648\u064A",component:sE},{path:"liver",title:"\u062A\u0646\u0628\u0624 \u062A\u0644\u064A\u0641 \u0627\u0644\u0643\u0628\u062F",component:aE},{path:"heart",title:"\u062A\u0646\u0628\u0624 \u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0642\u0644\u0628",component:uE},{path:"cancer",title:"\u062A\u0646\u0628\u0624 \u0623\u0645\u0631\u0627\u0636 \u0627\u0644\u0633\u0631\u0637\u0627\u0646",component:cE}]},{path:"doctors",title:"\u0627\u062E\u062A\u0631 \u0637\u0628\u064A\u0628\u0643 \u0627\u0644\u0645\u062A\u062E\u0635\u0635 - \u0646\u062E\u0628\u0629 \u0645\u0646 \u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0637\u0628\u0627\u0621",component:Gx},{path:"doctor/:id",title:"\u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0637\u0628\u064A\u0628\u0643 - \u062E\u0628\u0631\u0627\u062A \u0648\u062A\u062E\u0635\u0635\u0627\u062A \u0645\u0648\u062B\u0648\u0642\u0629",component:qx},{path:"controlPanel",title:"\u0635\u0641\u062D\u062A\u0643 \u0627\u0644\u0634\u062E\u0635\u064A\u0629 - \u062A\u062D\u0643\u0645 \u0641\u064A \u062D\u0633\u0627\u0628\u0643 \u0628\u0633\u0647\u0648\u0644\u0629",component:Zx},{path:"appointments",title:"\u062C\u062F\u0648\u0644 \u0645\u0648\u0627\u0639\u064A\u062F\u0643 - \u062A\u0646\u0638\u064A\u0645 \u0623\u0641\u0636\u0644 \u0644\u0648\u0642\u062A\u0643",component:Qx},{path:"notifications",title:"\u0627\u0644\u0627\u0634\u0639\u0627\u0631\u0627\u062A - \u0627\u0644\u0627\u0634\u0639\u0627\u0631\u0627\u062A \u0627\u0644\u0645\u0631\u0633\u0644\u0629 \u0644\u0643",component:rE},{path:"bookings",title:"\u062D\u062C\u0648\u0632\u0627\u062A\u0643 \u0627\u0644\u0645\u0633\u062A\u0642\u0628\u0644\u064A\u0629 - \u062A\u062A\u0628\u0639 \u0645\u0648\u0627\u0639\u064A\u062F\u0643 \u0628\u0633\u0647\u0648\u0644\u0629",component:Jx},{path:"myAppts",title:"\u0645\u0648\u0627\u0639\u064A\u062F\u0643 \u0627\u0644\u0642\u0627\u062F\u0645\u0629 - \u062E\u0637\u0637 \u0644\u0635\u062D\u062A\u0643",component:eE},{path:"**",title:"\u0639\u0630\u0631\u0627\u064B! - \u0627\u0644\u0635\u0641\u062D\u0629 \u0627\u0644\u062A\u064A \u062A\u0628\u062D\u062B \u0639\u0646\u0647\u0627 \u063A\u064A\u0631 \u0645\u0648\u062C\u0648\u062F\u0629",component:d1}];var a9={providers:[j3({eventCoalescing:!0}),Y0(lE,dT()),l6(NS)]};var Uk=ha(td());var r0e=()=>({exact:!0});function i0e(n,t){if(n&1&&G(0,"img",27),n&2){let e=ve(2);xe("src",e.userData.image,It)("alt",e.userData==null?null:e.userData.displayName)}}function o0e(n,t){n&1&&(w(0,"div",28),G(1,"i",43),b())}function s0e(n,t){if(n&1&&(w(0,"span",44),A(1,"\u0625\u062F\u0627\u0631\u064A"),b(),w(2,"span",44),A(3),b()),n&2){let e=ve(2);W(3),Ze(" ",e.user.email," ")}}function a0e(n,t){if(n&1&&G(0,"img",33),n&2){let e=ve(2);xe("src",e.userData.image,It)}}function u0e(n,t){n&1&&(w(0,"div",34),G(1,"i",45),b())}function c0e(n,t){n&1&&(w(0,"small",36),A(1,"\u0645\u0641\u0639\u0644"),b(),G(2,"i",46))}function l0e(n,t){n&1&&(w(0,"small",36),A(1,"\u063A\u064A\u0631 \u0645\u0641\u0639\u0644"),b(),G(2,"i",47))}function d0e(n,t){if(n&1&&Te(0,c0e,3,0)(1,l0e,3,0),n&2){let e=ve(2);be(e.userData!=null&&e.userData.isActive?0:1)}}function h0e(n,t){if(n&1&&(w(0,"p",52),G(1,"i",53),A(2),b()),n&2){let e=ve(3);W(2),st(e.userData==null?null:e.userData.specialization)}}function f0e(n,t){if(n&1&&(w(0,"p",52),G(1,"i",54),A(2),b()),n&2){let e=ve(3);W(2),Ze("",e.userData==null?null:e.userData.experience," \u0633\u0646\u0648\u0627\u062A \u062E\u0628\u0631\u0629")}}function p0e(n,t){n&1&&G(0,"i",46)}function m0e(n,t){n&1&&G(0,"i",47)}function g0e(n,t){if(n&1&&(w(0,"p",52),G(1,"i",55),A(2),Te(3,p0e,1,0,"i",46)(4,m0e,1,0,"i",47),b()),n&2){let e=ve(3);W(2),Ze("",e.userData==null?null:e.userData.syndicateRegistrationNumber," "),W(),be(e.userData!=null&&e.userData.isVerified?3:4)}}function v0e(n,t){if(n&1&&(w(0,"p",52),G(1,"i",56),A(2),b()),n&2){let e=ve(3);W(2),st(e.userData==null?null:e.userData.city)}}function _0e(n,t){if(n&1&&(w(0,"p",52),G(1,"i",57),A(2),b()),n&2){let e=ve(3);W(2),Ze("0",e.userData==null?null:e.userData.phone,"")}}function y0e(n,t){if(n&1&&(w(0,"li",37)(1,"div",48)(2,"h6",49),G(3,"i",50),A(4,"\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u0637\u0628\u064A\u0628"),b(),w(5,"div",51),Te(6,h0e,3,1,"p",52)(7,f0e,3,1,"p",52)(8,g0e,5,2,"p",52)(9,v0e,3,1,"p",52)(10,_0e,3,1,"p",52),b()()()),n&2){let e=ve(2);W(6),be(e.userData!=null&&e.userData.specialization?6:-1),W(),be(e.userData!=null&&e.userData.experience?7:-1),W(),be(e.userData!=null&&e.userData.syndicateRegistrationNumber?8:-1),W(),be(e.userData!=null&&e.userData.city?9:-1),W(),be(e.userData!=null&&e.userData.phone?10:-1)}}function b0e(n,t){if(n&1&&(w(0,"span",60),A(1),nn(2,"async"),b()),n&2){let e,r=ve(3);W(),Ze(" ",(e=p0(2,1,r.unreadNotifications$))==null?null:e.length," ")}}function w0e(n,t){if(n&1&&(w(0,"li",37)(1,"a",58),G(2,"i",59),A(3," \u0627\u0644\u0627\u0634\u0639\u0627\u0631\u0627\u062A "),Te(4,b0e,3,3,"span",60),nn(5,"async"),b()()),n&2){let e,r=ve(2);W(4),be((e=p0(5,1,r.unreadNotifications$))!=null&&e.length?4:-1)}}function C0e(n,t){n&1&&(w(0,"li",37)(1,"a",61),G(2,"i",62),A(3,"\u0645\u0648\u0627\u0639\u064A\u062F\u064A "),b()())}function x0e(n,t){n&1&&(w(0,"li",37)(1,"a",63),G(2,"i",64),A(3," \u062D\u062C\u0648\u0632\u0627\u062A \u0627\u0644\u0645\u0631\u0636\u064A "),b()(),w(4,"li",37)(5,"a",65),G(6,"i",62),A(7,"\u0645\u0648\u0627\u0639\u064A\u062F \u0639\u064A\u0627\u062F\u062A\u064A "),b()())}function E0e(n,t){if(n&1){let e=Lt();w(0,"li",23)(1,"a",25)(2,"div",26),Te(3,i0e,1,2,"img",27)(4,o0e,2,0,"div",28)(5,s0e,4,1),b(),w(6,"span",29),A(7),b()(),w(8,"ul",30)(9,"li",31)(10,"div",32),Te(11,a0e,1,1,"img",33)(12,u0e,2,0,"div",34),w(13,"div")(14,"h6",35),A(15),b(),w(16,"small",36),A(17),b(),w(18,"p"),Te(19,d0e,2,1),b()()()(),Te(20,y0e,11,5,"li",37),w(21,"li"),G(22,"hr",38),b(),w(23,"li",37)(24,"a",39),G(25,"i",40),A(26,"\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062D\u0633\u0627\u0628 "),b()(),Te(27,w0e,6,3,"li",37)(28,C0e,4,0,"li",37)(29,x0e,8,0),w(30,"li",37)(31,"button",41),je("click",function(){De(e);let i=ve();return Pe(i.logout())}),G(32,"i",42),A(33,"\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C "),b()()()()}if(n&2){let e=ve();W(3),be(e.userData!=null&&e.userData.image?3:4),W(2),be(e.isAdmin?5:-1),W(2),st(e.userData==null?null:e.userData.displayName),W(4),be(e.userData!=null&&e.userData.image?11:12),W(4),st(e.userData==null?null:e.userData.displayName),W(2),st(e.userData==null?null:e.userData.email),W(2),be((e.userData==null?null:e.userData.role)==="client"?19:-1),W(),be((e.userData==null?null:e.userData.role)==="doctor"?20:-1),W(7),be(e.isAdmin?-1:27),W(),be((e.userData==null?null:e.userData.role)==="client"?28:-1),W(),be((e.userData==null?null:e.userData.role)==="doctor"?29:-1)}}function I0e(n,t){n&1&&(w(0,"li",24)(1,"a",66),G(2,"i",67),A(3,"\u062F\u062E\u0648\u0644 "),b(),w(4,"a",68),G(5,"i",69),A(6,"\u062A\u0633\u062C\u064A\u0644 "),b()())}var dE=class n{constructor(t,e,r,i,o){this.auth=t;this.router=e;this.userService=r;this.adminService=i;this.notificationService=o;this.unreadNotifications$=new Tt,this.auth.onAuthStateChanged(s=>{this.user=s,this.isLoggedIn=!!s,this.isAdmin=this.adminService.adminsList.some(a=>a.email===s?.email),s&&this.userService.getUserData(s.uid).subscribe(a=>{this.userData=a.val(),this.unreadNotifications$=this.notificationService.getUnreadNotifications(s.uid)})})}user;userData=null;isLoggedIn=!1;isAdmin=!1;unreadNotifications$;logout(){Uk.default.fire({title:"\u0647\u0644 \u062A\u0631\u064A\u062F \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C\u061F",icon:"question",showCancelButton:!0,confirmButtonText:"\u0646\u0639\u0645",cancelButtonText:"\u0625\u0644\u063A\u0627\u0621",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6"}).then(t=>{t.isConfirmed&&TC(this.auth).then(()=>{this.router.navigate(["/"]),Uk.default.fire({title:"\u062A\u0645 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062E\u0631\u0648\u062C",icon:"success",timer:1500,showConfirmButton:!1})})})}static \u0275fac=function(e){return new(e||n)(me(or),me(Ar),me(Wi),me(Hs),me(ea))};static \u0275cmp=_t({type:n,selectors:[["app-navbar"]],decls:36,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","shadow-sm","sticky-top"],[1,"container"],["routerLink","/",1,"navbar-brand","d-flex","align-items-center"],["src","assets/images/logo-image.png","alt","Logo","height","40",1,"me-2"],[1,"fw-bold","text-primary"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarContent",1,"navbar-toggler","border-0"],[1,"navbar-toggler-icon"],["id","navbarContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","mx-auto"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-item"],["routerLink","/home","routerLinkActive","active",1,"nav-link","px-3",3,"routerLinkActiveOptions"],[1,"fas","fa-home","me-1"],["routerLink","/doctors","routerLinkActive","active",1,"nav-link","px-3"],[1,"fas","fa-user-md","me-1"],["routerLink","/about","routerLinkActive","active",1,"nav-link","px-3"],[1,"fas","fa-info-circle","me-1"],["routerLink","/contact","routerLinkActive","active",1,"nav-link","px-3"],[1,"fas","fa-envelope","me-1"],["routerLink","/ai-analysis","routerLinkActive","active",1,"nav-link","px-3","position-relative"],[1,"position-absolute","top-0","end-0","translate-middle","badge","rounded-pill","bg-primary",2,"font-size","0.5rem"],[1,"fa-solid","fa-star","text-warning"],[1,"fas","fa-brain","text-primary","me-1"],[1,"navbar-nav","ms-auto"],[1,"nav-item","dropdown"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-item","d-flex","gap-2"],["role","button","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","d-flex","align-items-center"],[1,"avatar-container","me-2"],["width","32","height","32",1,"rounded-circle",3,"src","alt"],[1,"avatar-placeholder","rounded-circle","d-flex","align-items-center","justify-content-center","bg-light",2,"width","32px","height","32px"],[1,"d-none","d-lg-inline"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"dropdown-menu","dropdown-menu-end","shadow-sm","border-0","rounded-3"],[1,"px-4","py-3","border-bottom"],[1,"d-flex","align-items-center"],["width","48","height","48",1,"rounded-circle","me-3",3,"src"],[1,"avatar-placeholder","rounded-circle","me-3","bg-light","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px"],[1,"mb-0"],[1,"text-muted"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show"],[1,"dropdown-divider"],["routerLink","controlPanel",1,"dropdown-item","py-2"],[1,"fas","fa-cog","me-2"],[1,"dropdown-item","py-2","text-danger",3,"click"],[1,"fas","fa-sign-out-alt","me-2"],[1,"fas","fa-user","text-secondary"],[1,"badge","bg-primary","ms-2"],[1,"fas","fa-user","fa-lg","text-secondary"],[1,"fas","fa-check-circle","text-success","ms-2"],[1,"fas","fa-times-circle","text-danger","ms-2"],[1,"p-3","bg-light","rounded-3","mx-3","my-2"],[1,"mb-2","text-primary"],[1,"fas","fa-user-md","me-2"],[1,"small"],[1,"mb-1"],[1,"fas","fa-stethoscope","me-2"],[1,"fas","fa-briefcase","me-2"],[1,"fas","fa-id-card","me-2"],[1,"fas","fa-location-dot","me-2"],[1,"fas","fa-phone","me-2"],["routerLink","notifications",1,"dropdown-item","py-2","position-relative"],[1,"fas","fa-bell","me-2"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-primary"],["routerLink","appointments",1,"dropdown-item","py-2"],[1,"fas","fa-calendar-check","me-2"],["routerLink","myAppts",1,"dropdown-item","py-2"],[1,"fa-solid","fa-bookmark","me-2"],["routerLink","bookings",1,"dropdown-item","py-2"],["routerLink","/login",1,"btn","btn-outline-primary","rounded-pill","px-4"],[1,"fas","fa-sign-in-alt","me-2"],["routerLink","/register",1,"btn","btn-primary","rounded-pill","px-4"],[1,"fas","fa-user-plus","me-2"]],template:function(e,r){e&1&&(w(0,"nav",0)(1,"div",1)(2,"a",2),G(3,"img",3),w(4,"span",4),A(5,"\u0637\u0628\u064A\u0628\u064A"),b()(),w(6,"button",5),G(7,"span",6),b(),w(8,"div",7)(9,"ul",8)(10,"li",9)(11,"a",10),G(12,"i",11),A(13," \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629 "),b()(),w(14,"li",9)(15,"a",12),G(16,"i",13),A(17," \u0627\u0644\u0623\u0637\u0628\u0627\u0621 "),b()(),w(18,"li",9)(19,"a",14),G(20,"i",15),A(21," \u0639\u0646 \u0627\u0644\u0645\u0646\u0635\u0629 "),b()(),w(22,"li",9)(23,"a",16),G(24,"i",17),A(25," \u0627\u062A\u0635\u0644 \u0628\u0646\u0627 "),b()(),w(26,"li",9)(27,"a",18)(28,"span",19),A(29," \u062C\u062F\u064A\u062F "),G(30,"i",20),b(),G(31,"i",21),A(32," \u0646\u0638\u0627\u0645 \u0627\u0644\u062A\u0646\u0628\u0624 \u0628\u0627\u0644\u0623\u0645\u0631\u0627\u0636 \u0628\u0627\u0644\u0630\u0643\u0627\u0621 \u0627\u0644\u0627\u0635\u0637\u0646\u0627\u0639\u064A "),b()()(),w(33,"ul",22),Te(34,E0e,34,11,"li",23)(35,I0e,7,0,"li",24),b()()()()),e&2&&(W(11),xe("routerLinkActiveOptions",Gb(2,r0e)),W(23),be(r.isLoggedIn?34:35))},dependencies:[$n,cT,w0],styles:['.navbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#fff,#f8f9fa);box-shadow:0 2px 15px #0000001a;transition:all .3s ease}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;color:#0d6efd;transition:color .3s ease}.navbar-brand[_ngcontent-%COMP%]:hover{color:#0257d5}.nav-link[_ngcontent-%COMP%]{position:relative;padding:.5rem 1rem;font-weight:500}.nav-link[_ngcontent-%COMP%]:after{content:"";position:absolute;width:0;height:2px;bottom:0;left:50%;background-color:#0d6efd;transition:all .3s ease;transform:translate(-50%)}.nav-link[_ngcontent-%COMP%]:hover:after{width:100%}.nav-link.active[_ngcontent-%COMP%]{color:#0d6efd}.nav-link.active[_ngcontent-%COMP%]:after{width:100%}.dropdown-menu[_ngcontent-%COMP%]{border:none;box-shadow:0 5px 15px #0000001a;border-radius:1rem;padding:1rem}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{border-radius:.5rem;transition:all .2s ease}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background-color:#0d6efd1a;transform:translate(5px)}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid #0d6efd;transition:transform .3s ease}.user-profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.btn[_ngcontent-%COMP%]{transition:all .3s ease}.btn.btn-outline-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #0d6efd33}.btn.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #0d6efd4d}@media (max-width: 991.98px){.navbar-collapse[_ngcontent-%COMP%]{background:#fffffff2;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:1rem;padding:1rem;margin-top:1rem;box-shadow:0 5px 15px #0000001a}}']})};var hE=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"bg-dark","text-white","py-4"],[1,"container","text-center"],[1,"mb-0"]],template:function(e,r){e&1&&(w(0,"footer",0)(1,"div",1)(2,"p",2),A(3,"\xA9 2025 \u0637\u0628\u064A\u0628\u064A. \u062C\u0645\u064A\u0639 \u0627\u0644\u062D\u0642\u0648\u0642 \u0645\u062D\u0641\u0648\u0638\u0629."),b()()())},encapsulation:2})};var fE=class n{title="vezeeta-graduationProject";showToTop=!1;onWindowScroll(){this.showToTop=(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)>200}ngOnInit(){}toTop(){window.scrollTo({top:0,behavior:"smooth"})}onActivate(){window.scroll(0,0)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_t({type:n,selectors:[["app-root"]],hostBindings:function(e,r){e&1&&je("scroll",function(){return r.onWindowScroll()},!1,ON)},decls:13,vars:2,consts:[["dir","rtl",1,"direction","overflow-hidden","main-bg"],[1,"content-wrapper","min-vh-100"],[3,"activate"],["title","Back to Top",1,"scroll-to-top",3,"click"],[1,"rocket-wrapper"],[1,"fas","fa-rocket","rocket-icon"],[1,"flame"],[1,"particles"]],template:function(e,r){e&1&&(w(0,"div",0),G(1,"app-navbar"),w(2,"div",1)(3,"router-outlet",2),je("activate",function(){return r.onActivate()}),b()(),G(4,"app-footer"),w(5,"div",3),je("click",function(){return r.toTop()}),w(6,"div",4),G(7,"i",5)(8,"div",6),b(),w(9,"div",7),G(10,"span")(11,"span")(12,"span"),b()()()),e&2&&(W(5),Nt("visible",r.showToTop))},dependencies:[Eh,dE,hE],styles:[".scroll-to-top[_ngcontent-%COMP%]{position:fixed;bottom:30px;right:30px;z-index:1050;opacity:0;visibility:hidden;transform:translateY(20px);transition:all .4s cubic-bezier(.4,0,.2,1);cursor:pointer}.scroll-to-top.visible[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.scroll-to-top[_ngcontent-%COMP%]   .rocket-wrapper[_ngcontent-%COMP%]{position:relative;width:60px;height:60px;background:linear-gradient(135deg,#6366f1,#4f46e5);border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px #6366f166;transition:transform .3s ease}.scroll-to-top[_ngcontent-%COMP%]   .rocket-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.scroll-to-top[_ngcontent-%COMP%]   .rocket-wrapper[_ngcontent-%COMP%]:hover   .flame[_ngcontent-%COMP%]{height:20px;opacity:1}.scroll-to-top[_ngcontent-%COMP%]   .rocket-wrapper[_ngcontent-%COMP%]:hover + .particles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.scroll-to-top[_ngcontent-%COMP%]   .rocket-icon[_ngcontent-%COMP%]{color:#fff;font-size:24px;transform:rotate(-45deg);margin-bottom:5px;z-index:2}.scroll-to-top[_ngcontent-%COMP%]   .flame[_ngcontent-%COMP%]{position:absolute;bottom:-15px;width:20px;height:0;background:linear-gradient(to bottom,#fbbf24,#ef4444);border-radius:50%;opacity:0;transition:all .3s ease;filter:blur(2px)}.scroll-to-top[_ngcontent-%COMP%]   .particles[_ngcontent-%COMP%]{position:absolute;bottom:-5px;left:50%;transform:translate(-50%)}.scroll-to-top[_ngcontent-%COMP%]   .particles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;width:4px;height:4px;background:#fbbf24;border-radius:50%;opacity:0;transition:all .3s ease}.scroll-to-top[_ngcontent-%COMP%]   .particles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){left:-15px;animation:_ngcontent-%COMP%_particle1 1.5s infinite}.scroll-to-top[_ngcontent-%COMP%]   .particles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){animation:_ngcontent-%COMP%_particle2 1.5s infinite}.scroll-to-top[_ngcontent-%COMP%]   .particles[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(3){right:-15px;animation:_ngcontent-%COMP%_particle3 1.5s infinite}@keyframes _ngcontent-%COMP%_particle1{0%{transform:translate(0);opacity:0}50%{transform:translate(-10px,10px);opacity:1}to{transform:translate(-20px,20px);opacity:0}}@keyframes _ngcontent-%COMP%_particle2{0%{transform:translate(0);opacity:0}50%{transform:translateY(15px);opacity:1}to{transform:translateY(30px);opacity:0}}@keyframes _ngcontent-%COMP%_particle3{0%{transform:translate(0);opacity:0}50%{transform:translate(10px,10px);opacity:1}to{transform:translate(20px,20px);opacity:0}}"]})};var u9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c9={};var pE,l9;(function(){var n;function t(B,k){function D(){}D.prototype=k.prototype,B.D=k.prototype,B.prototype=new D,B.prototype.constructor=B,B.C=function(P,z,U){for(var $=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)$[ae-2]=arguments[ae];return k.prototype[z].apply(P,$)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(B,k,D){D||(D=0);var P=Array(16);if(typeof k=="string")for(var z=0;16>z;++z)P[z]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(z=0;16>z;++z)P[z]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=B.g[0],D=B.g[1],z=B.g[2];var U=B.g[3],$=k+(U^D&(z^U))+P[0]+3614090360&4294967295;k=D+($<<7&4294967295|$>>>25),$=U+(z^k&(D^z))+P[1]+3905402710&4294967295,U=k+($<<12&4294967295|$>>>20),$=z+(D^U&(k^D))+P[2]+606105819&4294967295,z=U+($<<17&4294967295|$>>>15),$=D+(k^z&(U^k))+P[3]+3250441966&4294967295,D=z+($<<22&4294967295|$>>>10),$=k+(U^D&(z^U))+P[4]+4118548399&4294967295,k=D+($<<7&4294967295|$>>>25),$=U+(z^k&(D^z))+P[5]+1200080426&4294967295,U=k+($<<12&4294967295|$>>>20),$=z+(D^U&(k^D))+P[6]+2821735955&4294967295,z=U+($<<17&4294967295|$>>>15),$=D+(k^z&(U^k))+P[7]+4249261313&4294967295,D=z+($<<22&4294967295|$>>>10),$=k+(U^D&(z^U))+P[8]+1770035416&4294967295,k=D+($<<7&4294967295|$>>>25),$=U+(z^k&(D^z))+P[9]+2336552879&4294967295,U=k+($<<12&4294967295|$>>>20),$=z+(D^U&(k^D))+P[10]+4294925233&4294967295,z=U+($<<17&4294967295|$>>>15),$=D+(k^z&(U^k))+P[11]+2304563134&4294967295,D=z+($<<22&4294967295|$>>>10),$=k+(U^D&(z^U))+P[12]+1804603682&4294967295,k=D+($<<7&4294967295|$>>>25),$=U+(z^k&(D^z))+P[13]+4254626195&4294967295,U=k+($<<12&4294967295|$>>>20),$=z+(D^U&(k^D))+P[14]+2792965006&4294967295,z=U+($<<17&4294967295|$>>>15),$=D+(k^z&(U^k))+P[15]+1236535329&4294967295,D=z+($<<22&4294967295|$>>>10),$=k+(z^U&(D^z))+P[1]+4129170786&4294967295,k=D+($<<5&4294967295|$>>>27),$=U+(D^z&(k^D))+P[6]+3225465664&4294967295,U=k+($<<9&4294967295|$>>>23),$=z+(k^D&(U^k))+P[11]+643717713&4294967295,z=U+($<<14&4294967295|$>>>18),$=D+(U^k&(z^U))+P[0]+3921069994&4294967295,D=z+($<<20&4294967295|$>>>12),$=k+(z^U&(D^z))+P[5]+3593408605&4294967295,k=D+($<<5&4294967295|$>>>27),$=U+(D^z&(k^D))+P[10]+38016083&4294967295,U=k+($<<9&4294967295|$>>>23),$=z+(k^D&(U^k))+P[15]+3634488961&4294967295,z=U+($<<14&4294967295|$>>>18),$=D+(U^k&(z^U))+P[4]+3889429448&4294967295,D=z+($<<20&4294967295|$>>>12),$=k+(z^U&(D^z))+P[9]+568446438&4294967295,k=D+($<<5&4294967295|$>>>27),$=U+(D^z&(k^D))+P[14]+3275163606&4294967295,U=k+($<<9&4294967295|$>>>23),$=z+(k^D&(U^k))+P[3]+4107603335&4294967295,z=U+($<<14&4294967295|$>>>18),$=D+(U^k&(z^U))+P[8]+1163531501&4294967295,D=z+($<<20&4294967295|$>>>12),$=k+(z^U&(D^z))+P[13]+2850285829&4294967295,k=D+($<<5&4294967295|$>>>27),$=U+(D^z&(k^D))+P[2]+4243563512&4294967295,U=k+($<<9&4294967295|$>>>23),$=z+(k^D&(U^k))+P[7]+1735328473&4294967295,z=U+($<<14&4294967295|$>>>18),$=D+(U^k&(z^U))+P[12]+2368359562&4294967295,D=z+($<<20&4294967295|$>>>12),$=k+(D^z^U)+P[5]+4294588738&4294967295,k=D+($<<4&4294967295|$>>>28),$=U+(k^D^z)+P[8]+2272392833&4294967295,U=k+($<<11&4294967295|$>>>21),$=z+(U^k^D)+P[11]+1839030562&4294967295,z=U+($<<16&4294967295|$>>>16),$=D+(z^U^k)+P[14]+4259657740&4294967295,D=z+($<<23&4294967295|$>>>9),$=k+(D^z^U)+P[1]+2763975236&4294967295,k=D+($<<4&4294967295|$>>>28),$=U+(k^D^z)+P[4]+1272893353&4294967295,U=k+($<<11&4294967295|$>>>21),$=z+(U^k^D)+P[7]+4139469664&4294967295,z=U+($<<16&4294967295|$>>>16),$=D+(z^U^k)+P[10]+3200236656&4294967295,D=z+($<<23&4294967295|$>>>9),$=k+(D^z^U)+P[13]+681279174&4294967295,k=D+($<<4&4294967295|$>>>28),$=U+(k^D^z)+P[0]+3936430074&4294967295,U=k+($<<11&4294967295|$>>>21),$=z+(U^k^D)+P[3]+3572445317&4294967295,z=U+($<<16&4294967295|$>>>16),$=D+(z^U^k)+P[6]+76029189&4294967295,D=z+($<<23&4294967295|$>>>9),$=k+(D^z^U)+P[9]+3654602809&4294967295,k=D+($<<4&4294967295|$>>>28),$=U+(k^D^z)+P[12]+3873151461&4294967295,U=k+($<<11&4294967295|$>>>21),$=z+(U^k^D)+P[15]+530742520&4294967295,z=U+($<<16&4294967295|$>>>16),$=D+(z^U^k)+P[2]+3299628645&4294967295,D=z+($<<23&4294967295|$>>>9),$=k+(z^(D|~U))+P[0]+4096336452&4294967295,k=D+($<<6&4294967295|$>>>26),$=U+(D^(k|~z))+P[7]+1126891415&4294967295,U=k+($<<10&4294967295|$>>>22),$=z+(k^(U|~D))+P[14]+2878612391&4294967295,z=U+($<<15&4294967295|$>>>17),$=D+(U^(z|~k))+P[5]+4237533241&4294967295,D=z+($<<21&4294967295|$>>>11),$=k+(z^(D|~U))+P[12]+1700485571&4294967295,k=D+($<<6&4294967295|$>>>26),$=U+(D^(k|~z))+P[3]+2399980690&4294967295,U=k+($<<10&4294967295|$>>>22),$=z+(k^(U|~D))+P[10]+4293915773&4294967295,z=U+($<<15&4294967295|$>>>17),$=D+(U^(z|~k))+P[1]+2240044497&4294967295,D=z+($<<21&4294967295|$>>>11),$=k+(z^(D|~U))+P[8]+1873313359&4294967295,k=D+($<<6&4294967295|$>>>26),$=U+(D^(k|~z))+P[15]+4264355552&4294967295,U=k+($<<10&4294967295|$>>>22),$=z+(k^(U|~D))+P[6]+2734768916&4294967295,z=U+($<<15&4294967295|$>>>17),$=D+(U^(z|~k))+P[13]+1309151649&4294967295,D=z+($<<21&4294967295|$>>>11),$=k+(z^(D|~U))+P[4]+4149444226&4294967295,k=D+($<<6&4294967295|$>>>26),$=U+(D^(k|~z))+P[11]+3174756917&4294967295,U=k+($<<10&4294967295|$>>>22),$=z+(k^(U|~D))+P[2]+718787259&4294967295,z=U+($<<15&4294967295|$>>>17),$=D+(U^(z|~k))+P[9]+3951481745&4294967295,B.g[0]=B.g[0]+k&4294967295,B.g[1]=B.g[1]+(z+($<<21&4294967295|$>>>11))&4294967295,B.g[2]=B.g[2]+z&4294967295,B.g[3]=B.g[3]+U&4294967295}r.prototype.u=function(B,k){k===void 0&&(k=B.length);for(var D=k-this.blockSize,P=this.B,z=this.h,U=0;U<k;){if(z==0)for(;U<=D;)i(this,B,U),U+=this.blockSize;if(typeof B=="string"){for(;U<k;)if(P[z++]=B.charCodeAt(U++),z==this.blockSize){i(this,P),z=0;break}}else for(;U<k;)if(P[z++]=B[U++],z==this.blockSize){i(this,P),z=0;break}}this.h=z,this.o+=k},r.prototype.v=function(){var B=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);B[0]=128;for(var k=1;k<B.length-8;++k)B[k]=0;var D=8*this.o;for(k=B.length-8;k<B.length;++k)B[k]=D&255,D/=256;for(this.u(B),B=Array(16),k=D=0;4>k;++k)for(var P=0;32>P;P+=8)B[D++]=this.g[k]>>>P&255;return B};function o(B,k){var D=a;return Object.prototype.hasOwnProperty.call(D,B)?D[B]:D[B]=k(B)}function s(B,k){this.h=k;for(var D=[],P=!0,z=B.length-1;0<=z;z--){var U=B[z]|0;P&&U==k||(D[z]=U,P=!1)}this.g=D}var a={};function u(B){return-128<=B&&128>B?o(B,function(k){return new s([k|0],0>k?-1:0)}):new s([B|0],0>B?-1:0)}function c(B){if(isNaN(B)||!isFinite(B))return h;if(0>B)return x(c(-B));for(var k=[],D=1,P=0;B>=D;P++)k[P]=B/D|0,D*=4294967296;return new s(k,0)}function d(B,k){if(B.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(B.charAt(0)=="-")return x(d(B.substring(1),k));if(0<=B.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=c(Math.pow(k,8)),P=h,z=0;z<B.length;z+=8){var U=Math.min(8,B.length-z),$=parseInt(B.substring(z,z+U),k);8>U?(U=c(Math.pow(k,U)),P=P.j(U).add(c($))):(P=P.j(D),P=P.add(c($)))}return P}var h=u(0),p=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(C(this))return-x(this).m();for(var B=0,k=1,D=0;D<this.g.length;D++){var P=this.i(D);B+=(0<=P?P:4294967296+P)*k,k*=4294967296}return B},n.toString=function(B){if(B=B||10,2>B||36<B)throw Error("radix out of range: "+B);if(_(this))return"0";if(C(this))return"-"+x(this).toString(B);for(var k=c(Math.pow(B,6)),D=this,P="";;){var z=R(D,k).g;D=S(D,z.j(k));var U=((0<D.g.length?D.g[0]:D.h)>>>0).toString(B);if(D=z,_(D))return U+P;for(;6>U.length;)U="0"+U;P=U+P}},n.i=function(B){return 0>B?0:B<this.g.length?this.g[B]:this.h};function _(B){if(B.h!=0)return!1;for(var k=0;k<B.g.length;k++)if(B.g[k]!=0)return!1;return!0}function C(B){return B.h==-1}n.l=function(B){return B=S(this,B),C(B)?-1:_(B)?0:1};function x(B){for(var k=B.g.length,D=[],P=0;P<k;P++)D[P]=~B.g[P];return new s(D,~B.h).add(p)}n.abs=function(){return C(this)?x(this):this},n.add=function(B){for(var k=Math.max(this.g.length,B.g.length),D=[],P=0,z=0;z<=k;z++){var U=P+(this.i(z)&65535)+(B.i(z)&65535),$=(U>>>16)+(this.i(z)>>>16)+(B.i(z)>>>16);P=$>>>16,U&=65535,$&=65535,D[z]=$<<16|U}return new s(D,D[D.length-1]&-2147483648?-1:0)};function S(B,k){return B.add(x(k))}n.j=function(B){if(_(this)||_(B))return h;if(C(this))return C(B)?x(this).j(x(B)):x(x(this).j(B));if(C(B))return x(this.j(x(B)));if(0>this.l(m)&&0>B.l(m))return c(this.m()*B.m());for(var k=this.g.length+B.g.length,D=[],P=0;P<2*k;P++)D[P]=0;for(P=0;P<this.g.length;P++)for(var z=0;z<B.g.length;z++){var U=this.i(P)>>>16,$=this.i(P)&65535,ae=B.i(z)>>>16,de=B.i(z)&65535;D[2*P+2*z]+=$*de,N(D,2*P+2*z),D[2*P+2*z+1]+=U*de,N(D,2*P+2*z+1),D[2*P+2*z+1]+=$*ae,N(D,2*P+2*z+1),D[2*P+2*z+2]+=U*ae,N(D,2*P+2*z+2)}for(P=0;P<k;P++)D[P]=D[2*P+1]<<16|D[2*P];for(P=k;P<2*k;P++)D[P]=0;return new s(D,0)};function N(B,k){for(;(B[k]&65535)!=B[k];)B[k+1]+=B[k]>>>16,B[k]&=65535,k++}function F(B,k){this.g=B,this.h=k}function R(B,k){if(_(k))throw Error("division by zero");if(_(B))return new F(h,h);if(C(B))return k=R(x(B),k),new F(x(k.g),x(k.h));if(C(k))return k=R(B,x(k)),new F(x(k.g),k.h);if(30<B.g.length){if(C(B)||C(k))throw Error("slowDivide_ only works with positive integers.");for(var D=p,P=k;0>=P.l(B);)D=j(D),P=j(P);var z=H(D,1),U=H(P,1);for(P=H(P,2),D=H(D,2);!_(P);){var $=U.add(P);0>=$.l(B)&&(z=z.add(D),U=$),P=H(P,1),D=H(D,1)}return k=S(B,z.j(k)),new F(z,k)}for(z=h;0<=B.l(k);){for(D=Math.max(1,Math.floor(B.m()/k.m())),P=Math.ceil(Math.log(D)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),U=c(D),$=U.j(k);C($)||0<$.l(B);)D-=P,U=c(D),$=U.j(k);_(U)&&(U=p),z=z.add(U),B=S(B,$)}return new F(z,B)}n.A=function(B){return R(this,B).h},n.and=function(B){for(var k=Math.max(this.g.length,B.g.length),D=[],P=0;P<k;P++)D[P]=this.i(P)&B.i(P);return new s(D,this.h&B.h)},n.or=function(B){for(var k=Math.max(this.g.length,B.g.length),D=[],P=0;P<k;P++)D[P]=this.i(P)|B.i(P);return new s(D,this.h|B.h)},n.xor=function(B){for(var k=Math.max(this.g.length,B.g.length),D=[],P=0;P<k;P++)D[P]=this.i(P)^B.i(P);return new s(D,this.h^B.h)};function j(B){for(var k=B.g.length+1,D=[],P=0;P<k;P++)D[P]=B.i(P)<<1|B.i(P-1)>>>31;return new s(D,B.h)}function H(B,k){var D=k>>5;k%=32;for(var P=B.g.length-D,z=[],U=0;U<P;U++)z[U]=0<k?B.i(U+D)>>>k|B.i(U+D+1)<<32-k:B.i(U+D);return new s(z,B.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l9=c9.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,pE=c9.Integer=s}).apply(typeof u9<"u"?u9:typeof self<"u"?self:typeof window<"u"?window:{});var mE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qc={};var d9,S0e,h9,f9,p9,m9,g9,v9,_9;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,T,V){return g==Array.prototype||g==Object.prototype||(g[T]=V.value),g};function e(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof mE=="object"&&mE];for(var T=0;T<g.length;++T){var V=g[T];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=e(this);function i(g,T){if(T)e:{var V=r;g=g.split(".");for(var K=0;K<g.length-1;K++){var oe=g[K];if(!(oe in V))break e;V=V[oe]}g=g[g.length-1],K=V[g],T=T(K),T!=K&&T!=null&&t(V,g,{configurable:!0,writable:!0,value:T})}}function o(g,T){g instanceof String&&(g+="");var V=0,K=!1,oe={next:function(){if(!K&&V<g.length){var fe=V++;return{value:T(fe,g[fe]),done:!1}}return K=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}i("Array.prototype.values",function(g){return g||function(){return o(this,function(T,V){return V})}});var s=s||{},a=this||self;function u(g){var T=typeof g;return T=T!="object"?T:g?Array.isArray(g)?"array":T:"null",T=="array"||T=="object"&&typeof g.length=="number"}function c(g){var T=typeof g;return T=="object"&&g!=null||T=="function"}function d(g,T,V){return g.call.apply(g.bind,arguments)}function h(g,T,V){if(!g)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,K),g.apply(T,oe)}}return function(){return g.apply(T,arguments)}}function p(g,T,V){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(g,T){var V=Array.prototype.slice.call(arguments,1);return function(){var K=V.slice();return K.push.apply(K,arguments),g.apply(this,K)}}function _(g,T){function V(){}V.prototype=T.prototype,g.aa=T.prototype,g.prototype=new V,g.prototype.constructor=g,g.Qb=function(K,oe,fe){for(var Be=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)Be[Ft-2]=arguments[Ft];return T.prototype[oe].apply(K,Be)}}function C(g){let T=g.length;if(0<T){let V=Array(T);for(let K=0;K<T;K++)V[K]=g[K];return V}return[]}function x(g,T){for(let V=1;V<arguments.length;V++){let K=arguments[V];if(u(K)){let oe=g.length||0,fe=K.length||0;g.length=oe+fe;for(let Be=0;Be<fe;Be++)g[oe+Be]=K[Be]}else g.push(K)}}class S{constructor(T,V){this.i=T,this.j=V,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function N(g){return/^[\s\xa0]*$/.test(g)}function F(){var g=a.navigator;return g&&(g=g.userAgent)?g:""}function R(g){return R[" "](g),g}R[" "]=function(){};var j=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function H(g,T,V){for(let K in g)T.call(V,g[K],K,g)}function B(g,T){for(let V in g)T.call(void 0,g[V],V,g)}function k(g){let T={};for(let V in g)T[V]=g[V];return T}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(g,T){let V,K;for(let oe=1;oe<arguments.length;oe++){K=arguments[oe];for(V in K)g[V]=K[V];for(let fe=0;fe<D.length;fe++)V=D[fe],Object.prototype.hasOwnProperty.call(K,V)&&(g[V]=K[V])}}function z(g){var T=1;g=g.split(":");let V=[];for(;0<T&&g.length;)V.push(g.shift()),T--;return g.length&&V.push(g.join(":")),V}function U(g){a.setTimeout(()=>{throw g},0)}function $(){var g=ie;let T=null;return g.g&&(T=g.g,g.g=g.g.next,g.g||(g.h=null),T.next=null),T}class ae{constructor(){this.h=this.g=null}add(T,V){let K=de.get();K.set(T,V),this.h?this.h.next=K:this.g=K,this.h=K}}var de=new S(()=>new X,g=>g.reset());class X{constructor(){this.next=this.g=this.h=null}set(T,V){this.h=T,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let re,J=!1,ie=new ae,le=()=>{let g=a.Promise.resolve(void 0);re=()=>{g.then(Ee)}};var Ee=()=>{for(var g;g=$();){try{g.h.call(g.g)}catch(V){U(V)}var T=de;T.j(g),100>T.h&&(T.h++,g.next=T.g,T.g=g)}J=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(g,T){this.type=g,this.g=this.target=T,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,T=Object.defineProperty({},"passive",{get:function(){g=!0}});try{let V=()=>{};a.addEventListener("test",V,T),a.removeEventListener("test",V,T)}catch{}return g}();function ze(g,T){if(we.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var V=this.type=g.type,K=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=T,T=g.relatedTarget){if(j){e:{try{R(T.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(T=null)}}else V=="mouseover"?T=g.fromElement:V=="mouseout"&&(T=g.toElement);this.relatedTarget=T,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Ye[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ze.aa.h.call(this)}}_(ze,we);var Ye={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),it=0;function Je(g,T,V,K,oe){this.listener=g,this.proxy=null,this.src=T,this.type=V,this.capture=!!K,this.ha=oe,this.key=++it,this.da=this.fa=!1}function vt(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ge(g){this.src=g,this.g={},this.h=0}Ge.prototype.add=function(g,T,V,K,oe){var fe=g.toString();g=this.g[fe],g||(g=this.g[fe]=[],this.h++);var Be=at(g,T,K,oe);return-1<Be?(T=g[Be],V||(T.fa=!1)):(T=new Je(T,this.src,fe,!!K,oe),T.fa=V,g.push(T)),T};function Qe(g,T){var V=T.type;if(V in g.g){var K=g.g[V],oe=Array.prototype.indexOf.call(K,T,void 0),fe;(fe=0<=oe)&&Array.prototype.splice.call(K,oe,1),fe&&(vt(T),g.g[V].length==0&&(delete g.g[V],g.h--))}}function at(g,T,V,K){for(var oe=0;oe<g.length;++oe){var fe=g[oe];if(!fe.da&&fe.listener==T&&fe.capture==!!V&&fe.ha==K)return oe}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),At={};function cn(g,T,V,K,oe){if(K&&K.once)return tr(g,T,V,K,oe);if(Array.isArray(T)){for(var fe=0;fe<T.length;fe++)cn(g,T[fe],V,K,oe);return null}return V=Ln(V),g&&g[He]?g.K(T,V,c(K)?!!K.capture:!!K,oe):Tn(g,T,V,!1,K,oe)}function Tn(g,T,V,K,oe,fe){if(!T)throw Error("Invalid event type");var Be=c(oe)?!!oe.capture:!!oe,Ft=hr(g);if(Ft||(g[ft]=Ft=new Ge(g)),V=Ft.add(T,V,K,Be,fe),V.proxy)return V;if(K=Mr(),V.proxy=K,K.src=g,K.listener=V,g.addEventListener)Ce||(oe=Be),oe===void 0&&(oe=!1),g.addEventListener(T.toString(),K,oe);else if(g.attachEvent)g.attachEvent(zn(T.toString()),K);else if(g.addListener&&g.removeListener)g.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Mr(){function g(V){return T.call(g.src,g.listener,V)}let T=dr;return g}function tr(g,T,V,K,oe){if(Array.isArray(T)){for(var fe=0;fe<T.length;fe++)tr(g,T[fe],V,K,oe);return null}return V=Ln(V),g&&g[He]?g.L(T,V,c(K)?!!K.capture:!!K,oe):Tn(g,T,V,!0,K,oe)}function Xi(g,T,V,K,oe){if(Array.isArray(T))for(var fe=0;fe<T.length;fe++)Xi(g,T[fe],V,K,oe);else K=c(K)?!!K.capture:!!K,V=Ln(V),g&&g[He]?(g=g.i,T=String(T).toString(),T in g.g&&(fe=g.g[T],V=at(fe,V,K,oe),-1<V&&(vt(fe[V]),Array.prototype.splice.call(fe,V,1),fe.length==0&&(delete g.g[T],g.h--)))):g&&(g=hr(g))&&(T=g.g[T.toString()],g=-1,T&&(g=at(T,V,K,oe)),(V=-1<g?T[g]:null)&&yt(V))}function yt(g){if(typeof g!="number"&&g&&!g.da){var T=g.src;if(T&&T[He])Qe(T.i,g);else{var V=g.type,K=g.proxy;T.removeEventListener?T.removeEventListener(V,K,g.capture):T.detachEvent?T.detachEvent(zn(V),K):T.addListener&&T.removeListener&&T.removeListener(K),(V=hr(T))?(Qe(V,g),V.h==0&&(V.src=null,T[ft]=null)):vt(g)}}}function zn(g){return g in At?At[g]:At[g]="on"+g}function dr(g,T){if(g.da)g=!0;else{T=new ze(T,this);var V=g.listener,K=g.ha||g.src;g.fa&&yt(g),g=V.call(K,T)}return g}function hr(g){return g=g[ft],g instanceof Ge?g:null}var rn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ln(g){return typeof g=="function"?g:(g[rn]||(g[rn]=function(T){return g.handleEvent(T)}),g[rn])}function An(){ye.call(this),this.i=new Ge(this),this.M=this,this.F=null}_(An,ye),An.prototype[He]=!0,An.prototype.removeEventListener=function(g,T,V,K){Xi(this,g,T,V,K)};function hn(g,T){var V,K=g.F;if(K)for(V=[];K;K=K.F)V.push(K);if(g=g.M,K=T.type||T,typeof T=="string")T=new we(T,g);else if(T instanceof we)T.target=T.target||g;else{var oe=T;T=new we(K,g),P(T,oe)}if(oe=!0,V)for(var fe=V.length-1;0<=fe;fe--){var Be=T.g=V[fe];oe=pi(Be,K,!0,T)&&oe}if(Be=T.g=g,oe=pi(Be,K,!0,T)&&oe,oe=pi(Be,K,!1,T)&&oe,V)for(fe=0;fe<V.length;fe++)Be=T.g=V[fe],oe=pi(Be,K,!1,T)&&oe}An.prototype.N=function(){if(An.aa.N.call(this),this.i){var g=this.i,T;for(T in g.g){for(var V=g.g[T],K=0;K<V.length;K++)vt(V[K]);delete g.g[T],g.h--}}this.F=null},An.prototype.K=function(g,T,V,K){return this.i.add(String(g),T,!1,V,K)},An.prototype.L=function(g,T,V,K){return this.i.add(String(g),T,!0,V,K)};function pi(g,T,V,K){if(T=g.i.g[String(T)],!T)return!0;T=T.concat();for(var oe=!0,fe=0;fe<T.length;++fe){var Be=T[fe];if(Be&&!Be.da&&Be.capture==V){var Ft=Be.listener,vn=Be.ha||Be.src;Be.fa&&Qe(g.i,Be),oe=Ft.call(vn,K)!==!1&&oe}}return oe&&!K.defaultPrevented}function Cr(g,T,V){if(typeof g=="function")V&&(g=p(g,V));else if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:a.setTimeout(g,T||0)}function zu(g){g.g=Cr(()=>{g.g=null,g.i&&(g.i=!1,zu(g))},g.l);let T=g.h;g.h=null,g.m.apply(null,T)}class Ha extends ye{constructor(T,V){super(),this.m=T,this.l=V,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:zu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ji(g){ye.call(this),this.h=g,this.g={}}_(Ji,ye);var bs=[];function _o(g){H(g.g,function(T,V){this.g.hasOwnProperty(V)&&yt(T)},g),g.g={}}Ji.prototype.N=function(){Ji.aa.N.call(this),_o(this)},Ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wd=a.JSON.stringify,Ig=a.JSON.parse,Mf=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function yo(){}yo.prototype.h=null;function Cd(g){return g.h||(g.h=g.i())}function kf(){}var Wu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xd(){we.call(this,"d")}_(xd,we);function Ed(){we.call(this,"c")}_(Ed,we);var Wo={},Of=null;function $a(){return Of=Of||new An}Wo.La="serverreachability";function Rf(g){we.call(this,Wo.La,g)}_(Rf,we);function Hu(g){let T=$a();hn(T,new Rf(T))}Wo.STAT_EVENT="statevent";function Nf(g,T){we.call(this,Wo.STAT_EVENT,g),this.stat=T}_(Nf,we);function xr(g){let T=$a();hn(T,new Nf(T,g))}Wo.Ma="timingevent";function mi(g,T){we.call(this,Wo.Ma,g),this.size=T}_(mi,we);function et(g,T){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},T)}function qa(){this.g=!0}qa.prototype.xa=function(){this.g=!1};function Ff(g,T,V,K,oe,fe){g.info(function(){if(g.g)if(fe)for(var Be="",Ft=fe.split("&"),vn=0;vn<Ft.length;vn++){var Jt=Ft[vn].split("=");if(1<Jt.length){var kn=Jt[0];Jt=Jt[1];var Rr=kn.split("_");Be=2<=Rr.length&&Rr[1]=="type"?Be+(kn+"="+Jt+"&"):Be+(kn+"=redacted&")}}else Be=null;else Be=fe;return"XMLHTTP REQ ("+K+") [attempt "+oe+"]: "+T+`
`+V+`
`+Be})}function Lf(g,T,V,K,oe,fe,Be){g.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+oe+"]: "+T+`
`+V+`
`+fe+" "+Be})}function na(g,T,V,K){g.info(function(){return"XMLHTTP TEXT ("+T+"): "+Vf(g,V)+(K?" "+K:"")})}function fn(g,T){g.info(function(){return"TIMEOUT: "+T})}qa.prototype.info=function(){};function Vf(g,T){if(!g.g)return T;if(!T)return null;try{var V=JSON.parse(T);if(V){for(g=0;g<V.length;g++)if(Array.isArray(V[g])){var K=V[g];if(!(2>K.length)){var oe=K[1];if(Array.isArray(oe)&&!(1>oe.length)){var fe=oe[0];if(fe!="noop"&&fe!="stop"&&fe!="close")for(var Be=1;Be<oe.length;Be++)oe[Be]=""}}}}return wd(V)}catch{return T}}var Ho={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Id={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sd;function Jc(){}_(Jc,yo),Jc.prototype.g=function(){return new XMLHttpRequest},Jc.prototype.i=function(){return{}},Sd=new Jc;function ws(g,T,V,K){this.j=g,this.i=T,this.l=V,this.R=K||1,this.U=new Ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new el}function el(){this.i=null,this.g="",this.h=!1}var ra={},tl={};function $o(g,T,V){g.L=1,g.v=Ya($r(T)),g.m=V,g.P=!0,Wn(g,null)}function Wn(g,T){g.F=Date.now(),nl(g),g.A=$r(g.v);var V=g.A,K=g.R;Array.isArray(K)||(K=[String(K)]),mn(V.i,"t",K),g.C=0,V=g.j.J,g.h=new el,g.g=ua(g.j,V?T:null,!g.m),0<g.O&&(g.M=new Ha(p(g.Y,g,g.g),g.O)),T=g.U,V=g.g,K=g.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(bs[0]=oe.toString()),oe=bs);for(var fe=0;fe<oe.length;fe++){var Be=cn(V,oe[fe],K||T.handleEvent,!1,T.h||T);if(!Be)break;T.g[Be.key]=Be}T=g.H?k(g.H):{},g.m?(g.u||(g.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,T)):(g.u="GET",g.g.ea(g.A,g.u,null,T)),Hu(),Ff(g.i,g.u,g.A,g.l,g.R,g.m)}ws.prototype.ca=function(g){g=g.target;let T=this.M;T&&qr(g)==3?T.j():this.Y(g)},ws.prototype.Y=function(g){try{if(g==this.g)e:{let Rr=qr(this.g);var T=this.g.Ba();let Oi=this.g.Z();if(!(3>Rr)&&(Rr!=3||this.g&&(this.h.h||this.g.oa()||zf(this.g)))){this.J||Rr!=4||T==7||(T==8||0>=Oi?Hu(3):Hu(2)),Ga(this);var V=this.g.Z();this.X=V;t:if(Bf(this)){var K=zf(this.g);g="";var oe=K.length,fe=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cs(this),qo(this);var Be="";break t}this.h.i=new a.TextDecoder}for(T=0;T<oe;T++)this.h.h=!0,g+=this.h.i.decode(K[T],{stream:!(fe&&T==oe-1)});K.length=0,this.h.g+=g,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=V==200,Lf(this.i,this.u,this.A,this.l,this.R,Rr,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Ft,vn=this.g;if((Ft=vn.g?vn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(Ft)){var Jt=Ft;break t}}Jt=null}if(V=Jt)na(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$u(this,V);else{this.o=!1,this.s=3,xr(12),Cs(this),qo(this);break e}}if(this.P){V=!0;let Ri;for(;!this.J&&this.C<Be.length;)if(Ri=Sg(this,Be),Ri==tl){Rr==4&&(this.s=4,xr(14),V=!1),na(this.i,this.l,null,"[Incomplete Response]");break}else if(Ri==ra){this.s=4,xr(15),na(this.i,this.l,Be,"[Invalid Chunk]"),V=!1;break}else na(this.i,this.l,Ri,null),$u(this,Ri);if(Bf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rr!=4||Be.length!=0||this.h.h||(this.s=1,xr(16),V=!1),this.o=this.o&&V,!V)na(this.i,this.l,Be,"[Invalid Chunked Response]"),Cs(this),qo(this);else if(0<Be.length&&!this.W){this.W=!0;var kn=this.j;kn.g==this&&kn.ba&&!kn.M&&(kn.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),cl(kn),kn.M=!0,xr(11))}}else na(this.i,this.l,Be,null),$u(this,Be);Rr==4&&Cs(this),this.o&&!this.J&&(Rr==4?$f(this.j,this):(this.o=!1,nl(this)))}else Wf(this.g),V==400&&0<Be.indexOf("Unknown SID")?(this.s=3,xr(12)):(this.s=0,xr(13)),Cs(this),qo(this)}}}catch{}finally{}};function Bf(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function Sg(g,T){var V=g.C,K=T.indexOf(`
`,V);return K==-1?tl:(V=Number(T.substring(V,K)),isNaN(V)?ra:(K+=1,K+V>T.length?tl:(T=T.slice(K,K+V),g.C=K+V,T)))}ws.prototype.cancel=function(){this.J=!0,Cs(this)};function nl(g){g.S=Date.now()+g.I,Td(g,g.I)}function Td(g,T){if(g.B!=null)throw Error("WatchDog timer not null");g.B=et(p(g.ba,g),T)}function Ga(g){g.B&&(a.clearTimeout(g.B),g.B=null)}ws.prototype.ba=function(){this.B=null;let g=Date.now();0<=g-this.S?(fn(this.i,this.A),this.L!=2&&(Hu(),xr(17)),Cs(this),this.s=2,qo(this)):Td(this,this.S-g)};function qo(g){g.j.G==0||g.J||$f(g.j,g)}function Cs(g){Ga(g);var T=g.M;T&&typeof T.ma=="function"&&T.ma(),g.M=null,_o(g.U),g.g&&(T=g.g,g.g=null,T.abort(),T.ma())}function $u(g,T){try{var V=g.j;if(V.G!=0&&(V.g==g||Go(V.h,g))){if(!g.K&&Go(V.h,g)&&V.G==3){try{var K=V.Da.g.parse(T)}catch{K=null}if(Array.isArray(K)&&K.length==3){var oe=K;if(oe[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<g.F)ec(V),sl(V);else break e;Vd(V),xr(18)}}else V.za=oe[1],0<V.za-V.T&&37500>oe[2]&&V.F&&V.v==0&&!V.C&&(V.C=et(p(V.Za,V),6e3));if(1>=ia(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else aa(V,11)}else if((g.K||V.g==g)&&ec(V),!N(T))for(oe=V.Da.g.parse(T),T=0;T<oe.length;T++){let Jt=oe[T];if(V.T=Jt[0],Jt=Jt[1],V.G==2)if(Jt[0]=="c"){V.K=Jt[1],V.ia=Jt[2];let kn=Jt[3];kn!=null&&(V.la=kn,V.j.info("VER="+V.la));let Rr=Jt[4];Rr!=null&&(V.Aa=Rr,V.j.info("SVER="+V.Aa));let Oi=Jt[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(K=1.5*Oi,V.L=K,V.j.info("backChannelRequestTimeoutMs_="+K)),K=V;let Ri=g.g;if(Ri){let Jo=Ri.g?Ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var fe=K.h;fe.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(Ko(fe,fe.h),fe.h=null))}if(K.D){let hl=Ri.g?Ri.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(K.ya=hl,ln(K.I,K.D,hl))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-g.F,V.j.info("Handshake RTT: "+V.R+"ms")),K=V;var Be=g;if(K.qa=Bd(K,K.J?K.ia:null,K.W),Be.K){Gu(K.h,Be);var Ft=Be,vn=K.L;vn&&(Ft.I=vn),Ft.B&&(Ga(Ft),nl(Ft)),K.g=Be}else ul(K);0<V.i.length&&al(V)}else Jt[0]!="stop"&&Jt[0]!="close"||aa(V,7);else V.G==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?aa(V,7):xo(V):Jt[0]!="noop"&&V.l&&V.l.ta(Jt),V.v=0)}}Hu(4)}catch{}}var qu=class{constructor(g,T){this.g=g,this.map=T}};function Gt(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function ia(g){return g.h?1:g.g?g.g.size:0}function Go(g,T){return g.h?g.h==T:g.g?g.g.has(T):!1}function Ko(g,T){g.g?g.g.add(T):g.h=T}function Gu(g,T){g.h&&g.h==T?g.h=null:g.g&&g.g.has(T)&&g.g.delete(T)}Gt.prototype.cancel=function(){if(this.i=Et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let g of this.g.values())g.cancel();this.g.clear()}};function Et(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let T=g.i;for(let V of g.g.values())T=T.concat(V.D);return T}return C(g.i)}function Yn(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var T=[],V=g.length,K=0;K<V;K++)T.push(g[K]);return T}T=[],V=0;for(K in g)T[V++]=g[K];return T}function Ad(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var T=[];g=g.length;for(var V=0;V<g;V++)T.push(V);return T}T=[],V=0;for(let K in g)T[V++]=K;return T}}}function xs(g,T){if(g.forEach&&typeof g.forEach=="function")g.forEach(T,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,T,void 0);else for(var V=Ad(g),K=Yn(g),oe=K.length,fe=0;fe<oe;fe++)T.call(void 0,K[fe],V&&V[fe],g)}var kr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rl(g,T){if(g){g=g.split("&");for(var V=0;V<g.length;V++){var K=g[V].indexOf("="),oe=null;if(0<=K){var fe=g[V].substring(0,K);oe=g[V].substring(K+1)}else fe=g[V];T(fe,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function eo(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof eo){this.h=g.h,Vn(this,g.j),this.o=g.o,this.g=g.g,bo(this,g.s),this.l=g.l;var T=g.i,V=new Yo;V.i=T.i,T.g&&(V.g=new Map(T.g),V.h=T.h),Ka(this,V),this.m=g.m}else g&&(T=String(g).match(kr))?(this.h=!1,Vn(this,T[1]||"",!0),this.o=wo(T[2]||""),this.g=wo(T[3]||"",!0),bo(this,T[4]),this.l=wo(T[5]||"",!0),Ka(this,T[6]||"",!0),this.m=wo(T[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}eo.prototype.toString=function(){var g=[],T=this.j;T&&g.push(oa(T,Ku,!0),":");var V=this.g;return(V||T=="file")&&(g.push("//"),(T=this.o)&&g.push(oa(T,Ku,!0),"@"),g.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&g.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&g.push("/"),g.push(oa(V,V.charAt(0)=="/"?Es:Dd,!0))),(V=this.i.toString())&&g.push("?",V),(V=this.m)&&g.push("#",oa(V,Uf)),g.join("")};function $r(g){return new eo(g)}function Vn(g,T,V){g.j=V?wo(T,!0):T,g.j&&(g.j=g.j.replace(/:$/,""))}function bo(g,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);g.s=T}else g.s=null}function Ka(g,T,V){T instanceof Yo?(g.i=T,Pd(g.i,g.h)):(V||(T=oa(T,Yu)),g.i=new Yo(T,g.h))}function ln(g,T,V){g.i.set(T,V)}function Ya(g){return ln(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function wo(g,T){return g?T?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function oa(g,T,V){return typeof g=="string"?(g=encodeURI(g).replace(T,il),V&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function il(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ku=/[#\/\?@]/g,Dd=/[#\?:]/g,Es=/[#\?]/g,Yu=/[#\?@]/g,Uf=/#/g;function Yo(g,T){this.h=this.g=null,this.i=g||null,this.j=!!T}function Zo(g){g.g||(g.g=new Map,g.h=0,g.i&&rl(g.i,function(T,V){g.add(decodeURIComponent(T.replace(/\+/g," ")),V)}))}n=Yo.prototype,n.add=function(g,T){Zo(this),this.i=null,g=sa(this,g);var V=this.g.get(g);return V||this.g.set(g,V=[]),V.push(T),this.h+=1,this};function Ct(g,T){Zo(g),T=sa(g,T),g.g.has(T)&&(g.i=null,g.h-=g.g.get(T).length,g.g.delete(T))}function to(g,T){return Zo(g),T=sa(g,T),g.g.has(T)}n.forEach=function(g,T){Zo(this),this.g.forEach(function(V,K){V.forEach(function(oe){g.call(T,oe,K,this)},this)},this)},n.na=function(){Zo(this);let g=Array.from(this.g.values()),T=Array.from(this.g.keys()),V=[];for(let K=0;K<T.length;K++){let oe=g[K];for(let fe=0;fe<oe.length;fe++)V.push(T[K])}return V},n.V=function(g){Zo(this);let T=[];if(typeof g=="string")to(this,g)&&(T=T.concat(this.g.get(sa(this,g))));else{g=Array.from(this.g.values());for(let V=0;V<g.length;V++)T=T.concat(g[V])}return T},n.set=function(g,T){return Zo(this),this.i=null,g=sa(this,g),to(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[T]),this.h+=1,this},n.get=function(g,T){return g?(g=this.V(g),0<g.length?String(g[0]):T):T};function mn(g,T,V){Ct(g,T),0<V.length&&(g.i=null,g.g.set(sa(g,T),C(V)),g.h+=V.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let g=[],T=Array.from(this.g.keys());for(var V=0;V<T.length;V++){var K=T[V];let fe=encodeURIComponent(String(K)),Be=this.V(K);for(K=0;K<Be.length;K++){var oe=fe;Be[K]!==""&&(oe+="="+encodeURIComponent(String(Be[K]))),g.push(oe)}}return this.i=g.join("&")};function sa(g,T){return T=String(T),g.j&&(T=T.toLowerCase()),T}function Pd(g,T){T&&!g.j&&(Zo(g),g.i=null,g.g.forEach(function(V,K){var oe=K.toLowerCase();K!=oe&&(Ct(this,K),mn(this,oe,V))},g)),g.j=T}function Md(g,T){let V=new qa;if(a.Image){let K=new Image;K.onload=m(ei,V,"TestLoadImage: loaded",!0,T,K),K.onerror=m(ei,V,"TestLoadImage: error",!1,T,K),K.onabort=m(ei,V,"TestLoadImage: abort",!1,T,K),K.ontimeout=m(ei,V,"TestLoadImage: timeout",!1,T,K),a.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=g}else T(!1)}function Is(g,T){let V=new qa,K=new AbortController,oe=setTimeout(()=>{K.abort(),ei(V,"TestPingServer: timeout",!1,T)},1e4);fetch(g,{signal:K.signal}).then(fe=>{clearTimeout(oe),fe.ok?ei(V,"TestPingServer: ok",!0,T):ei(V,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(oe),ei(V,"TestPingServer: error",!1,T)})}function ei(g,T,V,K,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),K(V)}catch{}}function ol(){this.g=new Mf}function Za(g,T,V){let K=V||"";try{xs(g,function(oe,fe){let Be=oe;c(oe)&&(Be=wd(oe)),T.push(K+fe+"="+encodeURIComponent(Be))})}catch(oe){throw T.push(K+"type="+encodeURIComponent("_badmap")),oe}}function Zn(g){this.l=g.Ub||null,this.j=g.eb||!1}_(Zn,yo),Zn.prototype.g=function(){return new Co(this.l,this.j)},Zn.prototype.i=function(g){return function(){return g}}({});function Co(g,T){An.call(this),this.D=g,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Co,An),n=Co.prototype,n.open=function(g,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=T,this.readyState=1,Zu(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(T.body=g),(this.D||a).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qa(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Zu(this)),this.g&&(this.readyState=3,Zu(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kd(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function kd(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var T=g.value?g.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!g.done}))&&(this.response=this.responseText+=T)}g.done?Qa(this):Zu(this),this.readyState==3&&kd(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,Qa(this))},n.Qa=function(g){this.g&&(this.response=g,Qa(this))},n.ga=function(){this.g&&Qa(this)};function Qa(g){g.readyState=4,g.l=null,g.j=null,g.v=null,Zu(g)}n.setRequestHeader=function(g,T){this.u.append(g,T)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let g=[],T=this.h.entries();for(var V=T.next();!V.done;)V=V.value,g.push(V[0]+": "+V[1]),V=T.next();return g.join(`\r
`)};function Zu(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Od(g){let T="";return H(g,function(V,K){T+=K,T+=":",T+=V,T+=`\r
`}),T}function Qu(g,T,V){e:{for(K in V){var K=!1;break e}K=!0}K||(V=Od(V),typeof g=="string"?V!=null&&encodeURIComponent(String(V)):ln(g,T,V))}function gn(g){An.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(gn,An);var jf=/^https?$/i,Kt=["POST","PUT"];n=gn.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,T,V,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);T=T?T.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sd.g(),this.v=this.o?Cd(this.o):Cd(Sd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(T,String(g),!0),this.B=!1}catch(fe){Rd(this,fe);return}if(g=V||"",V=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var oe in K)V.set(oe,K[oe]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(let fe of K.keys())V.set(fe,K.get(fe));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(V.keys()).find(fe=>fe.toLowerCase()=="content-type"),oe=a.FormData&&g instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Kt,T,void 0))||K||oe||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[fe,Be]of V)this.g.setRequestHeader(fe,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Nd(this),this.u=!0,this.g.send(g),this.u=!1}catch(fe){Rd(this,fe)}};function Rd(g,T){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=T,g.m=5,ki(g),Xu(g)}function ki(g){g.A||(g.A=!0,hn(g,"complete"),hn(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,hn(this,"complete"),hn(this,"abort"),Xu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xu(this,!0)),gn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?gi(this):this.bb())},n.bb=function(){gi(this)};function gi(g){if(g.h&&typeof s<"u"&&(!g.v[1]||qr(g)!=4||g.Z()!=2)){if(g.u&&qr(g)==4)Cr(g.Ea,0,g);else if(hn(g,"readystatechange"),qr(g)==4){g.h=!1;try{let Be=g.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var V;if(!(V=T)){var K;if(K=Be===0){var oe=String(g.D).match(kr)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),K=!jf.test(oe?oe.toLowerCase():"")}V=K}if(V)hn(g,"complete"),hn(g,"success");else{g.m=6;try{var fe=2<qr(g)?g.g.statusText:""}catch{fe=""}g.l=fe+" ["+g.Z()+"]",ki(g)}}finally{Xu(g)}}}}function Xu(g,T){if(g.g){Nd(g);let V=g.g,K=g.v[0]?()=>{}:null;g.g=null,g.v=null,T||hn(g,"ready");try{V.onreadystatechange=K}catch{}}}function Nd(g){g.I&&(a.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function qr(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var T=this.g.responseText;return g&&T.indexOf(g)==0&&(T=T.substring(g.length)),Ig(T)}};function zf(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Wf(g){let T={};g=(g.g&&2<=qr(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<g.length;K++){if(N(g[K]))continue;var V=z(g[K]);let oe=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();let fe=T[oe]||[];T[oe]=fe,fe.push(V)}B(T,function(K){return K.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ju(g,T,V){return V&&V.internalChannelParams&&V.internalChannelParams[g]||T}function Fd(g){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ju("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ju("baseRetryDelayMs",5e3,g),this.cb=Ju("retryDelaySeedMs",1e4,g),this.Wa=Ju("forwardChannelMaxRetries",2,g),this.wa=Ju("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Gt(g&&g.concurrentRequestLimit),this.Da=new ol,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fd.prototype,n.la=8,n.G=1,n.connect=function(g,T,V,K){xr(0),this.W=g,this.H=T||{},V&&K!==void 0&&(this.H.OSID=V,this.H.OAID=K),this.F=this.X,this.I=Bd(this,null,this.W),al(this)};function xo(g){if(no(g),g.G==3){var T=g.U++,V=$r(g.I);if(ln(V,"SID",g.K),ln(V,"RID",T),ln(V,"TYPE","terminate"),Xa(g,V),T=new ws(g,g.j,T),T.L=2,T.v=Ya($r(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(T.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=T.v,V=!0),V||(T.g=ua(T.j,null),T.g.ea(T.v)),T.F=Date.now(),nl(T)}dl(g)}function sl(g){g.g&&(cl(g),g.g.cancel(),g.g=null)}function no(g){sl(g),g.u&&(a.clearTimeout(g.u),g.u=null),ec(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&a.clearTimeout(g.s),g.s=null)}function al(g){if(!Mn(g.h)&&!g.s){g.s=!0;var T=g.Ga;re||le(),J||(re(),J=!0),ie.add(T,g),g.B=0}}function Hf(g,T){return ia(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=T.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=et(p(g.Ga,g,T),ll(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;let oe=new ws(this,this.j,g),fe=this.o;if(this.S&&(fe?(fe=k(fe),P(fe,this.S)):fe=this.S),this.m!==null||this.O||(oe.H=fe,fe=null),this.P)e:{for(var T=0,V=0;V<this.i.length;V++){t:{var K=this.i[V];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(T+=K,4096<T){T=V;break e}if(T===4096||V===this.i.length-1){T=V+1;break e}}T=1e3}else T=1e3;T=Ld(this,oe,T),V=$r(this.I),ln(V,"RID",g),ln(V,"CVER",22),this.D&&ln(V,"X-HTTP-Session-Id",this.D),Xa(this,V),fe&&(this.O?T="headers="+encodeURIComponent(String(Od(fe)))+"&"+T:this.m&&Qu(V,this.m,fe)),Ko(this.h,oe),this.Ua&&ln(V,"TYPE","init"),this.P?(ln(V,"$req",T),ln(V,"SID","null"),oe.T=!0,$o(oe,V,null)):$o(oe,V,T),this.G=2}}else this.G==3&&(g?Qo(this,g):this.i.length==0||Mn(this.h)||Qo(this))};function Qo(g,T){var V;T?V=T.l:V=g.U++;let K=$r(g.I);ln(K,"SID",g.K),ln(K,"RID",V),ln(K,"AID",g.T),Xa(g,K),g.m&&g.o&&Qu(K,g.m,g.o),V=new ws(g,g.j,V,g.B+1),g.m===null&&(V.H=g.o),T&&(g.i=T.D.concat(g.i)),T=Ld(g,V,1e3),V.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Ko(g.h,V),$o(V,K,T)}function Xa(g,T){g.H&&H(g.H,function(V,K){ln(T,K,V)}),g.l&&xs({},function(V,K){ln(T,K,V)})}function Ld(g,T,V){V=Math.min(g.i.length,V);var K=g.l?p(g.l.Na,g.l,g):null;e:{var oe=g.i;let fe=-1;for(;;){let Be=["count="+V];fe==-1?0<V?(fe=oe[0].g,Be.push("ofs="+fe)):fe=0:Be.push("ofs="+fe);let Ft=!0;for(let vn=0;vn<V;vn++){let Jt=oe[vn].g,kn=oe[vn].map;if(Jt-=fe,0>Jt)fe=Math.max(0,oe[vn].g-100),Ft=!1;else try{Za(kn,Be,"req"+Jt+"_")}catch{K&&K(kn)}}if(Ft){K=Be.join("&");break e}}}return g=g.i.splice(0,V),T.D=g,K}function ul(g){if(!g.g&&!g.u){g.Y=1;var T=g.Fa;re||le(),J||(re(),J=!0),ie.add(T,g),g.v=0}}function Vd(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=et(p(g.Fa,g),ll(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=et(p(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xr(10),sl(this),Ja(this))};function cl(g){g.A!=null&&(a.clearTimeout(g.A),g.A=null)}function Ja(g){g.g=new ws(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var T=$r(g.qa);ln(T,"RID","rpc"),ln(T,"SID",g.K),ln(T,"AID",g.T),ln(T,"CI",g.F?"0":"1"),!g.F&&g.ja&&ln(T,"TO",g.ja),ln(T,"TYPE","xmlhttp"),Xa(g,T),g.m&&g.o&&Qu(T,g.m,g.o),g.L&&(g.g.I=g.L);var V=g.g;g=g.ia,V.L=1,V.v=Ya($r(T)),V.m=null,V.P=!0,Wn(V,g)}n.Za=function(){this.C!=null&&(this.C=null,sl(this),Vd(this),xr(19))};function ec(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function $f(g,T){var V=null;if(g.g==T){ec(g),cl(g),g.g=null;var K=2}else if(Go(g.h,T))V=T.D,Gu(g.h,T),K=1;else return;if(g.G!=0){if(T.o)if(K==1){V=T.m?T.m.length:0,T=Date.now()-T.F;var oe=g.B;K=$a(),hn(K,new mi(K,V)),al(g)}else ul(g);else if(oe=T.s,oe==3||oe==0&&0<T.X||!(K==1&&Hf(g,T)||K==2&&Vd(g)))switch(V&&0<V.length&&(T=g.h,T.i=T.i.concat(V)),oe){case 1:aa(g,5);break;case 4:aa(g,10);break;case 3:aa(g,6);break;default:aa(g,2)}}}function ll(g,T){let V=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(V*=2),V*T}function aa(g,T){if(g.j.info("Error code "+T),T==2){var V=p(g.fb,g),K=g.Xa;let oe=!K;K=new eo(K||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vn(K,"https"),Ya(K),oe?Md(K.toString(),V):Is(K.toString(),V)}else xr(2);g.G=0,g.l&&g.l.sa(T),dl(g),no(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),xr(2)):(this.j.info("Failed to ping google.com"),xr(1))};function dl(g){if(g.G=0,g.ka=[],g.l){let T=Et(g.h);(T.length!=0||g.i.length!=0)&&(x(g.ka,T),x(g.ka,g.i),g.h.i.length=0,C(g.i),g.i.length=0),g.l.ra()}}function Bd(g,T,V){var K=V instanceof eo?$r(V):new eo(V);if(K.g!="")T&&(K.g=T+"."+K.g),bo(K,K.s);else{var oe=a.location;K=oe.protocol,T=T?T+"."+oe.hostname:oe.hostname,oe=+oe.port;var fe=new eo(null);K&&Vn(fe,K),T&&(fe.g=T),oe&&bo(fe,oe),V&&(fe.l=V),K=fe}return V=g.D,T=g.ya,V&&T&&ln(K,V,T),ln(K,"VER",g.la),Xa(g,K),K}function ua(g,T,V){if(T&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=g.Ca&&!g.pa?new gn(new Zn({eb:V})):new gn(g.pa),T.Ha(g.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}n=Xo.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function tc(){}tc.prototype.g=function(g,T){return new nr(g,T)};function nr(g,T){An.call(this),this.g=new Fd(T),this.l=g,this.h=T&&T.messageUrlParams||null,g=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(g?g["X-WebChannel-Content-Type"]=T.messageContentType:g={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(g?g["X-WebChannel-Client-Profile"]=T.va:g={"X-WebChannel-Client-Profile":T.va}),this.g.S=g,(g=T&&T.Sb)&&!N(g)&&(this.g.m=g),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!N(T)&&(this.g.D=T,g=this.h,g!==null&&T in g&&(g=this.h,T in g&&delete g[T])),this.j=new Ss(this)}_(nr,An),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){xo(this.g)},nr.prototype.o=function(g){var T=this.g;if(typeof g=="string"){var V={};V.__data__=g,g=V}else this.u&&(V={},V.__data__=wd(g),g=V);T.i.push(new qu(T.Ya++,g)),T.G==3&&al(T)},nr.prototype.N=function(){this.g.l=null,delete this.j,xo(this.g),delete this.g,nr.aa.N.call(this)};function Or(g){xd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var T=g.__sm__;if(T){e:{for(let V in T){g=V;break e}g=void 0}(this.i=g)&&(g=this.i,T=T!==null&&g in T?T[g]:void 0),this.data=T}else this.data=g}_(Or,xd);function Ud(){Ed.call(this),this.status=1}_(Ud,Ed);function Ss(g){this.g=g}_(Ss,Xo),Ss.prototype.ua=function(){hn(this.g,"a")},Ss.prototype.ta=function(g){hn(this.g,new Or(g))},Ss.prototype.sa=function(g){hn(this.g,new Ud)},Ss.prototype.ra=function(){hn(this.g,"b")},tc.prototype.createWebChannel=tc.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,_9=Qc.createWebChannelTransport=function(){return new tc},v9=Qc.getStatEventTarget=function(){return $a()},g9=Qc.Event=Wo,m9=Qc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ho.NO_ERROR=0,Ho.TIMEOUT=8,Ho.HTTP_ERROR=6,p9=Qc.ErrorCode=Ho,Id.COMPLETE="complete",f9=Qc.EventType=Id,kf.EventType=Wu,Wu.OPEN="a",Wu.CLOSE="b",Wu.ERROR="c",Wu.MESSAGE="d",An.prototype.listen=An.prototype.K,h9=Qc.WebChannel=kf,S0e=Qc.FetchXmlHttpFactory=Zn,gn.prototype.listenOnce=gn.prototype.L,gn.prototype.getLastError=gn.prototype.Ka,gn.prototype.getLastErrorCode=gn.prototype.Ba,gn.prototype.getStatus=gn.prototype.Z,gn.prototype.getResponseJson=gn.prototype.Oa,gn.prototype.getResponseText=gn.prototype.oa,gn.prototype.send=gn.prototype.ea,gn.prototype.setWithCredentials=gn.prototype.Ha,d9=Qc.XhrIo=gn}).apply(typeof mE<"u"?mE:typeof self<"u"?self:typeof window<"u"?window:{});var y9="@firebase/firestore",b9="4.7.10";var Pi=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");var q_="11.5.0";var _g=new Us("@firebase/firestore");function ja(n,...t){if(_g.logLevel<=dn.DEBUG){let e=t.map(nO);_g.debug(`Firestore (${q_}): ${n}`,...e)}}function A9(n,...t){if(_g.logLevel<=dn.ERROR){let e=t.map(nO);_g.error(`Firestore (${q_}): ${n}`,...e)}}function T0e(n,...t){if(_g.logLevel<=dn.WARN){let e=t.map(nO);_g.warn(`Firestore (${q_}): ${n}`,...e)}}function nO(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function Uo(n="Unexpected state"){let t=`FIRESTORE (${q_}) INTERNAL ASSERTION FAILED: `+n;throw A9(t),new Error(t)}function Ef(n,t){n||Uo()}var vo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Mi=class extends ds{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var If=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var gE=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},zk=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Pi.UNAUTHENTICATED))}shutdown(){}},Wk=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Hk=class{constructor(t){this.t=t,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Ef(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,e(u)):Promise.resolve(),o=new If;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new If,t.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;t.enqueueRetryable(()=>se(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{ja("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(ja("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new If)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(ja("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ef(typeof r.accessToken=="string"),new gE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return Ef(t===null||typeof t=="string"),new Pi(t)}},$k=class{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},qk=class{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new $k(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},vE=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Gk=class{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,zi(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){Ef(this.o===void 0);let r=o=>{o.error!=null&&ja("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ja("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};let i=o=>{ja("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ja("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new vE(this.V));let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ef(typeof e.token=="string"),this.R=e.token,new vE(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function A0e(){return new TextEncoder}function yd(n,t){return n<t?-1:n>t?1:0}function D0e(n,t){let e=0;for(;e<n.length&&e<t.length;){let r=n.codePointAt(e),i=t.codePointAt(e);if(r!==i){if(r<128&&i<128)return yd(r,i);{let o=A0e(),s=P0e(o.encode(w9(n,e)),o.encode(w9(t,e)));return s!==0?s:yd(r,i)}}e+=r>65535?2:1}return yd(n.length,t.length)}function w9(n,t){return n.codePointAt(t)>65535?n.substring(t,t+2):n.substring(t,t+1)}function P0e(n,t){for(let e=0;e<n.length&&e<t.length;++e)if(n[e]!==t[e])return yd(n[e],t[e]);return yd(n.length,t.length)}var Kk=class n{constructor(t,e,r){e===void 0?e=0:e>t.length&&Uo(),r===void 0?r=t.length-e:r>t.length-e&&Uo(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let r=Math.min(t.length,e.length);for(let i=0;i<r;i++){let o=n.compareSegments(t.get(i),e.get(i));if(o!==0)return o}return yd(t.length,e.length)}static compareSegments(t,e){let r=n.isNumericId(t),i=n.isNumericId(e);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(t).compare(n.extractNumericId(e)):D0e(t,e)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return pE.fromString(t.substring(4,t.length-2))}},_d=class n extends Kk{construct(t,e,r){return new n(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let r of t){if(r.indexOf("//")>=0)throw new Mi(vo.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new n(e)}static emptyPath(){return new n([])}};var Sf=class n{constructor(t){this.path=t}static fromPath(t){return new n(_d.fromString(t))}static fromName(t){return new n(_d.fromString(t).popFirst(5))}static empty(){return new n(_d.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_d.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return _d.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new _d(t.slice()))}};var Yk=class{constructor(t,e,r,i){this.indexId=t,this.collectionGroup=e,this.fields=r,this.indexState=i}};Yk.UNKNOWN_ID=-1;function M0e(n){return n.name==="IndexedDbTransactionError"}function k0e(n){return n===0&&1/n==-1/0}var O0e="remoteDocuments",D9="owner";var P9="mutationQueues";var M9="mutations";var k9="documentMutations",R0e="remoteDocumentsV14";var O9="remoteDocumentGlobal";var R9="targets";var N9="targetDocuments";var F9="targetGlobal",L9="collectionParents";var V9="clientMetadata";var B9="bundles";var U9="namedQueries";var N0e="indexConfiguration";var F0e="indexState";var L0e="indexEntries";var j9="documentOverlays";var V0e="globals";var B0e=[P9,M9,k9,O0e,R9,D9,F9,N9,V9,O9,L9,B9,U9],cje=[...B0e,j9],U0e=[P9,M9,k9,R0e,R9,D9,F9,N9,V9,O9,L9,B9,U9,j9],j0e=U0e,z0e=[...j0e,N0e,F0e,L0e];var lje=[...z0e,V0e];var yg=class n{constructor(t,e){this.comparator=t,this.root=e||Uu.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Uu.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Uu.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){let t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vg(this.root,t,this.comparator,!1)}getReverseIterator(){return new vg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vg(this.root,t,this.comparator,!0)}},vg=class{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Uu=class n{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new n(t??this.key,e??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this,o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):o===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Uo();let t=this.left.check();if(t!==this.right.check())throw Uo();return t+(this.isRed()?0:1)}};Uu.EMPTY=null,Uu.RED=!0,Uu.BLACK=!1;Uu.EMPTY=new class{constructor(){this.size=0}get key(){throw Uo()}get value(){throw Uo()}get color(){throw Uo()}get left(){throw Uo()}get right(){throw Uo()}copy(t,e,r,i,o){return this}insert(t,e,r){return new Uu(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _E=class n{constructor(t){this.comparator=t,this.data=new yg(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){let r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new yE(this.data.getIterator())}getIteratorFrom(t){return new yE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){let i=e.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},yE=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Zk=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bg=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zk("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yd(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};bg.EMPTY_BYTE_STRING=new bg("");var W0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function H0e(n){if(Ef(!!n),typeof n=="string"){let t=0,e=W0e.exec(n);if(Ef(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$_(n.seconds),nanos:$_(n.nanos)}}function $_(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $0e(n){return typeof n=="string"?bg.fromBase64String(n):bg.fromUint8Array(n)}var Qk="(default)",Xk=class n{constructor(t,e){this.projectId=t,this.database=e||Qk}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Qk}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var z9="__type__",q0e="__max__";var W9="__vector__",H9="value";function G0e(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{})[z9])===null||e===void 0?void 0:e.stringValue)===W9}function K0e(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===q0e}var hje={mapValue:{fields:{[z9]:{stringValue:W9},[H9]:{arrayValue:{}}}}};var fje=new yg(Sf.comparator);var pje=new yg(Sf.comparator);var mje=new yg(Sf.comparator),gje=new _E(Sf.comparator);var vje=new _E(yd);var C9,un;(un=C9||(C9={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";var _je=new pE([4294967295,4294967295],0);var bE=class{constructor(){}At(t,e){this.Rt(t,e),e.Vt()}Rt(t,e){if("nullValue"in t)this.ft(e,5);else if("booleanValue"in t)this.ft(e,10),e.gt(t.booleanValue?1:0);else if("integerValue"in t)this.ft(e,15),e.gt($_(t.integerValue));else if("doubleValue"in t){let r=$_(t.doubleValue);isNaN(r)?this.ft(e,13):(this.ft(e,15),k0e(r)?e.gt(0):e.gt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.ft(e,20),typeof r=="string"&&(r=H0e(r)),e.yt(`${r.seconds||""}`),e.gt(r.nanos||0)}else if("stringValue"in t)this.wt(t.stringValue,e),this.St(e);else if("bytesValue"in t)this.ft(e,30),e.bt($0e(t.bytesValue)),this.St(e);else if("referenceValue"in t)this.Dt(t.referenceValue,e);else if("geoPointValue"in t){let r=t.geoPointValue;this.ft(e,45),e.gt(r.latitude||0),e.gt(r.longitude||0)}else"mapValue"in t?K0e(t)?this.ft(e,Number.MAX_SAFE_INTEGER):G0e(t)?this.vt(t.mapValue,e):(this.Ct(t.mapValue,e),this.St(e)):"arrayValue"in t?(this.Ft(t.arrayValue,e),this.St(e)):Uo()}wt(t,e){this.ft(e,25),this.Mt(t,e)}Mt(t,e){e.yt(t)}Ct(t,e){let r=t.fields||{};this.ft(e,55);for(let i of Object.keys(r))this.wt(i,e),this.Rt(r[i],e)}vt(t,e){var r,i;let o=t.fields||{};this.ft(e,53);let s=H9,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(e,15),e.gt($_(a)),this.wt(s,e),this.Rt(o[s],e)}Ft(t,e){let r=t.values||[];this.ft(e,50);for(let i of r)this.Rt(i,e)}Dt(t,e){this.ft(e,37),Sf.fromName(t).path.forEach(r=>{this.ft(e,60),this.Mt(r,e)})}ft(t,e){t.gt(e)}St(t){t.gt(2)}};bE.xt=new bE;var yje=new Uint8Array(0);var $9=41943040,Bu=class n{static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=r}};Bu.DEFAULT_COLLECTION_PERCENTILE=10,Bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bu.DEFAULT=new Bu($9,Bu.DEFAULT_COLLECTION_PERCENTILE,Bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bu.DISABLED=new Bu(-1,0,0);var Y0e=1048576;function jk(){return typeof document<"u"?document:null}var Jk=class{constructor(t,e,r=1e3,i=1.5,o=6e4){this.Ti=t,this.timerId=e,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();let e=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,e-r);i>0&&ja("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var eO=class n{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new If,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,o){let s=Date.now()+r,a=new n(t,e,s,i,o);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mi(vo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var x9,E9;(E9=x9||(x9={}))._a="default",E9.Cache="cache";function Z0e(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var I9=new Map;function Q0e(n,t,e,r){if(t===!0&&r===!0)throw new Mi(vo.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function X0e(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":Uo()}function J0e(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Mi(vo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=X0e(n);throw new Mi(vo.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var q9="firestore.googleapis.com",S9=!0,wE=class{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Mi(vo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=q9,this.ssl=S9}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:S9;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$9;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Y0e)throw new Mi(vo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Q0e("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Z0e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Mi(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Mi(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Mi(vo.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},CE=class{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mi(vo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Mi(vo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zk;switch(r.type){case"firstParty":return new qk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Mi(vo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return se(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let r=I9.get(e);r&&(ja("ComponentProvider","Removing Datastore"),I9.delete(e),r.terminate())}(this),Promise.resolve()}};function G9(n,t,e,r={}){var i;let o=(n=J0e(n,CE))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${t}:${e}`;o.host!==q9&&o.host!==a&&T0e("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!Bs(u,s)&&(n._setSettings(u),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=Pi.MOCK_USER;else{c=tC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Mi(vo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Pi(h)}n._authCredentials=new Wk(new gE(c,d))}}var T9="AsyncQueue",xE=class{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Jk(this,"async_queue_retry"),this.Su=()=>{let r=jk();r&&ja(T9,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=t;let e=jk();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;let e=jk();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Su)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});let e=new If;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}Cu(){return se(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!M0e(t))throw t;ja(T9,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(t){let e=this.bu.then(()=>(this.pu=!0,t().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw A9("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=e,e}enqueueAfterDelay(t,e,r){this.Du(),this.wu.indexOf(t)>-1&&(e=0);let i=eO.createAndSchedule(this,t,e,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&Uo()}verifyOperationInProgress(){}Mu(){return se(this,null,function*(){let t;do t=this.bu,yield t;while(t!==this.bu)})}xu(t){for(let e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(let e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){let e=this.fu.indexOf(t);this.fu.splice(e,1)}};var tO=class extends CE{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=new xE,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return se(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new xE(t),this._firestoreClient=void 0,yield t}})}};function K9(n,t){let e=typeof n=="object"?n:xc(),r=typeof n=="string"?n:t||Qk,i=Ll(e,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=eC("firestore");o&&G9(i,...o)}return i}var bje=new RegExp("[~\\*/\\[\\]]");(function(t,e=!0){(function(i){q_=i})(bu),hs(new bi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new tO(new Hk(r.getProvider("auth-internal")),new Gk(s,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Mi(vo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xk(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Un(y9,b9,t),Un(y9,b9,"esm2017")})();var G_=class{constructor(t){return t}},Y9="firestore",rO=class{constructor(){return Vl(Y9)}};var iO=new $e("angularfire2.firestore-instances");function eve(n,t){let e=Oh(Y9,n,t);return e&&new G_(e)}function tve(n){return(t,e)=>{let r=t.runOutsideAngular(()=>n(e));return new G_(r)}}var nve={provide:rO,deps:[[new ii,iO]]},rve={provide:G_,useFactory:eve,deps:[[new ii,iO],Sa]};function Z9(n,...t){return Un("angularfire",wu.full,"fst"),Po([rve,nve,{provide:iO,useFactory:tve(n),multi:!0,deps:[tn,rr,Cu,Ec,[new ii,Vh],[new ii,Ul],...t]}])}var Q9=ir(K9,!0);var X9={production:!1,firebase:{apiKey:"AIzaSyBNwYNe08NQdN2meU59SFWv0BMcSNyDvZ8",authDomain:"vezeeta-68ec4.firebaseapp.com",databaseURL:"https://vezeeta-68ec4-default-rtdb.firebaseio.com",projectId:"vezeeta-68ec4",storageBucket:"vezeeta-68ec4.firebasestorage.app",messagingSenderId:"1086188351300",appId:"1:1086188351300:web:01be5ab6fc4e1be62bf111",measurementId:"G-WSCF2QY4XL"}};function J9(n){return new Oe(3e3,!1)}function ive(){return new Oe(3100,!1)}function ove(){return new Oe(3101,!1)}function sve(n){return new Oe(3001,!1)}function ave(n){return new Oe(3003,!1)}function uve(n){return new Oe(3004,!1)}function tH(n,t){return new Oe(3005,!1)}function nH(){return new Oe(3006,!1)}function rH(){return new Oe(3007,!1)}function iH(n,t){return new Oe(3008,!1)}function oH(n){return new Oe(3002,!1)}function sH(n,t,e,r,i){return new Oe(3010,!1)}function aH(){return new Oe(3011,!1)}function uH(){return new Oe(3012,!1)}function cH(){return new Oe(3200,!1)}function lH(){return new Oe(3202,!1)}function dH(){return new Oe(3013,!1)}function hH(n){return new Oe(3014,!1)}function fH(n){return new Oe(3015,!1)}function pH(n){return new Oe(3016,!1)}function mH(n,t){return new Oe(3404,!1)}function cve(n){return new Oe(3502,!1)}function gH(n){return new Oe(3503,!1)}function vH(){return new Oe(3300,!1)}function _H(n){return new Oe(3504,!1)}function yH(n){return new Oe(3301,!1)}function bH(n,t){return new Oe(3302,!1)}function wH(n){return new Oe(3303,!1)}function CH(n,t){return new Oe(3400,!1)}function xH(n){return new Oe(3401,!1)}function EH(n){return new Oe(3402,!1)}function IH(n,t){return new Oe(3505,!1)}function Xc(n){switch(n.length){case 0:return new vu;case 1:return n[0];default:return new Th(n)}}function uO(n,t,e=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(t.forEach(u=>{let c=u.get("offset"),d=c==s,h=d&&a||new Map;u.forEach((p,m)=>{let _=m,C=p;if(m!=="offset")switch(_=n.normalizePropertyName(_,i),C){case tm:C=e.get(m);break;case Ls:C=r.get(m);break;default:C=n.normalizeStyleValue(m,_,C,i);break}h.set(_,C)}),d||o.push(h),a=h,s=c}),i.length)throw cve(i);return o}function EE(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&oO(e,"start",n)));break;case"done":n.onDone(()=>r(e&&oO(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&oO(e,"destroy",n)));break}}function oO(n,t,e){let r=e.totalTime,i=!!e.disabled,o=IE(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function IE(n,t,e,r,i="",o=0,s){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function jo(n,t,e){let r=n.get(t);return r||n.set(t,r=e),r}function cO(n){let t=n.indexOf(":"),e=n.substring(1,t),r=n.slice(t+1);return[e,r]}var lve=typeof document>"u"?null:document.documentElement;function SE(n){let t=n.parentNode||n.host||null;return t===lve?null:t}function dve(n){return n.substring(1,6)=="ebkit"}var Tf=null,eH=!1;function SH(n){Tf||(Tf=hve()||{},eH=Tf.style?"WebkitAppearance"in Tf.style:!1);let t=!0;return Tf.style&&!dve(n)&&(t=n in Tf.style,!t&&eH&&(t="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Tf.style)),t}function hve(){return typeof document<"u"?document.body:null}function lO(n,t){for(;t;){if(t===n)return!0;t=SE(t)}return!1}function dO(n,t,e){if(e)return Array.from(n.querySelectorAll(t));let r=n.querySelector(t);return r?[r]:[]}var fve=1e3,hO="{{",pve="}}",fO="ng-enter",TE="ng-leave",K_="ng-trigger",Y_=".ng-trigger",pO="ng-animating",AE=".ng-animating";function ju(n){if(typeof n=="number")return n;let t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:sO(parseFloat(t[1]),t[2])}function sO(n,t){switch(t){case"s":return n*fve;default:return n}}function Z_(n,t,e){return n.hasOwnProperty("duration")?n:mve(n,t,e)}function mve(n,t,e){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,o=0,s="";if(typeof n=="string"){let a=n.match(r);if(a===null)return t.push(J9(n)),{duration:0,delay:0,easing:""};i=sO(parseFloat(a[1]),a[2]);let u=a[3];u!=null&&(o=sO(parseFloat(u),a[4]));let c=a[5];c&&(s=c)}else i=n;if(!e){let a=!1,u=t.length;i<0&&(t.push(ive()),a=!0),o<0&&(t.push(ove()),a=!0),a&&t.splice(u,0,J9(n))}return{duration:i,delay:o,easing:s}}function TH(n){return n.length?n[0]instanceof Map?n:n.map(t=>new Map(Object.entries(t))):[]}function za(n,t,e){t.forEach((r,i)=>{let o=DE(i);e&&!e.has(i)&&e.set(i,n.style[o]),n.style[o]=r})}function bd(n,t){t.forEach((e,r)=>{let i=DE(r);n.style[i]=""})}function wg(n){return Array.isArray(n)?n.length==1?n[0]:qL(n):n}function AH(n,t,e){let r=t.params||{},i=mO(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||e.push(sve(o))})}var aO=new RegExp(`${hO}\\s*(.+?)\\s*${pve}`,"g");function mO(n){let t=[];if(typeof n=="string"){let e;for(;e=aO.exec(n);)t.push(e[1]);aO.lastIndex=0}return t}function Cg(n,t,e){let r=`${n}`,i=r.replace(aO,(o,s)=>{let a=t[s];return a==null&&(e.push(ave(s)),a=""),a.toString()});return i==r?n:i}var gve=/-+([a-z0-9])/g;function DE(n){return n.replace(gve,(...t)=>t[1].toUpperCase())}function DH(n,t){return n===0||t===0}function PH(n,t,e){if(e.size&&t.length){let r=t[0],i=[];if(e.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<t.length;o++){let s=t[o];i.forEach(a=>s.set(a,PE(n,a)))}}return t}function zo(n,t,e){switch(t.type){case Pt.Trigger:return n.visitTrigger(t,e);case Pt.State:return n.visitState(t,e);case Pt.Transition:return n.visitTransition(t,e);case Pt.Sequence:return n.visitSequence(t,e);case Pt.Group:return n.visitGroup(t,e);case Pt.Animate:return n.visitAnimate(t,e);case Pt.Keyframes:return n.visitKeyframes(t,e);case Pt.Style:return n.visitStyle(t,e);case Pt.Reference:return n.visitReference(t,e);case Pt.AnimateChild:return n.visitAnimateChild(t,e);case Pt.AnimateRef:return n.visitAnimateRef(t,e);case Pt.Query:return n.visitQuery(t,e);case Pt.Stagger:return n.visitStagger(t,e);default:throw uve(t.type)}}function PE(n,t){return window.getComputedStyle(n)[t]}var kO=(()=>{class n{validateStyleProperty(e){return SH(e)}containsElement(e,r){return lO(e,r)}getParentElement(e){return SE(e)}query(e,r,i){return dO(e,r,i)}computeStyle(e,r,i){return i||""}animate(e,r,i,o,s,a=[],u){return new vu(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})(),Df=class{static NOOP=new kO},Pf=class{};var vve=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),NE=class extends Pf{normalizePropertyName(t,e){return DE(t)}normalizeStyleValue(t,e,r,i){let o="",s=r.toString().trim();if(vve.has(e)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(tH(t,r))}return s+o}};var FE="*";function _ve(n,t){let e=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>yve(r,e,t)):e.push(n),e}function yve(n,t,e){if(n[0]==":"){let u=bve(n,e);if(typeof u=="function"){t.push(u);return}n=u}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return e.push(fH(n)),t;let i=r[1],o=r[2],s=r[3];t.push(MH(i,s));let a=i==FE&&s==FE;o[0]=="<"&&!a&&t.push(MH(s,i))}function bve(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(pH(n)),"* => *"}}var ME=new Set(["true","1"]),kE=new Set(["false","0"]);function MH(n,t){let e=ME.has(n)||kE.has(n),r=ME.has(t)||kE.has(t);return(i,o)=>{let s=n==FE||n==i,a=t==FE||t==o;return!s&&e&&typeof i=="boolean"&&(s=i?ME.has(n):kE.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?ME.has(t):kE.has(t)),s&&a}}var jH=":self",wve=new RegExp(`s*${jH}s*,?`,"g");function zH(n,t,e,r){return new wO(n).build(t,e,r)}var kH="",wO=class{_driver;constructor(t){this._driver=t}build(t,e,r){let i=new CO(e);return this._resetContextStyleTimingState(i),zo(this,wg(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=kH,t.collectedStyles=new Map,t.collectedStyles.set(kH,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,o=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(nH()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Pt.State){let u=a,c=u.name;c.toString().split(/\s*,\s*/).forEach(d=>{u.name=d,o.push(this.visitState(u,e))}),u.name=c}else if(a.type==Pt.Transition){let u=this.visitTransition(a,e);r+=u.queryCount,i+=u.depCount,s.push(u)}else e.errors.push(rH())}),{type:Pt.Trigger,name:t.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{mO(u).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(iH(t.name,[...o.values()]))}return{type:Pt.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=zo(this,wg(t.animation),e),i=_ve(t.expr,e.errors);return{type:Pt.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Af(t.options)}}visitSequence(t,e){return{type:Pt.Sequence,steps:t.steps.map(r=>zo(this,r,e)),options:Af(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,o=t.steps.map(s=>{e.currentTime=r;let a=zo(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:Pt.Group,steps:o,options:Af(t.options)}}visitAnimate(t,e){let r=Ive(t.timings,e.errors);e.currentAnimateTimings=r;let i,o=t.styles?t.styles:em({});if(o.type==Pt.Keyframes)i=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;let c={};r.easing&&(c.easing=r.easing),s=em(c)}e.currentTime+=r.duration+r.delay;let u=this.visitStyle(s,e);u.isEmptyStep=a,i=u}return e.currentAnimateTimings=null,{type:Pt.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===Ls?r.push(a):e.errors.push(oH(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let u of a.values())if(u.toString().indexOf(hO)>=0){o=!0;break}}}),{type:Pt.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,o=e.currentTime;r&&o>0&&(o-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,u)=>{let c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(u),h=!0;d&&(o!=i&&o>=d.startTime&&i<=d.endTime&&(e.errors.push(sH(u,d.startTime,d.endTime,o,i)),h=!1),o=d.startTime),h&&c.set(u,{startTime:o,endTime:i}),e.options&&AH(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:Pt.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(aH()),r;let i=1,o=0,s=[],a=!1,u=!1,c=0,d=t.steps.map(S=>{let N=this._makeStyleAst(S,e),F=N.offset!=null?N.offset:Eve(N.styles),R=0;return F!=null&&(o++,R=N.offset=F),u=u||R<0||R>1,a=a||R<c,c=R,s.push(R),N});u&&e.errors.push(uH()),a&&e.errors.push(cH());let h=t.steps.length,p=0;o>0&&o<h?e.errors.push(lH()):o==0&&(p=i/(h-1));let m=h-1,_=e.currentTime,C=e.currentAnimateTimings,x=C.duration;return d.forEach((S,N)=>{let F=p>0?N==m?1:p*N:s[N],R=F*x;e.currentTime=_+C.delay+R,C.duration=R,this._validateStyleAst(S,e),S.offset=F,r.styles.push(S)}),r}visitReference(t,e){return{type:Pt.Reference,animation:zo(this,wg(t.animation),e),options:Af(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Pt.AnimateChild,options:Af(t.options)}}visitAnimateRef(t,e){return{type:Pt.AnimateRef,animation:this.visitReference(t.animation,e),options:Af(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[o,s]=Cve(t.selector);e.currentQuerySelector=r.length?r+" "+o:o,jo(e.collectedStyles,e.currentQuerySelector,new Map);let a=zo(this,wg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:Pt.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Af(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(dH());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:Z_(t.timings,e.errors,!0);return{type:Pt.Stagger,animation:zo(this,wg(t.animation),e),timings:r,options:null}}};function Cve(n){let t=!!n.split(/\s*,\s*/).find(e=>e==jH);return t&&(n=n.replace(wve,"")),n=n.replace(/@\*/g,Y_).replace(/@\w+/g,e=>Y_+"-"+e.slice(1)).replace(/:animating/g,AE),[n,t]}function xve(n){return n?Ie({},n):null}var CO=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(t){this.errors=t}};function Eve(n){if(typeof n=="string")return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(e instanceof Map&&e.has("offset")){let r=e;t=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let e=n;t=parseFloat(e.get("offset")),e.delete("offset")}return t}function Ive(n,t){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=Z_(n,t).duration;return gO(o,0,"")}let e=n;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=gO(0,0,"");return o.dynamic=!0,o.strValue=e,o}let i=Z_(e,t);return gO(i.duration,i.delay,i.easing)}function Af(n){return n?(n=Ie({},n),n.params&&(n.params=xve(n.params))):n={},n}function gO(n,t,e){return{duration:n,delay:t,easing:e}}function OO(n,t,e,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var X_=class{_map=new Map;get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},Sve=1,Tve=":enter",Ave=new RegExp(Tve,"g"),Dve=":leave",Pve=new RegExp(Dve,"g");function WH(n,t,e,r,i,o=new Map,s=new Map,a,u,c=[]){return new xO().buildKeyframes(n,t,e,r,i,o,s,a,u,c)}var xO=class{buildKeyframes(t,e,r,i,o,s,a,u,c,d=[]){c=c||new X_;let h=new EO(t,e,c,i,o,d,[]);h.options=u;let p=u.delay?ju(u.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,u),zo(this,r,h);let m=h.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let C=m.length-1;C>=0;C--){let x=m[C];if(x.element===e){_=x;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,h.errors,u)}return m.length?m.map(_=>_.buildKeyframes()):[OO(e,[],[],[],0,p,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let o=i?.delay;if(o){let s=typeof o=="number"?o:ju(Cg(o,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let o=e.currentTimeline.currentTime,s=r.duration!=null?ju(r.duration):null,a=r.delay!=null?ju(r.delay):null;return s!==0&&t.forEach(u=>{let c=e.appendInstructionToTimeline(u,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),zo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,o=t.options;if(o&&(o.params||o.delay)&&(i=e.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==Pt.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=LE);let s=ju(o.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>zo(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,o=t.options&&t.options.delay?ju(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);o&&a.delayNextStep(o),zo(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?Cg(r,e.params,e.errors):r;return Z_(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let o=t.style;o.type==Pt.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(r.duration),this.visitStyle(o,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(o):r.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,o=r.duration,a=e.createSubContext().currentTimeline;a.easing=r.easing,t.styles.forEach(u=>{let c=u.offset||0;a.forwardTime(c*o),a.setStyles(u.styles,u.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(i+o),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},o=i.delay?ju(i.delay):0;o&&(e.previousNode.type===Pt.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=LE);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let u=null;a.forEach((c,d)=>{e.currentQueryIndex=d;let h=e.createSubContext(t.options,c);o&&h.delayNextStep(o),c===e.element&&(u=h.currentTimeline),zo(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),u=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime;break}let d=e.currentTimeline;u&&d.delayNextStep(u);let h=d.currentTime;zo(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-h+(i.startTime-r.currentTimeline.startTime)}},LE={},EO=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=LE;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(t,e,r,i,o,s,a,u){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=u||new VE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;let r=t,i=this.options;r.duration!=null&&(i.duration=ju(r.duration)),r.delay!=null&&(i.delay=ju(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Cg(o[a],s,this.errors))})}}_copyOptions(){let t={};if(this.options){let e=this.options.params;if(e){let r=t.params={};Object.keys(e).forEach(i=>{r[i]=e[i]})}}return t}createSubContext(t=null,e,r){let i=e||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=LE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){let i={duration:e??t.duration,delay:this.currentTimeline.currentTime+(r??0)+t.delay,easing:""},o=new IO(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,i,o,s){let a=[];if(i&&a.push(this.element),t.length>0){t=t.replace(Ave,"."+this._enterClassName),t=t.replace(Pve,"."+this._leaveClassName);let u=r!=1,c=this._driver.query(this.element,t,u);r!==0&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!o&&a.length==0&&s.push(hH(e)),a}},VE=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(t,e,r,i){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new n(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Sve,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,r]of this._globalTimelineStyles)this._backFill.set(e,r||Ls),this._currentKeyframe.set(e,Ls);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,i){e&&this._previousKeyframe.set("easing",e);let o=i&&i.params||{},s=Mve(t,this._globalTimelineStyles);for(let[a,u]of s){let c=Cg(u,o,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ls),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,r)=>{let i=this._styleSummary.get(r);(!i||e.time>i.time)&&this._updateStyle(r,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let t=new Set,e=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,u)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,h)=>{d===tm?t.add(h):d===Ls&&e.add(h)}),r||c.set("offset",u/this.duration),i.push(c)});let o=[...t.values()],s=[...e.values()];if(r){let a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return OO(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},IO=class extends VE{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(t,e,r,i,o,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=r+e,a=e/s,u=new Map(t[0]);u.set("offset",0),o.push(u);let c=new Map(t[0]);c.set("offset",OH(a)),o.push(c);let d=t.length-1;for(let h=1;h<=d;h++){let p=new Map(t[h]),m=p.get("offset"),_=e+m*r;p.set("offset",OH(_/s)),o.push(p)}r=s,e=0,i="",t=o}return OO(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function OH(n,t=3){let e=Math.pow(10,t-1);return Math.round(n*e)/e}function Mve(n,t){let e=new Map,r;return n.forEach(i=>{if(i==="*"){r??=t.keys();for(let o of r)e.set(o,Ls)}else for(let[o,s]of i)e.set(o,s)}),e}function RH(n,t,e,r,i,o,s,a,u,c,d,h,p){return{type:0,element:n,triggerName:t,isRemovalTransition:i,fromState:e,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:d,totalTime:h,errors:p}}var vO={},BE=class{_triggerName;ast;_stateStyles;constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return kve(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,o,s,a,u,c,d){let h=[],p=this.ast.options&&this.ast.options.params||vO,m=a&&a.params||vO,_=this.buildStyles(r,m,h),C=u&&u.params||vO,x=this.buildStyles(i,C,h),S=new Set,N=new Map,F=new Map,R=i==="void",j={params:HH(C,p),delay:this.ast.options?.delay},H=d?[]:WH(t,e,this.ast.animation,o,s,_,x,j,c,h),B=0;return H.forEach(k=>{B=Math.max(k.duration+k.delay,B)}),h.length?RH(e,this._triggerName,r,i,R,_,x,[],[],N,F,B,h):(H.forEach(k=>{let D=k.element,P=jo(N,D,new Set);k.preStyleProps.forEach(U=>P.add(U));let z=jo(F,D,new Set);k.postStyleProps.forEach(U=>z.add(U)),D!==e&&S.add(D)}),RH(e,this._triggerName,r,i,R,_,x,H,[...S.values()],N,F,B))}};function kve(n,t,e,r,i){return n.some(o=>o(t,e,r,i))}function HH(n,t){let e=Ie({},t);return Object.entries(n).forEach(([r,i])=>{i!=null&&(e[r]=i)}),e}var SO=class{styles;defaultParams;normalizer;constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=HH(t,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Cg(s,i,e));let u=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,u,s,e),r.set(a,s)})}),r}};function Ove(n,t,e){return new TO(n,t,e)}var TO=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,e.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new SO(i.style,o,r))}),NH(this.states,"true","1"),NH(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new BE(t,i,this.states))}),this.fallbackTransition=Rve(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(s=>s.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function Rve(n,t,e){let r=[(s,a)=>!0],i={type:Pt.Sequence,steps:[],options:null},o={type:Pt.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new BE(n,o,t)}function NH(n,t,e){n.has(t)?n.has(e)||n.set(e,n.get(t)):n.has(e)&&n.set(t,n.get(e))}var Nve=new X_,AO=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r}register(t,e){let r=[],i=[],o=zH(this._driver,e,r,i);if(r.length)throw gH(r);this._animations.set(t,o)}_buildPlayer(t,e,r){let i=t.element,o=uO(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],o=this._animations.get(t),s,a=new Map;if(o?(s=WH(this._driver,e,o,fO,TE,new Map,new Map,r,Nve,i),s.forEach(d=>{let h=jo(a,d.element,new Map);d.postStyleProps.forEach(p=>h.set(p,null))})):(i.push(vH()),s=[]),i.length)throw _H(i);a.forEach((d,h)=>{d.forEach((p,m)=>{d.set(m,this._driver.computeStyle(h,m,Ls))})});let u=s.map(d=>{let h=a.get(d.element);return this._buildPlayer(d,new Map,h)}),c=Xc(u);return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw yH(t);return e}listen(t,e,r,i){let o=IE(e,"","","");return EE(this._getPlayer(t),r,o,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let o=this._getPlayer(t);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},FH="ng-animate-queued",Fve=".ng-animate-queued",_O="ng-animate-disabled",Lve=".ng-animate-disabled",Vve="ng-star-inserted",Bve=".ng-star-inserted",Uve=[],$H={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jve={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed",J_=class{namespaceId;value;options;get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=Wve(i),r){let o=t,{value:s}=o,a=s2(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},Q_="void",yO=new J_(Q_),DO=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this._hostClassName="ng-tns-"+t,ta(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw bH(r,e);if(r==null||r.length==0)throw wH(e);if(!Hve(r))throw CH(r,e);let o=jo(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};o.push(s);let a=jo(this._engine.statesByElement,t,new Map);return a.has(e)||(ta(t,K_),ta(t,K_+"-"+e),a.set(e,yO)),()=>{this._engine.afterFlush(()=>{let u=o.indexOf(s);u>=0&&o.splice(u,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw xH(t);return e}trigger(t,e,r,i=!0){let o=this._getTrigger(e),s=new ey(this.id,e,t),a=this._engine.statesByElement.get(t);a||(ta(t,K_),ta(t,K_+"-"+e),this._engine.statesByElement.set(t,a=new Map));let u=a.get(e),c=new J_(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&c.absorbOptions(u.options),a.set(e,c),u||(u=yO),!(c.value===Q_)&&u.value===c.value){if(!Gve(u.params,c.params)){let C=[],x=o.matchStyles(u.value,u.params,C),S=o.matchStyles(c.value,c.params,C);C.length?this._engine.reportError(C):this._engine.afterFlush(()=>{bd(t,x),za(t,S)})}return}let p=jo(this._engine.playersByElement,t,[]);p.forEach(C=>{C.namespaceId==this.id&&C.triggerName==e&&C.queued&&C.destroy()});let m=o.matchTransition(u.value,c.value,t,c.params),_=!1;if(!m){if(!i)return;m=o.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:m,fromState:u,toState:c,player:s,isFallbackTransition:_}),_||(ta(t,FH),s.onStart(()=>{xg(t,FH)})),s.onDone(()=>{let C=this.players.indexOf(s);C>=0&&this.players.splice(C,1);let x=this._engine.playersByElement.get(t);if(x){let S=x.indexOf(s);S>=0&&x.splice(S,1)}}),this.players.push(s),p.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,Y_,!0);r.forEach(i=>{if(i[Wa])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let o=this._engine.statesByElement.get(t),s=new Map;if(o){let a=[];if(o.forEach((u,c)=>{if(s.set(c,u.value),this._triggers.has(c)){let d=this.trigger(t,c,Q_,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&Xc(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let u=this._triggers.get(s).fallbackTransition,c=r.get(s)||yO,d=new J_(Q_),h=new ey(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:u,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(t):[];if(o&&o.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let o=t[Wa];(!o||o===$H)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){ta(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let u=IE(o,r.triggerName,r.fromState.value,r.toState.value);u._data=t,EE(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},PO=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(t,e)=>{};_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new DO(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let u=i.get(a);if(u){let c=r.indexOf(u);r.splice(c+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&e.add(o)}}return e}trigger(t,e,r,i){if(OE(e)){let o=this._fetchNamespace(t);if(o)return o.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!OE(e))return;let o=e[Wa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ta(t,_O)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),xg(t,_O))}removeNode(t,e,r){if(OE(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,o){this.collectedLeaveElements.push(e),e[Wa]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,r,i,o){return OE(e)?this._fetchNamespace(t).listen(e,r,i,o):()=>{}}_buildInstruction(t,e,r,i,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,Y_,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,AE,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Xc(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[Wa];if(e&&e.setForRemoval){if(t[Wa]=$H,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(_O)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Lve,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];ta(i,Vve)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?Xc(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw EH(t)}_flushAnimations(t,e){let r=new X_,i=[],o=new Map,s=[],a=new Map,u=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(X=>{d.add(X);let re=this.driver.query(X,Fve,!0);for(let J=0;J<re.length;J++)d.add(re[J])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=BH(p,this.collectedEnterElements),_=new Map,C=0;m.forEach((X,re)=>{let J=fO+C++;_.set(re,J),X.forEach(ie=>ta(ie,J))});let x=[],S=new Set,N=new Set;for(let X=0;X<this.collectedLeaveElements.length;X++){let re=this.collectedLeaveElements[X],J=re[Wa];J&&J.setForRemoval&&(x.push(re),S.add(re),J.hasAnimation?this.driver.query(re,Bve,!0).forEach(ie=>S.add(ie)):N.add(re))}let F=new Map,R=BH(p,Array.from(S));R.forEach((X,re)=>{let J=TE+C++;F.set(re,J),X.forEach(ie=>ta(ie,J))}),t.push(()=>{m.forEach((X,re)=>{let J=_.get(re);X.forEach(ie=>xg(ie,J))}),R.forEach((X,re)=>{let J=F.get(re);X.forEach(ie=>xg(ie,J))}),x.forEach(X=>{this.processLeaveNode(X)})});let j=[],H=[];for(let X=this._namespaceList.length-1;X>=0;X--)this._namespaceList[X].drainQueuedTransitions(e).forEach(J=>{let ie=J.player,le=J.element;if(j.push(ie),this.collectedEnterElements.length){let He=le[Wa];if(He&&He.setForMove){if(He.previousTriggersValues&&He.previousTriggersValues.has(J.triggerName)){let it=He.previousTriggersValues.get(J.triggerName),Je=this.statesByElement.get(J.element);if(Je&&Je.has(J.triggerName)){let vt=Je.get(J.triggerName);vt.value=it,Je.set(J.triggerName,vt)}}ie.destroy();return}}let Ee=!h||!this.driver.containsElement(h,le),ye=F.get(le),we=_.get(le),Ce=this._buildInstruction(J,r,we,ye,Ee);if(Ce.errors&&Ce.errors.length){H.push(Ce);return}if(Ee){ie.onStart(()=>bd(le,Ce.fromStyles)),ie.onDestroy(()=>za(le,Ce.toStyles)),i.push(ie);return}if(J.isFallbackTransition){ie.onStart(()=>bd(le,Ce.fromStyles)),ie.onDestroy(()=>za(le,Ce.toStyles)),i.push(ie);return}let ze=[];Ce.timelines.forEach(He=>{He.stretchStartingKeyframe=!0,this.disabledNodes.has(He.element)||ze.push(He)}),Ce.timelines=ze,r.append(le,Ce.timelines);let Ye={instruction:Ce,player:ie,element:le};s.push(Ye),Ce.queriedElements.forEach(He=>jo(a,He,[]).push(ie)),Ce.preStyleProps.forEach((He,it)=>{if(He.size){let Je=u.get(it);Je||u.set(it,Je=new Set),He.forEach((vt,Ge)=>Je.add(Ge))}}),Ce.postStyleProps.forEach((He,it)=>{let Je=c.get(it);Je||c.set(it,Je=new Set),He.forEach((vt,Ge)=>Je.add(Ge))})});if(H.length){let X=[];H.forEach(re=>{X.push(IH(re.triggerName,re.errors))}),j.forEach(re=>re.destroy()),this.reportError(X)}let B=new Map,k=new Map;s.forEach(X=>{let re=X.element;r.has(re)&&(k.set(re,re),this._beforeAnimationBuild(X.player.namespaceId,X.instruction,B))}),i.forEach(X=>{let re=X.element;this._getPreviousPlayers(re,!1,X.namespaceId,X.triggerName,null).forEach(ie=>{jo(B,re,[]).push(ie),ie.destroy()})});let D=x.filter(X=>UH(X,u,c)),P=new Map;VH(P,this.driver,N,c,Ls).forEach(X=>{UH(X,u,c)&&D.push(X)});let U=new Map;m.forEach((X,re)=>{VH(U,this.driver,new Set(X),u,tm)}),D.forEach(X=>{let re=P.get(X),J=U.get(X);P.set(X,new Map([...re?.entries()??[],...J?.entries()??[]]))});let $=[],ae=[],de={};s.forEach(X=>{let{element:re,player:J,instruction:ie}=X;if(r.has(re)){if(d.has(re)){J.onDestroy(()=>za(re,ie.toStyles)),J.disabled=!0,J.overrideTotalTime(ie.totalTime),i.push(J);return}let le=de;if(k.size>1){let ye=re,we=[];for(;ye=ye.parentNode;){let Ce=k.get(ye);if(Ce){le=Ce;break}we.push(ye)}we.forEach(Ce=>k.set(Ce,le))}let Ee=this._buildAnimation(J.namespaceId,ie,B,o,U,P);if(J.setRealPlayer(Ee),le===de)$.push(J);else{let ye=this.playersByElement.get(le);ye&&ye.length&&(J.parentPlayer=Xc(ye)),i.push(J)}}else bd(re,ie.fromStyles),J.onDestroy(()=>za(re,ie.toStyles)),ae.push(J),d.has(re)&&i.push(J)}),ae.forEach(X=>{let re=o.get(X.element);if(re&&re.length){let J=Xc(re);X.setRealPlayer(J)}}),i.forEach(X=>{X.parentPlayer?X.syncPlayerEvents(X.parentPlayer):X.destroy()});for(let X=0;X<x.length;X++){let re=x[X],J=re[Wa];if(xg(re,TE),J&&J.hasAnimation)continue;let ie=[];if(a.size){let Ee=a.get(re);Ee&&Ee.length&&ie.push(...Ee);let ye=this.driver.query(re,AE,!0);for(let we=0;we<ye.length;we++){let Ce=a.get(ye[we]);Ce&&Ce.length&&ie.push(...Ce)}}let le=ie.filter(Ee=>!Ee.destroyed);le.length?$ve(this,re,le):this.processLeaveNode(re)}return x.length=0,$.forEach(X=>{this.players.push(X),X.onDone(()=>{X.destroy();let re=this.players.indexOf(X);this.players.splice(re,1)}),X.play()}),$}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,o){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let u=!o||o==Q_;a.forEach(c=>{c.queued||!u&&c.triggerName!=i||s.push(c)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let u of e.timelines){let c=u.element,d=c!==o,h=jo(r,c,[]);this._getPreviousPlayers(c,d,s,a,e.toState).forEach(m=>{let _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),h.push(m)})}bd(o,e.fromStyles)}_buildAnimation(t,e,r,i,o,s){let a=e.triggerName,u=e.element,c=[],d=new Set,h=new Set,p=e.timelines.map(_=>{let C=_.element;d.add(C);let x=C[Wa];if(x&&x.removedBeforeQueried)return new vu(_.duration,_.delay);let S=C!==u,N=qve((r.get(C)||Uve).map(B=>B.getRealPlayer())).filter(B=>{let k=B;return k.element?k.element===C:!1}),F=o.get(C),R=s.get(C),j=uO(this._normalizer,_.keyframes,F,R),H=this._buildPlayer(_,j,N);if(_.subTimeline&&i&&h.add(C),S){let B=new ey(t,a,C);B.setRealPlayer(H),c.push(B)}return H});c.forEach(_=>{jo(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>zve(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>ta(_,pO));let m=Xc(p);return m.onDestroy(()=>{d.forEach(_=>xg(_,pO)),za(u,e.toStyles)}),h.forEach(_=>{jo(i,_,[]).push(m)}),m}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new vu(t.duration,t.delay)}},ey=class{namespaceId;triggerName;element;_player=new vu;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>EE(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){jo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function zve(n,t,e){let r=n.get(t);if(r){if(r.length){let i=r.indexOf(e);r.splice(i,1)}r.length==0&&n.delete(t)}return r}function Wve(n){return n??null}function OE(n){return n&&n.nodeType===1}function Hve(n){return n=="start"||n=="done"}function LH(n,t){let e=n.style.display;return n.style.display=t??"none",e}function VH(n,t,e,r,i){let o=[];e.forEach(u=>o.push(LH(u)));let s=[];r.forEach((u,c)=>{let d=new Map;u.forEach(h=>{let p=t.computeStyle(c,h,i);d.set(h,p),(!p||p.length==0)&&(c[Wa]=jve,s.push(c))}),n.set(c,d)});let a=0;return e.forEach(u=>LH(u,o[a++])),s}function BH(n,t){let e=new Map;if(n.forEach(a=>e.set(a,[])),t.length==0)return e;let r=1,i=new Set(t),o=new Map;function s(a){if(!a)return r;let u=o.get(a);if(u)return u;let c=a.parentNode;return e.has(c)?u=c:i.has(c)?u=r:u=s(c),o.set(a,u),u}return t.forEach(a=>{let u=s(a);u!==r&&e.get(u).push(a)}),e}function ta(n,t){n.classList?.add(t)}function xg(n,t){n.classList?.remove(t)}function $ve(n,t,e){Xc(e).onDone(()=>n.processLeaveNode(t))}function qve(n){let t=[];return qH(n,t),t}function qH(n,t){for(let e=0;e<n.length;e++){let r=n[e];r instanceof Th?qH(r.players,t):t.push(r)}}function Gve(n,t){let e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let i=0;i<e.length;i++){let o=e[i];if(!t.hasOwnProperty(o)||n[o]!==t[o])return!1}return!0}function UH(n,t,e){let r=e.get(n);if(!r)return!1;let i=t.get(n);return i?r.forEach(o=>i.add(o)):t.set(n,r),e.delete(n),!0}var Eg=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(t,e)=>{};constructor(t,e,r){this._driver=e,this._normalizer=r,this._transitionEngine=new PO(t.body,e,r),this._timelineEngine=new AO(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(t,e,r,i,o){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let u=[],c=[],d=zH(this._driver,o,u,c);if(u.length)throw mH(i,u);a=Ove(i,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[o,s]=cO(r),a=i;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,o){if(r.charAt(0)=="@"){let[s,a]=cO(r);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,r,i,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function Kve(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=bO(t[0]),t.length>1&&(r=bO(t[t.length-1]))):t instanceof Map&&(e=bO(t)),e||r?new Yve(n,e,r):null}var Yve=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&za(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(za(this._element,this._initialStyles),this._endStyles&&(za(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bd(this._element,this._endStyles),this._endStyles=null),za(this._element,this._initialStyles),this._state=3)}}return n})();function bO(n){let t=null;return n.forEach((e,r)=>{Zve(r)&&(t=t||new Map,t.set(r,e))}),t}function Zve(n){return n==="display"||n==="position"}var UE=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&t.set(i,this._finished?r:PE(this.element,i))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},jE=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return lO(t,e)}getParentElement(t){return SE(t)}query(t,e,r){return dO(t,e,r)}computeStyle(t,e,r){return PE(t,e)}animate(t,e,r,i,o,s=[]){let a=i==0?"both":"forwards",u={duration:r,delay:i,fill:a};o&&(u.easing=o);let c=new Map,d=s.filter(m=>m instanceof UE);DH(r,i)&&d.forEach(m=>{m.currentSnapshot.forEach((_,C)=>c.set(C,_))});let h=TH(e).map(m=>new Map(m));h=PH(t,h,c);let p=Kve(t,h);return new UE(t,h,u,p)}};var RE="@",GH="@.disabled",zE=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==RE&&e==GH?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r,i){return this.delegate.listen(t,e,r,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},MO=class extends zE{factory;constructor(t,e,r,i,o){super(e,r,i,o),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==RE?e.charAt(1)=="."&&e==GH?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r,i){if(e.charAt(0)==RE){let o=Qve(t),s=e.slice(1),a="";return s.charAt(0)!=RE&&([s,a]=Xve(s)),this.engine.listen(this.namespaceId,o,s,a,u=>{let c=u._data||-1;this.factory.scheduleListenerCallback(c,r,u)})}return this.delegate.listen(t,e,r,i)}};function Qve(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Xve(n){let t=n.indexOf("."),e=n.substring(0,t),r=n.slice(t+1);return[e,r]}var WE=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,e.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let c=this._rendererCache,d=c.get(i);if(!d){let h=()=>c.delete(i);d=new zE(r,i,this.engine,h),c.set(i,d)}return d}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,t,c.name,c)};return e.data.animation.forEach(a),new MO(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(t){this.engine.flush(),this.delegate.componentReplaced?.(t)}};var e_e=(()=>{class n extends Eg{constructor(e,r,i){super(e,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(qe(gr),qe(Df),qe(Pf))};static \u0275prov=Ve({token:n,factory:n.\u0275fac})}return n})();function t_e(){return new NE}function n_e(n,t,e){return new WE(n,t,e)}var KH=[{provide:Pf,useFactory:t_e},{provide:Eg,useClass:e_e},{provide:xl,useFactory:n_e,deps:[S0,Eg,tn]}],n8e=[{provide:Df,useClass:kO},{provide:k6,useValue:"NoopAnimations"},...KH],r_e=[{provide:Df,useFactory:()=>new jE},{provide:k6,useFactory:()=>"BrowserAnimations"},...KH];function YH(){return hu("NgEagerAnimations"),[...r_e]}DS(fE,{providers:[a9.providers,Y0(lE),YH(),EV(()=>IV(X9.firebase)),PB(()=>kB()),k7(()=>R7()),Z9(()=>Q9())]}).catch(n=>console.error(n));
